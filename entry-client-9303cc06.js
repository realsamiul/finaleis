const Ee={context:void 0,registry:void 0};function Is(i){Ee.context=i}function IE(){return{...Ee.context,id:`${Ee.context.id}${Ee.context.count++}-`,count:0}}const AE=(i,e)=>i===e,xs=Symbol("solid-proxy"),q1=Symbol("solid-track"),ep={equals:AE};let bd=null,D9=Z9;const ns=1,Zd=2,F9={owned:null,cleanups:null,context:null,owner:null},om={};var yt=null;let Be=null,en=null,ki=null,Ii=null,d0=0;function yh(i,e){const t=en,n=yt,r=i.length===0,s=e===void 0?n:e,o=r?F9:{owned:null,cleanups:null,context:s?s.context:null,owner:s},a=r?i:()=>i(()=>Vt(()=>Ka(o)));yt=o,en=null;try{return Mr(a,!0)}finally{en=t,yt=n}}function tn(i,e){e=e?Object.assign({},ep,e):ep;const t={value:i,observers:null,observerSlots:null,comparator:e.equals||void 0},n=r=>(typeof r=="function"&&(Be&&Be.running&&Be.sources.has(t)?r=r(t.tValue):r=r(t.value)),U9(t,r));return[O9.bind(t),n]}function I2(i,e,t){const n=If(i,e,!0,ns);hu(n)}function qr(i,e,t){const n=If(i,e,!1,ns);hu(n)}function mt(i,e,t){D9=TE;const n=If(i,e,!1,ns),r=uc&&Ts(uc);r&&(n.suspense=r),(!t||!t.render)&&(n.user=!0),Ii?Ii.push(n):hu(n)}function pe(i,e,t){t=t?Object.assign({},ep,t):ep;const n=If(i,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,hu(n),O9.bind(n)}function yE(i){return i&&typeof i=="object"&&"then"in i}function fy(i,e,t){let n,r,s;arguments.length===2&&typeof e=="object"||arguments.length===1?(n=!0,r=i,s=e||{}):(n=i,r=e,s=t||{});let o=null,a=om,l=null,c=!1,h=!1,u="initialValue"in s,d=typeof n=="function"&&pe(n);const f=new Set,[g,p]=(s.storage||tn)(s.initialValue),[m,C]=tn(void 0),[A,I]=tn(void 0,{equals:!1}),[y,x]=tn(u?"ready":"unresolved");if(Ee.context){l=`${Ee.context.id}${Ee.context.count++}`;let v;s.ssrLoadFrom==="initial"?a=s.initialValue:Ee.load&&(v=Ee.load(l))&&(a=v)}function T(v,B,E,L){return o===v&&(o=null,L!==void 0&&(u=!0),(v===a||B===a)&&s.onHydrated&&queueMicrotask(()=>s.onHydrated(L,{value:B})),a=om,Be&&v&&c?(Be.promises.delete(v),c=!1,Mr(()=>{Be.running=!0,S(B,E)},!1)):S(B,E)),B}function S(v,B){Mr(()=>{B===void 0&&p(()=>v),x(B!==void 0?"errored":u?"ready":"unresolved"),C(B);for(const E of f.keys())E.decrement();f.clear()},!1)}function M(){const v=uc&&Ts(uc),B=g(),E=m();if(E!==void 0&&!o)throw E;return en&&!en.user&&v&&I2(()=>{A(),o&&(v.resolved&&Be&&c?Be.promises.add(o):f.has(v)||(v.increment(),f.add(v)))}),B}function _(v=!0){if(v!==!1&&h)return;h=!1;const B=d?d():n;if(c=Be&&Be.running,B==null||B===!1){T(o,Vt(g));return}Be&&o&&Be.promises.delete(o);const E=a!==om?a:Vt(()=>r(B,{value:g(),refetching:v}));return yE(E)?(o=E,"value"in E?(E.status==="success"?T(o,E.value,void 0,B):T(o,void 0,void 0,B),E):(h=!0,queueMicrotask(()=>h=!1),Mr(()=>{x(u?"refreshing":"pending"),I()},!1),E.then(L=>T(E,L,void 0,B),L=>T(E,void 0,H9(L),B)))):(T(o,E,void 0,B),E)}return Object.defineProperties(M,{state:{get:()=>y()},error:{get:()=>m()},loading:{get(){const v=y();return v==="pending"||v==="refreshing"}},latest:{get(){if(!u)return M();const v=m();if(v&&!o)throw v;return g()}}}),d?I2(()=>_(!1)):_(!1),[M,{refetch:_,mutate:p}]}function A2(i){return Mr(i,!1)}function Vt(i){if(en===null)return i();const e=en;en=null;try{return i()}finally{en=e}}function Ji(i,e,t){const n=Array.isArray(i);let r,s=t&&t.defer;return o=>{let a;if(n){a=Array(i.length);for(let c=0;c<i.length;c++)a[c]=i[c]()}else a=i();if(s){s=!1;return}const l=Vt(()=>e(a,r,o));return r=a,l}}function tr(i){mt(()=>Vt(i))}function an(i){return yt===null||(yt.cleanups===null?yt.cleanups=[i]:yt.cleanups.push(i)),i}function _E(i,e){bd||(bd=Symbol("error")),yt=If(void 0,void 0,!0),yt.context={...yt.context,[bd]:[e]},Be&&Be.running&&Be.sources.add(yt);try{return i()}catch(t){Af(t)}finally{yt=yt.owner}}function y2(){return en}function N9(){return yt}function vE(i,e){const t=yt,n=en;yt=i,en=null;try{return Mr(e,!0)}catch(r){Af(r)}finally{yt=t,en=n}}function gy(i){if(Be&&Be.running)return i(),Be.done;const e=en,t=yt;return Promise.resolve().then(()=>{en=e,yt=t;let n;return uc&&(n=Be||(Be={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),n.done||(n.done=new Promise(r=>n.resolve=r)),n.running=!0),Mr(i,!1),en=yt=null,n?n.done:void 0})}const[bE,l_]=tn(!1);function k9(){return[bE,gy]}function xE(i){Ii.push.apply(Ii,i),i.length=0}function ta(i,e){const t=Symbol("context");return{id:t,Provider:EE(t),defaultValue:i}}function Ts(i){return yt&&yt.context&&yt.context[i.id]!==void 0?yt.context[i.id]:i.defaultValue}function f0(i){const e=pe(i),t=pe(()=>_2(e()));return t.toArray=()=>{const n=t();return Array.isArray(n)?n:n!=null?[n]:[]},t}let uc;function wE(){return uc||(uc=ta())}function O9(){const i=Be&&Be.running;if(this.sources&&(i?this.tState:this.state))if((i?this.tState:this.state)===ns)hu(this);else{const e=ki;ki=null,Mr(()=>np(this),!1),ki=e}if(en){const e=this.observers?this.observers.length:0;en.sources?(en.sources.push(this),en.sourceSlots.push(e)):(en.sources=[this],en.sourceSlots=[e]),this.observers?(this.observers.push(en),this.observerSlots.push(en.sources.length-1)):(this.observers=[en],this.observerSlots=[en.sources.length-1])}return i&&Be.sources.has(this)?this.tValue:this.value}function U9(i,e,t){let n=Be&&Be.running&&Be.sources.has(i)?i.tValue:i.value;if(!i.comparator||!i.comparator(n,e)){if(Be){const r=Be.running;(r||!t&&Be.sources.has(i))&&(Be.sources.add(i),i.tValue=e),r||(i.value=e)}else i.value=e;i.observers&&i.observers.length&&Mr(()=>{for(let r=0;r<i.observers.length;r+=1){const s=i.observers[r],o=Be&&Be.running;o&&Be.disposed.has(s)||((o?!s.tState:!s.state)&&(s.pure?ki.push(s):Ii.push(s),s.observers&&V9(s)),o?s.tState=ns:s.state=ns)}if(ki.length>1e6)throw ki=[],new Error},!1)}return e}function hu(i){if(!i.fn)return;Ka(i);const e=d0;c_(i,Be&&Be.running&&Be.sources.has(i)?i.tValue:i.value,e),Be&&!Be.running&&Be.sources.has(i)&&queueMicrotask(()=>{Mr(()=>{Be&&(Be.running=!0),en=yt=i,c_(i,i.tValue,e),en=yt=null},!1)})}function c_(i,e,t){let n;const r=yt,s=en;en=yt=i;try{n=i.fn(e)}catch(o){return i.pure&&(Be&&Be.running?(i.tState=ns,i.tOwned&&i.tOwned.forEach(Ka),i.tOwned=void 0):(i.state=ns,i.owned&&i.owned.forEach(Ka),i.owned=null)),i.updatedAt=t+1,Af(o)}finally{en=s,yt=r}(!i.updatedAt||i.updatedAt<=t)&&(i.updatedAt!=null&&"observers"in i?U9(i,n,!0):Be&&Be.running&&i.pure?(Be.sources.add(i),i.tValue=n):i.value=n,i.updatedAt=t)}function If(i,e,t,n=ns,r){const s={fn:i,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:yt,context:yt?yt.context:null,pure:t};return Be&&Be.running&&(s.state=0,s.tState=n),yt===null||yt!==F9&&(Be&&Be.running&&yt.pure?yt.tOwned?yt.tOwned.push(s):yt.tOwned=[s]:yt.owned?yt.owned.push(s):yt.owned=[s]),s}function tp(i){const e=Be&&Be.running;if((e?i.tState:i.state)===0)return;if((e?i.tState:i.state)===Zd)return np(i);if(i.suspense&&Vt(i.suspense.inFallback))return i.suspense.effects.push(i);const t=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<d0);){if(e&&Be.disposed.has(i))return;(e?i.tState:i.state)&&t.push(i)}for(let n=t.length-1;n>=0;n--){if(i=t[n],e){let r=i,s=t[n+1];for(;(r=r.owner)&&r!==s;)if(Be.disposed.has(r))return}if((e?i.tState:i.state)===ns)hu(i);else if((e?i.tState:i.state)===Zd){const r=ki;ki=null,Mr(()=>np(i,t[0]),!1),ki=r}}}function Mr(i,e){if(ki)return i();let t=!1;e||(ki=[]),Ii?t=!0:Ii=[],d0++;try{const n=i();return SE(t),n}catch(n){t||(Ii=null),ki=null,Af(n)}}function SE(i){if(ki&&(Z9(ki),ki=null),i)return;let e;if(Be){if(!Be.promises.size&&!Be.queue.size){const n=Be.sources,r=Be.disposed;Ii.push.apply(Ii,Be.effects),e=Be.resolve;for(const s of Ii)"tState"in s&&(s.state=s.tState),delete s.tState;Be=null,Mr(()=>{for(const s of r)Ka(s);for(const s of n){if(s.value=s.tValue,s.owned)for(let o=0,a=s.owned.length;o<a;o++)Ka(s.owned[o]);s.tOwned&&(s.owned=s.tOwned),delete s.tValue,delete s.tOwned,s.tState=0}l_(!1)},!1)}else if(Be.running){Be.running=!1,Be.effects.push.apply(Be.effects,Ii),Ii=null,l_(!0);return}}const t=Ii;Ii=null,t.length&&Mr(()=>D9(t),!1),e&&e()}function Z9(i){for(let e=0;e<i.length;e++)tp(i[e])}function TE(i){let e,t=0;for(e=0;e<i.length;e++){const n=i[e];n.user?i[t++]=n:tp(n)}if(Ee.context){if(Ee.count){Ee.effects||(Ee.effects=[]),Ee.effects.push(...i.slice(0,t));return}else Ee.effects&&(i=[...Ee.effects,...i],t+=Ee.effects.length,delete Ee.effects);Is()}for(e=0;e<t;e++)tp(i[e])}function np(i,e){const t=Be&&Be.running;t?i.tState=0:i.state=0;for(let n=0;n<i.sources.length;n+=1){const r=i.sources[n];if(r.sources){const s=t?r.tState:r.state;s===ns?r!==e&&(!r.updatedAt||r.updatedAt<d0)&&tp(r):s===Zd&&np(r,e)}}}function V9(i){const e=Be&&Be.running;for(let t=0;t<i.observers.length;t+=1){const n=i.observers[t];(e?!n.tState:!n.state)&&(e?n.tState=Zd:n.state=Zd,n.pure?ki.push(n):Ii.push(n),n.observers&&V9(n))}}function Ka(i){let e;if(i.sources)for(;i.sources.length;){const t=i.sources.pop(),n=i.sourceSlots.pop(),r=t.observers;if(r&&r.length){const s=r.pop(),o=t.observerSlots.pop();n<r.length&&(s.sourceSlots[o]=n,r[n]=s,t.observerSlots[n]=o)}}if(Be&&Be.running&&i.pure){if(i.tOwned){for(e=i.tOwned.length-1;e>=0;e--)Ka(i.tOwned[e]);delete i.tOwned}W9(i,!0)}else if(i.owned){for(e=i.owned.length-1;e>=0;e--)Ka(i.owned[e]);i.owned=null}if(i.cleanups){for(e=i.cleanups.length-1;e>=0;e--)i.cleanups[e]();i.cleanups=null}Be&&Be.running?i.tState=0:i.state=0}function W9(i,e){if(e||(i.tState=0,Be.disposed.add(i)),i.owned)for(let t=0;t<i.owned.length;t++)W9(i.owned[t])}function H9(i){return i instanceof Error?i:new Error(typeof i=="string"?i:"Unknown error",{cause:i})}function h_(i,e,t){try{for(const n of e)n(i)}catch(n){Af(n,t&&t.owner||null)}}function Af(i,e=yt){const t=bd&&e&&e.context&&e.context[bd],n=H9(i);if(!t)throw n;Ii?Ii.push({fn(){h_(n,t,e)},state:ns}):h_(n,t,e)}function _2(i){if(typeof i=="function"&&!i.length)return _2(i());if(Array.isArray(i)){const e=[];for(let t=0;t<i.length;t++){const n=_2(i[t]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return i}function EE(i,e){return function(n){let r;return qr(()=>r=Vt(()=>(yt.context={...yt.context,[i]:n.value},f0(()=>n.children))),void 0),r}}const ME=Symbol("fallback");function u_(i){for(let e=0;e<i.length;e++)i[e]()}function LE(i,e,t={}){let n=[],r=[],s=[],o=0,a=e.length>1?[]:null;return an(()=>u_(s)),()=>{let l=i()||[],c,h;return l[q1],Vt(()=>{let d=l.length,f,g,p,m,C,A,I,y,x;if(d===0)o!==0&&(u_(s),s=[],n=[],r=[],o=0,a&&(a=[])),t.fallback&&(n=[ME],r[0]=yh(T=>(s[0]=T,t.fallback())),o=1);else if(o===0){for(r=new Array(d),h=0;h<d;h++)n[h]=l[h],r[h]=yh(u);o=d}else{for(p=new Array(d),m=new Array(d),a&&(C=new Array(d)),A=0,I=Math.min(o,d);A<I&&n[A]===l[A];A++);for(I=o-1,y=d-1;I>=A&&y>=A&&n[I]===l[y];I--,y--)p[y]=r[I],m[y]=s[I],a&&(C[y]=a[I]);for(f=new Map,g=new Array(y+1),h=y;h>=A;h--)x=l[h],c=f.get(x),g[h]=c===void 0?-1:c,f.set(x,h);for(c=A;c<=I;c++)x=n[c],h=f.get(x),h!==void 0&&h!==-1?(p[h]=r[c],m[h]=s[c],a&&(C[h]=a[c]),h=g[h],f.set(x,h)):s[c]();for(h=A;h<d;h++)h in p?(r[h]=p[h],s[h]=m[h],a&&(a[h]=C[h],a[h](h))):r[h]=yh(u);r=r.slice(0,o=d),n=l.slice(0)}return r});function u(d){if(s[h]=d,a){const[f,g]=tn(h);return a[h]=g,e(l[h],f)}return e(l[h])}}}let z9=!1;function RE(){z9=!0}function F(i,e){if(z9&&Ee.context){const t=Ee.context;Is(IE());const n=Vt(()=>i(e||{}));return Is(t),n}return Vt(()=>i(e||{}))}function Xf(){return!0}const v2={get(i,e,t){return e===xs?t:i.get(e)},has(i,e){return e===xs?!0:i.has(e)},set:Xf,deleteProperty:Xf,getOwnPropertyDescriptor(i,e){return{configurable:!0,enumerable:!0,get(){return i.get(e)},set:Xf,deleteProperty:Xf}},ownKeys(i){return i.keys()}};function am(i){return(i=typeof i=="function"?i():i)?i:{}}function BE(){for(let i=0,e=this.length;i<e;++i){const t=this[i]();if(t!==void 0)return t}}function $n(...i){let e=!1;for(let s=0;s<i.length;s++){const o=i[s];e=e||!!o&&xs in o,i[s]=typeof o=="function"?(e=!0,pe(o)):o}if(e)return new Proxy({get(s){for(let o=i.length-1;o>=0;o--){const a=am(i[o])[s];if(a!==void 0)return a}},has(s){for(let o=i.length-1;o>=0;o--)if(s in am(i[o]))return!0;return!1},keys(){const s=[];for(let o=0;o<i.length;o++)s.push(...Object.keys(am(i[o])));return[...new Set(s)]}},v2);const t={},n={},r=new Set;for(let s=i.length-1;s>=0;s--){const o=i[s];if(!o)continue;const a=Object.getOwnPropertyNames(o);for(let l=0,c=a.length;l<c;l++){const h=a[l];if(h==="__proto__"||h==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,h);if(!r.has(h))u.get?(r.add(h),Object.defineProperty(t,h,{enumerable:!0,configurable:!0,get:BE.bind(n[h]=[u.get.bind(o)])})):(u.value!==void 0&&r.add(h),t[h]=u.value);else{const d=n[h];d?u.get?d.push(u.get.bind(o)):u.value!==void 0&&d.push(()=>u.value):t[h]===void 0&&(t[h]=u.value)}}}return t}function Gr(i,...e){if(xs in i){const r=new Set(e.length>1?e.flat():e[0]),s=e.map(o=>new Proxy({get(a){return o.includes(a)?i[a]:void 0},has(a){return o.includes(a)&&a in i},keys(){return o.filter(a=>a in i)}},v2));return s.push(new Proxy({get(o){return r.has(o)?void 0:i[o]},has(o){return r.has(o)?!1:o in i},keys(){return Object.keys(i).filter(o=>!r.has(o))}},v2)),s}const t={},n=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(i)){const s=Object.getOwnPropertyDescriptor(i,r),o=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let a=!1,l=0;for(const c of e)c.includes(r)&&(a=!0,o?n[l][r]=s.value:Object.defineProperty(n[l],r,s)),++l;a||(o?t[r]=s.value:Object.defineProperty(t,r,s))}return[...n,t]}function Fr(i){let e,t;const n=r=>{const s=Ee.context;if(s){const[a,l]=tn();Ee.count||(Ee.count=0),Ee.count++,(t||(t=i())).then(c=>{Is(s),Ee.count--,l(()=>c.default),Is()}),e=a}else if(!e){const[a]=fy(()=>(t||(t=i())).then(l=>l.default));e=a}let o;return pe(()=>(o=e())&&Vt(()=>{if(!s)return o(r);const a=Ee.context;Is(s);const l=o(r);return Is(a),l}))};return n.preload=()=>t||((t=i()).then(r=>e=()=>r.default),t),n}let PE=0;function GE(){const i=Ee.context;return i?`${i.id}${i.count++}`:`cl-${PE++}`}const Y9=i=>`Stale read from <${i}>.`;function Nn(i){const e="fallback"in i&&{fallback:()=>i.fallback};return pe(LE(()=>i.each,i.children,e||void 0))}function Ac(i){const e=i.keyed,t=pe(()=>i.when,void 0,{equals:(n,r)=>e?n===r:!n==!r});return pe(()=>{const n=t();if(n){const r=i.children;return typeof r=="function"&&r.length>0?Vt(()=>r(e?n:()=>{if(!Vt(t))throw Y9("Show");return i.when})):r}return i.fallback},void 0,void 0)}function cre(i){let e=!1;const t=(s,o)=>s[0]===o[0]&&(e?s[1]===o[1]:!s[1]==!o[1])&&s[2]===o[2],n=f0(()=>i.children),r=pe(()=>{let s=n();Array.isArray(s)||(s=[s]);for(let o=0;o<s.length;o++){const a=s[o].when;if(a)return e=!!s[o].keyed,[o,a,s[o]]}return[-1]},void 0,{equals:t});return pe(()=>{const[s,o,a]=r();if(s<0)return i.fallback;const l=a.children;return typeof l=="function"&&l.length>0?Vt(()=>l(e?o:()=>{if(Vt(r)[0]!==s)throw Y9("Match");return a.when})):l},void 0,void 0)}function hre(i){return i}let ch;function X9(){ch&&[...ch].forEach(i=>i())}function DE(i){let e;Ee.context&&Ee.load&&(e=Ee.load(Ee.context.id+Ee.context.count));const[t,n]=tn(e,void 0);return ch||(ch=new Set),ch.add(n),an(()=>ch.delete(n)),pe(()=>{let r;if(r=t()){const s=i.fallback;return typeof s=="function"&&s.length?Vt(()=>s(r,()=>n())):s}return _E(()=>i.children,n)},void 0,void 0)}const FE=ta();function NE(i){let e=0,t,n,r,s,o;const[a,l]=tn(!1),c=wE(),h={increment:()=>{++e===1&&l(!0)},decrement:()=>{--e===0&&l(!1)},inFallback:a,effects:[],resolved:!1},u=N9();if(Ee.context&&Ee.load){const g=Ee.context.id+Ee.context.count;let p=Ee.load(g);if(p&&(typeof p!="object"||p.status!=="success")&&(r=p),r&&r!=="$$f"){const[m,C]=tn(void 0,{equals:!1});s=m,r.then(()=>{Ee.gather(g),Is(n),C(),Is()}).catch(A=>{if(A||Ee.done)return A&&(o=A),C()})}}const d=Ts(FE);d&&(t=d.register(h.inFallback));let f;return an(()=>f&&f()),F(c.Provider,{value:h,get children(){return pe(()=>{if(o)throw o;if(n=Ee.context,s)return s(),s=void 0;n&&r==="$$f"&&Is();const g=pe(()=>i.children);return pe(p=>{const m=h.inFallback(),{showContent:C=!0,showFallback:A=!0}=t?t():{};if((!m||r&&r!=="$$f")&&C)return h.resolved=!0,f&&f(),f=n=r=void 0,xE(h.effects),g();if(A)return f?p:yh(I=>(f=I,n&&(Is({id:n.id+"f",count:0}),n=void 0),i.fallback),u)})})}})}const kE=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],OE=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...kE]),UE=new Set(["innerHTML","textContent","innerText","children"]),ZE=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),VE=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function WE(i,e){const t=VE[i];return typeof t=="object"?t[e]?t.$:void 0:t}const HE=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),zE=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),YE={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function XE(i,e,t){let n=t.length,r=e.length,s=n,o=0,a=0,l=e[r-1].nextSibling,c=null;for(;o<r||a<s;){if(e[o]===t[a]){o++,a++;continue}for(;e[r-1]===t[s-1];)r--,s--;if(r===o){const h=s<n?a?t[a-1].nextSibling:t[s-a]:l;for(;a<s;)i.insertBefore(t[a++],h)}else if(s===a)for(;o<r;)(!c||!c.has(e[o]))&&e[o].remove(),o++;else if(e[o]===t[s-1]&&t[a]===e[r-1]){const h=e[--r].nextSibling;i.insertBefore(t[a++],e[o++].nextSibling),i.insertBefore(t[--s],h),e[r]=t[s]}else{if(!c){c=new Map;let u=a;for(;u<s;)c.set(t[u],u++)}const h=c.get(e[o]);if(h!=null)if(a<h&&h<s){let u=o,d=1,f;for(;++u<r&&u<s&&!((f=c.get(e[u]))==null||f!==h+d);)d++;if(d>h-a){const g=e[o];for(;a<h;)i.insertBefore(t[a++],g)}else i.replaceChild(t[a++],e[o++])}else o++;else e[o++].remove()}}}const d_="_$DX_DELEGATE";function KE(i,e,t,n={}){let r;return yh(s=>{r=s,e===document?i():Un(e,i(),e.firstChild?null:void 0,t)},n.owner),()=>{r(),e.textContent=""}}function wt(i,e,t){let n;const r=()=>{const o=document.createElement("template");return o.innerHTML=i,t?o.content.firstChild.firstChild:o.content.firstChild},s=e?()=>Vt(()=>document.importNode(n||(n=r()),!0)):()=>(n||(n=r())).cloneNode(!0);return s.cloneNode=s,s}function yf(i,e=window.document){const t=e[d_]||(e[d_]=new Set);for(let n=0,r=i.length;n<r;n++){const s=i[n];t.has(s)||(t.add(s),e.addEventListener(s,j9))}}function Vd(i,e,t){Ee.context||(t==null?i.removeAttribute(e):i.setAttribute(e,t))}function jE(i,e,t,n){Ee.context||(n==null?i.removeAttributeNS(e,t):i.setAttributeNS(e,t,n))}function b2(i,e){Ee.context||(e==null?i.removeAttribute("class"):i.className=e)}function K9(i,e,t,n){if(n)Array.isArray(t)?(i[`$$${e}`]=t[0],i[`$$${e}Data`]=t[1]):i[`$$${e}`]=t;else if(Array.isArray(t)){const r=t[0];i.addEventListener(e,t[0]=s=>r.call(i,t[1],s))}else i.addEventListener(e,t)}function $E(i,e,t={}){const n=Object.keys(e||{}),r=Object.keys(t);let s,o;for(s=0,o=r.length;s<o;s++){const a=r[s];!a||a==="undefined"||e[a]||(f_(i,a,!1),delete t[a])}for(s=0,o=n.length;s<o;s++){const a=n[s],l=!!e[a];!a||a==="undefined"||t[a]===l||!l||(f_(i,a,!0),t[a]=l)}return t}function JE(i,e,t){if(!e)return t?Vd(i,"style"):e;const n=i.style;if(typeof e=="string")return n.cssText=e;typeof t=="string"&&(n.cssText=t=void 0),t||(t={}),e||(e={});let r,s;for(s in t)e[s]==null&&n.removeProperty(s),delete t[s];for(s in e)r=e[s],r!==t[s]&&(n.setProperty(s,r),t[s]=r);return t}function ln(i,e={},t,n){const r={};return n||qr(()=>r.children=Uh(i,e.children,r.children)),qr(()=>e.ref&&e.ref(i)),qr(()=>QE(i,e,t,!0,r,!0)),r}function x2(i,e,t){return Vt(()=>i(e,t))}function Un(i,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Uh(i,e,n,t);qr(r=>Uh(i,e(),r,t),n)}function QE(i,e,t,n,r={},s=!1){e||(e={});for(const o in r)if(!(o in e)){if(o==="children")continue;r[o]=g_(i,o,null,r[o],t,s)}for(const o in e){if(o==="children"){n||Uh(i,e.children);continue}const a=e[o];r[o]=g_(i,o,a,r[o],t,s)}}function qE(i,e,t={}){Ee.completed=globalThis._$HY.completed,Ee.events=globalThis._$HY.events,Ee.load=r=>globalThis._$HY.r[r],Ee.has=r=>r in globalThis._$HY.r,Ee.gather=r=>m_(e,r),Ee.registry=new Map,Ee.context={id:t.renderId||"",count:0},m_(e,t.renderId);const n=KE(i,e,[...e.childNodes],t);return Ee.context=null,n}function dt(i){let e,t;return!Ee.context||!(e=Ee.registry.get(t=tM()))?i():(Ee.completed&&Ee.completed.add(e),Ee.registry.delete(t),e)}function ip(i){let e=i,t=0,n=[];if(Ee.context)for(;e;){if(e.nodeType===8){const r=e.nodeValue;if(r==="$")t++;else if(r==="/"){if(t===0)return[e,n];t--}}n.push(e),e=e.nextSibling}return[e,n]}function Cn(){Ee.events&&!Ee.events.queued&&(queueMicrotask(()=>{const{completed:i,events:e}=Ee;for(e.queued=!1;e.length;){const[t,n]=e[0];if(!i.has(t))return;j9(n),e.shift()}}),Ee.events.queued=!0)}function eM(i){return i.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function f_(i,e,t){const n=e.trim().split(/\s+/);for(let r=0,s=n.length;r<s;r++)i.classList.toggle(n[r],t)}function g_(i,e,t,n,r,s){let o,a,l,c,h;if(e==="style")return JE(i,t,n);if(e==="classList")return $E(i,t,n);if(t===n)return n;if(e==="ref")s||t(i);else if(e.slice(0,3)==="on:"){const u=e.slice(3);n&&i.removeEventListener(u,n),t&&i.addEventListener(u,t)}else if(e.slice(0,10)==="oncapture:"){const u=e.slice(10);n&&i.removeEventListener(u,n,!0),t&&i.addEventListener(u,t,!0)}else if(e.slice(0,2)==="on"){const u=e.slice(2).toLowerCase(),d=HE.has(u);if(!d&&n){const f=Array.isArray(n)?n[0]:n;i.removeEventListener(u,f)}(d||t)&&(K9(i,u,t,d),d&&yf([u]))}else if(e.slice(0,5)==="attr:")Vd(i,e.slice(5),t);else if((h=e.slice(0,5)==="prop:")||(l=UE.has(e))||!r&&((c=WE(e,i.tagName))||(a=OE.has(e)))||(o=i.nodeName.includes("-"))){if(h)e=e.slice(5),a=!0;else if(Ee.context)return t;e==="class"||e==="className"?b2(i,t):o&&!a&&!l?i[eM(e)]=t:i[c||e]=t}else{const u=r&&e.indexOf(":")>-1&&YE[e.split(":")[0]];u?jE(i,u,e,t):Vd(i,ZE[e]||e,t)}return t}function j9(i){const e=`$$${i.type}`;let t=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==t&&Object.defineProperty(i,"target",{configurable:!0,value:t}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return t||document}}),Ee.registry&&!Ee.done&&(Ee.done=_$HY.done=!0);t;){const n=t[e];if(n&&!t.disabled){const r=t[`${e}Data`];if(r!==void 0?n.call(t,r,i):n.call(t,i),i.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Uh(i,e,t,n,r){if(Ee.context){!t&&(t=[...i.childNodes]);let a=[];for(let l=0;l<t.length;l++){const c=t[l];c.nodeType===8&&c.data.slice(0,2)==="!$"?c.remove():a.push(c)}t=a}for(;typeof t=="function";)t=t();if(e===t)return t;const s=typeof e,o=n!==void 0;if(i=o&&t[0]&&t[0].parentNode||i,s==="string"||s==="number"){if(Ee.context)return t;if(s==="number"&&(e=e.toString()),o){let a=t[0];a&&a.nodeType===3?a.data=e:a=document.createTextNode(e),t=Mc(i,t,n,a)}else t!==""&&typeof t=="string"?t=i.firstChild.data=e:t=i.textContent=e}else if(e==null||s==="boolean"){if(Ee.context)return t;t=Mc(i,t,n)}else{if(s==="function")return qr(()=>{let a=e();for(;typeof a=="function";)a=a();t=Uh(i,a,t,n)}),()=>t;if(Array.isArray(e)){const a=[],l=t&&Array.isArray(t);if(w2(a,e,t,r))return qr(()=>t=Uh(i,a,t,n,!0)),()=>t;if(Ee.context){if(!a.length)return t;if(n===void 0)return[...i.childNodes];let c=a[0],h=[c];for(;(c=c.nextSibling)!==n;)h.push(c);return t=h}if(a.length===0){if(t=Mc(i,t,n),o)return t}else l?t.length===0?p_(i,a,n):XE(i,t,a):(t&&Mc(i),p_(i,a));t=a}else if(e.nodeType){if(Ee.context&&e.parentNode)return t=o?[e]:e;if(Array.isArray(t)){if(o)return t=Mc(i,t,n,e);Mc(i,t,null,e)}else t==null||t===""||!i.firstChild?i.appendChild(e):i.replaceChild(e,i.firstChild);t=e}}return t}function w2(i,e,t,n){let r=!1;for(let s=0,o=e.length;s<o;s++){let a=e[s],l=t&&t[s],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)i.push(a);else if(Array.isArray(a))r=w2(i,a,l)||r;else if(c==="function")if(n){for(;typeof a=="function";)a=a();r=w2(i,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||r}else i.push(a),r=!0;else{const h=String(a);l&&l.nodeType===3&&l.data===h?i.push(l):i.push(document.createTextNode(h))}}return r}function p_(i,e,t=null){for(let n=0,r=e.length;n<r;n++)i.insertBefore(e[n],t)}function Mc(i,e,t,n){if(t===void 0)return i.textContent="";const r=n||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;o>=0;o--){const a=e[o];if(r!==a){const l=a.parentNode===i;!s&&!o?l?i.replaceChild(r,a):i.insertBefore(r,t):l&&a.remove()}else s=!0}}else i.insertBefore(r,t);return[r]}function m_(i,e){const t=i.querySelectorAll("*[data-hk]");for(let n=0;n<t.length;n++){const r=t[n],s=r.getAttribute("data-hk");(!e||s.startsWith(e))&&!Ee.registry.has(s)&&Ee.registry.set(s,r)}}function tM(){const i=Ee.context;return`${i.id}${i.count++}`}function nM(i){return Ee.context?void 0:i.children}function iM(){}const rp=!1,rM="http://www.w3.org/2000/svg";function sM(i,e=!1){return e?document.createElementNS(rM,i):document.createElement(i)}const oM=(...i)=>(RE(),qE(...i));function aM(i){const[e,t]=Gr(i,["component"]),n=pe(()=>e.component);return pe(()=>{const r=n();switch(typeof r){case"function":return Vt(()=>r(t));case"string":const s=zE.has(r),o=Ee.context?dt():sM(r,s);return ln(o,t,s),o}})}const lM="modulepreload",cM=function(i){return"/"+i},C_={},yr=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=cM(s),s in C_)return;C_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const u=r[h];if(u.href===s&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":lM,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},S2=Symbol("store-raw"),_h=Symbol("store-node"),Fo=Symbol("store-has"),$9=Symbol("store-self");function J9(i){let e=i[xs];if(!e&&(Object.defineProperty(i,xs,{value:e=new Proxy(i,dM)}),!Array.isArray(i))){const t=Object.keys(i),n=Object.getOwnPropertyDescriptors(i);for(let r=0,s=t.length;r<s;r++){const o=t[r];n[o].get&&Object.defineProperty(i,o,{enumerable:n[o].enumerable,get:n[o].get.bind(e)})}}return e}function ja(i){let e;return i!=null&&typeof i=="object"&&(i[xs]||!(e=Object.getPrototypeOf(i))||e===Object.prototype||Array.isArray(i))}function dc(i,e=new Set){let t,n,r,s;if(t=i!=null&&i[S2])return t;if(!ja(i)||e.has(i))return i;if(Array.isArray(i)){Object.isFrozen(i)?i=i.slice(0):e.add(i);for(let o=0,a=i.length;o<a;o++)r=i[o],(n=dc(r,e))!==r&&(i[o]=n)}else{Object.isFrozen(i)?i=Object.assign({},i):e.add(i);const o=Object.keys(i),a=Object.getOwnPropertyDescriptors(i);for(let l=0,c=o.length;l<c;l++)s=o[l],!a[s].get&&(r=i[s],(n=dc(r,e))!==r&&(i[s]=n))}return i}function sp(i,e){let t=i[e];return t||Object.defineProperty(i,e,{value:t=Object.create(null)}),t}function Wd(i,e,t){if(i[e])return i[e];const[n,r]=tn(t,{equals:!1,internal:!0});return n.$=r,i[e]=n}function hM(i,e){const t=Reflect.getOwnPropertyDescriptor(i,e);return!t||t.get||!t.configurable||e===xs||e===_h||(delete t.value,delete t.writable,t.get=()=>i[xs][e]),t}function Q9(i){y2()&&Wd(sp(i,_h),$9)()}function uM(i){return Q9(i),Reflect.ownKeys(i)}const dM={get(i,e,t){if(e===S2)return i;if(e===xs)return t;if(e===q1)return Q9(i),t;const n=sp(i,_h),r=n[e];let s=r?r():i[e];if(e===_h||e===Fo||e==="__proto__")return s;if(!r){const o=Object.getOwnPropertyDescriptor(i,e);y2()&&(typeof s!="function"||i.hasOwnProperty(e))&&!(o&&o.get)&&(s=Wd(n,e,s)())}return ja(s)?J9(s):s},has(i,e){return e===S2||e===xs||e===q1||e===_h||e===Fo||e==="__proto__"?!0:(y2()&&Wd(sp(i,Fo),e)(),e in i)},set(){return!0},deleteProperty(){return!0},ownKeys:uM,getOwnPropertyDescriptor:hM};function Hr(i,e,t,n=!1){if(!n&&i[e]===t)return;const r=i[e],s=i.length;t===void 0?(delete i[e],i[Fo]&&i[Fo][e]&&r!==void 0&&i[Fo][e].$()):(i[e]=t,i[Fo]&&i[Fo][e]&&r===void 0&&i[Fo][e].$());let o=sp(i,_h),a;if((a=Wd(o,e,r))&&a.$(()=>t),Array.isArray(i)&&i.length!==s){for(let l=i.length;l<s;l++)(a=o[l])&&a.$();(a=Wd(o,"length",s))&&a.$(i.length)}(a=o[$9])&&a.$()}function q9(i,e){const t=Object.keys(e);for(let n=0;n<t.length;n+=1){const r=t[n];Hr(i,r,e[r])}}function fM(i,e){if(typeof e=="function"&&(e=e(i)),e=dc(e),Array.isArray(e)){if(i===e)return;let t=0,n=e.length;for(;t<n;t++){const r=e[t];i[t]!==r&&Hr(i,t,r)}Hr(i,"length",n)}else q9(i,e)}function id(i,e,t=[]){let n,r=i;if(e.length>1){n=e.shift();const o=typeof n,a=Array.isArray(i);if(Array.isArray(n)){for(let l=0;l<n.length;l++)id(i,[n[l]].concat(e),t);return}else if(a&&o==="function"){for(let l=0;l<i.length;l++)n(i[l],l)&&id(i,[l].concat(e),t);return}else if(a&&o==="object"){const{from:l=0,to:c=i.length-1,by:h=1}=n;for(let u=l;u<=c;u+=h)id(i,[u].concat(e),t);return}else if(e.length>1){id(i[n],e,[n].concat(t));return}r=i[n],t=[n].concat(t)}let s=e[0];typeof s=="function"&&(s=s(r,t),s===r)||n===void 0&&s==null||(s=dc(s),n===void 0||ja(r)&&ja(s)&&!Array.isArray(s)?q9(r,s):Hr(i,n,s))}function gM(...[i,e]){const t=dc(i||{}),n=Array.isArray(t),r=J9(t);function s(...o){A2(()=>{n&&o.length===1?fM(t,o[0]):id(t,o)})}return[r,s]}const T2=Symbol("store-root");function Jc(i,e,t,n,r){const s=e[t];if(i===s)return;if(t!==T2&&(!ja(i)||!ja(s)||r&&i[r]!==s[r])){Hr(e,t,i);return}if(Array.isArray(i)){if(i.length&&s.length&&(!n||r&&i[0]&&i[0][r]!=null)){let l,c,h,u,d,f,g,p;for(h=0,u=Math.min(s.length,i.length);h<u&&(s[h]===i[h]||r&&s[h]&&i[h]&&s[h][r]===i[h][r]);h++)Jc(i[h],s,h,n,r);const m=new Array(i.length),C=new Map;for(u=s.length-1,d=i.length-1;u>=h&&d>=h&&(s[u]===i[d]||r&&s[h]&&i[h]&&s[u][r]===i[d][r]);u--,d--)m[d]=s[u];if(h>d||h>u){for(c=h;c<=d;c++)Hr(s,c,i[c]);for(;c<i.length;c++)Hr(s,c,m[c]),Jc(i[c],s,c,n,r);s.length>i.length&&Hr(s,"length",i.length);return}for(g=new Array(d+1),c=d;c>=h;c--)f=i[c],p=r&&f?f[r]:f,l=C.get(p),g[c]=l===void 0?-1:l,C.set(p,c);for(l=h;l<=u;l++)f=s[l],p=r&&f?f[r]:f,c=C.get(p),c!==void 0&&c!==-1&&(m[c]=s[l],c=g[c],C.set(p,c));for(c=h;c<i.length;c++)c in m?(Hr(s,c,m[c]),Jc(i[c],s,c,n,r)):Hr(s,c,i[c])}else for(let l=0,c=i.length;l<c;l++)Jc(i[l],s,l,n,r);s.length>i.length&&Hr(s,"length",i.length);return}const o=Object.keys(i);for(let l=0,c=o.length;l<c;l++)Jc(i[o[l]],s,o[l],n,r);const a=Object.keys(s);for(let l=0,c=a.length;l<c;l++)i[a[l]]===void 0&&Hr(s,a[l],void 0)}function pM(i,e={}){const{merge:t,key:n="id"}=e,r=dc(i);return s=>{if(!ja(s)||!ja(r))return r;const o=Jc(r,{[T2]:s},T2,t,n);return o===void 0?s:o}}function mM(i,e){i&&e&&oM(i,e)}const ex=ta(),CM=["title","meta"],I_=[],A_=["name","http-equiv","content","charset","media"].concat(["property"]),y_=(i,e)=>{const t=Object.fromEntries(Object.entries(i.props).filter(([n])=>e.includes(n)).sort());return(Object.hasOwn(t,"name")||Object.hasOwn(t,"property"))&&(t.name=t.name||t.property,delete t.property),i.tag+JSON.stringify(t)};function IM(){if(!Ee.context){const t=document.head.querySelectorAll("[data-sm]");Array.prototype.forEach.call(t,n=>n.parentNode.removeChild(n))}const i=new Map;function e(t){if(t.ref)return t.ref;let n=document.querySelector(`[data-sm="${t.id}"]`);return n?(n.tagName.toLowerCase()!==t.tag&&(n.parentNode&&n.parentNode.removeChild(n),n=document.createElement(t.tag)),n.removeAttribute("data-sm")):n=document.createElement(t.tag),n}return{addTag(t){if(CM.indexOf(t.tag)!==-1){const s=t.tag==="title"?I_:A_,o=y_(t,s);i.has(o)||i.set(o,[]);let a=i.get(o),l=a.length;a=[...a,t],i.set(o,a);let c=e(t);t.ref=c,ln(c,t.props);let h=null;for(var n=l-1;n>=0;n--)if(a[n]!=null){h=a[n];break}return c.parentNode!=document.head&&document.head.appendChild(c),h&&h.ref&&document.head.removeChild(h.ref),l}let r=e(t);return t.ref=r,ln(r,t.props),r.parentNode!=document.head&&document.head.appendChild(r),-1},removeTag(t,n){const r=t.tag==="title"?I_:A_,s=y_(t,r);if(t.ref){const o=i.get(s);if(o){if(t.ref.parentNode){t.ref.parentNode.removeChild(t.ref);for(let a=n-1;a>=0;a--)o[a]!=null&&document.head.appendChild(o[a].ref)}o[n]=null,i.set(s,o)}else t.ref.parentNode&&t.ref.parentNode.removeChild(t.ref)}}}}const AM=i=>{const e=IM();return F(ex.Provider,{value:e,get children(){return i.children}})},py=(i,e,t)=>(yM({tag:i,props:e,setting:t,id:GE(),get name(){return e.name||e.property}}),null);function yM(i){const e=Ts(ex);if(!e)throw new Error("<MetaProvider /> should be in the tree");qr(()=>{const t=e.addTag(i);an(()=>e.removeTag(i,t))})}const _M=i=>py("title",i,{escape:!0,close:!0}),ui=i=>py("meta",i),__=i=>py("link",i);function tx(){let i=new Set;function e(r){return i.add(r),()=>i.delete(r)}let t=!1;function n(r,s){if(t)return!(t=!1);const o={to:r,options:s,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of i)a.listener({...o,from:a.location,retry:l=>{l&&(t=!0),a.navigate(r,s)}});return!o.defaultPrevented}return{subscribe:e,confirm:n}}function vM(i,e,t){return i.addEventListener(e,t),()=>i.removeEventListener(e,t)}function bM([i,e],t,n){return[t?()=>t(i()):i,n?r=>e(n(r)):e]}function xM(i){try{return document.querySelector(i)}catch{return null}}function wM(i,e){const t=xM(`#${i}`);t?t.scrollIntoView():e&&window.scrollTo(0,0)}function SM(i,e,t,n){let r=!1;const s=a=>typeof a=="string"?{value:a}:a,o=bM(tn(s(i()),{equals:(a,l)=>a.value===l.value}),void 0,a=>(!r&&e(a),a));return t&&an(t((a=i())=>{r=!0,o[1](s(a)),r=!1})),{signal:o,utils:n}}function TM(i){if(i){if(Array.isArray(i))return{signal:i}}else return{signal:tn({value:""})};return i}let E2;function my(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),E2=window.history.state._depth}my();function EM(i,e){let t=!1;return()=>{const n=E2;my();const r=n==null?null:E2-n;if(t){t=!1;return}r&&e(r)?(t=!0,window.history.go(-r)):i()}}function MM(){const i=()=>({value:window.location.pathname+window.location.search+window.location.hash,state:window.history.state}),e=tx();return SM(i,({value:t,replace:n,scroll:r,state:s})=>{n?window.history.replaceState(s,"",t):window.history.pushState(s,"",t),wM(window.location.hash.slice(1),r),my()},t=>vM(window,"popstate",EM(t,n=>{if(n&&n<0)return!e.confirm(n);{const r=i();return!e.confirm(r.value,{state:r.state})}})),{go:t=>window.history.go(t),beforeLeave:e})}const LM=/^(?:[a-z0-9]+:)?\/\//i,RM=/^\/+|(\/)\/+$/g;function tc(i,e=!1){const t=i.replace(RM,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function c1(i,e,t){if(LM.test(e))return;const n=tc(i),r=t&&tc(t);let s="";return!r||e.startsWith("/")?s=n:r.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+r:s=r,(s||"/")+tc(e,!s)}function BM(i,e){if(i==null)throw new Error(e);return i}function nx(i,e){return tc(i).replace(/\/*(\*.*)?$/g,"")+tc(e)}function PM(i){const e={};return i.searchParams.forEach((t,n)=>{e[n]=t}),e}function GM(i,e,t){const[n,r]=i.split("/*",2),s=n.split("/").filter(Boolean),o=s.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&r===void 0&&!e)return null;const h={path:o?"":"/",params:{}},u=d=>t===void 0?void 0:t[d];for(let d=0;d<o;d++){const f=s[d],g=l[d],p=f[0]===":",m=p?f.slice(1):f;if(p&&lm(g,u(m)))h.params[m]=g;else if(p||!lm(g,f))return null;h.path+=`/${g}`}if(r){const d=c?l.slice(-c).join("/"):"";if(lm(d,u(r)))h.params[r]=d;else return null}return h}}function lm(i,e){const t=n=>n.localeCompare(i,void 0,{sensitivity:"base"})===0;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(i):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(i):!1}function DM(i){const[e,t]=i.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((r,s)=>r+(s.startsWith(":")?2:3),n.length-(t===void 0?0:1))}function ix(i){const e=new Map,t=N9();return new Proxy({},{get(n,r){return e.has(r)||vE(t,()=>e.set(r,pe(()=>i()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(i())}})}function rx(i){let e=/(\/?\:[^\/]+)\?/.exec(i);if(!e)return[i];let t=i.slice(0,e.index),n=i.slice(e.index+e[0].length);const r=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)r.push(t+=e[1]),n=n.slice(e[0].length);return rx(n).reduce((s,o)=>[...s,...r.map(a=>a+o)],[])}const FM=100,sx=ta(),g0=ta(),yc=()=>BM(Ts(sx),"Make sure your app is wrapped in a <Router />");let Hd;const p0=()=>Hd||Ts(g0)||yc().base,NM=i=>{const e=p0();return pe(()=>e.resolvePath(i()))},kM=i=>{const e=yc();return pe(()=>{const t=i();return t!==void 0?e.renderPath(t):t})},ox=()=>yc().navigatorFactory(),Cy=()=>yc().location,OM=()=>yc().isRouting,UM=()=>p0().data,ZM=i=>{const e=yc().beforeLeave.subscribe({listener:i,location:Cy(),navigate:ox()});an(e)};function VM(i,e="",t){const{component:n,data:r,children:s}=i,o=!s||Array.isArray(s)&&!s.length,a={key:i,element:n?()=>F(n,{}):()=>{const{element:l}=i;return l===void 0&&t?F(t,{}):l},preload:i.component?n.preload:i.preload,data:r};return ax(i.path).reduce((l,c)=>{for(const h of rx(c)){const u=nx(e,h),d=o?u:u.split("/*",1)[0];l.push({...a,originalPath:h,pattern:d,matcher:GM(d,!o,i.matchFilters)})}return l},[])}function WM(i,e=0){return{routes:i,score:DM(i[i.length-1])*1e4-e,matcher(t){const n=[];for(let r=i.length-1;r>=0;r--){const s=i[r],o=s.matcher(t);if(!o)return null;n.unshift({...o,route:s})}return n}}}function ax(i){return Array.isArray(i)?i:[i]}function lx(i,e="",t,n=[],r=[]){const s=ax(i);for(let o=0,a=s.length;o<a;o++){const l=s[o];if(l&&typeof l=="object"&&l.hasOwnProperty("path")){const c=VM(l,e,t);for(const h of c){n.push(h);const u=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!u)lx(l.children,h.pattern,t,n,r);else{const d=WM([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((o,a)=>a.score-o.score)}function HM(i,e){for(let t=0,n=i.length;t<n;t++){const r=i[t].matcher(e);if(r)return r}return[]}function zM(i,e){const t=new URL("http://sar"),n=pe(l=>{const c=i();try{return new URL(c,t)}catch{return console.error(`Invalid path ${c}`),l}},t,{equals:(l,c)=>l.href===c.href}),r=pe(()=>n().pathname),s=pe(()=>n().search,!0),o=pe(()=>n().hash),a=pe(()=>"");return{get pathname(){return r()},get search(){return s()},get hash(){return o()},get state(){return e()},get key(){return a()},query:ix(Ji(s,()=>PM(n())))}}function YM(i,e="",t,n){const{signal:[r,s],utils:o={}}=TM(i),a=o.parsePath||(_=>_),l=o.renderPath||(_=>_),c=o.beforeLeave||tx(),h=c1("",e),u=void 0;if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!r().value&&s({value:h,replace:!0,scroll:!1});const[d,f]=tn(!1),g=async _=>{f(!0);try{await gy(_)}finally{f(!1)}},[p,m]=tn(r().value),[C,A]=tn(r().state),I=zM(p,C),y=[],x={pattern:h,params:{},path:()=>h,outlet:()=>null,resolvePath(_){return c1(h,_)}};if(t)try{Hd=x,x.data=t({data:void 0,params:{},location:I,navigate:S(x)})}finally{Hd=void 0}function T(_,v,B){Vt(()=>{if(typeof v=="number"){v&&(o.go?o.go(v):console.warn("Router integration does not support relative routing"));return}const{replace:E,resolve:L,scroll:G,state:Z}={replace:!1,resolve:!0,scroll:!0,...B},U=L?_.resolvePath(v):c1("",v);if(U===void 0)throw new Error(`Path '${v}' is not a routable path`);if(y.length>=FM)throw new Error("Too many redirects");const V=p();if((U!==V||Z!==C())&&!rp){if(c.confirm(U,B)){const z=y.push({value:V,replace:E,scroll:G,state:C()});g(()=>{m(U),A(Z),X9()}).then(()=>{y.length===z&&M({value:U,state:Z})})}}})}function S(_){return _=_||Ts(g0)||x,(v,B)=>T(_,v,B)}function M(_){const v=y[0];v&&((_.value!==v.value||_.state!==v.state)&&s({..._,replace:v.replace,scroll:v.scroll}),y.length=0)}qr(()=>{const{value:_,state:v}=r();Vt(()=>{_!==p()&&g(()=>{m(_),A(v)})})});{let _=function(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const B=v.composedPath().find(V=>V instanceof Node&&V.nodeName.toUpperCase()==="A");if(!B||!B.hasAttribute("link"))return;const E=B.href;if(B.target||!E&&!B.hasAttribute("state"))return;const L=(B.getAttribute("rel")||"").split(/\s+/);if(B.hasAttribute("download")||L&&L.includes("external"))return;const G=new URL(E);if(G.origin!==window.location.origin||h&&G.pathname&&!G.pathname.toLowerCase().startsWith(h.toLowerCase()))return;const Z=a(G.pathname+G.search+G.hash),U=B.getAttribute("state");v.preventDefault(),T(x,Z,{resolve:!1,replace:B.hasAttribute("replace"),scroll:!B.hasAttribute("noscroll"),state:U&&JSON.parse(U)})};yf(["click"]),document.addEventListener("click",_),an(()=>document.removeEventListener("click",_))}return{base:x,out:u,location:I,isRouting:d,renderPath:l,parsePath:a,navigatorFactory:S,beforeLeave:c}}function XM(i,e,t,n,r){const{base:s,location:o,navigatorFactory:a}=i,{pattern:l,element:c,preload:h,data:u}=n().route,d=pe(()=>n().path);h&&h();const f={parent:e,pattern:l,get child(){return t()},path:d,params:r,data:e.data,outlet:c,resolvePath(g){return c1(s.path(),g,d())}};if(u)try{Hd=f,f.data=u({data:e.data,params:r,location:o,navigate:a(f)})}finally{Hd=void 0}return f}const KM=wt("<a link>"),jM=i=>{const{source:e,url:t,base:n,data:r,out:s}=i,o=e||MM(),a=YM(o,n,r);return F(sx.Provider,{value:a,get children(){return i.children}})},$M=i=>{const e=yc(),t=p0(),n=f0(()=>i.children),r=pe(()=>lx(n(),nx(t.pattern,i.base||""),JM)),s=pe(()=>HM(r(),e.location.pathname)),o=ix(()=>{const h=s(),u={};for(let d=0;d<h.length;d++)Object.assign(u,h[d].params);return u});e.out&&e.out.matches.push(s().map(({route:h,path:u,params:d})=>({originalPath:h.originalPath,pattern:h.pattern,path:u,params:d})));const a=[];let l;const c=pe(Ji(s,(h,u,d)=>{let f=u&&h.length===u.length;const g=[];for(let p=0,m=h.length;p<m;p++){const C=u&&u[p],A=h[p];d&&C&&A.route.key===C.route.key?g[p]=d[p]:(f=!1,a[p]&&a[p](),yh(I=>{a[p]=I,g[p]=XM(e,g[p-1]||t,()=>c()[p+1],()=>s()[p],o)}))}return a.splice(h.length).forEach(p=>p()),d&&f?d:(l=g[0],g)}));return F(Ac,{get when(){return c()&&l},keyed:!0,children:h=>F(g0.Provider,{value:h,get children(){return h.outlet()}})})},JM=()=>{const i=p0();return F(Ac,{get when(){return i.child},keyed:!0,children:e=>F(g0.Provider,{value:e,get children(){return e.outlet()}})})};function Ys(i){i=$n({inactiveClass:"inactive",activeClass:"active"},i);const[,e]=Gr(i,["href","state","class","activeClass","inactiveClass","end"]),t=NM(()=>i.href),n=kM(t),r=Cy(),s=pe(()=>{const o=t();if(o===void 0)return!1;const a=tc(o.split(/[?#]/,1)[0]).toLowerCase(),l=tc(r.pathname).toLowerCase();return i.end?a===l:l.startsWith(a)});return(()=>{const o=dt(KM);return ln(o,$n(e,{get href(){return n()||i.href},get state(){return JSON.stringify(i.state)},get classList(){return{...i.class&&{[i.class]:!0},[i.inactiveClass]:!s(),[i.activeClass]:s(),...e.classList}},get"aria-current"(){return s()?"page":void 0}}),!1,!1),Cn(),o})()}let QM={data:""},qM=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||QM,eL=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tL=/\/\*[^]*?\*\/|  +/g,v_=/\n+/g,ba=(i,e)=>{let t="",n="",r="";if(Array.isArray(i))return i.reduce((s,o)=>s+ba(o,e),"");for(let s in i){let o=i[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":n+=s[1]=="f"?ba(o,s):s+"{"+ba(o,s[1]=="k"?"":e)+"}":typeof o=="object"?n+=ba(o,e?e.replace(/([^,])+/g,a=>s.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ba.p?ba.p(s,o):s+":"+o+";")}return t+(e&&r?e+"{"+r+"}":r)+n},_o={},M2=i=>{if(Array.isArray(i))return i.reduce((e,t)=>e+M2(t),"");if(typeof i=="object"){let e="";for(let t in i)e+=t+M2(i[t]);return e}return i},nL=(i,e,t,n,r)=>{let s=M2(i),o=_o[s]||(_o[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!_o[o]){let l=s!==i?i:(c=>{let h,u,d=[{}];for(;h=eL.exec(c.replace(tL,""));)h[4]?d.shift():h[3]?(u=h[3].replace(v_," ").trim(),d.unshift(d[0][u]=d[0][u]||{})):d[0][h[1]]=h[2].replace(v_," ").trim();return d[0]})(i);_o[o]=ba(r?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&_o.g&&typeof window<"u"?_o.g:null;return t&&(_o.g=_o[o]),((l,c,h,u)=>{u?c.data=c.data.replace(u,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(_o[o],e,n,a),o},iL=(i,e,t)=>i.reduce((n,r,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":ba(a,""):a===!1?"":a}return n+r+(o??"")},"");function Iy(i){let e=this||{},t=i.call?i(e.p):i;return nL(t.raw?iL(t,[].slice.call(arguments,1),e.p):t,qM(e.target),e.g,e.o,e.k)}Iy.bind({g:1});Iy.bind({k:1});function vi(i,e=Object.is){let[t,n]=tn(i,{equals:e});return(...r)=>(r.length===1&&n(()=>r[0]),t())}function b_(i,e=!1){return Iy.apply({g:e?1:null},[i])}function rL(){const i=document.querySelector(`*[data-hk^="${Ee.context?.id}"]`);return i==null?null:i.getAttribute("class")}function sL(i){return e=>{const t=$n({css:{}},e),n=i==="Global";let r;r=rL(),r==null&&!n&&(r=b_(t.css,n));let s=t.css;const o=vi(r);return mt(()=>{s!==t.css&&(s=t.css,o(b_(t.css,n)))}),t.debug&&mt(()=>{console.debug(t.css)}),n?document.createElement("div"):F(aM,$n({get component(){return t.as??i},get class(){return[...new Set([t.class,o()].filter(Boolean))].join(" ")}},()=>Gr(t,["css","as","class","debug"])[1]))}}const $=new Proxy(sL,{get:(i,e)=>typeof e=="string"?e==="Generic"?i():i(e):i(e.description)}),ure={borderBottomWidth:"1px","--tw-border-opacity":"0.1",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))"},ht={breit:{h0:{fontFamily:"Sohne Breit, sans-serif",fontSize:"248rem",lineHeight:"1"},h1:{fontFamily:"Sohne Breit, sans-serif",fontSize:"192rem",lineHeight:"0.9"},h2:{fontFamily:"Sohne Breit, sans-serif",fontSize:"124rem",lineHeight:"1"},h3:{fontFamily:"Sohne Breit, sans-serif",fontSize:"104rem",lineHeight:"1.25",letterSpacing:"-0.03em"},h35:{fontFamily:"Sohne Breit, sans-serif",fontSize:"71.2rem",lineHeight:"1.15",letterSpacing:"-0.03em"},h4:{fontFamily:"Sohne Breit, sans-serif",fontSize:"64rem",lineHeight:"1"},h5:{fontFamily:"Sohne Breit, sans-serif",fontSize:"40rem",lineHeight:"1.2"},h55:{fontFamily:"Sohne Breit, sans-serif",fontSize:"28rem",lineHeight:"1.2"},h6:{fontFamily:"Sohne Breit, sans-serif",fontSize:"24rem",lineHeight:"1.4"},h7:{fontFamily:"Sohne Breit, sans-serif",fontSize:"16rem",lineHeight:"1"},h8:{fontFamily:"Sohne Breit, sans-serif",fontSize:"14rem",lineHeight:"1.2"}},sohne:{h1:{fontFamily:"Sohne, sans-serif",fontSize:"104rem",lineHeight:"1.25",letterSpacing:"-0.03em"},h15:{fontFamily:"Sohne, sans-serif",fontSize:"72rem",lineHeight:"1",letterSpacing:"-0.03em"},h2:{fontFamily:"Sohne, sans-serif",fontSize:"64rem",lineHeight:"1",letterSpacing:"-0.03em"},h3:{fontFamily:"Sohne, sans-serif",fontSize:"40rem",lineHeight:"1.2",letterSpacing:"-0.03em"},h4:{fontFamily:"Sohne, sans-serif",fontSize:"32rem",lineHeight:"1.25",letterSpacing:"-0.03em"},body1:{fontFamily:"Sohne, sans-serif",fontSize:"24rem",lineHeight:"1.4",letterSpacing:"-0.02em"},body2:{fontFamily:"Sohne, sans-serif",fontSize:"21rem",lineHeight:"32rem",letterSpacing:"-0.02em"},body3:{fontFamily:"Sohne, sans-serif",fontSize:"16rem",lineHeight:"24rem",letterSpacing:"-0.02em"},body4:{fontFamily:"Sohne, sans-serif",fontSize:"16rem",fontWeight:"300",lineHeight:"24rem",letterSpacing:"-0.02em"},body5:{fontFamily:"Sohne, sans-serif",fontSize:"14rem",lineHeight:"24rem",letterSpacing:"-0.02em"},body6:{fontFamily:"Sohne, sans-serif",fontSize:"12rem",lineHeight:"16rem",letterSpacing:"-0.02em"}},m:{breit:{h0:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"72rem",lineHeight:"1"}},h05:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"62rem",lineHeight:"1"}},h1:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"48rem",lineHeight:"1"}},h2:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"40rem",lineHeight:"1"}},h3:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"32rem",lineHeight:"1"}},h4:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"24rem",lineHeight:"1.4"}},h5:{"@media (max-width: 767px)":{fontFamily:"Sohne Breit, sans-serif",fontSize:"14rem",lineHeight:"1.2"}}},sohne:{h1:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"40rem",lineHeight:"1.2",letterSpacing:"-0.03em"}},h2:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"32rem",lineHeight:"1.2",letterSpacing:"-0.03em"}},body1:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"24rem",lineHeight:"1.333",letterSpacing:"-0.04em"}},body2:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"16rem",lineHeight:"1.5",letterSpacing:"-0.03em"}},body3:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"14rem",lineHeight:"1.42857143",letterSpacing:"-0.03em"}},body4:{"@media (max-width: 767px)":{fontFamily:"Sohne, sans-serif",fontSize:"12rem",fontWeight:"300",lineHeight:"1.25",letterSpacing:"-0.03em"}}}}},dre={marginTop:"-96rem","@media (max-width: 767px)":{marginTop:"-72rem"}},fre={paddingTop:"96rem","@media (max-width: 767px)":{paddingTop:"72rem"}},Za={width:"100%",paddingLeft:"64rem",paddingRight:"64rem","@media (max-width: 767px)":{paddingLeft:"24rem",paddingRight:"24rem"}},op={display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",columnGap:"32rem"},cx={userSelect:"none",borderRadius:"9999px",borderWidth:"1px","--tw-border-opacity":"0.3",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingLeft:"16rem",paddingRight:"16rem",paddingTop:"4rem",paddingBottom:"4rem",...ht.sohne.body3},gre={marginTop:"-32rem",marginBottom:"-32rem",p:{marginTop:"32rem",marginBottom:"32rem"},a:{"--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))",textDecorationLine:"underline",transitionProperty:"color, background-color, border-color, text-decoration-color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{"--tw-text-opacity":"0.5"}},ol:{listStylePosition:"inside",listStyleType:"decimal"},"ol li":{marginTop:"32rem",marginBottom:"32rem",paddingLeft:"1em",textIndent:"-0.98em"}},oL=wt('<svg width="110" height="149" viewBox="0 0 110 149" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M42.7831 52.0711H42.2062L41.9174 52.5704L36.295 62.2914L1.36604 42.1191L25.0302 1.14062H109V52.0711H42.7831Z" stroke-width="2"></path><path d="M61.1132 104.982H60.5359L60.2473 105.481L36.2944 146.96L1.36596 126.788L37.2377 64.6562H109V104.982H61.1132Z" stroke-width="2">'),aL=(i={})=>(()=>{const e=dt(oL);return ln(e,i,!0,!0),Cn(),e})(),lL=wt('<svg width="124" height="18" viewBox="0 0 124 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.4688 15.0161V2.99609H31.4504V4.40125H22.0434V8.26919H30.4979V9.67434H22.0434V15.0139H20.4688V15.0161Z"></path><path d="M45.9146 9.00738C45.9146 12.6072 42.952 15.2008 38.9339 15.2008C34.9158 15.2008 31.9531 12.605 31.9531 9.00738C31.9531 5.40975 34.9158 2.81396 38.9339 2.81396C42.952 2.81396 45.9146 5.40975 45.9146 9.00738ZM33.5771 9.00738C33.5771 11.837 35.7867 13.7613 38.9339 13.7613C42.081 13.7613 44.2735 11.837 44.2735 9.00738C44.2735 6.17776 42.081 4.25345 38.9339 4.25345C35.7867 4.25345 33.5771 6.17776 33.5771 9.00738Z"></path><path d="M49.1908 15.0161H47.584V2.99609H55.101C57.6132 2.99609 59.353 4.18458 59.353 6.47788C59.353 8.40219 58.0808 9.59068 56.1394 9.89316L59.604 15.0161H57.7633L54.3824 9.97683H49.1929V15.0161H49.1908ZM55.0174 8.58883C56.725 8.58883 57.7805 7.83584 57.7805 6.48003C57.7805 5.12421 56.725 4.38838 55.0174 4.38838H49.1908V8.59098H55.0174V8.58883Z"></path><path d="M67.7562 15.0161L62.5497 4.45274V15.0161H60.9922V2.99609H63.4871L68.4427 13.1068L73.4155 2.99609H75.8418V15.0161H74.2843V4.45274L69.0949 15.0161H67.7562Z"></path><path d="M85.0641 2.99609L91.3755 15.0161H89.6678L87.9259 11.6845H80.4431L78.6862 15.0161H76.9785L83.3071 2.99609H85.0641ZM81.1811 10.2772H87.19L84.1931 4.56858L81.179 10.2772H81.1811Z"></path><path d="M96.7654 4.40369V15.0164H95.1586V4.40369H89.4844V2.99854H102.442V4.40369H96.7676H96.7654Z"></path><path d="M102.473 8.50293H110.206V9.72574H102.473V8.50293Z"></path><path d="M111.111 11.5519L112.551 10.9319C113.053 12.6395 115.063 13.828 117.489 13.828C119.916 13.828 121.758 12.957 121.758 11.4682C121.758 9.97939 120.016 9.44307 118.008 9.44307H115.582V8.08725H117.976C119.952 8.08725 121.291 7.51875 121.291 6.26162C121.291 5.00449 119.785 4.18499 117.59 4.18499C115.196 4.18499 113.488 5.25548 113.003 6.83012L111.581 6.34528C112.132 4.36948 114.31 2.81201 117.624 2.81201C120.939 2.81201 122.932 4.16783 122.932 6.14363C122.932 7.48228 122.011 8.38759 120.604 8.70509C122.245 9.02259 123.382 9.91074 123.382 11.5669C123.382 13.592 121.072 15.1988 117.506 15.1988C114.293 15.1988 111.748 13.7422 111.111 11.5497V11.5519Z"></path><path d="M12.3718 0.666504H2.75025L0 5.42902L4.12322 7.81028L4.81186 6.61965H12.3718V0.666504Z"></path><path d="M12.3718 7.81055H4.12322L0 14.9522L4.12322 17.3334L6.87347 12.5709H12.3718V7.81055Z">'),hx=(i={})=>(()=>{const e=dt(lL);return ln(e,i,!0,!0),Cn(),e})(),dn=vi(typeof window>"u"?{width:0,height:0}:{width:window.innerWidth,height:window.innerHeight}),cL=vi(typeof window>"u"?0:document.body.offsetWidth),vh=vi(-1),hL=vi(null),Vn=vi(0),hh=vi(0),pi={XL:1279,LG:1023,MD:767,SM:639},ro=vi(!1),uL=dn,ux=pe(()=>{const{width:i}=uL();let e=pi.XL;for(const t of Object.values(pi))i<=t&&(e=t);return e}),zd=vi(0),Ay=!0;var xd=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return this.None(i)},Out:function(i){return this.None(i)},InOut:function(i){return this.None(i)}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-xd.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?xd.Bounce.In(i*2)*.5:xd.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),rd=function(){return performance.now()},dL=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=rd()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),uh={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=uh.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Bezier:function(i,e){for(var t=0,n=i.length-1,r=Math.pow,s=uh.Utils.Bernstein,o=0;o<=n;o++)t+=r(1-e,n-o)*r(e,o)*i[o]*s(n,o);return t},CatmullRom:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=uh.Utils.CatmullRom;return i[0]===i[t]?(e<0&&(r=Math.floor(n=t*(1+e))),s(i[(r-1+t)%t],i[r],i[(r+1)%t],i[(r+2)%t],n-r)):e<0?i[0]-(s(i[0],i[0],i[1],i[1],-n)-i[0]):e>1?i[t]-(s(i[t],i[t],i[t-1],i[t-1],n-t)-i[t]):s(i[r?r-1:0],i[r],i[t<r+1?t:r+1],i[t<r+2?t:r+2],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i},Bernstein:function(i,e){var t=uh.Utils.Factorial;return t(i)/t(e)/t(i-e)},Factorial:function(){var i=[1];return function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}}(),CatmullRom:function(i,e,t,n,r){var s=(t-i)*.5,o=(n-e)*.5,a=r*r,l=r*a;return(2*e-2*t+s+o)*l+(-3*e+3*t-2*s-o)*a+s*r+e}}},fL=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),L2=new dL,gL=function(){function i(e,t){t===void 0&&(t=L2),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=xd.Linear.None,this._interpolationFunction=uh.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=fL.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=rd()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var o in n){var a=e[o],l=Array.isArray(a),c=l?"array":typeof a,h=!l&&Array.isArray(n[o]);if(!(c==="undefined"||c==="function")){if(h){var u=n[o];if(u.length===0)continue;for(var d=[a],f=0,g=u.length;f<g;f+=1){var p=this._handleRelativeValue(a,u[f]);if(isNaN(p)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(p)}h&&(n[o]=d)}if((c==="object"||l)&&a&&!h){t[o]=l?[]:{};var m=a;for(var C in m)t[o][C]=m[C];r[o]=l?[]:{};var u=n[o];if(!this._isDynamic){var A={};for(var C in u)A[C]=u[C];n[o]=u=A}this._setupProperties(m,t[o],u,r[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),h?r[o]=n[o].slice().reverse():r[o]=t[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=rd()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=rd()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=L2),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=xd.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=uh.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){if(e===void 0&&(e=rd()),t===void 0&&(t=!0),this._isPaused)return!0;var n,r,s=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>s)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var o=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(n in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[n]=="string"&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],l=Array.isArray(e[s]),c=Array.isArray(a),h=!l&&c;h?e[s]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[s],o,a,r):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i}(),so=L2;so.getAll.bind(so);so.removeAll.bind(so);so.add.bind(so);so.remove.bind(so);so.update.bind(so);class _c extends Error{}class pL extends _c{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class mL extends _c{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class CL extends _c{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class dh extends _c{}class dx extends _c{constructor(e){super(`Invalid unit ${e}`)}}class or extends _c{}class sa extends _c{constructor(){super("Zone is an abstract class")}}const Pe="numeric",ws="short",Lr="long",ap={year:Pe,month:Pe,day:Pe},fx={year:Pe,month:ws,day:Pe},IL={year:Pe,month:ws,day:Pe,weekday:ws},gx={year:Pe,month:Lr,day:Pe},px={year:Pe,month:Lr,day:Pe,weekday:Lr},mx={hour:Pe,minute:Pe},Cx={hour:Pe,minute:Pe,second:Pe},Ix={hour:Pe,minute:Pe,second:Pe,timeZoneName:ws},Ax={hour:Pe,minute:Pe,second:Pe,timeZoneName:Lr},yx={hour:Pe,minute:Pe,hourCycle:"h23"},_x={hour:Pe,minute:Pe,second:Pe,hourCycle:"h23"},vx={hour:Pe,minute:Pe,second:Pe,hourCycle:"h23",timeZoneName:ws},bx={hour:Pe,minute:Pe,second:Pe,hourCycle:"h23",timeZoneName:Lr},xx={year:Pe,month:Pe,day:Pe,hour:Pe,minute:Pe},wx={year:Pe,month:Pe,day:Pe,hour:Pe,minute:Pe,second:Pe},Sx={year:Pe,month:ws,day:Pe,hour:Pe,minute:Pe},Tx={year:Pe,month:ws,day:Pe,hour:Pe,minute:Pe,second:Pe},AL={year:Pe,month:ws,day:Pe,weekday:ws,hour:Pe,minute:Pe},Ex={year:Pe,month:Lr,day:Pe,hour:Pe,minute:Pe,timeZoneName:ws},Mx={year:Pe,month:Lr,day:Pe,hour:Pe,minute:Pe,second:Pe,timeZoneName:ws},Lx={year:Pe,month:Lr,day:Pe,weekday:Lr,hour:Pe,minute:Pe,timeZoneName:Lr},Rx={year:Pe,month:Lr,day:Pe,weekday:Lr,hour:Pe,minute:Pe,second:Pe,timeZoneName:Lr};class _f{get type(){throw new sa}get name(){throw new sa}get ianaName(){return this.name}get isUniversal(){throw new sa}offsetName(e,t){throw new sa}formatOffset(e,t){throw new sa}offset(e){throw new sa}equals(e){throw new sa}get isValid(){throw new sa}}let cm=null;class m0 extends _f{static get instance(){return cm===null&&(cm=new m0),cm}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Ux(e,t,n)}formatOffset(e,t){return wd(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let h1={};function yL(i){return h1[i]||(h1[i]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:i,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),h1[i]}const _L={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function vL(i,e){const t=i.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,r,s,o,a,l,c,h]=n;return[o,r,s,a,l,c,h]}function bL(i,e){const t=i.formatToParts(e),n=[];for(let r=0;r<t.length;r++){const{type:s,value:o}=t[r],a=_L[s];s==="era"?n[a]=o:At(a)||(n[a]=parseInt(o,10))}return n}let Kf={};class Jo extends _f{static create(e){return Kf[e]||(Kf[e]=new Jo(e)),Kf[e]}static resetCache(){Kf={},h1={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Jo.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Ux(e,t,n,this.name)}formatOffset(e,t){return wd(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=yL(this.name);let[r,s,o,a,l,c,h]=n.formatToParts?bL(n,t):vL(n,t);a==="BC"&&(r=-Math.abs(r)+1);const d=I0({year:r,month:s,day:o,hour:l===24?0:l,minute:c,second:h,millisecond:0});let f=+t;const g=f%1e3;return f-=g>=0?g:1e3+g,(d-f)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let x_={};function xL(i,e={}){const t=JSON.stringify([i,e]);let n=x_[t];return n||(n=new Intl.ListFormat(i,e),x_[t]=n),n}let R2={};function B2(i,e={}){const t=JSON.stringify([i,e]);let n=R2[t];return n||(n=new Intl.DateTimeFormat(i,e),R2[t]=n),n}let P2={};function wL(i,e={}){const t=JSON.stringify([i,e]);let n=P2[t];return n||(n=new Intl.NumberFormat(i,e),P2[t]=n),n}let G2={};function SL(i,e={}){const{base:t,...n}=e,r=JSON.stringify([i,n]);let s=G2[r];return s||(s=new Intl.RelativeTimeFormat(i,e),G2[r]=s),s}let sd=null;function TL(){return sd||(sd=new Intl.DateTimeFormat().resolvedOptions().locale,sd)}let w_={};function EL(i){let e=w_[i];if(!e){const t=new Intl.Locale(i);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,w_[i]=e}return e}function ML(i){const e=i.indexOf("-x-");e!==-1&&(i=i.substring(0,e));const t=i.indexOf("-u-");if(t===-1)return[i];{let n,r;try{n=B2(i).resolvedOptions(),r=i}catch{const l=i.substring(0,t);n=B2(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=n;return[r,s,o]}}function LL(i,e,t){return(t||e)&&(i.includes("-u-")||(i+="-u"),t&&(i+=`-ca-${t}`),e&&(i+=`-nu-${e}`)),i}function RL(i){const e=[];for(let t=1;t<=12;t++){const n=Et.utc(2009,t,1);e.push(i(n))}return e}function BL(i){const e=[];for(let t=1;t<=7;t++){const n=Et.utc(2016,11,13+t);e.push(i(n))}return e}function jf(i,e,t,n){const r=i.listingMode();return r==="error"?null:r==="en"?t(e):n(e)}function PL(i){return i.numberingSystem&&i.numberingSystem!=="latn"?!1:i.numberingSystem==="latn"||!i.locale||i.locale.startsWith("en")||new Intl.DateTimeFormat(i.intl).resolvedOptions().numberingSystem==="latn"}class GL{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...o}=n;if(!t||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=wL(e,a)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):by(e,3);return zn(t,this.padTo)}}}class DL{constructor(e,t,n){this.opts=n,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Jo.create(a).valid?(r=a,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=B2(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:n}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class FL{constructor(e,t,n){this.opts={style:"long",...n},!t&&kx()&&(this.rtf=SL(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):nR(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const NL={firstDay:1,minimalDays:4,weekend:[6,7]};class un{static fromOpts(e){return un.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,s=!1){const o=e||On.defaultLocale,a=o||(s?"en-US":TL()),l=t||On.defaultNumberingSystem,c=n||On.defaultOutputCalendar,h=D2(r)||On.defaultWeekSettings;return new un(a,l,c,h,o)}static resetCache(){sd=null,R2={},P2={},G2={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return un.create(e,t,n,r)}constructor(e,t,n,r,s){const[o,a,l]=ML(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=n||l||null,this.weekSettings=r,this.intl=LL(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=PL(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:un.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,D2(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return jf(this,e,Wx,()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=RL(s=>this.extract(s,n,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return jf(this,e,Yx,()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=BL(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return jf(this,void 0,()=>Xx,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Et.utc(2016,11,13,9),Et.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return jf(this,e,Kx,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Et.utc(-40,1,1),Et.utc(2017,1,1)].map(n=>this.extract(n,t,"era"))),this.eraCache[e]})}extract(e,t,n){const r=this.dtFormatter(e,t),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new GL(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new DL(e,this.intl,t)}relFormatter(e={}){return new FL(this.intl,this.isEnglish(),e)}listFormatter(e={}){return xL(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Ox()?EL(this.locale):NL}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let hm=null;class ji extends _f{static get utcInstance(){return hm===null&&(hm=new ji(0)),hm}static instance(e){return e===0?ji.utcInstance:new ji(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ji(A0(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${wd(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${wd(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return wd(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class kL extends _f{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ea(i,e){if(At(i)||i===null)return e;if(i instanceof _f)return i;if(ZL(i)){const t=i.toLowerCase();return t==="default"?e:t==="local"||t==="system"?m0.instance:t==="utc"||t==="gmt"?ji.utcInstance:ji.parseSpecifier(t)||Jo.create(i)}else return nc(i)?ji.instance(i):typeof i=="object"&&"offset"in i&&typeof i.offset=="function"?i:new kL(i)}let S_=()=>Date.now(),T_="system",E_=null,M_=null,L_=null,R_=60,B_,P_=null;class On{static get now(){return S_}static set now(e){S_=e}static set defaultZone(e){T_=e}static get defaultZone(){return Ea(T_,m0.instance)}static get defaultLocale(){return E_}static set defaultLocale(e){E_=e}static get defaultNumberingSystem(){return M_}static set defaultNumberingSystem(e){M_=e}static get defaultOutputCalendar(){return L_}static set defaultOutputCalendar(e){L_=e}static get defaultWeekSettings(){return P_}static set defaultWeekSettings(e){P_=D2(e)}static get twoDigitCutoffYear(){return R_}static set twoDigitCutoffYear(e){R_=e%100}static get throwOnInvalid(){return B_}static set throwOnInvalid(e){B_=e}static resetCaches(){un.resetCache(),Jo.resetCache()}}class As{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Bx=[0,31,59,90,120,151,181,212,243,273,304,334],Px=[0,31,60,91,121,152,182,213,244,274,305,335];function Yr(i,e){return new As("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${i}, which is invalid`)}function yy(i,e,t){const n=new Date(Date.UTC(i,e-1,t));i<100&&i>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function Gx(i,e,t){return t+(vf(i)?Px:Bx)[e-1]}function Dx(i,e){const t=vf(i)?Px:Bx,n=t.findIndex(s=>s<e),r=e-t[n];return{month:n+1,day:r}}function _y(i,e){return(i-e+7)%7+1}function lp(i,e=4,t=1){const{year:n,month:r,day:s}=i,o=Gx(n,r,s),a=_y(yy(n,r,s),t);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=n-1,l=Yd(c,e,t)):l>Yd(n,e,t)?(c=n+1,l=1):c=n,{weekYear:c,weekNumber:l,weekday:a,...y0(i)}}function G_(i,e=4,t=1){const{weekYear:n,weekNumber:r,weekday:s}=i,o=_y(yy(n,1,e),t),a=bh(n);let l=r*7+s-o-7+e,c;l<1?(c=n-1,l+=bh(c)):l>a?(c=n+1,l-=bh(n)):c=n;const{month:h,day:u}=Dx(c,l);return{year:c,month:h,day:u,...y0(i)}}function um(i){const{year:e,month:t,day:n}=i,r=Gx(e,t,n);return{year:e,ordinal:r,...y0(i)}}function D_(i){const{year:e,ordinal:t}=i,{month:n,day:r}=Dx(e,t);return{year:e,month:n,day:r,...y0(i)}}function F_(i,e){if(!At(i.localWeekday)||!At(i.localWeekNumber)||!At(i.localWeekYear)){if(!At(i.weekday)||!At(i.weekNumber)||!At(i.weekYear))throw new dh("Cannot mix locale-based week fields with ISO-based week fields");return At(i.localWeekday)||(i.weekday=i.localWeekday),At(i.localWeekNumber)||(i.weekNumber=i.localWeekNumber),At(i.localWeekYear)||(i.weekYear=i.localWeekYear),delete i.localWeekday,delete i.localWeekNumber,delete i.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function OL(i,e=4,t=1){const n=C0(i.weekYear),r=Xr(i.weekNumber,1,Yd(i.weekYear,e,t)),s=Xr(i.weekday,1,7);return n?r?s?!1:Yr("weekday",i.weekday):Yr("week",i.weekNumber):Yr("weekYear",i.weekYear)}function UL(i){const e=C0(i.year),t=Xr(i.ordinal,1,bh(i.year));return e?t?!1:Yr("ordinal",i.ordinal):Yr("year",i.year)}function Fx(i){const e=C0(i.year),t=Xr(i.month,1,12),n=Xr(i.day,1,cp(i.year,i.month));return e?t?n?!1:Yr("day",i.day):Yr("month",i.month):Yr("year",i.year)}function Nx(i){const{hour:e,minute:t,second:n,millisecond:r}=i,s=Xr(e,0,23)||e===24&&t===0&&n===0&&r===0,o=Xr(t,0,59),a=Xr(n,0,59),l=Xr(r,0,999);return s?o?a?l?!1:Yr("millisecond",r):Yr("second",n):Yr("minute",t):Yr("hour",e)}function At(i){return typeof i>"u"}function nc(i){return typeof i=="number"}function C0(i){return typeof i=="number"&&i%1===0}function ZL(i){return typeof i=="string"}function VL(i){return Object.prototype.toString.call(i)==="[object Date]"}function kx(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Ox(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function WL(i){return Array.isArray(i)?i:[i]}function N_(i,e,t){if(i.length!==0)return i.reduce((n,r)=>{const s=[e(r),r];return n&&t(n[0],s[0])===n[0]?n:s},null)[1]}function HL(i,e){return e.reduce((t,n)=>(t[n]=i[n],t),{})}function Zh(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function D2(i){if(i==null)return null;if(typeof i!="object")throw new or("Week settings must be an object");if(!Xr(i.firstDay,1,7)||!Xr(i.minimalDays,1,7)||!Array.isArray(i.weekend)||i.weekend.some(e=>!Xr(e,1,7)))throw new or("Invalid week settings");return{firstDay:i.firstDay,minimalDays:i.minimalDays,weekend:Array.from(i.weekend)}}function Xr(i,e,t){return C0(i)&&i>=e&&i<=t}function zL(i,e){return i-e*Math.floor(i/e)}function zn(i,e=2){const t=i<0;let n;return t?n="-"+(""+-i).padStart(e,"0"):n=(""+i).padStart(e,"0"),n}function xa(i){if(!(At(i)||i===null||i===""))return parseInt(i,10)}function ll(i){if(!(At(i)||i===null||i===""))return parseFloat(i)}function vy(i){if(!(At(i)||i===null||i==="")){const e=parseFloat("0."+i)*1e3;return Math.floor(e)}}function by(i,e,t=!1){const n=10**e;return(t?Math.trunc:Math.round)(i*n)/n}function vf(i){return i%4===0&&(i%100!==0||i%400===0)}function bh(i){return vf(i)?366:365}function cp(i,e){const t=zL(e-1,12)+1,n=i+(e-t)/12;return t===2?vf(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function I0(i){let e=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond);return i.year<100&&i.year>=0&&(e=new Date(e),e.setUTCFullYear(i.year,i.month-1,i.day)),+e}function k_(i,e,t){return-_y(yy(i,1,e),t)+e-1}function Yd(i,e=4,t=1){const n=k_(i,e,t),r=k_(i+1,e,t);return(bh(i)-n+r)/7}function F2(i){return i>99?i:i>On.twoDigitCutoffYear?1900+i:2e3+i}function Ux(i,e,t,n=null){const r=new Date(i),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function A0(i,e){let t=parseInt(i,10);Number.isNaN(t)&&(t=0);const n=parseInt(e,10)||0,r=t<0||Object.is(t,-0)?-n:n;return t*60+r}function Zx(i){const e=Number(i);if(typeof i=="boolean"||i===""||Number.isNaN(e))throw new or(`Invalid unit value ${i}`);return e}function hp(i,e){const t={};for(const n in i)if(Zh(i,n)){const r=i[n];if(r==null)continue;t[e(n)]=Zx(r)}return t}function wd(i,e){const t=Math.trunc(Math.abs(i/60)),n=Math.trunc(Math.abs(i%60)),r=i>=0?"+":"-";switch(e){case"short":return`${r}${zn(t,2)}:${zn(n,2)}`;case"narrow":return`${r}${t}${n>0?`:${n}`:""}`;case"techie":return`${r}${zn(t,2)}${zn(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function y0(i){return HL(i,["hour","minute","second","millisecond"])}const YL=["January","February","March","April","May","June","July","August","September","October","November","December"],Vx=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],XL=["J","F","M","A","M","J","J","A","S","O","N","D"];function Wx(i){switch(i){case"narrow":return[...XL];case"short":return[...Vx];case"long":return[...YL];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Hx=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zx=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],KL=["M","T","W","T","F","S","S"];function Yx(i){switch(i){case"narrow":return[...KL];case"short":return[...zx];case"long":return[...Hx];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Xx=["AM","PM"],jL=["Before Christ","Anno Domini"],$L=["BC","AD"],JL=["B","A"];function Kx(i){switch(i){case"narrow":return[...JL];case"short":return[...$L];case"long":return[...jL];default:return null}}function QL(i){return Xx[i.hour<12?0:1]}function qL(i,e){return Yx(e)[i.weekday-1]}function eR(i,e){return Wx(e)[i.month-1]}function tR(i,e){return Kx(e)[i.year<0?0:1]}function nR(i,e,t="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(i)===-1;if(t==="auto"&&s){const u=i==="days";switch(e){case 1:return u?"tomorrow":`next ${r[i][0]}`;case-1:return u?"yesterday":`last ${r[i][0]}`;case 0:return u?"today":`this ${r[i][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=r[i],h=n?l?c[1]:c[2]||c[1]:l?r[i][0]:i;return o?`${a} ${h} ago`:`in ${a} ${h}`}function O_(i,e){let t="";for(const n of i)n.literal?t+=n.val:t+=e(n.val);return t}const iR={D:ap,DD:fx,DDD:gx,DDDD:px,t:mx,tt:Cx,ttt:Ix,tttt:Ax,T:yx,TT:_x,TTT:vx,TTTT:bx,f:xx,ff:Sx,fff:Ex,ffff:Lx,F:wx,FF:Tx,FFF:Mx,FFFF:Rx};class Pi{static create(e,t={}){return new Pi(e,t)}static parseFormat(e){let t=null,n="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||a===t?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,t=a)}return n.length>0&&s.push({literal:r||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(e){return iR[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return zn(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(f,g)=>this.loc.extract(e,f,g),o=f=>e.isOffsetFixed&&e.offset===0&&f.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,f.format):"",a=()=>n?QL(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(f,g)=>n?eR(e,f):s(g?{month:f}:{month:f,day:"numeric"},"month"),c=(f,g)=>n?qL(e,f):s(g?{weekday:f}:{weekday:f,month:"long",day:"numeric"},"weekday"),h=f=>{const g=Pi.macroTokenToFormatOpts(f);return g?this.formatWithSystemDefault(e,g):f},u=f=>n?tR(e,f):s({era:f},"era"),d=f=>{switch(f){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(f)}};return O_(Pi.parseFormat(t),d)}formatDurationFromString(e,t){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>c=>{const h=n(c);return h?this.num(l.get(h),c.length):c},s=Pi.parseFormat(t),o=s.reduce((l,{literal:c,val:h})=>c?l:l.concat(h),[]),a=e.shiftTo(...o.map(n).filter(l=>l));return O_(s,r(a))}}const jx=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function uu(...i){const e=i.reduce((t,n)=>t+n.source,"");return RegExp(`^${e}$`)}function du(...i){return e=>i.reduce(([t,n,r],s)=>{const[o,a,l]=s(e,r);return[{...t,...o},a||n,l]},[{},null,1]).slice(0,2)}function fu(i,...e){if(i==null)return[null,null];for(const[t,n]of e){const r=t.exec(i);if(r)return n(r)}return[null,null]}function $x(...i){return(e,t)=>{const n={};let r;for(r=0;r<i.length;r++)n[i[r]]=xa(e[t+r]);return[n,null,t+r]}}const Jx=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,rR=`(?:${Jx.source}?(?:\\[(${jx.source})\\])?)?`,xy=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Qx=RegExp(`${xy.source}${rR}`),wy=RegExp(`(?:T${Qx.source})?`),sR=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,oR=/(\d{4})-?W(\d\d)(?:-?(\d))?/,aR=/(\d{4})-?(\d{3})/,lR=$x("weekYear","weekNumber","weekDay"),cR=$x("year","ordinal"),hR=/(\d{4})-(\d\d)-(\d\d)/,qx=RegExp(`${xy.source} ?(?:${Jx.source}|(${jx.source}))?`),uR=RegExp(`(?: ${qx.source})?`);function xh(i,e,t){const n=i[e];return At(n)?t:xa(n)}function dR(i,e){return[{year:xh(i,e),month:xh(i,e+1,1),day:xh(i,e+2,1)},null,e+3]}function gu(i,e){return[{hours:xh(i,e,0),minutes:xh(i,e+1,0),seconds:xh(i,e+2,0),milliseconds:vy(i[e+3])},null,e+4]}function bf(i,e){const t=!i[e]&&!i[e+1],n=A0(i[e+1],i[e+2]),r=t?null:ji.instance(n);return[{},r,e+3]}function xf(i,e){const t=i[e]?Jo.create(i[e]):null;return[{},t,e+1]}const fR=RegExp(`^T?${xy.source}$`),gR=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function pR(i){const[e,t,n,r,s,o,a,l,c]=i,h=e[0]==="-",u=l&&l[0]==="-",d=(f,g=!1)=>f!==void 0&&(g||f&&h)?-f:f;return[{years:d(ll(t)),months:d(ll(n)),weeks:d(ll(r)),days:d(ll(s)),hours:d(ll(o)),minutes:d(ll(a)),seconds:d(ll(l),l==="-0"),milliseconds:d(vy(c),u)}]}const mR={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Sy(i,e,t,n,r,s,o){const a={year:e.length===2?F2(xa(e)):xa(e),month:Vx.indexOf(t)+1,day:xa(n),hour:xa(r),minute:xa(s)};return o&&(a.second=xa(o)),i&&(a.weekday=i.length>3?Hx.indexOf(i)+1:zx.indexOf(i)+1),a}const CR=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function IR(i){const[,e,t,n,r,s,o,a,l,c,h,u]=i,d=Sy(e,r,n,t,s,o,a);let f;return l?f=mR[l]:c?f=0:f=A0(h,u),[d,new ji(f)]}function AR(i){return i.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const yR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,_R=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,vR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function U_(i){const[,e,t,n,r,s,o,a]=i;return[Sy(e,r,n,t,s,o,a),ji.utcInstance]}function bR(i){const[,e,t,n,r,s,o,a]=i;return[Sy(e,a,t,n,r,s,o),ji.utcInstance]}const xR=uu(sR,wy),wR=uu(oR,wy),SR=uu(aR,wy),TR=uu(Qx),ew=du(dR,gu,bf,xf),ER=du(lR,gu,bf,xf),MR=du(cR,gu,bf,xf),LR=du(gu,bf,xf);function RR(i){return fu(i,[xR,ew],[wR,ER],[SR,MR],[TR,LR])}function BR(i){return fu(AR(i),[CR,IR])}function PR(i){return fu(i,[yR,U_],[_R,U_],[vR,bR])}function GR(i){return fu(i,[gR,pR])}const DR=du(gu);function FR(i){return fu(i,[fR,DR])}const NR=uu(hR,uR),kR=uu(qx),OR=du(gu,bf,xf);function UR(i){return fu(i,[NR,ew],[kR,OR])}const Z_="Invalid Duration",tw={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},ZR={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...tw},Nr=146097/400,Lc=146097/4800,VR={years:{quarters:4,months:12,weeks:Nr/7,days:Nr,hours:Nr*24,minutes:Nr*24*60,seconds:Nr*24*60*60,milliseconds:Nr*24*60*60*1e3},quarters:{months:3,weeks:Nr/28,days:Nr/4,hours:Nr*24/4,minutes:Nr*24*60/4,seconds:Nr*24*60*60/4,milliseconds:Nr*24*60*60*1e3/4},months:{weeks:Lc/7,days:Lc,hours:Lc*24,minutes:Lc*24*60,seconds:Lc*24*60*60,milliseconds:Lc*24*60*60*1e3},...tw},jl=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],WR=jl.slice(0).reverse();function oa(i,e,t=!1){const n={values:t?e.values:{...i.values,...e.values||{}},loc:i.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||i.conversionAccuracy,matrix:e.matrix||i.matrix};return new jt(n)}function nw(i,e){let t=e.milliseconds??0;for(const n of WR.slice(1))e[n]&&(t+=e[n]*i[n].milliseconds);return t}function V_(i,e){const t=nw(i,e)<0?-1:1;jl.reduceRight((n,r)=>{if(At(e[r]))return n;if(n){const s=e[n]*t,o=i[r][n],a=Math.floor(s/o);e[r]+=a*t,e[n]-=a*o*t}return r},null),jl.reduce((n,r)=>{if(At(e[r]))return n;if(n){const s=e[n]%1;e[n]-=s,e[r]+=s*i[n][r]}return r},null)}function HR(i){const e={};for(const[t,n]of Object.entries(i))n!==0&&(e[t]=n);return e}class jt{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let n=t?VR:ZR;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||un.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return jt.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new or(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new jt({values:hp(e,jt.normalizeUnit),loc:un.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(nc(e))return jt.fromMillis(e);if(jt.isDuration(e))return e;if(typeof e=="object")return jt.fromObject(e);throw new or(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=GR(e);return n?jt.fromObject(n,t):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=FR(e);return n?jt.fromObject(n,t):jt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new or("need to specify a reason the Duration is invalid");const n=e instanceof As?e:new As(e,t);if(On.throwOnInvalid)throw new CL(n);return new jt({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new dx(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Pi.create(this.loc,n).formatDurationFromString(this,e):Z_}toHuman(e={}){if(!this.isValid)return Z_;const t=jl.map(n=>{const r=this.values[n];return At(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=by(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Et.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?nw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e),n={};for(const r of jl)(Zh(t.values,r)||Zh(this.values,r))&&(n[r]=t.get(r)+this.get(r));return oa(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=Zx(e(this.values[n],n));return oa(this,{values:t},!0)}get(e){return this[jt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...hp(e,jt.normalizeUnit)};return oa(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n};return oa(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return V_(this.matrix,e),oa(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=HR(this.normalize().shiftToAll().toObject());return oa(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>jt.normalizeUnit(o));const t={},n={},r=this.toObject();let s;for(const o of jl)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in n)a+=this.matrix[c][o]*n[c],n[c]=0;nc(r[o])&&(a+=r[o]);const l=Math.trunc(a);t[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else nc(r[o])&&(n[o]=r[o]);for(const o in n)n[o]!==0&&(t[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return V_(this.matrix,t),oa(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return oa(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of jl)if(!t(this.values[n],e.values[n]))return!1;return!0}}const Rc="Invalid Interval";function zR(i,e){return!i||!i.isValid?Fn.invalid("missing or invalid start"):!e||!e.isValid?Fn.invalid("missing or invalid end"):e<i?Fn.invalid("end before start",`The end of an interval must be after its start, but you had start=${i.toISO()} and end=${e.toISO()}`):null}class Fn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new or("need to specify a reason the Interval is invalid");const n=e instanceof As?e:new As(e,t);if(On.throwOnInvalid)throw new mL(n);return new Fn({invalid:n})}static fromDateTimes(e,t){const n=Du(e),r=Du(t),s=zR(n,r);return s??new Fn({start:n,end:r})}static after(e,t){const n=jt.fromDurationLike(t),r=Du(e);return Fn.fromDateTimes(r,r.plus(n))}static before(e,t){const n=jt.fromDurationLike(t),r=Du(e);return Fn.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let s,o;try{s=Et.fromISO(n,t),o=s.isValid}catch{o=!1}let a,l;try{a=Et.fromISO(r,t),l=a.isValid}catch{l=!1}if(o&&l)return Fn.fromDateTimes(s,a);if(o){const c=jt.fromISO(r,t);if(c.isValid)return Fn.after(s,c)}else if(l){const c=jt.fromISO(n,t);if(c.isValid)return Fn.before(a,c)}}return Fn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return t?.useLocaleWeeks?r=this.end.reconfigure({locale:n.locale}):r=this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?Fn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Du).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:r}=this,s=0;for(;r<this.e;){const o=t[s]||this.e,a=+o>+this.e?this.e:o;n.push(Fn.fromDateTimes(r,a)),r=a,s+=1}return n}splitBy(e){const t=jt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:n}=this,r=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(t.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(Fn.fromDateTimes(n,s)),n=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Fn.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Fn.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?t=l.time:(t&&+t!=+l.time&&r.push(Fn.fromDateTimes(t,l.time)),t=null);return Fn.merge(r)}difference(...e){return Fn.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Rc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ap,t={}){return this.isValid?Pi.create(this.s.loc.clone(t),e).formatInterval(this):Rc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Rc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Rc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Rc}toFormat(e,{separator:t="  "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Rc}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):jt.invalid(this.invalidReason)}mapEndpoints(e){return Fn.fromDateTimes(e(this.s),e(this.e))}}class $f{static hasDST(e=On.defaultZone){const t=Et.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Jo.isValidZone(e)}static normalizeZone(e){return Ea(e,On.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||un.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||un.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||un.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||un.create(t,n,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||un.create(t,n,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||un.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||un.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return un.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return un.create(t,null,"gregory").eras(e)}static features(){return{relative:kx(),localeWeek:Ox()}}}function W_(i,e){const t=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=t(e)-t(i);return Math.floor(jt.fromMillis(n).as("days"))}function YR(i,e,t){const n=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const h=W_(l,c);return(h-h%7)/7}],["days",W_]],r={},s=i;let o,a;for(const[l,c]of n)t.indexOf(l)>=0&&(o=l,r[l]=c(i,e),a=s.plus(r),a>e?(r[l]--,i=s.plus(r),i>e&&(a=i,r[l]--,i=s.plus(r))):i=a);return[i,r,a,o]}function XR(i,e,t,n){let[r,s,o,a]=YR(i,e,t);const l=e-r,c=t.filter(u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0);c.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const h=jt.fromObject(s,n);return c.length>0?jt.fromMillis(l,n).shiftTo(...c).plus(h):h}const Ty={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},H_={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},KR=Ty.hanidec.replace(/[\[|\]]/g,"").split("");function jR(i){let e=parseInt(i,10);if(isNaN(e)){e="";for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);if(i[t].search(Ty.hanidec)!==-1)e+=KR.indexOf(i[t]);else for(const r in H_){const[s,o]=H_[r];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function rs({numberingSystem:i},e=""){return new RegExp(`${Ty[i||"latn"]}${e}`)}const $R="missing Intl.DateTimeFormat.formatToParts support";function qt(i,e=t=>t){return{regex:i,deser:([t])=>e(jR(t))}}const JR=String.fromCharCode(160),iw=`[ ${JR}]`,rw=new RegExp(iw,"g");function QR(i){return i.replace(/\./g,"\\.?").replace(rw,iw)}function z_(i){return i.replace(/\./g,"").replace(rw," ").toLowerCase()}function ss(i,e){return i===null?null:{regex:RegExp(i.map(QR).join("|")),deser:([t])=>i.findIndex(n=>z_(t)===z_(n))+e}}function Y_(i,e){return{regex:i,deser:([,t,n])=>A0(t,n),groups:e}}function Jf(i){return{regex:i,deser:([e])=>e}}function qR(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function eB(i,e){const t=rs(e),n=rs(e,"{2}"),r=rs(e,"{3}"),s=rs(e,"{4}"),o=rs(e,"{6}"),a=rs(e,"{1,2}"),l=rs(e,"{1,3}"),c=rs(e,"{1,6}"),h=rs(e,"{1,9}"),u=rs(e,"{2,4}"),d=rs(e,"{4,6}"),f=m=>({regex:RegExp(qR(m.val)),deser:([C])=>C,literal:!0}),p=(m=>{if(i.literal)return f(m);switch(m.val){case"G":return ss(e.eras("short"),0);case"GG":return ss(e.eras("long"),0);case"y":return qt(c);case"yy":return qt(u,F2);case"yyyy":return qt(s);case"yyyyy":return qt(d);case"yyyyyy":return qt(o);case"M":return qt(a);case"MM":return qt(n);case"MMM":return ss(e.months("short",!0),1);case"MMMM":return ss(e.months("long",!0),1);case"L":return qt(a);case"LL":return qt(n);case"LLL":return ss(e.months("short",!1),1);case"LLLL":return ss(e.months("long",!1),1);case"d":return qt(a);case"dd":return qt(n);case"o":return qt(l);case"ooo":return qt(r);case"HH":return qt(n);case"H":return qt(a);case"hh":return qt(n);case"h":return qt(a);case"mm":return qt(n);case"m":return qt(a);case"q":return qt(a);case"qq":return qt(n);case"s":return qt(a);case"ss":return qt(n);case"S":return qt(l);case"SSS":return qt(r);case"u":return Jf(h);case"uu":return Jf(a);case"uuu":return qt(t);case"a":return ss(e.meridiems(),0);case"kkkk":return qt(s);case"kk":return qt(u,F2);case"W":return qt(a);case"WW":return qt(n);case"E":case"c":return qt(t);case"EEE":return ss(e.weekdays("short",!1),1);case"EEEE":return ss(e.weekdays("long",!1),1);case"ccc":return ss(e.weekdays("short",!0),1);case"cccc":return ss(e.weekdays("long",!0),1);case"Z":case"ZZ":return Y_(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return Y_(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return Jf(/[a-z_+-/]{1,256}?/i);case" ":return Jf(/[^\S\n\r]/);default:return f(m)}})(i)||{invalidReason:$R};return p.token=i,p}const tB={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function nB(i,e,t){const{type:n,value:r}=i;if(n==="literal"){const l=/^\s+$/.test(r);return{literal:!l,val:l?" ":r}}const s=e[n];let o=n;n==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=tB[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function iB(i){return[`^${i.map(t=>t.regex).reduce((t,n)=>`${t}(${n.source})`,"")}$`,i]}function rB(i,e,t){const n=i.match(e);if(n){const r={};let s=1;for(const o in t)if(Zh(t,o)){const a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,r]}else return[n,{}]}function sB(i){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,n;return At(i.z)||(t=Jo.create(i.z)),At(i.Z)||(t||(t=new ji(i.Z)),n=i.Z),At(i.q)||(i.M=(i.q-1)*3+1),At(i.h)||(i.h<12&&i.a===1?i.h+=12:i.h===12&&i.a===0&&(i.h=0)),i.G===0&&i.y&&(i.y=-i.y),At(i.u)||(i.S=vy(i.u)),[Object.keys(i).reduce((s,o)=>{const a=e(o);return a&&(s[a]=i[o]),s},{}),t,n]}let dm=null;function oB(){return dm||(dm=Et.fromMillis(1555555555555)),dm}function aB(i,e){if(i.literal)return i;const t=Pi.macroTokenToFormatOpts(i.val),n=aw(t,e);return n==null||n.includes(void 0)?i:n}function sw(i,e){return Array.prototype.concat(...i.map(t=>aB(t,e)))}function ow(i,e,t){const n=sw(Pi.parseFormat(t),i),r=n.map(o=>eB(o,i)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[o,a]=iB(r),l=RegExp(o,"i"),[c,h]=rB(e,l,a),[u,d,f]=h?sB(h):[null,null,void 0];if(Zh(h,"a")&&Zh(h,"H"))throw new dh("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:c,matches:h,result:u,zone:d,specificOffset:f}}}function lB(i,e,t){const{result:n,zone:r,specificOffset:s,invalidReason:o}=ow(i,e,t);return[n,r,s,o]}function aw(i,e){if(!i)return null;const n=Pi.create(e,i).dtFormatter(oB()),r=n.formatToParts(),s=n.resolvedOptions();return r.map(o=>nB(o,i,s))}const fm="Invalid DateTime",X_=864e13;function Qf(i){return new As("unsupported zone",`the zone "${i.name}" is not supported`)}function gm(i){return i.weekData===null&&(i.weekData=lp(i.c)),i.weekData}function pm(i){return i.localWeekData===null&&(i.localWeekData=lp(i.c,i.loc.getMinDaysInFirstWeek(),i.loc.getStartOfWeek())),i.localWeekData}function cl(i,e){const t={ts:i.ts,zone:i.zone,c:i.c,o:i.o,loc:i.loc,invalid:i.invalid};return new Et({...t,...e,old:t})}function lw(i,e,t){let n=i-e*60*1e3;const r=t.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const s=t.offset(n);return r===s?[n,r]:[i-Math.min(r,s)*60*1e3,Math.max(r,s)]}function qf(i,e){i+=e*60*1e3;const t=new Date(i);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function u1(i,e,t){return lw(I0(i),e,t)}function K_(i,e){const t=i.o,n=i.c.year+Math.trunc(e.years),r=i.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...i.c,year:n,month:r,day:Math.min(i.c.day,cp(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=jt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=I0(s);let[l,c]=lw(a,t,i.zone);return o!==0&&(l+=o,c=i.zone.offset(l)),{ts:l,o:c}}function Gu(i,e,t,n,r,s){const{setZone:o,zone:a}=t;if(i&&Object.keys(i).length!==0||e){const l=e||a,c=Et.fromObject(i,{...t,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return Et.invalid(new As("unparsable",`the input "${r}" can't be parsed as ${n}`))}function eg(i,e,t=!0){return i.isValid?Pi.create(un.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(i,e):null}function mm(i,e){const t=i.c.year>9999||i.c.year<0;let n="";return t&&i.c.year>=0&&(n+="+"),n+=zn(i.c.year,t?6:4),e?(n+="-",n+=zn(i.c.month),n+="-",n+=zn(i.c.day)):(n+=zn(i.c.month),n+=zn(i.c.day)),n}function j_(i,e,t,n,r,s){let o=zn(i.c.hour);return e?(o+=":",o+=zn(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=":")):o+=zn(i.c.minute),(i.c.millisecond!==0||i.c.second!==0||!t)&&(o+=zn(i.c.second),(i.c.millisecond!==0||!n)&&(o+=".",o+=zn(i.c.millisecond,3))),r&&(i.isOffsetFixed&&i.offset===0&&!s?o+="Z":i.o<0?(o+="-",o+=zn(Math.trunc(-i.o/60)),o+=":",o+=zn(Math.trunc(-i.o%60))):(o+="+",o+=zn(Math.trunc(i.o/60)),o+=":",o+=zn(Math.trunc(i.o%60)))),s&&(o+="["+i.zone.ianaName+"]"),o}const cw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},cB={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hB={ordinal:1,hour:0,minute:0,second:0,millisecond:0},hw=["year","month","day","hour","minute","second","millisecond"],uB=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dB=["year","ordinal","hour","minute","second","millisecond"];function fB(i){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[i.toLowerCase()];if(!e)throw new dx(i);return e}function $_(i){switch(i.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fB(i)}}function J_(i,e){const t=Ea(e.zone,On.defaultZone),n=un.fromObject(e),r=On.now();let s,o;if(At(i.year))s=r;else{for(const c of hw)At(i[c])&&(i[c]=cw[c]);const a=Fx(i)||Nx(i);if(a)return Et.invalid(a);const l=t.offset(r);[s,o]=u1(i,l,t)}return new Et({ts:s,zone:t,loc:n,o})}function Q_(i,e,t){const n=At(t.round)?!0:t.round,r=(o,a)=>(o=by(o,n||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(i,o)?0:e.startOf(o).diff(i.startOf(o),o).get(o):e.diff(i,o).get(o);if(t.unit)return r(s(t.unit),t.unit);for(const o of t.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(i>e?-0:0,t.units[t.units.length-1])}function q_(i){let e={},t;return i.length>0&&typeof i[i.length-1]=="object"?(e=i[i.length-1],t=Array.from(i).slice(0,i.length-1)):t=Array.from(i),[e,t]}class Et{constructor(e){const t=e.zone||On.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new As("invalid input"):null)||(t.isValid?null:Qf(t));this.ts=At(e.ts)?On.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,s]=[e.old.c,e.old.o];else{const a=t.offset(this.ts);r=qf(this.ts,a),n=Number.isNaN(r.year)?new As("invalid input"):null,r=n?null:r,s=n?null:a}this._zone=t,this.loc=e.loc||un.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Et({})}static local(){const[e,t]=q_(arguments),[n,r,s,o,a,l,c]=t;return J_({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,t]=q_(arguments),[n,r,s,o,a,l,c]=t;return e.zone=ji.utcInstance,J_({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,t={}){const n=VL(e)?e.valueOf():NaN;if(Number.isNaN(n))return Et.invalid("invalid input");const r=Ea(t.zone,On.defaultZone);return r.isValid?new Et({ts:n,zone:r,loc:un.fromObject(t)}):Et.invalid(Qf(r))}static fromMillis(e,t={}){if(nc(e))return e<-X_||e>X_?Et.invalid("Timestamp out of range"):new Et({ts:e,zone:Ea(t.zone,On.defaultZone),loc:un.fromObject(t)});throw new or(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(nc(e))return new Et({ts:e*1e3,zone:Ea(t.zone,On.defaultZone),loc:un.fromObject(t)});throw new or("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Ea(t.zone,On.defaultZone);if(!n.isValid)return Et.invalid(Qf(n));const r=un.fromObject(t),s=hp(e,$_),{minDaysInFirstWeek:o,startOfWeek:a}=F_(s,r),l=On.now(),c=At(t.specificOffset)?n.offset(l):t.specificOffset,h=!At(s.ordinal),u=!At(s.year),d=!At(s.month)||!At(s.day),f=u||d,g=s.weekYear||s.weekNumber;if((f||h)&&g)throw new dh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&h)throw new dh("Can't mix ordinal dates with month/day");const p=g||s.weekday&&!f;let m,C,A=qf(l,c);p?(m=uB,C=cB,A=lp(A,o,a)):h?(m=dB,C=hB,A=um(A)):(m=hw,C=cw);let I=!1;for(const v of m){const B=s[v];At(B)?I?s[v]=C[v]:s[v]=A[v]:I=!0}const y=p?OL(s,o,a):h?UL(s):Fx(s),x=y||Nx(s);if(x)return Et.invalid(x);const T=p?G_(s,o,a):h?D_(s):s,[S,M]=u1(T,c,n),_=new Et({ts:S,zone:n,o:M,loc:r});return s.weekday&&f&&e.weekday!==_.weekday?Et.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${_.toISO()}`):_}static fromISO(e,t={}){const[n,r]=RR(e);return Gu(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=BR(e);return Gu(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=PR(e);return Gu(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(At(e)||At(t))throw new or("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,o=un.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,c,h]=lB(o,e,t);return h?Et.invalid(h):Gu(a,l,n,`format ${t}`,e,c)}static fromString(e,t,n={}){return Et.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=UR(e);return Gu(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new or("need to specify a reason the DateTime is invalid");const n=e instanceof As?e:new As(e,t);if(On.throwOnInvalid)throw new pL(n);return new Et({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=aw(e,un.fromObject(t));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,t={}){return sw(Pi.parseFormat(e),un.fromObject(t)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?gm(this).weekYear:NaN}get weekNumber(){return this.isValid?gm(this).weekNumber:NaN}get weekday(){return this.isValid?gm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?pm(this).weekday:NaN}get localWeekNumber(){return this.isValid?pm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?pm(this).weekYear:NaN}get ordinal(){return this.isValid?um(this.c).ordinal:NaN}get monthShort(){return this.isValid?$f.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?$f.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?$f.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?$f.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=I0(this.c),r=this.zone.offset(n-e),s=this.zone.offset(n+e),o=this.zone.offset(n-r*t),a=this.zone.offset(n-s*t);if(o===a)return[this];const l=n-o*t,c=n-a*t,h=qf(l,o),u=qf(c,a);return h.hour===u.hour&&h.minute===u.minute&&h.second===u.second&&h.millisecond===u.millisecond?[cl(this,{ts:l}),cl(this,{ts:c})]:[this]}get isInLeapYear(){return vf(this.year)}get daysInMonth(){return cp(this.year,this.month)}get daysInYear(){return this.isValid?bh(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yd(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Yd(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=Pi.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(ji.instance(e),t)}toLocal(){return this.setZone(On.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=Ea(e,On.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const s=e.offset(this.ts),o=this.toObject();[r]=u1(o,s,e)}return cl(this,{ts:r,zone:e})}else return Et.invalid(Qf(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return cl(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=hp(e,$_),{minDaysInFirstWeek:n,startOfWeek:r}=F_(t,this.loc),s=!At(t.weekYear)||!At(t.weekNumber)||!At(t.weekday),o=!At(t.ordinal),a=!At(t.year),l=!At(t.month)||!At(t.day),c=a||l,h=t.weekYear||t.weekNumber;if((c||o)&&h)throw new dh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new dh("Can't mix ordinal dates with month/day");let u;s?u=G_({...lp(this.c,n,r),...t},n,r):At(t.ordinal)?(u={...this.toObject(),...t},At(t.day)&&(u.day=Math.min(cp(u.year,u.month),u.day))):u=D_({...um(this.c),...t});const[d,f]=u1(u,this.o,this.zone);return cl(this,{ts:d,o:f})}plus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e);return cl(this,K_(this,t))}minus(e){if(!this.isValid)return this;const t=jt.fromDurationLike(e).negate();return cl(this,K_(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=jt.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(r==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Pi.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):fm}toLocaleString(e=ap,t={}){return this.isValid?Pi.create(this.loc.clone(t),e).formatDateTime(this):fm}toLocaleParts(e={}){return this.isValid?Pi.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=mm(this,o);return a+="T",a+=j_(this,o,t,n,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?mm(this,e==="extended"):null}toISOWeekDate(){return eg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+j_(this,o==="extended",t,e,n,s):null}toRFC2822(){return eg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return eg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?mm(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),eg(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():fm}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return jt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=WL(t).map(jt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=XR(a,l,s,r);return o?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(Et.now(),e,t)}until(e){return this.isValid?Fn.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,n)<=r&&r<=s.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Et.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),Q_(t,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?Q_(e.base||Et.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Et.isDateTime))throw new or("min requires all arguments be DateTimes");return N_(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Et.isDateTime))throw new or("max requires all arguments be DateTimes");return N_(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:s=null}=n,o=un.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return ow(o,e,t)}static fromStringExplain(e,t,n={}){return Et.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return ap}static get DATE_MED(){return fx}static get DATE_MED_WITH_WEEKDAY(){return IL}static get DATE_FULL(){return gx}static get DATE_HUGE(){return px}static get TIME_SIMPLE(){return mx}static get TIME_WITH_SECONDS(){return Cx}static get TIME_WITH_SHORT_OFFSET(){return Ix}static get TIME_WITH_LONG_OFFSET(){return Ax}static get TIME_24_SIMPLE(){return yx}static get TIME_24_WITH_SECONDS(){return _x}static get TIME_24_WITH_SHORT_OFFSET(){return vx}static get TIME_24_WITH_LONG_OFFSET(){return bx}static get DATETIME_SHORT(){return xx}static get DATETIME_SHORT_WITH_SECONDS(){return wx}static get DATETIME_MED(){return Sx}static get DATETIME_MED_WITH_SECONDS(){return Tx}static get DATETIME_MED_WITH_WEEKDAY(){return AL}static get DATETIME_FULL(){return Ex}static get DATETIME_FULL_WITH_SECONDS(){return Mx}static get DATETIME_HUGE(){return Lx}static get DATETIME_HUGE_WITH_SECONDS(){return Rx}}function Du(i){if(Et.isDateTime(i))return i;if(i&&i.valueOf&&nc(i.valueOf()))return Et.fromJSDate(i);if(i&&typeof i=="object")return Et.fromObject(i);throw new or(`Unknown datetime argument: ${i}, of type ${typeof i}`)}const Sn=vi;function gB(i){let e=0;for(;i;){const t=window.getComputedStyle(i).position==="sticky";t&&(i.style.position="relative"),e+=i.offsetTop,t&&(i.style.position=""),i=i.offsetParent}return e}function Ey(i,{accuracy:e=10,multiplier:t=.05}={}){const n=Sn(i);let r=i,s,o=!1;const a=()=>{let l=n();if(n(l+(r-l)*t),Math.round(l*e)===Math.round(r*e)){n(r),o=!1;return}s=requestAnimationFrame(a)};return mt(()=>{an(()=>{cancelAnimationFrame(s)})}),[n,l=>{r=l,o||(s=requestAnimationFrame(a),o=!0)},l=>{r=l,n(l)}]}function e5(i,e,t){return Math.min(Math.max((t-i)/(e-i),0),1)}function pB(i,e,t){if(i<0||i>1)throw new Error("Value must be between 0 and 1");return e+(t-e)*i}function qi(i,e,t){return Math.min(Math.max(i,e),t)}function Gi(i,e){const t=Sn({y:0,x:0,height:0,width:0,refresh:()=>{throw new Error("Page box not defined yet")}});function n(){let r=i();const s=r.getBoundingClientRect();let o={y:gB(r),x:s.x,height:s.height,width:s.width,refresh:n};e&&(o=e(o)),t(o)}return mt(Ji(zd,()=>{n()},{defer:!0})),tr(()=>{window.addEventListener("resize",n),n(),an(()=>{window.removeEventListener("resize",n)})}),t}function uw(){const i=Sn(!1);return mt(()=>{if(document.fonts.status==="loaded"){i(!0);return}document.fonts.ready.then(()=>{i(!0)})}),i}function My(){return ro}function _0(i,e=Gi(i)){const t=Vn;return tr(()=>{e().refresh()}),pe(()=>t()+dn().height>e().y&&t()<e().y+e().height)}function Qc(i){const e=ux;let t=Object.keys(i).reduce((n,r)=>{const s=Math.abs(e()-n),o=Math.abs(e()-Number(r));return s<o?n:r},0);return i[t]}const pre=typeof window>"u"?!1:/^((?!chrome|chromium).)*safari/i.test(navigator.userAgent);function mB(i){const e={};for(let[t,n]of Object.entries(i))typeof n!="object"&&(e[t]=n);return e}function mre(i,e){const[t,n,r]=i.toLocaleString("en-US",{timeZone:e,hour12:!1}).split(" ")[1].split(":");return`${parseInt(t,10).toString()?.padStart(2,"0")??"00"}:${n?.padStart(2,"0")??"00"}:${r?.padStart(2,"0")??"00"}`}function $l(i){return i*(dn().width/Qc({[pi.XL]:1440,[pi.MD]:390}))}function t5(i,e,t=100,n=!1){return`${n?"https://format-3.co/_vercel/image?url=":""}${i}${n?"&":"?"}w=${e}&q=${t}`}function Cre(i){const e=document.createRange();let t=0;const n=[];for(const r of i.childNodes)if(r.nodeType===Node.TEXT_NODE){const s=r.textContent;for(let o=0;o<s.length;o++){e.setStart(r,o),e.setEnd(r,o+1);const{y:a}=e.getBoundingClientRect();a!==t&&(t=a,n.push("")),n[n.length-1]+=s[o]}}else if(r.nodeType===Node.ELEMENT_NODE){const{y:s}=r.getBoundingClientRect();(s!==t||typeof n[n.length-1][0]=="string")&&(t=s,n.push([])),n[n.length-1].push(r)}return n}function CB(i,e){return e>=0?i[e%i.length]:i[(i.length+e%i.length)%i.length]}function Ire(i){const e=new gL(i);let t=-1;const n=Sn(i);function r(s){e.update(s),t=requestAnimationFrame(r)}return e.onUpdate(s=>{n({...s})}),tr(()=>{an(()=>{cancelAnimationFrame(t)})}),n.to=(s,o)=>(t===-1&&(t=requestAnimationFrame(r)),e.to(s,o)),n}function Are(i){return Et.fromFormat(i,"yyyy-MM-dd").toFormat("cccc, dd LLLL yyyy")}function dw(i){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)}const ks=Sn(!1),N2=Sn(!1);let n5;function IB(){if(!ks()){N2(!0),setTimeout(()=>{ks(!0),clearTimeout(n5)});return}ks(!1),n5=setTimeout(()=>N2(!1),1e3)}const fw=Sn(!1),wf=Cy,gw="$FETCH",pw=ta({$type:gw}),Ly=()=>Ts(pw),AB=$M,yB=ox;function yre(){return UM()}const _B="Location",i5="content-type";function Ws(i,e={}){let t=e;typeof e=="number"&&(t={status:e});let n=new Headers(t.headers);return n.has(i5)||n.set(i5,"application/json; charset=utf-8"),new Response(JSON.stringify(i),{...t,headers:n})}const vB=new Set([204,301,302,303,307,308]);function bB(i){return i&&i instanceof Response&&vB.has(i.status)}const r5=new Set,Cm=new Map;function Es(i,e={}){const t=yB(),n=Ly();function r(c){bB(c)&&gy(()=>{let h=c.headers.get(_B);h&&h.startsWith("/")?t(h,{replace:!0}):h&&(window.location.href=h)})}const s=async c=>{try{let h=n,u=await i.call(h,c,h);if(u instanceof Response){rp||setTimeout(()=>r(u),0);return}return u}catch(h){if(h instanceof Response){setTimeout(()=>r(h),0);return}throw h}};function o(c){return(h,u)=>{if(u.refetching&&u.refetching!==!0&&!wB(h,u.refetching)&&u.value)return u.value;if(h===!0)return c(h,u);let d=Cm.get(h);return d||(d=c(h,u),Cm.set(h,d),d.finally(()=>Cm.delete(h)))}}const[a,{refetch:l}]=fy(e.key||!0,o(s),{storage:c=>xB(c,e.reconcileOptions),...e});return r5.add(l),an(()=>r5.delete(l)),a}function xB(i,e){const[t,n]=gM({value:i});return[()=>t.value,r=>{const s=Vt(()=>dc(t.value));return typeof r=="function"&&(r=r(s)),n("value",pM(r,e)),t.value}]}function wB(i,e){return mw(s5(i),s5(e))}function s5(i){return Array.isArray(i)?i:[i]}function mw(i,e){return i===e?!0:typeof i!=typeof e||i.length&&!e.length?!1:i&&e&&typeof i=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!mw(i[t],e[t])):!1}const SB=wt('<div><div><p id="error-message"></p><button id="reset-errors">Clear errors and retry</button><pre>');function TB(i){return F(DE,{fallback:(e,t)=>F(Ac,{get when(){return!i.fallback},get fallback(){return pe(()=>!!i.fallback)()&&i.fallback(e,t)},get children(){return F(EB,{error:e})}}),get children(){return i.children}})}function EB(i){return mt(()=>console.error(i.error)),console.log(i.error),(()=>{const e=dt(SB),t=e.firstChild,n=t.firstChild,r=n.nextSibling,s=r.nextSibling;return e.style.setProperty("padding","16px"),t.style.setProperty("background-color","rgba(252, 165, 165)"),t.style.setProperty("color","rgb(153, 27, 27)"),t.style.setProperty("border-radius","5px"),t.style.setProperty("overflow","scroll"),t.style.setProperty("padding","16px"),t.style.setProperty("margin-bottom","8px"),n.style.setProperty("font-weight","bold"),Un(n,()=>i.error.message),K9(r,"click",X9,!0),r.style.setProperty("color","rgba(252, 165, 165)"),r.style.setProperty("background-color","rgb(153, 27, 27)"),r.style.setProperty("border-radius","5px"),r.style.setProperty("padding","4px 8px"),s.style.setProperty("margin-top","8px"),s.style.setProperty("width","100%"),Un(s,()=>i.error.stack),Cn(),e})()}yf(["click"]);const MB=!1,LB=!1;function RB(){return LB}function BB(){return MB}function PB(){return Ly(),[F(iM,{}),F(nM,{get children(){return[F(RB,{}),pe(()=>rp)]}})]}function GB(){return[F(BB,{}),F(PB,{})]}function DB(i){return ln(document.documentElement,i,!1,!0),i.children}function FB(i){return ln(document.head,i,!1,!0),i.children}function NB(i){{let e=f0(()=>i.children);return ln(document.body,i,!1,!0),Un(document.body,()=>{let t=e();if(t){if(Array.isArray(t)){let n=t.filter(r=>!!r);return n.length?n:null}return t}return null},null,[...document.body.childNodes]),document.body}}const o5=Object.values(Object.assign({}))[0];o5&&o5.default;function Cw(i,e){return function(){return i.apply(e,arguments)}}const{toString:kB}=Object.prototype,{getPrototypeOf:Ry}=Object,v0=(i=>e=>{const t=kB.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),fo=i=>(i=i.toLowerCase(),e=>v0(e)===i),b0=i=>e=>typeof e===i,{isArray:pu}=Array,Xd=b0("undefined");function OB(i){return i!==null&&!Xd(i)&&i.constructor!==null&&!Xd(i.constructor)&&es(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Iw=fo("ArrayBuffer");function UB(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&Iw(i.buffer),e}const ZB=b0("string"),es=b0("function"),Aw=b0("number"),x0=i=>i!==null&&typeof i=="object",VB=i=>i===!0||i===!1,d1=i=>{if(v0(i)!=="object")return!1;const e=Ry(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},WB=fo("Date"),HB=fo("File"),zB=fo("Blob"),YB=fo("FileList"),XB=i=>x0(i)&&es(i.pipe),KB=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||es(i.append)&&((e=v0(i))==="formdata"||e==="object"&&es(i.toString)&&i.toString()==="[object FormData]"))},jB=fo("URLSearchParams"),$B=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sf(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),pu(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{const s=t?Object.getOwnPropertyNames(i):Object.keys(i),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,i[a],a,i)}}function yw(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const _w=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),vw=i=>!Xd(i)&&i!==_w;function k2(){const{caseless:i}=vw(this)&&this||{},e={},t=(n,r)=>{const s=i&&yw(e,r)||r;d1(e[s])&&d1(n)?e[s]=k2(e[s],n):d1(n)?e[s]=k2({},n):pu(n)?e[s]=n.slice():e[s]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Sf(arguments[n],t);return e}const JB=(i,e,t,{allOwnKeys:n}={})=>(Sf(e,(r,s)=>{t&&es(r)?i[s]=Cw(r,t):i[s]=r},{allOwnKeys:n}),i),QB=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),qB=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},eP=(i,e,t,n)=>{let r,s,o;const a={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)o=r[s],(!n||n(o,i,e))&&!a[o]&&(e[o]=i[o],a[o]=!0);i=t!==!1&&Ry(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},tP=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},nP=i=>{if(!i)return null;if(pu(i))return i;let e=i.length;if(!Aw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},iP=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Ry(Uint8Array)),rP=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=n.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},sP=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},oP=fo("HTMLFormElement"),aP=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),a5=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),lP=fo("RegExp"),bw=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};Sf(t,(r,s)=>{let o;(o=e(r,s,i))!==!1&&(n[s]=o||r)}),Object.defineProperties(i,n)},cP=i=>{bw(i,(e,t)=>{if(es(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(es(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},hP=(i,e)=>{const t={},n=r=>{r.forEach(s=>{t[s]=!0})};return pu(i)?n(i):n(String(i).split(e)),t},uP=()=>{},dP=(i,e)=>(i=+i,Number.isFinite(i)?i:e),Im="abcdefghijklmnopqrstuvwxyz",l5="0123456789",xw={DIGIT:l5,ALPHA:Im,ALPHA_DIGIT:Im+Im.toUpperCase()+l5},fP=(i=16,e=xw.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function gP(i){return!!(i&&es(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const pP=i=>{const e=new Array(10),t=(n,r)=>{if(x0(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const s=pu(n)?[]:{};return Sf(n,(o,a)=>{const l=t(o,r+1);!Xd(l)&&(s[a]=l)}),e[r]=void 0,s}}return n};return t(i,0)},mP=fo("AsyncFunction"),CP=i=>i&&(x0(i)||es(i))&&es(i.then)&&es(i.catch),he={isArray:pu,isArrayBuffer:Iw,isBuffer:OB,isFormData:KB,isArrayBufferView:UB,isString:ZB,isNumber:Aw,isBoolean:VB,isObject:x0,isPlainObject:d1,isUndefined:Xd,isDate:WB,isFile:HB,isBlob:zB,isRegExp:lP,isFunction:es,isStream:XB,isURLSearchParams:jB,isTypedArray:iP,isFileList:YB,forEach:Sf,merge:k2,extend:JB,trim:$B,stripBOM:QB,inherits:qB,toFlatObject:eP,kindOf:v0,kindOfTest:fo,endsWith:tP,toArray:nP,forEachEntry:rP,matchAll:sP,isHTMLForm:oP,hasOwnProperty:a5,hasOwnProp:a5,reduceDescriptors:bw,freezeMethods:cP,toObjectSet:hP,toCamelCase:aP,noop:uP,toFiniteNumber:dP,findKey:yw,global:_w,isContextDefined:vw,ALPHABET:xw,generateString:fP,isSpecCompliantForm:gP,toJSONObject:pP,isAsyncFn:mP,isThenable:CP};function Yt(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r)}he.inherits(Yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:he.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ww=Yt.prototype,Sw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Sw[i]={value:i}});Object.defineProperties(Yt,Sw);Object.defineProperty(ww,"isAxiosError",{value:!0});Yt.from=(i,e,t,n,r,s)=>{const o=Object.create(ww);return he.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Yt.call(o,i.message,e,t,n,r),o.cause=i,o.name=i.name,s&&Object.assign(o,s),o};const IP=null;function O2(i){return he.isPlainObject(i)||he.isArray(i)}function Tw(i){return he.endsWith(i,"[]")?i.slice(0,-2):i}function c5(i,e,t){return i?i.concat(e).map(function(r,s){return r=Tw(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function AP(i){return he.isArray(i)&&!i.some(O2)}const yP=he.toFlatObject(he,{},null,function(e){return/^is[A-Z]/.test(e)});function w0(i,e,t){if(!he.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=he.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!he.isUndefined(m[p])});const n=t.metaTokens,r=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&he.isSpecCompliantForm(e);if(!he.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(he.isDate(g))return g.toISOString();if(!l&&he.isBlob(g))throw new Yt("Blob is not supported. Use a Buffer instead.");return he.isArrayBuffer(g)||he.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,p,m){let C=g;if(g&&!m&&typeof g=="object"){if(he.endsWith(p,"{}"))p=n?p:p.slice(0,-2),g=JSON.stringify(g);else if(he.isArray(g)&&AP(g)||(he.isFileList(g)||he.endsWith(p,"[]"))&&(C=he.toArray(g)))return p=Tw(p),C.forEach(function(I,y){!(he.isUndefined(I)||I===null)&&e.append(o===!0?c5([p],y,s):o===null?p:p+"[]",c(I))}),!1}return O2(g)?!0:(e.append(c5(m,p,s),c(g)),!1)}const u=[],d=Object.assign(yP,{defaultVisitor:h,convertValue:c,isVisitable:O2});function f(g,p){if(!he.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(g),he.forEach(g,function(C,A){(!(he.isUndefined(C)||C===null)&&r.call(e,C,he.isString(A)?A.trim():A,p,d))===!0&&f(C,p?p.concat(A):[A])}),u.pop()}}if(!he.isObject(i))throw new TypeError("data must be an object");return f(i),e}function h5(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function By(i,e){this._pairs=[],i&&w0(i,this,e)}const Ew=By.prototype;Ew.append=function(e,t){this._pairs.push([e,t])};Ew.toString=function(e){const t=e?function(n){return e.call(this,n,h5)}:h5;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function _P(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mw(i,e,t){if(!e)return i;const n=t&&t.encode||_P,r=t&&t.serialize;let s;if(r?s=r(e,t):s=he.isURLSearchParams(e)?e.toString():new By(e,t).toString(n),s){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}let vP=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){he.forEach(this.handlers,function(n){n!==null&&e(n)})}};const u5=vP,Lw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bP=typeof URLSearchParams<"u"?URLSearchParams:By,xP=typeof FormData<"u"?FormData:null,wP=typeof Blob<"u"?Blob:null,SP=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),TP=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Xs={isBrowser:!0,classes:{URLSearchParams:bP,FormData:xP,Blob:wP},isStandardBrowserEnv:SP,isStandardBrowserWebWorkerEnv:TP,protocols:["http","https","file","blob","url","data"]};function EP(i,e){return w0(i,new Xs.classes.URLSearchParams,Object.assign({visitor:function(t,n,r,s){return Xs.isNode&&he.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function MP(i){return he.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function LP(i){const e={},t=Object.keys(i);let n;const r=t.length;let s;for(n=0;n<r;n++)s=t[n],e[s]=i[s];return e}function Rw(i){function e(t,n,r,s){let o=t[s++];const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&he.isArray(r)?r.length:o,l?(he.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):((!r[o]||!he.isObject(r[o]))&&(r[o]=[]),e(t,n,r[o],s)&&he.isArray(r[o])&&(r[o]=LP(r[o])),!a)}if(he.isFormData(i)&&he.isFunction(i.entries)){const t={};return he.forEachEntry(i,(n,r)=>{e(MP(n),r,t,0)}),t}return null}function RP(i,e,t){if(he.isString(i))try{return(e||JSON.parse)(i),he.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const Py={transitional:Lw,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=he.isObject(e);if(s&&he.isHTMLForm(e)&&(e=new FormData(e)),he.isFormData(e))return r&&r?JSON.stringify(Rw(e)):e;if(he.isArrayBuffer(e)||he.isBuffer(e)||he.isStream(e)||he.isFile(e)||he.isBlob(e))return e;if(he.isArrayBufferView(e))return e.buffer;if(he.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return EP(e,this.formSerializer).toString();if((a=he.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return w0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),RP(e)):e}],transformResponse:[function(e){const t=this.transitional||Py.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&he.isString(e)&&(n&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Yt.from(a,Yt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xs.classes.FormData,Blob:Xs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};he.forEach(["delete","get","head","post","put","patch"],i=>{Py.headers[i]={}});const Gy=Py,BP=he.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PP=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!t||e[t]&&BP[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},d5=Symbol("internals");function Fu(i){return i&&String(i).trim().toLowerCase()}function f1(i){return i===!1||i==null?i:he.isArray(i)?i.map(f1):String(i)}function GP(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const DP=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Am(i,e,t,n,r){if(he.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!he.isString(e)){if(he.isString(n))return e.indexOf(n)!==-1;if(he.isRegExp(n))return n.test(e)}}function FP(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function NP(i,e){const t=he.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,s,o){return this[n].call(this,e,r,s,o)},configurable:!0})})}let S0=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(a,l,c){const h=Fu(l);if(!h)throw new Error("header name must be a non-empty string");const u=he.findKey(r,h);(!u||r[u]===void 0||c===!0||c===void 0&&r[u]!==!1)&&(r[u||l]=f1(a))}const o=(a,l)=>he.forEach(a,(c,h)=>s(c,h,l));return he.isPlainObject(e)||e instanceof this.constructor?o(e,t):he.isString(e)&&(e=e.trim())&&!DP(e)?o(PP(e),t):e!=null&&s(t,e,n),this}get(e,t){if(e=Fu(e),e){const n=he.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return GP(r);if(he.isFunction(t))return t.call(this,r,n);if(he.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Fu(e),e){const n=he.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Am(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function s(o){if(o=Fu(o),o){const a=he.findKey(n,o);a&&(!t||Am(n,n[a],a,t))&&(delete n[a],r=!0)}}return he.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];(!e||Am(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return he.forEach(this,(r,s)=>{const o=he.findKey(n,s);if(o){t[o]=f1(r),delete t[s];return}const a=e?FP(s):String(s).trim();a!==s&&delete t[s],t[a]=f1(r),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return he.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&he.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[d5]=this[d5]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Fu(o);n[a]||(NP(r,o),n[a]=!0)}return he.isArray(e)?e.forEach(s):s(e),this}};S0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);he.reduceDescriptors(S0.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});he.freezeMethods(S0);const Yo=S0;function ym(i,e){const t=this||Gy,n=e||t,r=Yo.from(n.headers);let s=n.data;return he.forEach(i,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Bw(i){return!!(i&&i.__CANCEL__)}function Tf(i,e,t){Yt.call(this,i??"canceled",Yt.ERR_CANCELED,e,t),this.name="CanceledError"}he.inherits(Tf,Yt,{__CANCEL__:!0});function kP(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new Yt("Request failed with status code "+t.status,[Yt.ERR_BAD_REQUEST,Yt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const OP=Xs.isStandardBrowserEnv?function(){return{write:function(t,n,r,s,o,a){const l=[];l.push(t+"="+encodeURIComponent(n)),he.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),he.isString(s)&&l.push("path="+s),he.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){const n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function UP(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function ZP(i,e){return e?i.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):i}function Pw(i,e){return i&&!UP(e)?ZP(i,e):e}const VP=Xs.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(o){const a=he.isString(o)?r(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function WP(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function HP(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=n[s];o||(o=c),t[r]=l,n[r]=c;let u=s,d=0;for(;u!==r;)d+=t[u++],u=u%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),c-o<e)return;const f=h&&c-h;return f?Math.round(d*1e3/f):void 0}}function f5(i,e){let t=0;const n=HP(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-t,l=n(a),c=s<=o;t=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:r};h[e?"download":"upload"]=!0,i(h)}}const zP=typeof XMLHttpRequest<"u",YP=zP&&function(i){return new Promise(function(t,n){let r=i.data;const s=Yo.from(i.headers).normalize(),o=i.responseType;let a;function l(){i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let c;he.isFormData(r)&&(Xs.isStandardBrowserEnv||Xs.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.getContentType(/^\s*multipart\/form-data/)?he.isString(c=s.getContentType())&&s.setContentType(c.replace(/^\s*(multipart\/form-data);+/,"$1")):s.setContentType("multipart/form-data"));let h=new XMLHttpRequest;if(i.auth){const g=i.auth.username||"",p=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa(g+":"+p))}const u=Pw(i.baseURL,i.url);h.open(i.method.toUpperCase(),Mw(u,i.params,i.paramsSerializer),!0),h.timeout=i.timeout;function d(){if(!h)return;const g=Yo.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:g,config:i,request:h};kP(function(A){t(A),l()},function(A){n(A),l()},m),h=null}if("onloadend"in h?h.onloadend=d:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(d)},h.onabort=function(){h&&(n(new Yt("Request aborted",Yt.ECONNABORTED,i,h)),h=null)},h.onerror=function(){n(new Yt("Network Error",Yt.ERR_NETWORK,i,h)),h=null},h.ontimeout=function(){let p=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const m=i.transitional||Lw;i.timeoutErrorMessage&&(p=i.timeoutErrorMessage),n(new Yt(p,m.clarifyTimeoutError?Yt.ETIMEDOUT:Yt.ECONNABORTED,i,h)),h=null},Xs.isStandardBrowserEnv){const g=(i.withCredentials||VP(u))&&i.xsrfCookieName&&OP.read(i.xsrfCookieName);g&&s.set(i.xsrfHeaderName,g)}r===void 0&&s.setContentType(null),"setRequestHeader"in h&&he.forEach(s.toJSON(),function(p,m){h.setRequestHeader(m,p)}),he.isUndefined(i.withCredentials)||(h.withCredentials=!!i.withCredentials),o&&o!=="json"&&(h.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&h.addEventListener("progress",f5(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",f5(i.onUploadProgress)),(i.cancelToken||i.signal)&&(a=g=>{h&&(n(!g||g.type?new Tf(null,i,h):g),h.abort(),h=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const f=WP(u);if(f&&Xs.protocols.indexOf(f)===-1){n(new Yt("Unsupported protocol "+f+":",Yt.ERR_BAD_REQUEST,i));return}h.send(r||null)})},U2={http:IP,xhr:YP};he.forEach(U2,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const g5=i=>`- ${i}`,XP=i=>he.isFunction(i)||i===null||i===!1,Gw={getAdapter:i=>{i=he.isArray(i)?i:[i];const{length:e}=i;let t,n;const r={};for(let s=0;s<e;s++){t=i[s];let o;if(n=t,!XP(t)&&(n=U2[(o=String(t)).toLowerCase()],n===void 0))throw new Yt(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+s]=n}if(!n){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(g5).join(`
`):" "+g5(s[0]):"as no adapter specified";throw new Yt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:U2};function _m(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Tf(null,i)}function p5(i){return _m(i),i.headers=Yo.from(i.headers),i.data=ym.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Gw.getAdapter(i.adapter||Gy.adapter)(i).then(function(n){return _m(i),n.data=ym.call(i,i.transformResponse,n),n.headers=Yo.from(n.headers),n},function(n){return Bw(n)||(_m(i),n&&n.response&&(n.response.data=ym.call(i,i.transformResponse,n.response),n.response.headers=Yo.from(n.response.headers))),Promise.reject(n)})}const m5=i=>i instanceof Yo?i.toJSON():i;function Vh(i,e){e=e||{};const t={};function n(c,h,u){return he.isPlainObject(c)&&he.isPlainObject(h)?he.merge.call({caseless:u},c,h):he.isPlainObject(h)?he.merge({},h):he.isArray(h)?h.slice():h}function r(c,h,u){if(he.isUndefined(h)){if(!he.isUndefined(c))return n(void 0,c,u)}else return n(c,h,u)}function s(c,h){if(!he.isUndefined(h))return n(void 0,h)}function o(c,h){if(he.isUndefined(h)){if(!he.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,u){if(u in e)return n(c,h);if(u in i)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>r(m5(c),m5(h),!0)};return he.forEach(Object.keys(Object.assign({},i,e)),function(h){const u=l[h]||r,d=u(i[h],e[h],h);he.isUndefined(d)&&u!==a||(t[h]=d)}),t}const Dw="1.5.1",Dy={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Dy[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const C5={};Dy.transitional=function(e,t,n){function r(s,o){return"[Axios v"+Dw+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Yt(r(o," has been removed"+(t?" in "+t:"")),Yt.ERR_DEPRECATED);return t&&!C5[o]&&(C5[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function KP(i,e,t){if(typeof i!="object")throw new Yt("options must be an object",Yt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const s=n[r],o=e[s];if(o){const a=i[s],l=a===void 0||o(a,s,i);if(l!==!0)throw new Yt("option "+s+" must be "+l,Yt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Yt("Unknown option "+s,Yt.ERR_BAD_OPTION)}}const Z2={assertOptions:KP,validators:Dy},aa=Z2.validators;let up=class{constructor(e){this.defaults=e,this.interceptors={request:new u5,response:new u5}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Vh(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;n!==void 0&&Z2.assertOptions(n,{silentJSONParsing:aa.transitional(aa.boolean),forcedJSONParsing:aa.transitional(aa.boolean),clarifyTimeoutError:aa.transitional(aa.boolean)},!1),r!=null&&(he.isFunction(r)?t.paramsSerializer={serialize:r}:Z2.assertOptions(r,{encode:aa.function,serialize:aa.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&he.merge(s.common,s[t.method]);s&&he.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Yo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let h,u=0,d;if(!l){const g=[p5.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,h=Promise.resolve(t);u<d;)h=h.then(g[u++],g[u++]);return h}d=a.length;let f=t;for(u=0;u<d;){const g=a[u++],p=a[u++];try{f=g(f)}catch(m){p.call(this,m);break}}try{h=p5.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,d=c.length;u<d;)h=h.then(c[u++],c[u++]);return h}getUri(e){e=Vh(this.defaults,e);const t=Pw(e.baseURL,e.url);return Mw(t,e.params,e.paramsSerializer)}};he.forEach(["delete","get","head","options"],function(e){up.prototype[e]=function(t,n){return this.request(Vh(n||{},{method:e,url:t,data:(n||{}).data}))}});he.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Vh(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}up.prototype[e]=t(),up.prototype[e+"Form"]=t(!0)});const g1=up;let jP=class Fw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(r);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Tf(s,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Fw(function(r){e=r}),cancel:e}}};const $P=jP;function JP(i){return function(t){return i.apply(null,t)}}function QP(i){return he.isObject(i)&&i.isAxiosError===!0}const V2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(V2).forEach(([i,e])=>{V2[e]=i});const qP=V2;function Nw(i){const e=new g1(i),t=Cw(g1.prototype.request,e);return he.extend(t,g1.prototype,e,{allOwnKeys:!0}),he.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return Nw(Vh(i,r))},t}const Jn=Nw(Gy);Jn.Axios=g1;Jn.CanceledError=Tf;Jn.CancelToken=$P;Jn.isCancel=Bw;Jn.VERSION=Dw;Jn.toFormData=w0;Jn.AxiosError=Yt;Jn.Cancel=Jn.CanceledError;Jn.all=function(e){return Promise.all(e)};Jn.spread=JP;Jn.isAxiosError=QP;Jn.mergeConfig=Vh;Jn.AxiosHeaders=Yo;Jn.formToJSON=i=>Rw(he.isHTMLForm(i)?new FormData(i):i);Jn.getAdapter=Gw.getAdapter;Jn.HttpStatusCode=qP;Jn.default=Jn;const eG=Jn;var p1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ef(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function tG(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var r=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return i[n]}})}),t}var Fy={exports:{}},Ny={exports:{}};function kw(i,e){return function(){return i.apply(e,arguments)}}const{toString:nG}=Object.prototype,{getPrototypeOf:ky}=Object,T0=(i=>e=>{const t=nG.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),go=i=>(i=i.toLowerCase(),e=>T0(e)===i),E0=i=>e=>typeof e===i,{isArray:mu}=Array,Kd=E0("undefined");function iG(i){return i!==null&&!Kd(i)&&i.constructor!==null&&!Kd(i.constructor)&&ts(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Ow=go("ArrayBuffer");function rG(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&Ow(i.buffer),e}const sG=E0("string"),ts=E0("function"),Uw=E0("number"),M0=i=>i!==null&&typeof i=="object",oG=i=>i===!0||i===!1,m1=i=>{if(T0(i)!=="object")return!1;const e=ky(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},aG=go("Date"),lG=go("File"),cG=go("Blob"),hG=go("FileList"),uG=i=>M0(i)&&ts(i.pipe),dG=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||ts(i.append)&&((e=T0(i))==="formdata"||e==="object"&&ts(i.toString)&&i.toString()==="[object FormData]"))},fG=go("URLSearchParams"),gG=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mf(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),mu(i))for(n=0,r=i.length;n<r;n++)e.call(null,i[n],n,i);else{const s=t?Object.getOwnPropertyNames(i):Object.keys(i),o=s.length;let a;for(n=0;n<o;n++)a=s[n],e.call(null,i[a],a,i)}}function Zw(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const Vw=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:p1)(),Ww=i=>!Kd(i)&&i!==Vw;function W2(){const{caseless:i}=Ww(this)&&this||{},e={},t=(n,r)=>{const s=i&&Zw(e,r)||r;m1(e[s])&&m1(n)?e[s]=W2(e[s],n):m1(n)?e[s]=W2({},n):mu(n)?e[s]=n.slice():e[s]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Mf(arguments[n],t);return e}const pG=(i,e,t,{allOwnKeys:n}={})=>(Mf(e,(r,s)=>{t&&ts(r)?i[s]=kw(r,t):i[s]=r},{allOwnKeys:n}),i),mG=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),CG=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},IG=(i,e,t,n)=>{let r,s,o;const a={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)o=r[s],(!n||n(o,i,e))&&!a[o]&&(e[o]=i[o],a[o]=!0);i=t!==!1&&ky(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},AG=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},yG=i=>{if(!i)return null;if(mu(i))return i;let e=i.length;if(!Uw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},_G=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&ky(Uint8Array)),vG=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=n.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},bG=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},xG=go("HTMLFormElement"),wG=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),I5=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),SG=go("RegExp"),Hw=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};Mf(t,(r,s)=>{let o;(o=e(r,s,i))!==!1&&(n[s]=o||r)}),Object.defineProperties(i,n)},TG=i=>{Hw(i,(e,t)=>{if(ts(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(ts(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},EG=(i,e)=>{const t={},n=r=>{r.forEach(s=>{t[s]=!0})};return mu(i)?n(i):n(String(i).split(e)),t},MG=()=>{},LG=(i,e)=>(i=+i,Number.isFinite(i)?i:e),vm="abcdefghijklmnopqrstuvwxyz",A5="0123456789",zw={DIGIT:A5,ALPHA:vm,ALPHA_DIGIT:vm+vm.toUpperCase()+A5},RG=(i=16,e=zw.ALPHA_DIGIT)=>{let t="";const{length:n}=e;for(;i--;)t+=e[Math.random()*n|0];return t};function BG(i){return!!(i&&ts(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const PG=i=>{const e=new Array(10),t=(n,r)=>{if(M0(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const s=mu(n)?[]:{};return Mf(n,(o,a)=>{const l=t(o,r+1);!Kd(l)&&(s[a]=l)}),e[r]=void 0,s}}return n};return t(i,0)},GG=go("AsyncFunction"),DG=i=>i&&(M0(i)||ts(i))&&ts(i.then)&&ts(i.catch);var ue={isArray:mu,isArrayBuffer:Ow,isBuffer:iG,isFormData:dG,isArrayBufferView:rG,isString:sG,isNumber:Uw,isBoolean:oG,isObject:M0,isPlainObject:m1,isUndefined:Kd,isDate:aG,isFile:lG,isBlob:cG,isRegExp:SG,isFunction:ts,isStream:uG,isURLSearchParams:fG,isTypedArray:_G,isFileList:hG,forEach:Mf,merge:W2,extend:pG,trim:gG,stripBOM:mG,inherits:CG,toFlatObject:IG,kindOf:T0,kindOfTest:go,endsWith:AG,toArray:yG,forEachEntry:vG,matchAll:bG,isHTMLForm:xG,hasOwnProperty:I5,hasOwnProp:I5,reduceDescriptors:Hw,freezeMethods:TG,toObjectSet:EG,toCamelCase:wG,noop:MG,toFiniteNumber:LG,findKey:Zw,global:Vw,isContextDefined:Ww,ALPHABET:zw,generateString:RG,isSpecCompliantForm:BG,toJSONObject:PG,isAsyncFn:GG,isThenable:DG};function Xt(i,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r)}ue.inherits(Xt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Yw=Xt.prototype,Xw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Xw[i]={value:i}});Object.defineProperties(Xt,Xw);Object.defineProperty(Yw,"isAxiosError",{value:!0});Xt.from=(i,e,t,n,r,s)=>{const o=Object.create(Yw);return ue.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Xt.call(o,i.message,e,t,n,r),o.cause=i,o.name=i.name,s&&Object.assign(o,s),o};var FG=null;function H2(i){return ue.isPlainObject(i)||ue.isArray(i)}function Kw(i){return ue.endsWith(i,"[]")?i.slice(0,-2):i}function y5(i,e,t){return i?i.concat(e).map(function(r,s){return r=Kw(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function NG(i){return ue.isArray(i)&&!i.some(H2)}const kG=ue.toFlatObject(ue,{},null,function(e){return/^is[A-Z]/.test(e)});function L0(i,e,t){if(!ue.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=ue.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,m){return!ue.isUndefined(m[p])});const n=t.metaTokens,r=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(e);if(!ue.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(ue.isDate(g))return g.toISOString();if(!l&&ue.isBlob(g))throw new Xt("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(g)||ue.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function h(g,p,m){let C=g;if(g&&!m&&typeof g=="object"){if(ue.endsWith(p,"{}"))p=n?p:p.slice(0,-2),g=JSON.stringify(g);else if(ue.isArray(g)&&NG(g)||(ue.isFileList(g)||ue.endsWith(p,"[]"))&&(C=ue.toArray(g)))return p=Kw(p),C.forEach(function(I,y){!(ue.isUndefined(I)||I===null)&&e.append(o===!0?y5([p],y,s):o===null?p:p+"[]",c(I))}),!1}return H2(g)?!0:(e.append(y5(m,p,s),c(g)),!1)}const u=[],d=Object.assign(kG,{defaultVisitor:h,convertValue:c,isVisitable:H2});function f(g,p){if(!ue.isUndefined(g)){if(u.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(g),ue.forEach(g,function(C,A){(!(ue.isUndefined(C)||C===null)&&r.call(e,C,ue.isString(A)?A.trim():A,p,d))===!0&&f(C,p?p.concat(A):[A])}),u.pop()}}if(!ue.isObject(i))throw new TypeError("data must be an object");return f(i),e}function _5(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Oy(i,e){this._pairs=[],i&&L0(i,this,e)}const jw=Oy.prototype;jw.append=function(e,t){this._pairs.push([e,t])};jw.toString=function(e){const t=e?function(n){return e.call(this,n,_5)}:_5;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function OG(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $w(i,e,t){if(!e)return i;const n=t&&t.encode||OG,r=t&&t.serialize;let s;if(r?s=r(e,t):s=ue.isURLSearchParams(e)?e.toString():new Oy(e,t).toString(n),s){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class UG{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ue.forEach(this.handlers,function(n){n!==null&&e(n)})}}var v5=UG,Jw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ZG=typeof URLSearchParams<"u"?URLSearchParams:Oy,VG=typeof FormData<"u"?FormData:null,WG=typeof Blob<"u"?Blob:null,HG={isBrowser:!0,classes:{URLSearchParams:ZG,FormData:VG,Blob:WG},protocols:["http","https","file","blob","url","data"]};const Qw=typeof window<"u"&&typeof document<"u",zG=(i=>Qw&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),YG=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var XG=Object.freeze({__proto__:null,hasBrowserEnv:Qw,hasStandardBrowserWebWorkerEnv:YG,hasStandardBrowserEnv:zG}),Ks={...XG,...HG};function KG(i,e){return L0(i,new Ks.classes.URLSearchParams,Object.assign({visitor:function(t,n,r,s){return Ks.isNode&&ue.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function jG(i){return ue.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function $G(i){const e={},t=Object.keys(i);let n;const r=t.length;let s;for(n=0;n<r;n++)s=t[n],e[s]=i[s];return e}function qw(i){function e(t,n,r,s){let o=t[s++];const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&ue.isArray(r)?r.length:o,l?(ue.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):((!r[o]||!ue.isObject(r[o]))&&(r[o]=[]),e(t,n,r[o],s)&&ue.isArray(r[o])&&(r[o]=$G(r[o])),!a)}if(ue.isFormData(i)&&ue.isFunction(i.entries)){const t={};return ue.forEachEntry(i,(n,r)=>{e(jG(n),r,t,0)}),t}return null}function JG(i,e,t){if(ue.isString(i))try{return(e||JSON.parse)(i),ue.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const Uy={transitional:Jw,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=ue.isObject(e);if(s&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return r&&r?JSON.stringify(qw(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return KG(e,this.formSerializer).toString();if((a=ue.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return L0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),JG(e)):e}],transformResponse:[function(e){const t=this.transitional||Uy.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&ue.isString(e)&&(n&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Xt.from(a,Xt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ks.classes.FormData,Blob:Ks.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],i=>{Uy.headers[i]={}});var Zy=Uy;const QG=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var qG=i=>{const e={};let t,n,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!t||e[t]&&QG[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e};const b5=Symbol("internals");function Nu(i){return i&&String(i).trim().toLowerCase()}function C1(i){return i===!1||i==null?i:ue.isArray(i)?i.map(C1):String(i)}function eD(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const tD=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function bm(i,e,t,n,r){if(ue.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!ue.isString(e)){if(ue.isString(n))return e.indexOf(n)!==-1;if(ue.isRegExp(n))return n.test(e)}}function nD(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function iD(i,e){const t=ue.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(r,s,o){return this[n].call(this,e,r,s,o)},configurable:!0})})}class R0{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(a,l,c){const h=Nu(l);if(!h)throw new Error("header name must be a non-empty string");const u=ue.findKey(r,h);(!u||r[u]===void 0||c===!0||c===void 0&&r[u]!==!1)&&(r[u||l]=C1(a))}const o=(a,l)=>ue.forEach(a,(c,h)=>s(c,h,l));return ue.isPlainObject(e)||e instanceof this.constructor?o(e,t):ue.isString(e)&&(e=e.trim())&&!tD(e)?o(qG(e),t):e!=null&&s(t,e,n),this}get(e,t){if(e=Nu(e),e){const n=ue.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return eD(r);if(ue.isFunction(t))return t.call(this,r,n);if(ue.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nu(e),e){const n=ue.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||bm(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function s(o){if(o=Nu(o),o){const a=ue.findKey(n,o);a&&(!t||bm(n,n[a],a,t))&&(delete n[a],r=!0)}}return ue.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];(!e||bm(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return ue.forEach(this,(r,s)=>{const o=ue.findKey(n,s);if(o){t[o]=C1(r),delete t[s];return}const a=e?nD(s):String(s).trim();a!==s&&delete t[s],t[a]=C1(r),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ue.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&ue.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[b5]=this[b5]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Nu(o);n[a]||(iD(r,o),n[a]=!0)}return ue.isArray(e)?e.forEach(s):s(e),this}}R0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(R0.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});ue.freezeMethods(R0);var Xo=R0;function xm(i,e){const t=this||Zy,n=e||t,r=Xo.from(n.headers);let s=n.data;return ue.forEach(i,function(a){s=a.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function e6(i){return!!(i&&i.__CANCEL__)}function Lf(i,e,t){Xt.call(this,i??"canceled",Xt.ERR_CANCELED,e,t),this.name="CanceledError"}ue.inherits(Lf,Xt,{__CANCEL__:!0});function rD(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new Xt("Request failed with status code "+t.status,[Xt.ERR_BAD_REQUEST,Xt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}var sD=Ks.hasStandardBrowserEnv?{write(i,e,t,n,r,s){const o=[i+"="+encodeURIComponent(e)];ue.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ue.isString(n)&&o.push("path="+n),ue.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function oD(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function aD(i,e){return e?i.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):i}function t6(i,e){return i&&!oD(e)?aD(i,e):e}var lD=Ks.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(o){const a=ue.isString(o)?r(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function cD(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function hD(i,e){i=i||10;const t=new Array(i),n=new Array(i);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=n[s];o||(o=c),t[r]=l,n[r]=c;let u=s,d=0;for(;u!==r;)d+=t[u++],u=u%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),c-o<e)return;const f=h&&c-h;return f?Math.round(d*1e3/f):void 0}}function x5(i,e){let t=0;const n=hD(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-t,l=n(a),c=s<=o;t=s;const h={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:r};h[e?"download":"upload"]=!0,i(h)}}const uD=typeof XMLHttpRequest<"u";var dD=uD&&function(i){return new Promise(function(t,n){let r=i.data;const s=Xo.from(i.headers).normalize();let{responseType:o,withXSRFToken:a}=i,l;function c(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let h;if(ue.isFormData(r)){if(Ks.hasStandardBrowserEnv||Ks.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((h=s.getContentType())!==!1){const[p,...m]=h?h.split(";").map(C=>C.trim()).filter(Boolean):[];s.setContentType([p||"multipart/form-data",...m].join("; "))}}let u=new XMLHttpRequest;if(i.auth){const p=i.auth.username||"",m=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+m))}const d=t6(i.baseURL,i.url);u.open(i.method.toUpperCase(),$w(d,i.params,i.paramsSerializer),!0),u.timeout=i.timeout;function f(){if(!u)return;const p=Xo.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),C={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:p,config:i,request:u};rD(function(I){t(I),c()},function(I){n(I),c()},C),u=null}if("onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(f)},u.onabort=function(){u&&(n(new Xt("Request aborted",Xt.ECONNABORTED,i,u)),u=null)},u.onerror=function(){n(new Xt("Network Error",Xt.ERR_NETWORK,i,u)),u=null},u.ontimeout=function(){let m=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||Jw;i.timeoutErrorMessage&&(m=i.timeoutErrorMessage),n(new Xt(m,C.clarifyTimeoutError?Xt.ETIMEDOUT:Xt.ECONNABORTED,i,u)),u=null},Ks.hasStandardBrowserEnv&&(a&&ue.isFunction(a)&&(a=a(i)),a||a!==!1&&lD(d))){const p=i.xsrfHeaderName&&i.xsrfCookieName&&sD.read(i.xsrfCookieName);p&&s.set(i.xsrfHeaderName,p)}r===void 0&&s.setContentType(null),"setRequestHeader"in u&&ue.forEach(s.toJSON(),function(m,C){u.setRequestHeader(C,m)}),ue.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),o&&o!=="json"&&(u.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&u.addEventListener("progress",x5(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",x5(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=p=>{u&&(n(!p||p.type?new Lf(null,i,u):p),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const g=cD(d);if(g&&Ks.protocols.indexOf(g)===-1){n(new Xt("Unsupported protocol "+g+":",Xt.ERR_BAD_REQUEST,i));return}u.send(r||null)})};const z2={http:FG,xhr:dD};ue.forEach(z2,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const w5=i=>`- ${i}`,fD=i=>ue.isFunction(i)||i===null||i===!1;var n6={getAdapter:i=>{i=ue.isArray(i)?i:[i];const{length:e}=i;let t,n;const r={};for(let s=0;s<e;s++){t=i[s];let o;if(n=t,!fD(t)&&(n=z2[(o=String(t)).toLowerCase()],n===void 0))throw new Xt(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+s]=n}if(!n){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(w5).join(`
`):" "+w5(s[0]):"as no adapter specified";throw new Xt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:z2};function wm(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Lf(null,i)}function S5(i){return wm(i),i.headers=Xo.from(i.headers),i.data=xm.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),n6.getAdapter(i.adapter||Zy.adapter)(i).then(function(n){return wm(i),n.data=xm.call(i,i.transformResponse,n),n.headers=Xo.from(n.headers),n},function(n){return e6(n)||(wm(i),n&&n.response&&(n.response.data=xm.call(i,i.transformResponse,n.response),n.response.headers=Xo.from(n.response.headers))),Promise.reject(n)})}const T5=i=>i instanceof Xo?i.toJSON():i;function Wh(i,e){e=e||{};const t={};function n(c,h,u){return ue.isPlainObject(c)&&ue.isPlainObject(h)?ue.merge.call({caseless:u},c,h):ue.isPlainObject(h)?ue.merge({},h):ue.isArray(h)?h.slice():h}function r(c,h,u){if(ue.isUndefined(h)){if(!ue.isUndefined(c))return n(void 0,c,u)}else return n(c,h,u)}function s(c,h){if(!ue.isUndefined(h))return n(void 0,h)}function o(c,h){if(ue.isUndefined(h)){if(!ue.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,u){if(u in e)return n(c,h);if(u in i)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h)=>r(T5(c),T5(h),!0)};return ue.forEach(Object.keys(Object.assign({},i,e)),function(h){const u=l[h]||r,d=u(i[h],e[h],h);ue.isUndefined(d)&&u!==a||(t[h]=d)}),t}const i6="1.6.2",Vy={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Vy[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const E5={};Vy.transitional=function(e,t,n){function r(s,o){return"[Axios v"+i6+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(e===!1)throw new Xt(r(o," has been removed"+(t?" in "+t:"")),Xt.ERR_DEPRECATED);return t&&!E5[o]&&(E5[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function gD(i,e,t){if(typeof i!="object")throw new Xt("options must be an object",Xt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const s=n[r],o=e[s];if(o){const a=i[s],l=a===void 0||o(a,s,i);if(l!==!0)throw new Xt("option "+s+" must be "+l,Xt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Xt("Unknown option "+s,Xt.ERR_BAD_OPTION)}}var Y2={assertOptions:gD,validators:Vy};const la=Y2.validators;class dp{constructor(e){this.defaults=e,this.interceptors={request:new v5,response:new v5}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Wh(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;n!==void 0&&Y2.assertOptions(n,{silentJSONParsing:la.transitional(la.boolean),forcedJSONParsing:la.transitional(la.boolean),clarifyTimeoutError:la.transitional(la.boolean)},!1),r!=null&&(ue.isFunction(r)?t.paramsSerializer={serialize:r}:Y2.assertOptions(r,{encode:la.function,serialize:la.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&ue.merge(s.common,s[t.method]);s&&ue.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Xo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(l=l&&p.synchronous,a.unshift(p.fulfilled,p.rejected))});const c=[];this.interceptors.response.forEach(function(p){c.push(p.fulfilled,p.rejected)});let h,u=0,d;if(!l){const g=[S5.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),d=g.length,h=Promise.resolve(t);u<d;)h=h.then(g[u++],g[u++]);return h}d=a.length;let f=t;for(u=0;u<d;){const g=a[u++],p=a[u++];try{f=g(f)}catch(m){p.call(this,m);break}}try{h=S5.call(this,f)}catch(g){return Promise.reject(g)}for(u=0,d=c.length;u<d;)h=h.then(c[u++],c[u++]);return h}getUri(e){e=Wh(this.defaults,e);const t=t6(e.baseURL,e.url);return $w(t,e.params,e.paramsSerializer)}}ue.forEach(["delete","get","head","options"],function(e){dp.prototype[e]=function(t,n){return this.request(Wh(n||{},{method:e,url:t,data:(n||{}).data}))}});ue.forEach(["post","put","patch"],function(e){function t(n){return function(s,o,a){return this.request(Wh(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}dp.prototype[e]=t(),dp.prototype[e+"Form"]=t(!0)});var I1=dp;class Wy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(r);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,a){n.reason||(n.reason=new Lf(s,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Wy(function(r){e=r}),cancel:e}}}var pD=Wy;function mD(i){return function(t){return i.apply(null,t)}}function CD(i){return ue.isObject(i)&&i.isAxiosError===!0}const X2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(X2).forEach(([i,e])=>{X2[e]=i});var ID=X2;function r6(i){const e=new I1(i),t=kw(I1.prototype.request,e);return ue.extend(t,I1.prototype,e,{allOwnKeys:!0}),ue.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return r6(Wh(i,r))},t}const Qn=r6(Zy);Qn.Axios=I1;Qn.CanceledError=Lf;Qn.CancelToken=pD;Qn.isCancel=e6;Qn.VERSION=i6;Qn.toFormData=L0;Qn.AxiosError=Xt;Qn.Cancel=Qn.CanceledError;Qn.all=function(e){return Promise.all(e)};Qn.spread=mD;Qn.isAxiosError=CD;Qn.mergeConfig=Wh;Qn.AxiosHeaders=Xo;Qn.formToJSON=i=>qw(ue.isHTMLForm(i)?new FormData(i):i);Qn.getAdapter=n6.getAdapter;Qn.HttpStatusCode=ID;Qn.default=Qn;var AD=Qn;const yD="@sendgrid/client",_D="Twilio SendGrid NodeJS API client",vD="8.1.0",bD="Twilio SendGrid <help@twilio.com> (sendgrid.com)",xD=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],wD="MIT",SD="https://sendgrid.com",TD={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},ED={access:"public"},MD="index.js",LD={node:">=12.*"},RD={"@sendgrid/helpers":"^8.0.0",axios:"^1.6.0"},BD={chai:"4.2.0",nock:"^10.0.6"},PD={chai:"4.2.0"},GD=["http","rest","api","mail","sendgrid"],DD="2d4d51214d63961d3138421c297790b479c12c26",FD={name:yD,description:_D,version:vD,author:bD,contributors:xD,license:wD,homepage:SD,repository:TD,publishConfig:ED,main:MD,engines:LD,dependencies:RD,devDependencies:BD,resolutions:PD,tags:GD,gitHead:DD};var Hy=function i(e,t,n){if(typeof e!="object"||e===null)throw new Error("Non object passed to convertKeys: "+e);if(Array.isArray(e))return e;Array.isArray(n)||(n=[]);for(const r in e)if(e.hasOwnProperty(r)){const s=t(r);typeof e[r]=="object"&&e[r]!==null&&!n.includes(r)&&!n.includes(s)&&(e[r]=i(e[r],t,n)),s!==r&&(e[s]=e[r],delete e[r])}return e},ND=function(e){if(typeof e!="string")throw new Error("String expected for conversion to snake case");return e.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(t,n){return Number(t)===0?"":n===0?t.toLowerCase():t.toUpperCase()})};const kD=Hy,OD=ND;var Rf=function(e,t){return kD(e,OD,t)},UD=function(e){if(typeof e!="string")throw new Error("String expected for conversion to snake case");return e.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(t){return t=t.trim().toLowerCase().replace("-",""),(t[0]==="_"?"":"_")+t}).slice(1)};const ZD=Hy,VD=UD;var B0=function(e,t){return ZD(e,VD,t)},Bf=function(e){return JSON.parse(JSON.stringify(e))};const WD={},HD=Object.freeze(Object.defineProperty({__proto__:null,default:WD},Symbol.toStringTag,{value:"Module"})),zy=tG(HD),zD=Rf,YD=B0,XD=Bf,KD=zy,jD=zy;let $D=class{constructor(e){e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=XD(e),e=zD(e);const{content:t,filename:n,type:r,disposition:s,contentId:o,filePath:a}=e;if(typeof t<"u"&&typeof a<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(n),this.setType(r),this.setDisposition(s),this.setContentId(o),this.setContent(a?this.readFile(a):t)}readFile(e){return KD.readFileSync(jD.resolve(e))}setContent(e){if(typeof e=="string"){this.content=e;return}else if(e instanceof Buffer&&e.toString!==void 0){this.content=e.toString(),this.disposition==="attachment"&&(this.content=e.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(e){if(e instanceof Buffer&&e.toString!==void 0){this.content=e.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(e){if(!(typeof e>"u")){if(e&&typeof e!="string")throw new Error("String expected for `filename`");this.filename=e}}setType(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `type`");this.type=e}}setDisposition(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `disposition`");this.disposition=e}}setContentId(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `contentId`");this.contentId=e}}toJSON(){const{content:e,filename:t,type:n,disposition:r,contentId:s}=this,o={content:e,filename:t};return typeof n<"u"&&(o.type=n),typeof r<"u"&&(o.disposition=r),typeof s<"u"&&(o.contentId=s),YD(o)}};var JD=$D,s6=function(e){if(e.indexOf("<")===-1)return["",e];let[t,n]=e.split("<");return t=t.trim(),n=n.replace(">","").trim(),[t,n]};const QD=s6;let qD=class K2{constructor(e){e&&this.fromData(e)}fromData(e){if(typeof e=="string"){const[r,s]=QD(e);e={name:r,email:s}}if(typeof e!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:t,email:n}=e;this.setEmail(n),this.setName(t)}setName(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `name`");this.name=e}}setEmail(e){if(typeof e>"u")throw new Error("Must provide `email`");if(typeof e!="string")throw new Error("String expected for `email`");this.email=e}toJSON(){const{email:e,name:t}=this,n={email:e};return t!==""&&(n.name=t),n}static create(e){return Array.isArray(e)?e.filter(t=>!!t).map(t=>this.create(t)):e instanceof K2?e:new K2(e)}};var Yy=qD,eF=function(e){return tF(e)&&!nF(e)};function tF(i){return!!i&&typeof i=="object"}function nF(i){var e=Object.prototype.toString.call(i);return e==="[object RegExp]"||e==="[object Date]"||sF(i)}var iF=typeof Symbol=="function"&&Symbol.for,rF=iF?Symbol.for("react.element"):60103;function sF(i){return i.$$typeof===rF}function oF(i){return Array.isArray(i)?[]:{}}function jd(i,e){return e.clone!==!1&&e.isMergeableObject(i)?Hh(oF(i),i,e):i}function aF(i,e,t){return i.concat(e).map(function(n){return jd(n,t)})}function lF(i,e){if(!e.customMerge)return Hh;var t=e.customMerge(i);return typeof t=="function"?t:Hh}function cF(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(e){return Object.propertyIsEnumerable.call(i,e)}):[]}function M5(i){return Object.keys(i).concat(cF(i))}function o6(i,e){try{return e in i}catch{return!1}}function hF(i,e){return o6(i,e)&&!(Object.hasOwnProperty.call(i,e)&&Object.propertyIsEnumerable.call(i,e))}function uF(i,e,t){var n={};return t.isMergeableObject(i)&&M5(i).forEach(function(r){n[r]=jd(i[r],t)}),M5(e).forEach(function(r){hF(i,r)||(o6(i,r)&&t.isMergeableObject(e[r])?n[r]=lF(r,t)(i[r],e[r],t):n[r]=jd(e[r],t))}),n}function Hh(i,e,t){t=t||{},t.arrayMerge=t.arrayMerge||aF,t.isMergeableObject=t.isMergeableObject||eF,t.cloneUnlessOtherwiseSpecified=jd;var n=Array.isArray(e),r=Array.isArray(i),s=n===r;return s?n?t.arrayMerge(i,e,t):uF(i,e,t):jd(e,t)}Hh.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return Hh(n,r,t)},{})};var dF=Hh,fF=dF,a6=function i(e,t="{{",n="}}"){if(Array.isArray(e))return e.map(s=>i(s,t,n));const r={};for(const s in e)e.hasOwnProperty(s)&&(r[t+s+n]=String(e[s]));return r};const hl=Yy,gF=Rf,pF=B0,mF=Bf,CF=fF,IF=a6;let AF=class{constructor(e){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=mF(e),e=gF(e,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:t,from:n,cc:r,bcc:s,subject:o,headers:a,customArgs:l,sendAt:c,substitutions:h,substitutionWrappers:u,dynamicTemplateData:d}=e;this.setTo(t),this.setFrom(n),this.setCc(r),this.setBcc(s),this.setSubject(o),this.setHeaders(a),this.setSubstitutions(h),this.setSubstitutionWrappers(u),this.setCustomArgs(l),this.setDynamicTemplateData(d),this.setSendAt(c)}setSubject(e){if(!(typeof e>"u")){if(typeof e!="string")throw new Error("String expected for `subject`");this.subject=e}}setSendAt(e){if(!(typeof e>"u")){if(!Number.isInteger(e))throw new Error("Integer expected for `sendAt`");this.sendAt=e}}setTo(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.to=hl.create(e))}setFrom(e){typeof e>"u"||(this.from=hl.create(e))}addTo(e){typeof e>"u"||this.to.push(hl.create(e))}setCc(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.cc=hl.create(e))}addCc(e){typeof e>"u"||this.cc.push(hl.create(e))}setBcc(e){typeof e>"u"||(Array.isArray(e)||(e=[e]),this.bcc=hl.create(e))}addBcc(e){typeof e>"u"||this.bcc.push(hl.create(e))}setHeaders(e){if(!(typeof e>"u")){if(typeof e!="object"||e===null)throw new Error("Object expected for `headers`");this.headers=e}}addHeader(e,t){if(typeof e!="string")throw new Error("String expected for header key");if(typeof t!="string")throw new Error("String expected for header value");this.headers[e]=t}setCustomArgs(e){if(!(typeof e>"u")){if(typeof e!="object"||e===null)throw new Error("Object expected for `customArgs`");this.customArgs=e}}addCustomArg(e,t){if(typeof e!="string")throw new Error("String expected for custom arg key");if(typeof t!="string")throw new Error("String expected for custom arg value");this.customArgs[e]=t}setSubstitutions(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `substitutions`");this.substitutions=e}}addSubstitution(e,t){if(typeof e!="string")throw new Error("String expected for substitution key");if(typeof t!="string"&&typeof t!="number")throw new Error("String or Number expected for substitution value");this.substitutions[e]=t}reverseMergeSubstitutions(e){if(!(typeof e>"u"||e===null)){if(typeof e!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},e,this.substitutions)}}setSubstitutionWrappers(e){if(!(typeof e>"u"||e===null)){if(!Array.isArray(e)||e.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=e}}deepMergeDynamicTemplateData(e){if(!(typeof e>"u"||e===null)){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=CF(e,this.dynamicTemplateData)}}setDynamicTemplateData(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=e}}toJSON(){const{to:e,from:t,cc:n,bcc:r,subject:s,headers:o,customArgs:a,sendAt:l,substitutions:c,substitutionWrappers:h,dynamicTemplateData:u}=this,d={to:e};if(Array.isArray(n)&&n.length>0&&(d.cc=n),Array.isArray(r)&&r.length>0&&(d.bcc=r),Object.keys(o).length>0&&(d.headers=o),c&&Object.keys(c).length>0){const[f,g]=h;d.substitutions=IF(c,f,g)}return Object.keys(a).length>0&&(d.customArgs=a),u&&Object.keys(u).length>0&&(d.dynamicTemplateData=u),typeof s<"u"&&(d.subject=s),typeof l<"u"&&(d.sendAt=l),typeof t<"u"&&(d.from=t),pF(d,["substitutions","dynamicTemplateData","customArgs","headers"])}};var l6=AF,c6=function(e){return e.map(t=>typeof t=="object"&&t!==null&&typeof t.toJSON=="function"?t.toJSON():t)};const yF=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var _F={DYNAMIC_TEMPLATE_CHAR_WARNING:yF};const gn=(i,e,t,n)=>{if(!(typeof i>"u"||typeof i[t]>"u")&&typeof i[t]!==n)throw new Error(`${n} expected for \`${e}.${t}\``)};var vF={validateMailSettings(i){if(typeof i!="object")throw new Error("Object expected for `mailSettings`");const{bcc:e,bypassListManagement:t,bypassSpamManagement:n,bypassBounceManagement:r,bypassUnsubscribeManagement:s,footer:o,sandboxMode:a,spamCheck:l}=i;gn(e,"bcc","enable","boolean"),gn(e,"bcc","email","string"),gn(t,"bypassListManagement","enable","boolean"),gn(n,"bypassSpamManagement","enable","boolean"),gn(r,"bypassBounceManagement","enable","boolean"),gn(s,"bypassUnsubscribeManagement","enable","boolean"),gn(o,"footer","enable","boolean"),gn(o,"footer","text","string"),gn(o,"footer","html","string"),gn(a,"sandboxMode","enable","boolean"),gn(l,"spamCheck","enable","boolean"),gn(l,"spamCheck","threshold","number"),gn(l,"spamCheck","postToUrl","string")},validateTrackingSettings(i){if(typeof i!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:e,openTracking:t,subscriptionTracking:n,ganalytics:r}=i;gn(e,"clickTracking","enable","boolean"),gn(e,"clickTracking","enableText","boolean"),gn(t,"openTracking","enable","boolean"),gn(t,"openTracking","substitutionTag","string"),gn(n,"subscriptionTracking","enable","boolean"),gn(n,"subscriptionTracking","text","string"),gn(n,"subscriptionTracking","html","string"),gn(n,"subscriptionTracking","substitutionTag","string"),gn(r,"ganalytics","enable","boolean"),gn(r,"ganalytics","utm_source","string"),gn(r,"ganalytics","utm_medium","string"),gn(r,"ganalytics","utm_term","string"),gn(r,"ganalytics","utm_content","string"),gn(r,"ganalytics","utm_campaign","string")}};const L5=Yy,ku=l6,bF=Rf,xF=B0,wF=Bf,Sm=c6,{DYNAMIC_TEMPLATE_CHAR_WARNING:SF}=_F,{validateMailSettings:TF,validateTrackingSettings:EF}=vF;let MF=class j2{constructor(e){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Mail data");e=wF(e),e=bF(e,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:t,from:n,replyTo:r,cc:s,bcc:o,sendAt:a,subject:l,text:c,html:h,content:u,templateId:d,personalizations:f,attachments:g,ipPoolName:p,batchId:m,sections:C,headers:A,categories:I,category:y,customArgs:x,asm:T,mailSettings:S,trackingSettings:M,substitutions:_,substitutionWrappers:v,dynamicTemplateData:B,isMultiple:E,hideWarnings:L,replyToList:G}=e;this.setFrom(n),this.setReplyTo(r),this.setSubject(l),this.setSendAt(a),this.setTemplateId(d),this.setBatchId(m),this.setIpPoolName(p),this.setAttachments(g),this.setContent(u),this.setSections(C),this.setHeaders(A),this.setCategories(y),this.setCategories(I),this.setCustomArgs(x),this.setAsm(T),this.setMailSettings(S),this.setTrackingSettings(M),this.setHideWarnings(L),this.setReplyToList(G),this.isDynamic?this.setDynamicTemplateData(B):(this.setSubstitutions(_),this.setSubstitutionWrappers(v)),this.addTextContent(c),this.addHtmlContent(h),f?this.setPersonalizations(f):E&&Array.isArray(t)?t.forEach(Z=>this.addTo(Z,s,o)):this.addTo(t,s,o)}setFrom(e){if(this._checkProperty("from",e,[this._checkUndefined])){if(typeof e!="string"&&typeof e.email!="string")throw new Error("String or address object expected for `from`");this.from=L5.create(e)}}setReplyTo(e){if(this._checkProperty("replyTo",e,[this._checkUndefined])){if(typeof e!="string"&&typeof e.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=L5.create(e)}}setSubject(e){this._setProperty("subject",e,"string")}setSendAt(e){this._checkProperty("sendAt",e,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=e)}setTemplateId(e){this._setProperty("templateId",e,"string")&&e.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(e){this._setProperty("batchId",e,"string")}setIpPoolName(e){this._setProperty("ipPoolName",e,"string")}setAsm(e){if(this._checkProperty("asm",e,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof e.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(e.groupsToDisplay&&(!Array.isArray(e.groupsToDisplay)||!e.groupsToDisplay.every(t=>typeof t=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=e}}setPersonalizations(e){if(this._doArrayCheck("personalizations",e)){if(!e.every(t=>typeof t=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],e.forEach(t=>this.addPersonalization(t))}}addPersonalization(e){this.isDynamic&&e.substitutions?delete e.substitutions:!this.isDynamic&&e.dynamicTemplateData&&delete e.dynamicTemplateData,e instanceof ku||(e=new ku(e)),this.isDynamic?this.applyDynamicTemplateData(e):this.applySubstitutions(e),this.personalizations.push(e)}addTo(e,t,n){if(typeof e>"u"&&typeof t>"u"&&typeof n>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new ku({to:e,cc:t,bcc:n}))}setSubstitutions(e){this._setProperty("substitutions",e,"object")}setSubstitutionWrappers(e){let t=(n,r)=>{if(!Array.isArray(r)||r.length!==2)throw new Error("Array expected with two elements for `"+n+"`")};this._checkProperty("substitutionWrappers",e,[this._checkUndefined,t])&&(this.substitutionWrappers=e)}applySubstitutions(e){e instanceof ku&&(e.reverseMergeSubstitutions(this.substitutions),e.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(e){e instanceof ku&&e.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(e){if(!(typeof e>"u")){if(typeof e!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(e).forEach(t=>{/['"&]/.test(t)&&console.warn(SF)}),this.dynamicTemplateData=e}}setContent(e){if(this._doArrayCheck("content",e)){if(!e.every(t=>typeof t=="object"))throw new Error("Expected each entry in `content` to be an object");if(!e.every(t=>typeof t.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!e.every(t=>typeof t.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=e}}addContent(e){this._checkProperty("content",e,[this._createTypeCheck("object")])&&this.content.push(e)}addTextContent(e){this._checkProperty("text",e,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:e,type:"text/plain"})}addHtmlContent(e){this._checkProperty("html",e,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:e,type:"text/html"})}setAttachments(e){if(this._doArrayCheck("attachments",e)){if(!e.every(t=>typeof t.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!e.every(t=>typeof t.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!e.every(t=>!t.type||typeof t.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!e.every(t=>!t.disposition||typeof t.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=e}}addAttachment(e){this._checkProperty("attachment",e,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(e)}setCategories(e){let t=(n,r)=>{if(!Array.isArray(r)||!r.every(s=>typeof s=="string"))throw new Error("Array of strings expected for `"+n+"`")};typeof e=="string"&&(e=[e]),this._checkProperty("categories",e,[this._checkUndefined,t])&&(this.categories=e)}addCategory(e){this._checkProperty("category",e,[this._createTypeCheck("string")])&&this.categories.push(e)}setHeaders(e){this._setProperty("headers",e,"object")}addHeader(e,t){this._checkProperty("key",e,[this._createTypeCheck("string")])&&this._checkProperty("value",t,[this._createTypeCheck("string")])&&(this.headers[e]=t)}setSections(e){this._setProperty("sections",e,"object")}setCustomArgs(e){this._setProperty("customArgs",e,"object")}setTrackingSettings(e){typeof e>"u"||(EF(e),this.trackingSettings=e)}setMailSettings(e){typeof e>"u"||(TF(e),this.mailSettings=e)}setHideWarnings(e){if(!(typeof e>"u")){if(typeof e!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=e}}toJSON(){const{from:e,replyTo:t,sendAt:n,subject:r,content:s,templateId:o,personalizations:a,attachments:l,ipPoolName:c,batchId:h,asm:u,sections:d,headers:f,categories:g,customArgs:p,mailSettings:m,trackingSettings:C,replyToList:A}=this,I={from:e,subject:r,personalizations:Sm(a)};return Array.isArray(l)&&l.length>0&&(I.attachments=Sm(l)),Array.isArray(g)&&g.length>0&&(I.categories=g.filter(y=>y!=="")),Array.isArray(s)&&s.length>0&&(I.content=Sm(s)),Object.keys(f).length>0&&(I.headers=f),Object.keys(m).length>0&&(I.mailSettings=m),Object.keys(C).length>0&&(I.trackingSettings=C),Object.keys(p).length>0&&(I.customArgs=p),Object.keys(d).length>0&&(I.sections=d),Object.keys(u).length>0&&(I.asm=u),typeof t<"u"&&(I.replyTo=t),typeof n<"u"&&(I.sendAt=n),typeof h<"u"&&(I.batchId=h),typeof o<"u"&&(I.templateId=o),typeof c<"u"&&(I.ipPoolName=c),typeof A<"u"&&(I.replyToList=A),xF(I,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(e){return Array.isArray(e)?e.filter(t=>!!t).map(t=>this.create(t)):e instanceof j2?e:new j2(e)}_checkProperty(e,t,n){return!n.some(r=>r(e,t))}_setProperty(e,t,n){let r=this._checkProperty(e,t,[this._checkUndefined,this._createTypeCheck(n)]);return r&&(this[e]=t),r}_checkUndefined(e,t){return typeof t>"u"}_createTypeCheck(e){return(t,n)=>{if(typeof n!==e)throw new Error(e+" expected for `"+t+"`")}}_createCheckThatThrows(e,t){return(n,r)=>{if(!e(r))throw new Error(t)}}_setArrayProperty(e,t){this._doArrayCheck(e,t)&&(this[e]=t)}_doArrayCheck(e,t){return this._checkProperty(e,t,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+e+"`")])}setReplyToList(e){if(this._doArrayCheck("replyToList",e)&&e.length){if(!e.every(t=>t&&typeof t.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=e}}};var LF=MF;let RF=class{constructor(e,t,n){this.statusCode=e,this.body=t,this.headers=n}toString(){return"HTTP "+this.statusCode+" "+this.body}};var BF=RF;let PF=class extends Error{constructor(e){super();const{headers:t,status:n,statusText:r,data:s}=e;this.code=n,this.message=r,this.response={headers:t,body:s},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:e}=this.response;let t=`${this.message} (${this.code})`;return e&&Array.isArray(e.errors)&&e.errors.forEach(n=>{const r=n.message,s=n.field,o=n.help;t+=`
  ${r}
    ${s}
    ${o}`}),t}toJSON(){const{message:e,code:t,response:n}=this;return{message:e,code:t,response:n}}};var GF=PF;const DF=Rf,FF=Bf,NF=["day","week","month"],kF=["us","ca"],tg=["desc","asc"];let OF=class{constructor(e){this.startDate=null,this.endDate=null,this.aggregatedBy=null,e&&this.fromData(e)}fromData(e){if(typeof e!="object")throw new Error("Expecting object for Statistics data");e=FF(e),e=DF(e,["substitutions","customArgs"]);const{startDate:t,endDate:n,aggregatedBy:r}=e;this.setStartDate(t),this.setEndDate(n),this.setAggregatedBy(r)}setStartDate(e){if(typeof e>"u")throw new Error("Date expected for `startDate`");if(new Date(e)==="Invalid Date"||isNaN(new Date(e)))throw new Error("Date expected for `startDate`");console.log(e),this.startDate=new Date(e).toISOString().slice(0,10)}setEndDate(e){if(typeof e>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(e)==="Invalid Date"||isNaN(new Date(e)))throw new Error("Date expected for `endDate`");this.endDate=new Date(e).toISOString().slice(0,10)}setAggregatedBy(e){if(!(typeof e>"u"))if(typeof e=="string"&&NF.includes(e.toLowerCase()))this.aggregatedBy=e;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:e,endDate:t,aggregatedBy:n}=this;return{startDate:e,endDate:t,aggregatedBy:n}}getAdvanced(e){const t=this.getGlobal();return typeof e>"u"||typeof e=="string"&&kF.includes(e.toLowerCase())&&(t.country=e),t}getAdvancedMailboxProviders(e){const t=this.getGlobal();if(typeof e>"u")return t;if(Array.isArray(e)&&e.some(n=>typeof n!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return t.mailBoxProviders=e,t}getAdvancedBrowsers(e){const t=this.getGlobal();if(typeof e>"u")return t;if(Array.isArray(e)&&e.some(n=>typeof n!="string"))throw new Error("Array of strings expected for `browsers`");return t.browsers=e,t}getCategories(e){if(typeof e>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(e))throw new Error("Array of strings expected for `categories`");const t=this.getGlobal();return t.categories=e,t}getSubuser(e){if(typeof e>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(e))throw new Error("Array of strings expected for `subusers`");const t=this.getGlobal();return t.subusers=e,t}getSubuserSum(e="delivered",t=tg[0],n=5,r=0){if(typeof e!="string")throw new Error("string expected for `sortByMetric`");if(!tg.includes(t.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof n!="number")throw new Error("number expected for `limit`");if(typeof r!="number")throw new Error("number expected for `offset`");const s=this.getGlobal();return s.sortByMetric=e,s.sortByDirection=t,s.limit=n,s.offset=r,s}getSubuserMonthly(e="delivered",t=tg[0],n=5,r=0){if(typeof e!="string")throw new Error("string expected for `sortByMetric`");if(!tg.includes(t.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof n!="number")throw new Error("number expected for `limit`");if(typeof r!="number")throw new Error("number expected for `offset`");const s=this.getGlobal();return s.sortByMetric=e,s.sortByDirection=t,s.limit=n,s.offset=r,s}_isValidArrayOfStrings(e){return!(!Array.isArray(e)||e.length<1||e.some(t=>typeof t!="string"))}};var UF=OF;const ZF=JD,VF=Yy,WF=LF,HF=l6,zF=BF,YF=GF,XF=UF;var KF={Attachment:ZF,EmailAddress:VF,Mail:WF,Personalization:HF,Response:zF,ResponseError:YF,Statistics:XF},jF=function(e,t){if(typeof e!="object"||e===null)throw new Error("Not an object provided for base");if(typeof t!="object"||t===null)throw new Error("Not an object provided for data");const n=Object.assign({},e);for(const r in t)t.hasOwnProperty(r)&&(t[r]&&Array.isArray(t[r])?n[r]=t[r]:t[r]&&typeof t[r]=="object"?n[r]=Object.assign({},t[r]):t[r]&&(n[r]=t[r]));return n};const $F=c6,JF=Hy,QF=Bf,qF=jF,eN=s6,tN=Rf,nN=B0,iN=a6;var rN={arrayToJSON:$F,convertKeys:JF,deepClone:QF,mergeData:qF,splitNameEmail:eN,toCamelCase:tN,toSnakeCase:nN,wrapSubstitutions:iN};const sN=KF,oN=rN;var h6={classes:sN,helpers:oN};const aN=AD,lN=FD,{helpers:{mergeData:R5},classes:{Response:cN,ResponseError:hN}}=h6,B5="SG.",uN="https://api.sendgrid.com/",dN="https://email.twilio.com/",fN="global",Tm={eu:"https://api.eu.sendgrid.com/",global:"https://api.sendgrid.com/"};let gN=class{constructor(){this.auth="",this.impersonateSubuser="",this.sendgrid_region=fN,this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+lN.version+";nodejs"},this.defaultRequest={baseUrl:uN,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(e){this.auth="Bearer "+e,this.setDefaultRequest("baseUrl",Tm[this.sendgrid_region]),this.isValidApiKey(e)||console.warn(`API key does not start with "${B5}".`)}setTwilioEmailAuth(e,t){const n=Buffer.from(e+":"+t).toString("base64");this.auth="Basic "+n,this.setDefaultRequest("baseUrl",dN),this.isValidTwilioAuth(e,t)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(e){return this.isString(e)&&e.trim().startsWith(B5)}isValidTwilioAuth(e,t){return this.isString(e)&&e&&this.isString(t)&&t}isString(e){return typeof e=="string"||e instanceof String}setImpersonateSubuser(e){this.impersonateSubuser=e}setDefaultHeader(e,t){return e!==null&&typeof e=="object"?(Object.assign(this.defaultHeaders,e),this):(this.defaultHeaders[e]=t,this)}setDefaultRequest(e,t){return e!==null&&typeof e=="object"?(Object.assign(this.defaultRequest,e),this):(this.defaultRequest[e]=t,this)}setDataResidency(e){return Tm.hasOwnProperty(e)?(this.sendgrid_region=e,this.setDefaultRequest("baseUrl",Tm[e])):console.warn('Region can only be "global" or "eu".'),this}createHeaders(e){const t=R5(this.defaultHeaders,e);return typeof t.Authorization>"u"&&this.auth&&(t.Authorization=this.auth),this.impersonateSubuser&&(t["On-Behalf-Of"]=this.impersonateSubuser),t}createRequest(e){let t={url:e.uri||e.url,baseUrl:e.baseUrl,method:e.method,data:e.body,params:e.qs,headers:e.headers};return t=R5(this.defaultRequest,t),t.headers=this.createHeaders(t.headers),t.baseURL=t.baseUrl,delete t.baseUrl,t}request(e,t){e=this.createRequest(e);const n=new Promise((r,s)=>{aN(e).then(o=>r([new cN(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?s(new hN(o.response)):s(o))});if(t&&typeof t!="function")throw new Error("Callback passed is not a function.");return t?n.then(r=>t(null,r)).catch(r=>t(r,null)):n}};var u6=gN;const pN=u6;var mN=new pN;const CN=mN,IN=u6;Ny.exports=CN;Ny.exports.Client=IN;var AN=Ny.exports;const{Client:yN}=AN,{classes:{Mail:_N}}=h6;let vN=class{constructor(){this.setClient(new yN),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(e){return this.client=e,this}setApiKey(e){return this.client.setApiKey(e),this}setTwilioEmailAuth(e,t){this.client.setTwilioEmailAuth(e,t)}setTimeout(e){typeof e>"u"||this.client.setDefaultRequest("timeout",e)}setSubstitutionWrappers(e,t){if(typeof e>"u"||typeof t>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=e,this.substitutionWrappers[1]=t,this}setSecretRules(e){e instanceof Array||(e=[e]);const t=e.map(function(n){const r=typeof n;if(r==="string")return{pattern:new RegExp(n)};if(r==="object"){n instanceof RegExp?n={pattern:n}:n.hasOwnProperty("pattern")&&typeof n.pattern=="string"&&(n.pattern=new RegExp(n.pattern));try{return n.pattern.test(""),n}catch{}}});this.secretRules=t.filter(function(n){return n})}filterSecrets(e){if(typeof e=="object"&&!e.hasOwnProperty("content"))return;const t=this;e.content.forEach(function(n){t.secretRules.forEach(function(r){if(r.hasOwnProperty("pattern")&&!r.pattern.test(n.value))return;let s=`The pattern '${r.pattern}'`;throw r.name&&(s+=`identified by '${r.name}'`),s+=" was found in the Mail content!",new Error(s)})})}send(e,t=!1,n){if(typeof t=="function"&&(n=t,t=!1),Array.isArray(e)){const r=Promise.all(e.map(s=>this.send(s,t)));return n&&r.then(s=>n(null,s)).catch(s=>n(s,null)),r}try{typeof e.isMultiple>"u"&&(e.isMultiple=t),typeof e.substitutionWrappers>"u"&&(e.substitutionWrappers=this.substitutionWrappers);const r=_N.create(e),s=r.toJSON();this.filterSecrets(s);const o={method:"POST",url:"/v3/mail/send",headers:r.headers,body:s};return this.client.request(o,n)}catch(r){return n&&n(r,null),Promise.reject(r)}}sendMultiple(e,t){return this.send(e,!0,t)}};var d6=vN;const bN=d6;var xN=new bN;const wN=xN,SN=d6;Fy.exports=wN;Fy.exports.MailService=SN;var TN=Fy.exports;const fp=Ef(TN);async function EN({request:i}){const e="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",t=await new Response(i.body).json(),n=["type","categories","topic","fullName","company","email","website","message"];for(let r=0;r<n.length;r+=1){const s=t[n[r]];if(s==null)continue;if((Array.isArray(s)?s.join(","):s).length>1024)return Ws({status:"FIELDS_TOO_LONG",error:`Filed is too long: ${n[r]}`},{status:400})}try{const r=await eG({method:"post",url:"https://vu4lf9wl.api.sanity.io/v2022-10-03/data/mutate/production",headers:{Authorization:"Bearer skwwVtYUo0eYDp3nzV2YgUS8goiAL1muXyCIs2DuAcUy0G4yHLVKnrukhIgJUy4vEGzBATMfaKHAKb2QvnPL9OsRTFF3HwuIcnYCzy50MahxeB8CHcWckKxeKExUTxkGJe5PmIIqWboYDFraeFFPd4e3ZRZ2t3RELsm7gwwnuljwcs3DTmrZ","Content-Type":"application/json"},data:JSON.stringify({mutations:[{create:{_id:"drafts.",_type:"contactEntry",type:t.type,categories:t.categories,email:t.email,fullName:t.fullName,company:t.company,website:t.website,message:t.message,topic:t.topic}}]})});if(r.data.results[0].operation!=="create")return Ws({status:"UNEXPECTED_STORAGE_STATUS",error:"Unexpected storage status",info:{status:r.data.results[0].operation}},{status:500})}catch(r){return Ws({status:"UNEXPECTED_ERROR",message:"Unexpected error",info:{error:r.message}},{status:500})}try{console.log("[CONTACT]",t),fp.setApiKey(e),await fp.send({to:"hello@format-3.co",from:"hello@format-3.co",subject:"Message via format-3.co",replyTo:t.email,text:`${t.fullName} (${t.company}) says: 
"${t.message||"No message content"}"

Type: ${t.type||"N/A"}
Email: ${t.email||"N/A"}
Categories: ${t.categories||"N/A"}
Topic: ${t.topic||"N/A"}
Website: ${t.website||"N/A"}`,html:`
        <h1 style="margin-bottom: 24px;">New Contact</h1>
        <ul>
          <li><strong>From:</strong> ${t.fullName} (${t.company})</li>
          <li><strong>Email:</strong> ${t.email}</li>
          <li><strong>Website:</strong> ${t.website}</li>
          <li><strong>Type:</strong> ${t.type}</li>
          <li><strong>Categories:</strong> ${t.categories}</li>
          <li><strong>Topic:</strong> ${t.topic}</li>
          <li><strong>Message:</strong> ${t.message||"No message content"}</li>
        </ul>
      `})}catch(r){return Ws({status:"UNEXPECTED_ERROR",message:"Unexpected error",info:{error:r.message}},{status:500})}return Ws({status:"OK"})}async function MN({request:i}){try{const e="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";fp.setApiKey(e);const t=await i.json();if(!t)return Ws({status:"error",error:"Invalid request"},{status:400});const{email:n}=t;if(!n||!dw(n))return Ws({status:"error",error:"Email is invalid or missing"},{status:400});if(!(await fetch("https://api.sendgrid.com/v3/marketing/contacts",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({contacts:[{email:n}]})})).ok)return Ws({status:"error",error:"Failed to submit form"},{status:500});const s={to:"hello@format-3.co",from:"hello@format-3.co",subject:"New contact added!",text:`A new contact was added: ${n}`,html:`
        <h1 style="margin-bottom: 24px;">Newsletter Form Submission</h1>
        <p style="font-size: 16px; line-height: 1.5;">
          <strong>New sign-up email:</strong> ${n}
        </p>
      `};return await fp.send(s),Ws({status:"ok"})}catch(e){return console.error(e.message),Ws({status:"error",error:"Failed to submit form"},{status:500})}}const LN=[{GET:"skip",path:"/about"},{GET:"skip",path:"/contact"},{GET:"skip",path:"/"},{GET:"skip",path:"/services"},{GET:"skip",path:"/sitemap"},{GET:"skip",path:"/ai/"},{POST:EN,path:"/api/contact"},{POST:MN,path:"/api/newsLetter"},{GET:"skip",path:"/curiosity/:slug"},{GET:"skip",path:"/curiosity/"},{GET:"skip",path:"/legal/:slug"},{GET:"skip",path:"/vault/"},{GET:"skip",path:"/work/:slug"},{GET:"skip",path:"/work/"}];function f6(i){let e=/(\/?\:[^\/]+)\?/.exec(i);if(!e)return[i];let t=i.slice(0,e.index),n=i.slice(e.index+e[0].length);const r=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)r.push(t+=e[1]),n=n.slice(e[0].length);return f6(n).reduce((s,o)=>[...s,...r.map(a=>a+o)],[])}function RN(i){const e=i.path.split("/").filter(Boolean),t=[],n=[];let r=0,s=!1;for(const[o,a]of e.entries())if(a[0]===":"){const l=a.slice(1);r+=3,t.push({type:":",name:l,index:o}),n.push(null)}else a[0]==="*"?(r-=1,t.push({type:"*",name:a.slice(1),index:o}),s=!0):(r+=4,n.push(a));return{...i,score:r,params:t,matchSegments:n,wildcard:s}}LN.flatMap(i=>f6(i.path).map(t=>({...i,path:t}))).map(RN).sort((i,e)=>e.score-i.score);const BN=typeof navigator>"u"?!1:navigator.product==="ReactNative",g6={timeout:BN?6e4:12e4},PN=function(e){const t={...g6,...typeof e=="string"?{url:e}:e},{searchParams:n}=new URL(t.url,"http://localhost");if(t.timeout=p6(t.timeout),t.query){for(const[o,a]of Object.entries(t.query))if(a!==void 0)if(Array.isArray(a))for(const l of a)n.append(o,l);else n.append(o,a)}const[r]=t.url.split("?"),s=n.toString();return s&&(t.url="".concat(r,"?").concat(s)),t.method=t.body&&!t.method?"POST":(t.method||"GET").toUpperCase(),t};function p6(i){if(i===!1||i===0)return!1;if(i.connect||i.socket)return i;const e=Number(i);return isNaN(e)?p6(g6.timeout):{connect:e,socket:e}}const GN=/^https?:\/\//i,DN=function(e){if(!GN.test(e.url))throw new Error('"'.concat(e.url,'" is not a valid URL'))};var Em=function(i){return i.replace(/^\s+|\s+$/g,"")},FN=function(i){return Object.prototype.toString.call(i)==="[object Array]"},NN=function(i){if(!i)return{};for(var e={},t=Em(i).split(`
`),n=0;n<t.length;n++){var r=t[n],s=r.indexOf(":"),o=Em(r.slice(0,s)).toLowerCase(),a=Em(r.slice(s+1));typeof e[o]>"u"?e[o]=a:FN(e[o])?e[o].push(a):e[o]=[e[o],a]}return e};const kN=Ef(NN),ON=i=>function(t,n){const r=t==="onError";let s=n;for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];for(let c=0;c<i[t].length;c++){const h=i[t][c];if(s=h(s,...a),r&&!s)break}return s};function UN(){const i=Object.create(null);let e=0;function t(r){const s=e++;return i[s]=r,function(){delete i[s]}}function n(r){for(const s in i)i[s](r)}return{publish:n,subscribe:t}}const ZN=["request","response","progress","error","abort"],P5=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function m6(i,e){const t=[],n=P5.reduce((s,o)=>(s[o]=s[o]||[],s),{processOptions:[PN],validateOptions:[DN]});function r(s){const o=(g,p,m)=>{let C=g,A=p;if(!C)try{A=l("onResponse",p,m)}catch(I){A=null,C=I}C=C&&l("onError",C,m),C?a.error.publish(C):A&&a.response.publish(A)},a=ZN.reduce((g,p)=>(g[p]=UN(),g),{}),l=ON(n),c=l("processOptions",s);l("validateOptions",c);const h={options:c,channels:a,applyMiddleware:l};let u;const d=a.request.subscribe(g=>{u=e(g,(p,m)=>o(p,m,g))});a.abort.subscribe(()=>{d(),u&&u.abort()});const f=l("onReturn",a,h);return f===a&&a.request.publish(h),f}return r.use=function(o){if(!o)throw new Error("Tried to add middleware that resolved to falsey value");if(typeof o=="function")throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(o.onReturn&&n.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return P5.forEach(a=>{o[a]&&n[a].push(o[a])}),t.push(o),r},r.clone=()=>m6(t,e),i.forEach(r.use),r}var C6=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},kr=(i,e,t)=>(C6(i,e,"read from private field"),t?t.call(i):e.get(i)),ul=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ca=(i,e,t,n)=>(C6(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),A1,y1,qc,_1,ya,v1,b1;class I6{constructor(){this.readyState=0,this.responseType="",ul(this,A1,void 0),ul(this,y1,void 0),ul(this,qc,void 0),ul(this,_1,{}),ul(this,ya,void 0),ul(this,v1,{}),ul(this,b1,void 0)}open(e,t,n){ca(this,A1,e),ca(this,y1,t),ca(this,qc,""),this.readyState=1,this.onreadystatechange(),ca(this,ya,void 0)}abort(){kr(this,ya)&&kr(this,ya).abort()}getAllResponseHeaders(){return kr(this,qc)}setRequestHeader(e,t){kr(this,_1)[e]=t}setInit(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ca(this,v1,e),ca(this,b1,t)}send(e){const t=this.responseType!=="arraybuffer",n={...kr(this,v1),method:kr(this,A1),headers:kr(this,_1),body:e};typeof AbortController=="function"&&kr(this,b1)&&(ca(this,ya,new AbortController),typeof EventTarget<"u"&&kr(this,ya).signal instanceof EventTarget&&(n.signal=kr(this,ya).signal)),typeof document<"u"&&(n.credentials=this.withCredentials?"include":"omit"),fetch(kr(this,y1),n).then(r=>(r.headers.forEach((s,o)=>{ca(this,qc,kr(this,qc)+"".concat(o,": ").concat(s,`\r
`))}),this.status=r.status,this.statusText=r.statusText,this.readyState=3,t?r.text():r.arrayBuffer())).then(r=>{typeof r=="string"?this.responseText=r:this.response=r,this.readyState=4,this.onreadystatechange()}).catch(r=>{var s;if(r.name==="AbortError"){this.onabort();return}(s=this.onerror)==null||s.call(this,r)})}}A1=new WeakMap;y1=new WeakMap;qc=new WeakMap;_1=new WeakMap;ya=new WeakMap;v1=new WeakMap;b1=new WeakMap;const $2=typeof XMLHttpRequest=="function"?"xhr":"fetch",VN=$2==="xhr"?XMLHttpRequest:I6,WN=(i,e)=>{var t;const n=i.options,r=i.applyMiddleware("finalizeOptions",n),s={},o=i.applyMiddleware("interceptRequest",void 0,{adapter:$2,context:i});if(o){const y=setTimeout(e,0,null,o);return{abort:()=>clearTimeout(y)}}let a=new VN;a instanceof I6&&typeof r.fetch=="object"&&a.setInit(r.fetch,(t=r.useAbortSignal)!=null?t:!0);const l=r.headers,c=r.timeout;let h=!1,u=!1,d=!1;if(a.onerror=y=>{C(new Error("Request error while attempting to reach ".concat(r.url).concat(y.lengthComputable?"(".concat(y.loaded," of ").concat(y.total," bytes transferred)"):"")))},a.ontimeout=y=>{C(new Error("Request timeout while attempting to reach ".concat(r.url).concat(y.lengthComputable?"(".concat(y.loaded," of ").concat(y.total," bytes transferred)"):"")))},a.onabort=()=>{m(!0),h=!0},a.onreadystatechange=()=>{p(),!(h||a.readyState!==4)&&a.status!==0&&I()},a.open(r.method,r.url,!0),a.withCredentials=!!r.withCredentials,l&&a.setRequestHeader)for(const y in l)l.hasOwnProperty(y)&&a.setRequestHeader(y,l[y]);return r.rawBody&&(a.responseType="arraybuffer"),i.applyMiddleware("onRequest",{options:r,adapter:$2,request:a,context:i}),a.send(r.body||null),c&&(s.connect=setTimeout(()=>g("ETIMEDOUT"),c.connect)),{abort:f};function f(){h=!0,a&&a.abort()}function g(y){d=!0,a.abort();const x=new Error(y==="ESOCKETTIMEDOUT"?"Socket timed out on request to ".concat(r.url):"Connection timed out on request to ".concat(r.url));x.code=y,i.channels.error.publish(x)}function p(){c&&(m(),s.socket=setTimeout(()=>g("ESOCKETTIMEDOUT"),c.socket))}function m(y){(y||h||a.readyState>=2&&s.connect)&&clearTimeout(s.connect),s.socket&&clearTimeout(s.socket)}function C(y){if(u)return;m(!0),u=!0,a=null;const x=y||new Error("Network error while attempting to reach ".concat(r.url));x.isNetworkError=!0,x.request=r,e(x)}function A(){return{body:a.response||(a.responseType===""||a.responseType==="text"?a.responseText:""),url:r.url,method:r.method,headers:kN(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText}}function I(){if(!(h||u||d)){if(a.status===0){C(new Error("Unknown XHR error"));return}m(),u=!0,e(null,A())}}},HN=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WN;return m6(i,e)};var G5={exports:{}},Mm,D5;function zN(){if(D5)return Mm;D5=1;var i=1e3,e=i*60,t=e*60,n=t*24,r=n*7,s=n*365.25;Mm=function(h,u){u=u||{};var d=typeof h;if(d==="string"&&h.length>0)return o(h);if(d==="number"&&isFinite(h))return u.long?l(h):a(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(u){var d=parseFloat(u[1]),f=(u[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return d*s;case"weeks":case"week":case"w":return d*r;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*t;case"minutes":case"minute":case"mins":case"min":case"m":return d*e;case"seconds":case"second":case"secs":case"sec":case"s":return d*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function a(h){var u=Math.abs(h);return u>=n?Math.round(h/n)+"d":u>=t?Math.round(h/t)+"h":u>=e?Math.round(h/e)+"m":u>=i?Math.round(h/i)+"s":h+"ms"}function l(h){var u=Math.abs(h);return u>=n?c(h,u,n,"day"):u>=t?c(h,u,t,"hour"):u>=e?c(h,u,e,"minute"):u>=i?c(h,u,i,"second"):h+" ms"}function c(h,u,d,f){var g=u>=d*1.5;return Math.round(h/d)+" "+f+(g?"s":"")}return Mm}function YN(i){t.debug=t,t.default=t,t.coerce=l,t.disable=s,t.enable=r,t.enabled=o,t.humanize=zN(),t.destroy=c,Object.keys(i).forEach(h=>{t[h]=i[h]}),t.names=[],t.skips=[],t.formatters={};function e(h){let u=0;for(let d=0;d<h.length;d++)u=(u<<5)-u+h.charCodeAt(d),u|=0;return t.colors[Math.abs(u)%t.colors.length]}t.selectColor=e;function t(h){let u,d=null,f,g;function p(...m){if(!p.enabled)return;const C=p,A=Number(new Date),I=A-(u||A);C.diff=I,C.prev=u,C.curr=A,u=A,m[0]=t.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let y=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(T,S)=>{if(T==="%%")return"%";y++;const M=t.formatters[S];if(typeof M=="function"){const _=m[y];T=M.call(C,_),m.splice(y,1),y--}return T}),t.formatArgs.call(C,m),(C.log||t.log).apply(C,m)}return p.namespace=h,p.useColors=t.useColors(),p.color=t.selectColor(h),p.extend=n,p.destroy=t.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(f!==t.namespaces&&(f=t.namespaces,g=t.enabled(h)),g),set:m=>{d=m}}),typeof t.init=="function"&&t.init(p),p}function n(h,u){const d=t(this.namespace+(typeof u>"u"?":":u)+h);return d.log=this.log,d}function r(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];let u;const d=(typeof h=="string"?h:"").split(/[\s,]+/),f=d.length;for(u=0;u<f;u++)d[u]&&(h=d[u].replace(/\*/g,".*?"),h[0]==="-"?t.skips.push(new RegExp("^"+h.slice(1)+"$")):t.names.push(new RegExp("^"+h+"$")))}function s(){const h=[...t.names.map(a),...t.skips.map(a).map(u=>"-"+u)].join(",");return t.enable(""),h}function o(h){if(h[h.length-1]==="*")return!0;let u,d;for(u=0,d=t.skips.length;u<d;u++)if(t.skips[u].test(h))return!1;for(u=0,d=t.names.length;u<d;u++)if(t.names[u].test(h))return!0;return!1}function a(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function l(h){return h instanceof Error?h.stack||h.message:h}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var XN=YN;(function(i,e){e.formatArgs=n,e.save=r,e.load=s,e.useColors=t,e.storage=o(),e.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;l.splice(1,0,c,"color: inherit");let h=0,u=0;l[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(h++,d==="%c"&&(u=h))}),l.splice(u,0,c)}e.log=console.debug||console.log||(()=>{});function r(l){try{l?e.storage.setItem("debug",l):e.storage.removeItem("debug")}catch{}}function s(){let l;try{l=e.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}function o(){try{return localStorage}catch{}}i.exports=XN(e);const{formatters:a}=i.exports;a.j=function(l){try{return JSON.stringify(l)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(G5,G5.exports);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function F5(i){return Object.prototype.toString.call(i)==="[object Object]"}function KN(i){var e,t;return F5(i)===!1?!1:(e=i.constructor,e===void 0?!0:(t=e.prototype,!(F5(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}const jN=typeof Buffer>"u"?()=>!1:i=>Buffer.isBuffer(i),$N=["boolean","string","number"];function JN(){return{processOptions:i=>{const e=i.body;return!e||!(!(typeof e.pipe=="function")&&!jN(e)&&($N.indexOf(typeof e)!==-1||Array.isArray(e)||KN(e)))?i:Object.assign({},i,{body:JSON.stringify(i.body),headers:Object.assign({},i.headers,{"Content-Type":"application/json"})})}}}function QN(i){return{onResponse:t=>{const n=t.headers["content-type"]||"",r=i&&i.force||n.indexOf("application/json")!==-1;return!t.body||!n||!r?t:Object.assign({},t,{body:e(t.body)})},processOptions:t=>Object.assign({},t,{headers:Object.assign({Accept:"application/json"},t.headers)})};function e(t){try{return JSON.parse(t)}catch(n){throw n.message="Failed to parsed response body as JSON: ".concat(n.message),n}}}let od={};typeof globalThis<"u"?od=globalThis:typeof window<"u"?od=window:typeof global<"u"?od=global:typeof self<"u"&&(od=self);var qN=od;function ek(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).implementation||qN.Observable;if(!e)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(t,n)=>new e(r=>(t.error.subscribe(s=>r.error(s)),t.progress.subscribe(s=>r.next(Object.assign({type:"progress"},s))),t.response.subscribe(s=>{r.next(Object.assign({type:"response"},s)),r.complete()}),t.request.publish(n),()=>t.abort.publish()))}}function tk(){return{onRequest:i=>{if(i.adapter!=="xhr")return;const e=i.request,t=i.context;"upload"in e&&"onprogress"in e.upload&&(e.upload.onprogress=n("upload")),"onprogress"in e&&(e.onprogress=n("download"));function n(r){return s=>{const o=s.lengthComputable?s.loaded/s.total*100:-1;t.channels.progress.publish({stage:r,percent:o,total:s.total,loaded:s.loaded,lengthComputable:s.lengthComputable})}}}}}class nk{constructor(e){this.__CANCEL__=!0,this.message=e}toString(){return"Cancel".concat(this.message?": ".concat(this.message):"")}}const N5=class{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t=null;this.promise=new Promise(n=>{t=n}),e(n=>{this.reason||(this.reason=new nk(n),t(this.reason))})}};N5.source=()=>{let i;return{token:new N5(t=>{i=t}),cancel:i}};var A6=(i,e,t)=>t.method!=="GET"&&t.method!=="HEAD"?!1:i.isNetworkError||!1;const ik=i=>i!==null&&typeof i=="object"&&typeof i.pipe=="function";var rk=i=>{const e=i.maxRetries||5,t=i.retryDelay||sk,n=i.shouldRetry;return{onError:(r,s)=>{const o=s.options,a=o.maxRetries||e,l=o.shouldRetry||n,c=o.attemptNumber||0;if(ik(o.body)||!l(r,c,o)||c>=a)return r;const h=Object.assign({},s,{options:Object.assign({},o,{attemptNumber:c+1})});return setTimeout(()=>s.channels.request.publish(h),t(c)),null}}};function sk(i){return 100*Math.pow(2,i)+Math.random()*100}const Xy=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return rk({shouldRetry:A6,...i})};Xy.shouldRetry=A6;var J2=function(i,e){return J2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},J2(i,e)};function Ky(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");J2(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function k5(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function gp(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var n=t.call(i),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return s}function pp(i,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return i.concat(s||Array.prototype.slice.call(e))}function qs(i){return typeof i=="function"}function y6(i){var e=function(n){Error.call(n),n.stack=new Error().stack},t=i(e);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Lm=y6(function(i){return function(t){i(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function O5(i,e){if(i){var t=i.indexOf(e);0<=t&&i.splice(t,1)}}var jy=function(){function i(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return i.prototype.unsubscribe=function(){var e,t,n,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=k5(o),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(p){e={error:p}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var h=this.initialTeardown;if(qs(h))try{h()}catch(p){s=p instanceof Lm?p.errors:[p]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var d=k5(u),f=d.next();!f.done;f=d.next()){var g=f.value;try{U5(g)}catch(p){s=s??[],p instanceof Lm?s=pp(pp([],gp(s)),gp(p.errors)):s.push(p)}}}catch(p){n={error:p}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}if(s)throw new Lm(s)}},i.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)U5(e);else{if(e instanceof i){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}},i.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},i.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},i.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&O5(t,e)},i.prototype.remove=function(e){var t=this._finalizers;t&&O5(t,e),e instanceof i&&e._removeParent(this)},i.EMPTY=function(){var e=new i;return e.closed=!0,e}(),i}();jy.EMPTY;function _6(i){return i instanceof jy||i&&"closed"in i&&qs(i.remove)&&qs(i.add)&&qs(i.unsubscribe)}function U5(i){qs(i)?i():i.unsubscribe()}var v6={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Q2={setTimeout:function(i,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var r=Q2.delegate;return r?.setTimeout?r.setTimeout.apply(r,pp([i,e],gp(t))):setTimeout.apply(void 0,pp([i,e],gp(t)))},clearTimeout:function(i){var e=Q2.delegate;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ok(i){Q2.setTimeout(function(){throw i})}function Z5(){}function ak(i){i()}var $y=function(i){Ky(e,i);function e(t){var n=i.call(this)||this;return n.isStopped=!1,t?(n.destination=t,_6(t)&&t.add(n)):n.destination=uk,n}return e.create=function(t,n,r){return new q2(t,n,r)},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(jy),lk=Function.prototype.bind;function Rm(i,e){return lk.call(i,e)}var ck=function(){function i(e){this.partialObserver=e}return i.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){ng(n)}},i.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){ng(n)}else ng(e)},i.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){ng(t)}},i}(),q2=function(i){Ky(e,i);function e(t,n,r){var s=i.call(this)||this,o;if(qs(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{var a;s&&v6.useDeprecatedNextContext?(a=Object.create(t),a.unsubscribe=function(){return s.unsubscribe()},o={next:t.next&&Rm(t.next,a),error:t.error&&Rm(t.error,a),complete:t.complete&&Rm(t.complete,a)}):o=t}return s.destination=new ck(o),s}return e}($y);function ng(i){ok(i)}function hk(i){throw i}var uk={closed:!0,next:Z5,error:hk,complete:Z5},dk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fk(i){return i}function gk(i){return i.length===0?fk:i.length===1?i[0]:function(t){return i.reduce(function(n,r){return r(n)},t)}}var $d=function(){function i(e){e&&(this._subscribe=e)}return i.prototype.lift=function(e){var t=new i;return t.source=this,t.operator=e,t},i.prototype.subscribe=function(e,t,n){var r=this,s=mk(e)?e:new q2(e,t,n);return ak(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},i.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},i.prototype.forEach=function(e,t){var n=this;return t=V5(t),new t(function(r,s){var o=new q2({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});n.subscribe(o)})},i.prototype._subscribe=function(e){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(e)},i.prototype[dk]=function(){return this},i.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return gk(e)(this)},i.prototype.toPromise=function(e){var t=this;return e=V5(e),new e(function(n,r){var s;t.subscribe(function(o){return s=o},function(o){return r(o)},function(){return n(s)})})},i.create=function(e){return new i(e)},i}();function V5(i){var e;return(e=i??v6.Promise)!==null&&e!==void 0?e:Promise}function pk(i){return i&&qs(i.next)&&qs(i.error)&&qs(i.complete)}function mk(i){return i&&i instanceof $y||pk(i)&&_6(i)}function Ck(i){return qs(i?.lift)}function b6(i){return function(e){if(Ck(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function x6(i,e,t,n,r){return new Ik(i,e,t,n,r)}var Ik=function(i){Ky(e,i);function e(t,n,r,s,o,a){var l=i.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(c){try{n(c)}catch(h){t.error(h)}}:i.prototype._next,l._error=s?function(c){try{s(c)}catch(h){t.error(h)}finally{this.unsubscribe()}}:i.prototype._error,l._complete=r?function(){try{r()}catch(c){t.error(c)}finally{this.unsubscribe()}}:i.prototype._complete,l}return e.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;i.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},e}($y),Ak=y6(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}});function mi(i,e){var t=typeof e=="object";return new Promise(function(n,r){var s=!1,o;i.subscribe({next:function(a){o=a,s=!0},error:r,complete:function(){s?n(o):t?n(e.defaultValue):r(new Ak)}})})}function fc(i,e){return b6(function(t,n){var r=0;t.subscribe(x6(n,function(s){n.next(i.call(e,s,r++))}))})}function Pf(i,e){return b6(function(t,n){var r=0;t.subscribe(x6(n,function(s){return i.call(e,s,r++)&&n.next(s)}))})}const Bm=5;class yk extends Error{constructor(e){const t=w6(e);super(t.message),this.statusCode=400,Object.assign(this,t)}}class _k extends Error{constructor(e){const t=w6(e);super(t.message),this.statusCode=500,Object.assign(this,t)}}function w6(i){const e=i.body,t={response:i,statusCode:i.statusCode,responseBody:xk(e,i),message:"",details:void 0};if(e.error&&e.message)return t.message="".concat(e.error," - ").concat(e.message),t;if(vk(e)){const n=e.error.items||[],r=n.slice(0,Bm).map(o=>{var a;return(a=o.error)==null?void 0:a.description}).filter(Boolean);let s=r.length?`:
- `.concat(r.join(`
- `)):"";return n.length>Bm&&(s+=`
...and `.concat(n.length-Bm," more")),t.message="".concat(e.error.description).concat(s),t.details=e.error,t}return e.error&&e.error.description?(t.message=e.error.description,t.details=e.error,t):(t.message=e.error||e.message||bk(i),t)}function vk(i){return W5(i)&&W5(i.error)&&i.error.type==="mutationError"&&typeof i.error.description=="string"}function W5(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function bk(i){const e=i.statusMessage?" ".concat(i.statusMessage):"";return"".concat(i.method,"-request to ").concat(i.url," resulted in HTTP ").concat(i.statusCode).concat(e)}function xk(i,e){return(e.headers["content-type"]||"").toLowerCase().indexOf("application/json")!==-1?JSON.stringify(i,null,2):i}const wk={onResponse:i=>{if(i.statusCode>=500)throw new _k(i);if(i.statusCode>=400)throw new yk(i);return i}},Sk={onResponse:i=>{const e=i.headers["x-sanity-warning"];return(Array.isArray(e)?e:[e]).filter(Boolean).forEach(n=>console.warn(n)),i}};function H5(i,e){let{maxRetries:t=5,retryDelay:n}=e;const r=HN([t>0?Xy({retryDelay:n,maxRetries:t,shouldRetry:Tk}):{},...i,Sk,JN(),QN(),tk(),wk,ek({implementation:$d})]);function s(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:r)({maxRedirects:0,...o})}return s.defaultRequester=r,s}function Tk(i,e,t){const n=t.method==="GET"||t.method==="HEAD",s=(t.uri||t.url).startsWith("/data/query"),o=i.response&&(i.response.statusCode===429||i.response.statusCode===502||i.response.statusCode===503);return(n||s)&&o?!0:Xy.shouldRetry(i,e,t)}function S6(i){if(typeof i=="string"||Array.isArray(i))return{id:i};if(typeof i=="object"&&i!==null&&"query"in i&&typeof i.query=="string")return"params"in i&&typeof i.params=="object"&&i.params!==null?{query:i.query,params:i.params}:{query:i.query};const e=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join(`
`);throw new Error(`Unknown selection - must be one of:

`.concat(e))}const z5=["image","file"],Y5=["before","after","replace"],T6=i=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(i))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},Ek=i=>{if(!/^[-a-z0-9]+$/i.test(i))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},Mk=i=>{if(z5.indexOf(i)===-1)throw new Error("Invalid asset type: ".concat(i,". Must be one of ").concat(z5.join(", ")))},Sd=(i,e)=>{if(e===null||typeof e!="object"||Array.isArray(e))throw new Error("".concat(i,"() takes an object of properties"))},E6=(i,e)=>{if(typeof e!="string"||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(e)||e.includes(".."))throw new Error("".concat(i,'(): "').concat(e,'" is not a valid document ID'))},mp=(i,e)=>{if(!e._id)throw new Error("".concat(i,'() requires that the document contains an ID ("_id" property)'));E6(i,e._id)},Lk=(i,e,t)=>{const n="insert(at, selector, items)";if(Y5.indexOf(i)===-1){const r=Y5.map(s=>'"'.concat(s,'"')).join(", ");throw new Error("".concat(n,' takes an "at"-argument which is one of: ').concat(r))}if(typeof e!="string")throw new Error("".concat(n,' takes a "selector"-argument which must be a string'));if(!Array.isArray(t))throw new Error("".concat(n,' takes an "items"-argument which must be an array'))},M6=i=>{if(!i.dataset)throw new Error("`dataset` must be provided to perform queries");return i.dataset||""},L6=i=>{if(typeof i!="string"||!/^[a-z0-9._-]{1,75}$/i.test(i))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return i};var R6=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},wh=(i,e,t)=>(R6(i,e,"read from private field"),t?t.call(i):e.get(i)),B6=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},P6=(i,e,t,n)=>(R6(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),eh,th;class G6{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.selection=e,this.operations=t}set(e){return this._assign("set",e)}setIfMissing(e){return this._assign("setIfMissing",e)}diffMatchPatch(e){return Sd("diffMatchPatch",e),this._assign("diffMatchPatch",e)}unset(e){if(!Array.isArray(e))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:e}),this}inc(e){return this._assign("inc",e)}dec(e){return this._assign("dec",e)}insert(e,t,n){return Lk(e,t,n),this._assign("insert",{[e]:t,items:n})}append(e,t){return this.insert("after","".concat(e,"[-1]"),t)}prepend(e,t){return this.insert("before","".concat(e,"[0]"),t)}splice(e,t,n,r){const s=typeof n>"u"||n===-1,o=t<0?t-1:t,a=s?-1:Math.max(0,t+n),l=o<0&&a>=0?"":a,c="".concat(e,"[").concat(o,":").concat(l,"]");return this.insert("replace",c,r||[])}ifRevisionId(e){return this.operations.ifRevisionID=e,this}serialize(){return{...S6(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Sd(e,t),this.operations=Object.assign({},this.operations,{[e]:Object.assign({},n&&this.operations[e]||{},t)}),this}_set(e,t){return this._assign(e,t,!1)}}const Rk=class D6 extends G6{constructor(e,t,n){super(e,t),B6(this,eh,void 0),P6(this,eh,n)}clone(){return new D6(this.selection,{...this.operations},wh(this,eh))}commit(e){if(!wh(this,eh))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const t=typeof this.selection=="string",n=Object.assign({returnFirst:t,returnDocuments:!0},e);return wh(this,eh).mutate({patch:this.serialize()},n)}};eh=new WeakMap;let Td=Rk;const Bk=class F6 extends G6{constructor(e,t,n){super(e,t),B6(this,th,void 0),P6(this,th,n)}clone(){return new F6(this.selection,{...this.operations},wh(this,th))}commit(e){if(!wh(this,th))throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const t=typeof this.selection=="string",n=Object.assign({returnFirst:t,returnDocuments:!0},e);return wh(this,th).mutate({patch:this.serialize()},n)}};th=new WeakMap;let Ed=Bk;var N6=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ba=(i,e,t)=>(N6(i,e,"read from private field"),t?t.call(i):e.get(i)),k6=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},O6=(i,e,t,n)=>(N6(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Sl,Tl;const U6={returnDocuments:!1};class Z6{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.operations=e,this.trxId=t}create(e){return Sd("create",e),this._add({create:e})}createIfNotExists(e){const t="createIfNotExists";return Sd(t,e),mp(t,e),this._add({[t]:e})}createOrReplace(e){const t="createOrReplace";return Sd(t,e),mp(t,e),this._add({[t]:e})}delete(e){return E6("delete",e),this._add({delete:{id:e}})}transactionId(e){return e?(this.trxId=e,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(e){return this.operations.push(e),this}}const Pk=class V6 extends Z6{constructor(e,t,n){super(e,n),k6(this,Sl,void 0),O6(this,Sl,t)}clone(){return new V6([...this.operations],Ba(this,Sl),this.trxId)}commit(e){if(!Ba(this,Sl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return Ba(this,Sl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},U6,e||{}))}patch(e,t){const n=typeof t=="function";if(typeof e!="string"&&e instanceof Ed)return this._add({patch:e.serialize()});if(n){const s=t(new Ed(e,{},Ba(this,Sl)));if(!(s instanceof Ed))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:s.serialize()})}return this._add({patch:{id:e,...t}})}};Sl=new WeakMap;let W6=Pk;const Gk=class H6 extends Z6{constructor(e,t,n){super(e,n),k6(this,Tl,void 0),O6(this,Tl,t)}clone(){return new H6([...this.operations],Ba(this,Tl),this.trxId)}commit(e){if(!Ba(this,Tl))throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return Ba(this,Tl).mutate(this.serialize(),Object.assign({transactionId:this.trxId},U6,e||{}))}patch(e,t){const n=typeof t=="function";if(typeof e!="string"&&e instanceof Td)return this._add({patch:e.serialize()});if(n){const s=t(new Td(e,{},Ba(this,Tl)));if(!(s instanceof Td))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:s.serialize()})}return this._add({patch:{id:e,...t}})}};Tl=new WeakMap;let z6=Gk;const Dk="https://www.sanity.io/help/";function Jy(i){return Dk+i}function Fk(i){let e=!1,t;return function(){return e||(t=i(...arguments),e=!0),t}}const P0=i=>Fk(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.warn(i.join(" "),...t)}),Nk=P0(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),kk=P0(["The Sanity client is configured with the `perspective` set to `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),Ok=P0(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(Jy("js-client-browser-token")," for more information and how to hide this warning.")]),Uk=P0(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(Jy("js-client-api-version"))]),Zk="apicdn.sanity.io",Cp={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0},Vk=["localhost","127.0.0.1","0.0.0.0"],Wk=i=>Vk.indexOf(i)!==-1,Hk=function(e){if(e==="1"||e==="X")return;const t=new Date(e);if(!(/^\d{4}-\d{2}-\d{2}$/.test(e)&&t instanceof Date&&t.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")},Y6=function(e){switch(e){case"previewDrafts":case"published":case"raw":return;default:throw new TypeError("Invalid API perspective string, expected `published`, `previewDrafts` or `raw`")}},X6=(i,e)=>{const t=Object.assign({},e,i);t.apiVersion||Uk();const n=Object.assign({},Cp,t),r=n.useProjectHostname;if(typeof Promise>"u"){const u=Jy("js-client-promise-polyfill");throw new Error("No native Promise-implementation found, polyfill needed - see ".concat(u))}if(r&&!n.projectId)throw new Error("Configuration must contain `projectId`");if(typeof n.perspective=="string"&&Y6(n.perspective),"encodeSourceMapAtPath"in n||"encodeSourceMap"in n||"studioUrl"in n||"logger"in n)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client', such as 'encodeSourceMapAtPath', 'encodeSourceMap', 'studioUrl' and 'logger'. Make sure you're using the right import.");if("stega"in n&&n.stega!==void 0&&n.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'createClient' to 'false'.");const s=typeof window<"u"&&window.location&&window.location.hostname,o=s&&Wk(window.location.hostname);s&&o&&n.token&&n.ignoreBrowserTokenWarning!==!0?Ok():typeof n.useCdn>"u"&&Nk(),r&&Ek(n.projectId),n.dataset&&T6(n.dataset),"requestTagPrefix"in n&&(n.requestTagPrefix=n.requestTagPrefix?L6(n.requestTagPrefix).replace(/\.+$/,""):void 0),n.apiVersion="".concat(n.apiVersion).replace(/^v/,""),n.isDefaultApi=n.apiHost===Cp.apiHost,n.useCdn=n.useCdn!==!1&&!n.withCredentials,Hk(n.apiVersion);const a=n.apiHost.split("://",2),l=a[0],c=a[1],h=n.isDefaultApi?Zk:c;return n.useProjectHostname?(n.url="".concat(l,"://").concat(n.projectId,".").concat(c,"/v").concat(n.apiVersion),n.cdnUrl="".concat(l,"://").concat(n.projectId,".").concat(h,"/v").concat(n.apiVersion)):(n.url="".concat(n.apiHost,"/v").concat(n.apiVersion),n.cdnUrl=n.url),n},zk="X-Sanity-Project-ID";function Yk(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t={},n=e.token||i.token;n&&(t.Authorization="Bearer ".concat(n)),!e.useGlobalApi&&!i.useProjectHostname&&i.projectId&&(t[zk]=i.projectId);const r=!!(typeof e.withCredentials>"u"?i.token||i.withCredentials:e.withCredentials),s=typeof e.timeout>"u"?i.timeout:e.timeout;return Object.assign({},e,{headers:Object.assign({},t,e.headers||{}),timeout:typeof s>"u"?5*60*1e3:s,proxy:e.proxy||i.proxy,json:!0,withCredentials:r,fetch:typeof e.fetch=="object"&&typeof i.fetch=="object"?{...i.fetch,...e.fetch}:e.fetch||i.fetch})}const K6=i=>{let{query:e,params:t={},options:n={}}=i;const r=new URLSearchParams,{tag:s,...o}=n;s&&r.append("tag",s),r.append("query",e);for(const[a,l]of Object.entries(t))r.append("$".concat(a),JSON.stringify(l));for(const[a,l]of Object.entries(o))l&&r.append(a,"".concat(l));return"?".concat(r)},Xk=(i,e)=>i===!1?void 0:typeof i>"u"?e:i,Kk=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{dryRun:i.dryRun,returnIds:!0,returnDocuments:Xk(i.returnDocuments,!0),visibility:i.visibility||"sync",autoGenerateArrayKeys:i.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:i.skipCrossDatasetReferenceValidation}},Qy=i=>i.type==="response",jk=i=>i.body,$k=(i,e)=>i.reduce((t,n)=>(t[e(n)]=n,t),Object.create(null)),Jk=11264;function j6(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if("stega"in r&&r.stega!==void 0&&r.stega!==!1)throw new Error("It looks like you're using options meant for '@sanity/client/stega'. Make sure you're using the right import. Or set 'stega' in 'fetch' to 'false'.");const s=r.filterResponse===!1?h=>h:h=>h.result,{cache:o,next:a,...l}={useAbortSignal:typeof r.signal<"u",...r},c=typeof o<"u"||typeof a<"u"?{...l,fetch:{cache:o,next:a}}:l;return Gf(i,e,"query",{query:t,params:n},c).pipe(fc(s))}function $6(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r={uri:Cu(i,"doc",t),json:!0,tag:n.tag};return Df(i,e,r).pipe(Pf(Qy),fc(s=>s.body.documents&&s.body.documents[0]))}function J6(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r={uri:Cu(i,"doc",t.join(",")),json:!0,tag:n.tag};return Df(i,e,r).pipe(Pf(Qy),fc(s=>{const o=$k(s.body.documents||[],a=>a._id);return t.map(a=>o[a]||null)}))}function Q6(i,e,t,n){return mp("createIfNotExists",t),G0(i,e,t,"createIfNotExists",n)}function q6(i,e,t,n){return mp("createOrReplace",t),G0(i,e,t,"createOrReplace",n)}function e7(i,e,t,n){return Gf(i,e,"mutate",{mutations:[{delete:S6(t)}]},n)}function t7(i,e,t,n){let r;t instanceof Ed||t instanceof Td?r={patch:t.serialize()}:t instanceof W6||t instanceof z6?r=t.serialize():r=t;const s=Array.isArray(r)?r:[r],o=n&&n.transactionId||void 0;return Gf(i,e,"mutate",{mutations:s,transactionId:o},n)}function Gf(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=t==="mutate",o=t==="query",a=s?"":K6(n),l=!s&&a.length<Jk,c=l?a:"",h=r.returnFirst,{timeout:u,token:d,tag:f,headers:g}=r,p=Cu(i,t,c),m={method:l?"GET":"POST",uri:p,json:!0,body:l?void 0:n,query:s&&Kk(r),timeout:u,headers:g,token:d,tag:f,perspective:r.perspective,resultSourceMap:r.resultSourceMap,canUseCdn:o,signal:r.signal,fetch:r.fetch,useAbortSignal:r.useAbortSignal,useCdn:r.useCdn};return Df(i,e,m).pipe(Pf(Qy),fc(jk),fc(C=>{if(!s)return C;const A=C.results||[];if(r.returnDocuments)return h?A[0]&&A[0].document:A.map(x=>x.document);const I=h?"documentId":"documentIds",y=h?A[0]&&A[0].id:A.map(x=>x.id);return{transactionId:C.transactionId,results:A,[I]:y}}))}function G0(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s={[n]:t},o=Object.assign({returnFirst:!0,returnDocuments:!0},r);return Gf(i,e,"mutate",{mutations:[s]},o)}function Df(i,e,t){var n,r;const s=t.url||t.uri,o=i.config(),a=typeof t.canUseCdn>"u"?["GET","HEAD"].indexOf(t.method||"GET")>=0&&s.indexOf("/data/")===0:t.canUseCdn;let l=((n=t.useCdn)!=null?n:o.useCdn)&&a;const c=t.tag&&o.requestTagPrefix?[o.requestTagPrefix,t.tag].join("."):t.tag||o.requestTagPrefix;if(c&&t.tag!==null&&(t.query={tag:L6(c),...t.query}),["GET","HEAD","POST"].indexOf(t.method||"GET")>=0&&s.indexOf("/data/query/")===0){const d=(r=t.resultSourceMap)!=null?r:o.resultSourceMap;d!==void 0&&d!==!1&&(t.query={resultSourceMap:d,...t.query});const f=t.perspective||o.perspective;typeof f=="string"&&f!=="raw"&&(Y6(f),t.query={perspective:f,...t.query},f==="previewDrafts"&&l&&(l=!1,kk()))}const h=Yk(o,Object.assign({},t,{url:qy(i,s,l)})),u=new $d(d=>e(h,o.requester).subscribe(d));return t.signal?u.pipe(Qk(t.signal)):u}function Ss(i,e,t){return Df(i,e,t).pipe(Pf(r=>r.type==="response"),fc(r=>r.body))}function Cu(i,e,t){const n=i.config(),r=M6(n),s="/".concat(e,"/").concat(r),o=t?"".concat(s,"/").concat(t):s;return"/data".concat(o).replace(/\/($|\?)/,"$1")}function qy(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const{url:n,cdnUrl:r}=i.config(),s=t?r:n;return"".concat(s,"/").concat(e.replace(/^\//,""))}function Qk(i){return e=>new $d(t=>{const n=()=>t.error(eO(i));if(i&&i.aborted){n();return}const r=e.subscribe(t);return i.addEventListener("abort",n),()=>{i.removeEventListener("abort",n),r.unsubscribe()}})}const qk=!!globalThis.DOMException;function eO(i){var e,t;if(qk)return new DOMException((e=i?.reason)!=null?e:"The operation was aborted.","AbortError");const n=new Error((t=i?.reason)!=null?t:"The operation was aborted.");return n.name="AbortError",n}var n7=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ip=(i,e,t)=>(n7(i,e,"read from private field"),t?t.call(i):e.get(i)),Ap=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},yp=(i,e,t,n)=>(n7(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),x1,w1,S1,T1;class tO{constructor(e,t){Ap(this,x1,void 0),Ap(this,w1,void 0),yp(this,x1,e),yp(this,w1,t)}upload(e,t,n){return i7(Ip(this,x1),Ip(this,w1),e,t,n)}}x1=new WeakMap;w1=new WeakMap;class nO{constructor(e,t){Ap(this,S1,void 0),Ap(this,T1,void 0),yp(this,S1,e),yp(this,T1,t)}upload(e,t,n){const r=i7(Ip(this,S1),Ip(this,T1),e,t,n);return mi(r.pipe(Pf(s=>s.type==="response"),fc(s=>s.body.document)))}}S1=new WeakMap;T1=new WeakMap;function i7(i,e,t,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};Mk(t);let s=r.extract||void 0;s&&!s.length&&(s=["none"]);const o=M6(i.config()),a=t==="image"?"images":"files",l=iO(r,n),{tag:c,label:h,title:u,description:d,creditLine:f,filename:g,source:p}=l,m={label:h,title:u,description:d,filename:g,meta:s,creditLine:f};return p&&(m.sourceId=p.id,m.sourceName=p.name,m.sourceUrl=p.url),Df(i,e,{tag:c,method:"POST",timeout:l.timeout||0,uri:"/assets/".concat(a,"/").concat(o),headers:l.contentType?{"Content-Type":l.contentType}:{},query:m,body:n})}function iO(i,e){return typeof File>"u"||!(e instanceof File)?i:Object.assign({filename:i.preserveFilename===!1?void 0:e.name,contentType:e.type},i)}var rO=(i,e)=>Object.keys(e).concat(Object.keys(i)).reduce((t,n)=>(t[n]=typeof i[n]>"u"?e[n]:i[n],t),{});const sO=(i,e)=>e.reduce((t,n)=>(typeof i[n]>"u"||(t[n]=i[n]),t),{}),oO=16e3-1200,aO=["includePreviousRevision","includeResult","visibility","effectFormat","tag"],lO={includeResult:!0};function r7(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{url:n,token:r,withCredentials:s,requestTagPrefix:o}=this.config(),a=t.tag&&o?[o,t.tag].join("."):t.tag,l={...rO(t,lO),tag:a},c=sO(l,aO),h=K6({query:i,params:e,options:{tag:a,...c}}),u="".concat(n).concat(Cu(this,"listen",h));if(u.length>oO)return new $d(p=>p.error(new Error("Query too large for listener")));const d=l.events?l.events:["mutation"],f=d.indexOf("reconnect")!==-1,g={};return(r||s)&&(g.withCredentials=!0),r&&(g.headers={Authorization:"Bearer ".concat(r)}),new $d(p=>{let m;_().then(E=>{m=E}).catch(E=>{p.error(E),B()});let C,A=!1;function I(){A||(M(),!A&&m.readyState===m.CLOSED&&(S(),clearTimeout(C),C=setTimeout(v,100)))}function y(E){p.error(cO(E))}function x(E){const L=s7(E);return L instanceof Error?p.error(L):p.next(L)}function T(){A=!0,S(),p.complete()}function S(){m&&(m.removeEventListener("error",I),m.removeEventListener("channelError",y),m.removeEventListener("disconnect",T),d.forEach(E=>m.removeEventListener(E,x)),m.close())}function M(){f&&p.next({type:"reconnect"})}async function _(){const{default:E}=await yr(()=>import("./browser-787f3862.js").then(G=>G.b),[]),L=new E(u,g);return L.addEventListener("error",I),L.addEventListener("channelError",y),L.addEventListener("disconnect",T),d.forEach(G=>L.addEventListener(G,x)),L}function v(){_().then(E=>{m=E}).catch(E=>{p.error(E),B()})}function B(){A=!0,S()}return B})}function s7(i){try{const e=i.data&&JSON.parse(i.data)||{};return Object.assign({type:i.type},e)}catch(e){return e}}function cO(i){if(i instanceof Error)return i;const e=s7(i);return e instanceof Error?e:new Error(hO(e))}function hO(i){return i.error?i.error.description?i.error.description:typeof i.error=="string"?i.error:JSON.stringify(i.error,null,2):i.message||"Unknown listener error"}var o7=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Bi=(i,e,t)=>(o7(i,e,"read from private field"),t?t.call(i):e.get(i)),_p=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},vp=(i,e,t,n)=>(o7(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),El,Ml,Ll,Rl;class uO{constructor(e,t){_p(this,El,void 0),_p(this,Ml,void 0),vp(this,El,e),vp(this,Ml,t)}create(e,t){return Sh(Bi(this,El),Bi(this,Ml),"PUT",e,t)}edit(e,t){return Sh(Bi(this,El),Bi(this,Ml),"PATCH",e,t)}delete(e){return Sh(Bi(this,El),Bi(this,Ml),"DELETE",e)}list(){return Ss(Bi(this,El),Bi(this,Ml),{uri:"/datasets",tag:null})}}El=new WeakMap;Ml=new WeakMap;class dO{constructor(e,t){_p(this,Ll,void 0),_p(this,Rl,void 0),vp(this,Ll,e),vp(this,Rl,t)}create(e,t){return mi(Sh(Bi(this,Ll),Bi(this,Rl),"PUT",e,t))}edit(e,t){return mi(Sh(Bi(this,Ll),Bi(this,Rl),"PATCH",e,t))}delete(e){return mi(Sh(Bi(this,Ll),Bi(this,Rl),"DELETE",e))}list(){return mi(Ss(Bi(this,Ll),Bi(this,Rl),{uri:"/datasets",tag:null}))}}Ll=new WeakMap;Rl=new WeakMap;function Sh(i,e,t,n,r){return T6(n),Ss(i,e,{method:t,uri:"/datasets/".concat(n),body:r,tag:null})}var a7=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Pa=(i,e,t)=>(a7(i,e,"read from private field"),t?t.call(i):e.get(i)),bp=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},xp=(i,e,t,n)=>(a7(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),ad,ld,cd,hd;class fO{constructor(e,t){bp(this,ad,void 0),bp(this,ld,void 0),xp(this,ad,e),xp(this,ld,t)}list(e){const t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return Ss(Pa(this,ad),Pa(this,ld),{uri:t})}getById(e){return Ss(Pa(this,ad),Pa(this,ld),{uri:"/projects/".concat(e)})}}ad=new WeakMap;ld=new WeakMap;class gO{constructor(e,t){bp(this,cd,void 0),bp(this,hd,void 0),xp(this,cd,e),xp(this,hd,t)}list(e){const t=e?.includeMembers===!1?"/projects?includeMembers=false":"/projects";return mi(Ss(Pa(this,cd),Pa(this,hd),{uri:t}))}getById(e){return mi(Ss(Pa(this,cd),Pa(this,hd),{uri:"/projects/".concat(e)}))}}cd=new WeakMap;hd=new WeakMap;var l7=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},wp=(i,e,t)=>(l7(i,e,"read from private field"),t?t.call(i):e.get(i)),Sp=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Tp=(i,e,t,n)=>(l7(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),E1,M1,L1,R1;class pO{constructor(e,t){Sp(this,E1,void 0),Sp(this,M1,void 0),Tp(this,E1,e),Tp(this,M1,t)}getById(e){return Ss(wp(this,E1),wp(this,M1),{uri:"/users/".concat(e)})}}E1=new WeakMap;M1=new WeakMap;class mO{constructor(e,t){Sp(this,L1,void 0),Sp(this,R1,void 0),Tp(this,L1,e),Tp(this,R1,t)}getById(e){return mi(Ss(wp(this,L1),wp(this,R1),{uri:"/users/".concat(e)}))}}L1=new WeakMap;R1=new WeakMap;var c7=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Bt=(i,e,t)=>(c7(i,e,"read from private field"),t?t.call(i):e.get(i)),Ep=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Mp=(i,e,t,n)=>(c7(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Bl,hi,Pl,ti;const CO=class eI{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cp;Ep(this,Bl,void 0),Ep(this,hi,void 0),this.listen=r7,this.config(t),Mp(this,hi,e),this.assets=new tO(this,Bt(this,hi)),this.datasets=new uO(this,Bt(this,hi)),this.projects=new fO(this,Bt(this,hi)),this.users=new pO(this,Bt(this,hi))}clone(){return new eI(Bt(this,hi),this.config())}config(e){if(e===void 0)return{...Bt(this,Bl)};if(Bt(this,Bl)&&Bt(this,Bl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return Mp(this,Bl,X6(e,Bt(this,Bl)||{})),this}withConfig(e){return new eI(Bt(this,hi),{...this.config(),...e})}fetch(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return j6(this,Bt(this,hi),e,t,n)}getDocument(e,t){return $6(this,Bt(this,hi),e,t)}getDocuments(e,t){return J6(this,Bt(this,hi),e,t)}create(e,t){return G0(this,Bt(this,hi),e,"create",t)}createIfNotExists(e,t){return Q6(this,Bt(this,hi),e,t)}createOrReplace(e,t){return q6(this,Bt(this,hi),e,t)}delete(e,t){return e7(this,Bt(this,hi),e,t)}mutate(e,t){return t7(this,Bt(this,hi),e,t)}patch(e,t){return new Td(e,t,this)}transaction(e){return new z6(e,this)}request(e){return Ss(this,Bt(this,hi),e)}getUrl(e,t){return qy(this,e,t)}getDataUrl(e,t){return Cu(this,e,t)}};Bl=new WeakMap;hi=new WeakMap;let IO=CO;const AO=class tI{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cp;Ep(this,Pl,void 0),Ep(this,ti,void 0),this.listen=r7,this.config(t),Mp(this,ti,e),this.assets=new nO(this,Bt(this,ti)),this.datasets=new dO(this,Bt(this,ti)),this.projects=new gO(this,Bt(this,ti)),this.users=new mO(this,Bt(this,ti)),this.observable=new IO(e,t)}clone(){return new tI(Bt(this,ti),this.config())}config(e){if(e===void 0)return{...Bt(this,Pl)};if(Bt(this,Pl)&&Bt(this,Pl).allowReconfigure===!1)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(e),Mp(this,Pl,X6(e,Bt(this,Pl)||{})),this}withConfig(e){return new tI(Bt(this,ti),{...this.config(),...e})}fetch(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return mi(j6(this,Bt(this,ti),e,t,n))}getDocument(e,t){return mi($6(this,Bt(this,ti),e,t))}getDocuments(e,t){return mi(J6(this,Bt(this,ti),e,t))}create(e,t){return mi(G0(this,Bt(this,ti),e,"create",t))}createIfNotExists(e,t){return mi(Q6(this,Bt(this,ti),e,t))}createOrReplace(e,t){return mi(q6(this,Bt(this,ti),e,t))}delete(e,t){return mi(e7(this,Bt(this,ti),e,t))}mutate(e,t){return mi(t7(this,Bt(this,ti),e,t))}patch(e,t){return new Ed(e,t,this)}transaction(e){return new W6(e,this)}request(e){return mi(Ss(this,Bt(this,ti),e))}dataRequest(e,t,n){return mi(Gf(this,Bt(this,ti),e,t,n))}getUrl(e,t){return qy(this,e,t)}getDataUrl(e,t){return Cu(this,e,t)}};Pl=new WeakMap;ti=new WeakMap;let yO=AO;function _O(i,e){return{requester:H5(i,{}).defaultRequester,createClient:s=>new e(H5(i,{maxRetries:s.maxRetries,retryDelay:s.retryDelay}),s)}}var vO=[];const bO=_O(vO,yO),xO=bO.createClient,wO=xO({dataset:"production",projectId:"vu4lf9wl",useCdn:!0,apiVersion:"2023-05-04"}),po={title:!0,path:!0,description:!0,keywords:!0,"...image":{'"image": asset->':{'"src": url':!0,"...metadata.dimensions":{width:!0,height:!0}}}},wr={label:!0,href:!0,isExternal:!0},st=()=>({alt:!0,type:!0,video:{'"src": file.asset->url':!0,width:!0,height:!0},"...src.asset->":{'"src": url':!0,"...metadata.dimensions":{width:!0,height:!0}}});function nI(i){return Object.entries(i).map(([e,t])=>t===!0?e:Array.isArray(t)?`${e}[] { ${nI(t[0])} }`:`${e} { ${nI(t)} }`).join(", ")}function Ms(i,e){return wO.fetch(nI(i),e)}const h7=ta(null);let Bre=function(i){return i.Video="video",i.Image="image",i}({});function e3(){return Ts(h7)}function Pre(i,e){const t=i();return F(Ac,{get when(){return t()},get children(){return F(h7.Provider,{get value(){return t()},get children(){return F(e,{})}})}})}const u7=ta(null);function D0(){return Ts(u7)}const d7=i=>{const[e,t]=Gr(i,["isMenu"]),n=pe(()=>Vn()>100),r=F0(),s=wf(),o=D0();return F($.Generic,$n({get css(){return[{position:"sticky",top:"0px",zIndex:"20",userSelect:"none",mixBlendMode:"difference"},Za,ht.sohne.body3]},as:"nav"},t,{get children(){return F($.Generic,{get css(){return[{display:"flex",transformOrigin:"left","--tw-translate-y":"-100%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))","--tw-skew-y":"-5deg",alignItems:"center",justifyContent:"space-between",paddingTop:"32rem",paddingBottom:"32rem",opacity:"0",transitionProperty:"opacity, transform",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"1s","@media (max-width: 767px)":{paddingTop:"24rem",paddingBottom:"24rem"}},{...s.pathname!=="/"&&{transitionDelay:"1s",transitionDuration:"2s",transitionTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)"},...r()&&{"--tw-translate-y":"0px",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))","--tw-skew-y":"0deg",opacity:"1"}}]},as:"div",get children(){return[F($.Generic,{href:"/",css:{pointerEvents:"auto"},as:Ys,get children(){return F($.Generic,{css:{height:"auto",width:"124.17rem",fill:"#FFF","@media (max-width: 767px)":{width:"99rem"}},as:hx})}}),pe(()=>[F($.Generic,{css:{display:"flex",gap:"86rem","@media (max-width: 767px)":{display:"none"}},as:"ul",get children(){return F(Nn,{get each(){return o.navbar.links},children:({label:a,href:l,isExternal:c},h)=>F($.Generic,{get css(){return[{transitionProperty:"transform, opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{transitionDelay:`${.025*h()}s`,...(n()||e.isMenu)&&{"--tw-translate-y":"-100%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",opacity:"0"}}]},as:"li",get children(){return l==="#archive"?F($.Generic,{css:{pointerEvents:"auto"},as:"button",onClick:()=>{fw(!0)},children:a}):F($.Generic,{href:l,target:c?"_blank":void 0,css:{pointerEvents:"auto",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"0.5"}},as:Ys,children:a})}})})}}),F($.Generic,{href:"/contact",get css(){return[{pointerEvents:"auto",transitionProperty:"transform, opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"0.5"},"@media (max-width: 767px)":{display:"none"}},{...(n()||e.isMenu)&&{"--tw-translate-x":"-84rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"}}]},as:Ys,children:"Work with us"})]),F($.Generic,{get css(){return[{pointerEvents:"none",position:"absolute",right:"0px",opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"0.5"},"@media (max-width: 767px)":{pointerEvents:"auto",position:"static",display:"block",opacity:"1"}},{...(n()||e.isMenu)&&{pointerEvents:"auto",opacity:"1"}}]},as:"button",onClick:()=>{IB()},get children(){return e.isMenu?"Close":"Menu"}})]}})}}))};var SO=4,TO=.001,EO=1e-7,MO=10,ud=11,ig=1/(ud-1),LO=typeof Float32Array=="function";function f7(i,e){return 1-3*e+3*i}function g7(i,e){return 3*e-6*i}function p7(i){return 3*i}function Lp(i,e,t){return((f7(e,t)*i+g7(e,t))*i+p7(e))*i}function m7(i,e,t){return 3*f7(e,t)*i*i+2*g7(e,t)*i+p7(e)}function RO(i,e,t,n,r){var s,o,a=0;do o=e+(t-e)/2,s=Lp(o,n,r)-i,s>0?t=o:e=o;while(Math.abs(s)>EO&&++a<MO);return o}function BO(i,e,t,n){for(var r=0;r<SO;++r){var s=m7(e,t,n);if(s===0)return e;var o=Lp(e,t,n)-i;e-=o/s}return e}function PO(i){return i}var GO=function(e,t,n,r){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return PO;for(var s=LO?new Float32Array(ud):new Array(ud),o=0;o<ud;++o)s[o]=Lp(o*ig,e,n);function a(l){for(var c=0,h=1,u=ud-1;h!==u&&s[h]<=l;++h)c+=ig;--h;var d=(l-s[h])/(s[h+1]-s[h]),f=c+d*ig,g=m7(f,e,n);return g>=TO?BO(l,f,e,n):g===0?f:RO(l,c,c+ig,e,n)}return function(c){return c===0?0:c===1?1:Lp(a(c),t,r)}};const Iu=Ef(GO),DO=wt("<div>%"),wa=vi(!Ay),Jl=vi(0),FO=Iu(.8,0,1,.49),iI=vi(!Ay),Po=pe(()=>FO(qi(Jl(),0,1))),rI=vi(!1),NO=()=>{const e=wf().pathname==="/",[t,n]=Ey(0,{multiplier:.05,accuracy:100});tr(()=>{vh(0),setTimeout(()=>{n(.33),setTimeout(()=>{n(.66),setTimeout(()=>{n(1)},700)},1e3)},300)});const r=pe(()=>qi(t(),0,1));mt(Ji(r,h=>{h===1&&wa(!0)},{defer:!0}));let s=0,o=-1;function a(h){Jl((h-s)/500),Jl()>1&&(iI(!0),vh(-1)),Jl()<2&&(o=requestAnimationFrame(a))}mt(Ji(wa,h=>{h&&(setTimeout(()=>{s=performance.now(),o=requestAnimationFrame(a)},500),an(()=>{cancelAnimationFrame(o)}))},{defer:!0})),mt(Ji(Po,h=>{h>.5&&rI(!0)},{defer:!0}));const l=uw(),c="Format3";return F($.Generic,{css:{position:"fixed",inset:"0px",zIndex:"20",display:"flex",userSelect:"none",alignItems:"center",justifyContent:"center","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},as:"div",get style(){return e?{}:{opacity:1-Jl()}},get children(){return[F($.Generic,{get css(){return[{display:"flex",gap:"13rem",fontFamily:"Sohne Breit, sans-serif",fontSize:"62.5rem",lineHeight:"1",letterSpacing:"0em",opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{...l()&&{opacity:"1"},...wa()&&{opacity:"0"}}]},as:"div",get children(){return[pe(()=>Math.round(r()*100)),dt(DO)]}}),F($.Generic,{width:"110",height:"149",viewBox:"0 0 110 149",fill:"none",xmlns:"http://www.w3.org/2000/svg",get css(){return[{position:"absolute","--tw-translate-x":"4rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))","--tw-translate-y":"4rem",opacity:"0.3",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{...wa()&&{opacity:"0"}}]},as:"svg",get children(){return[F($.Generic,{d:`M42.206,52.071L109,52.071L109,1.141L25.03,1.141L1.366,42.119L36.295,62.291L41.917,
            52.57L42.206,52.071Z`,stroke:"white","stroke-width":"1",css:{strokeDasharray:"0 302 150 100 302"},as:"path",get style(){return{"stroke-dashoffset":(553*t()).toString()}}}),F($.Generic,{d:`M61.1132 104.982H60.5359L60.2473 105.481L36.2944 146.96L1.36596 126.788L37.2377
            64.6562H109V104.982H61.1132Z`,stroke:"white","stroke-width":"1",css:{strokeDasharray:"0 322 150 100 322"},as:"path",get style(){return{"stroke-dashoffset":(572*t()).toString()}}})]}}),F($.Generic,{get css(){return[{position:"absolute",opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{...wa()&&{opacity:"1"}}]},as:"div",get children(){return F($.Generic,{css:{fill:"#FFF"},as:aL,get style(){return{opacity:1-Po(),transform:`translateX(${(1-Po())*4}rem) scale(${1+(e?ro()?.9:1.9:5)*Po()}) translateY(${(1-Po())*4}rem)`}}})}}),F($.Generic,{css:{position:"absolute",display:"flex",alignItems:"center",fontFamily:"Sohne Breit, sans-serif",fontSize:"175rem",textTransform:"uppercase",letterSpacing:"-1rem",WebkitTextFillColor:"transparent",WebkitTextStrokeColor:"white",WebkitTextStrokeWidth:"1px"},as:"div",get style(){return{transform:`${ro()?"rotate(90deg) scale(0.6) ":""}scale(${.5+.5*Po()}) translateY(-6.5rem) translateX(${pB(Po(),9,9)}rem)`}},get children(){return F(Nn,{get each(){return c.split("")},children:(h,u)=>F($.Generic,{get css(){return[{"--tw-translate-x":"50rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",opacity:"0",transitionProperty:"opacity, transform",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{...h==="F"&&{"--tw-translate-x":"5rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},...h==="o"&&{"--tw-translate-x":"1rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},...h===""&&{marginLeft:"-10rem","--tw-translate-y":"-12rem",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},...h==="t"&&{marginLeft:"-23rem"},...wa()&&{"--tw-translate-x":"0px",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",opacity:"1"}}]},as:"div",get style(){return{"transition-delay":`${.1+u()*.05}s`}},children:h})})}})]}})},kO=()=>F($.Generic,{css:{display:"flex",height:"24rem",width:"24rem","@keyframes spin":{to:{transform:"rotate(360deg)"}},animation:"spin 1s linear infinite",alignItems:"center",justifyContent:"center",borderRadius:"9999px"},as:"div",style:{background:"conic-gradient(#6E32E1 0deg 15deg, transparent 15deg 100deg, #6E32E1 100deg 360deg)"},get children(){return F($.Generic,{css:{height:"21rem",width:"21rem",borderRadius:"9999px","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},as:"div"})}}),X5=()=>{const[i,e]=tn(!1),[t,n]=tn({state:"",message:""}),r=async s=>{if(s.preventDefault(),i())return;e(!0),n({state:"",message:""});const o=new FormData(s.target),a=Object.fromEntries(o.entries()),{email:l}=a;try{if(!dw(l.toString()))throw new Error("Please enter a valid email address");if(!(await fetch("/api/newsLetter",{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to submit form");n({state:"success",message:"Thank you for signing up"}),setTimeout(()=>{n({state:"",message:""})},3e3)}catch(c){n({state:"error",message:c.message})}finally{e(!1)}};return F($.Generic,{css:{marginTop:"40rem",display:"flex",width:"100%",maxWidth:"416rem",flexDirection:"column",gap:"28rem"},as:"div",get children(){return[F($.Generic,{get css(){return[ht.sohne.body2,ht.m.sohne.body2]},as:"h2",children:"Receive exclusive insights on strategy, culture, and technology directly in your inbox."}),F($.Generic,{css:{position:"relative"},as:"form",onSubmit:r,get children(){return[F($.Generic,{css:{position:"relative",height:"64rem",width:"100%",borderBottomWidth:"1rem","--tw-border-opacity":"1",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},as:"div",get children(){return[F($.Generic,{class:"placeholder-opacity-50 input",get css(){return[ht.sohne.body2,ht.m.sohne.body2,{height:"100%",width:"100%",backgroundColor:"transparent","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))",outline:"2px solid transparent",outlineOffset:"2px"}]},as:"input",name:"email",placeholder:"Your email here",required:!0}),F($.Generic,{get css(){return[{position:"absolute",right:"0px",top:"50%",display:"flex",width:"40rem","--tw-translate-y":"-50%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",alignItems:"center",justifyContent:"flex-end",mixBlendMode:"difference"},ht.sohne.body2,ht.m.sohne.body2]},as:"button",get disabled(){return i()},get children(){return pe(()=>!!i())()?F(kO,{}):""}})]}}),F($.Generic,{get css(){return[ht.sohne.body6,{position:"absolute",top:"108%"}]},as:"p",get style(){return{color:t().state==="error"?"red":"green"}},get children(){return t().message}})]}}),F($.Generic,{get css(){return[{"--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"},ht.sohne.body6]},as:"p",get children(){return["By signing up to receive emails from Format-3,"," ","you agree to our"," ",F($.Generic,{css:{"text-decoration":"underline"},as:Ys,href:"/privacy",children:"Privacy Policy."})," ","We treat your info responsibly. Unsubscribe anytime."]}})]}})},K5=wt("<ul>"),OO=wt("<div>"),Ou=wt("<li>"),UO=()=>{const i=D0();let e=null;const t=Gi(()=>e),n=_0(()=>e,t),r=pe(()=>qi(1-(t().y-Vn())/dn().height,0,1));return F($.Generic,{css:[{position:"relative",height:"100vh","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},{a:{transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"0.5"}},"&":{height:"100lvh"}}],as:"div",ref(s){const o=e;typeof o=="function"?o(s):e=s},get children(){return F($.Generic,{get css(){return[{position:"relative",bottom:"0px",zIndex:"10",display:"flex",minHeight:"100vh",width:"100%",userSelect:"none",flexDirection:"column",overflow:"hidden","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))",paddingTop:"64rem",paddingBottom:"64rem","@media (max-width: 767px)":{paddingTop:"40rem",paddingBottom:"40rem"}},ht.sohne.body3,{"&":{minHeight:"100lvh"}}]},as:"footer",get style(){return{opacity:r()}},get children(){return[F($.Generic,{css:[Za],as:"div",get children(){return[F($.Generic,{css:[op,{borderBottomWidth:"1px","--tw-border-opacity":"0.2",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingBottom:"64rem","@media (max-width: 767px)":{display:"flex",flexDirection:"column",gap:"24rem",paddingBottom:"24rem"}}],as:"div",get children(){return[F($.Generic,{css:{gridColumn:"span 6 / span 6",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between","@media (max-width: 767px)":{borderBottomWidth:"1px","--tw-border-opacity":"0.2",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingBottom:"24rem"}},as:"div",get children(){return[F($.Generic,{css:{height:"24rem",width:"auto",fill:"#FFF","@media (max-width: 767px)":{height:"16rem"}},as:hx}),F($.Generic,{css:{"@media (max-width: 767px)":{display:"none"}},as:"div",get children(){return F(X5,{})}})]}}),F($.Generic,{css:[op,{gridColumn:"span 6 / span 6",gridTemplateColumns:"repeat(6, minmax(0, 1fr))","@media (max-width: 767px)":{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}}],as:"div",get children(){return[F(Nn,{get each(){return i.footer.linkSections},children:s=>F($.Generic,{css:{gridColumn:"span 2 / span 2",textAlign:"right","@media (max-width: 767px)":{gridColumn:"span 1 / span 1",textAlign:"left"}},as:"div",get children(){return[F($.Generic,{css:{marginBottom:"12rem","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"},as:"div",get children(){return s.title}}),(()=>{const o=dt(K5);return Un(o,F(Nn,{get each(){return s.links},children:a=>(()=>{const l=dt(Ou);return Un(l,F(Ys,{get href(){return a.href},get target(){return a.isExternal?"_blank":void 0},get children(){return a.label}})),l})()})),o})()]}})}),F($.Generic,{css:{gridColumn:"span 2 / span 2",textAlign:"right","@media (max-width: 767px)":{display:"none"}},as:"div",get children(){return[F($.Generic,{css:{marginBottom:"12rem","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"},as:"div",children:"Socials"}),(()=>{const s=dt(K5);return Un(s,F(Nn,{get each(){return i.socials.links},children:o=>(()=>{const a=dt(Ou);return Un(a,F(Ys,{get href(){return o.href},get target(){return o.isExternal?"_blank":void 0},get children(){return o.label}})),a})()})),s})()]}}),F($.Generic,{css:{gridColumn:"1 / -1",display:"flex",width:"100%",justifyContent:"flex-end",gap:"16rem",paddingTop:"64rem","@media (max-width: 767px)":{justifyContent:"flex-start"}},as:"ul",get children(){return F(Nn,{get each(){return i.footer.awards.slice(0,4)},children:s=>(()=>{const o=dt(Ou);return Un(o,F($.Generic,{get src(){return s.src},get alt(){return s.alt},css:{height:"64rem","@media (max-width: 767px)":{height:"48rem"}},as:"img"})),o})()})}})]}})]}}),F($.Generic,{css:{display:"none","@media (max-width: 767px)":{display:"block"}},as:"div",get children(){return F(X5,{})}})]}}),F($.Generic,{get css(){return[ht.breit.h0,ht.m.breit.h0,{marginTop:"auto",marginBottom:"auto",display:"flex",whiteSpace:"nowrap",paddingBottom:"clamp(10rem, 2vh, 20rem)",paddingLeft:"64rem",fontSize:"clamp(10rem, 24vh, 300rem)","@media (max-width: 767px)":{display:"none",paddingLeft:"24rem",fontSize:"clamp(10rem, 15vh, 300rem)"}}]},as:"div",get children(){return F($.Generic,{get style(){return{"animation-play-state":n()?"running":"paused"}},css:[{display:"flex",animation:"footer-marquee 15s infinite linear"},{div:{"&::after":{"--tw-content":"'\\00a0'",content:"var(--tw-content)"}},"@keyframes footer-marquee":{"0%":{transform:"translateX(0%)"},"100%":{transform:"translateX(-100%)"}}}],as:"div",get children(){return[(()=>{const s=dt(OO);return Un(s,()=>i.footer.tickerText),s})(),F($.Generic,{css:{width:"0px"},as:"div",get children(){return i.footer.tickerText}})]}})}}),F($.Generic,{css:[{display:"none","@media (max-width: 767px)":{display:"block"}},Za],as:"div",get children(){return[F($.Generic,{css:{marginBottom:"8rem",borderTopWidth:"1px","--tw-border-opacity":"0.2",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingTop:"24rem","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))","@media (max-width: 767px)":{"--tw-border-opacity":"0"}},as:"div",children:"Socials"}),F($.Generic,{css:{display:"grid",gridTemplateColumns:"repeat(4, minmax(0, 1fr))","@media (max-width: 767px)":{display:"flex",gap:"15rem"}},as:"ul",get children(){return F(Nn,{get each(){return i.socials.links},children:s=>(()=>{const o=dt(Ou);return Un(o,F(Ys,{get href(){return s.href},get target(){return s.isExternal?"_blank":void 0},get children(){return s.label}})),o})()})}})]}}),F($.Generic,{css:[Za],as:"div",get children(){return F($.Generic,{css:{display:"flex",alignItems:"center",justifyContent:"space-between",borderTopWidth:"1px","--tw-border-opacity":"0.2",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingTop:"64rem","@media (max-width: 767px)":{marginTop:"24rem",flexDirection:"column",alignItems:"flex-start",paddingTop:"24rem"}},as:"div",get children(){return[F($.Generic,{get css(){return[ht.sohne.body3,{display:"flex",alignItems:"center",gap:"32rem","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))","@media (max-width: 767px)":{flexDirection:"column-reverse",alignItems:"flex-start",gap:"16rem"}}]},as:"ul",get children(){return[F($.Generic,{css:{"@media (max-width: 767px)":{order:"1"}},as:"li",get children(){return[" ",pe(()=>new Date().getFullYear()),", Format-3. All Rights Reserved."]}}),F(Nn,{get each(){return i.footer.footLinks},children:({label:s,href:o,isExternal:a})=>(()=>{const l=dt(Ou);return Un(l,F(Ys,{href:o,target:a?"_blank":void 0,children:s})),l})()})]}}),F($.Generic,{get css(){return[ht.sohne.body1,ht.m.sohne.body2,{transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"0.5"},"@media (max-width: 767px)":{marginTop:"16rem"}}]},as:"button",onClick:()=>{window.scrollTo(0,0)},children:"Back to top "})]}})}})]}})}})},ZO=()=>{const e=e3().seo??{};return[F(_M,{get children(){return e.title??""}}),F(ui,{name:"title",get content(){return e.title??""}}),F(ui,{name:"description",get content(){return e.description??""}}),F(ui,{property:"og:type",content:"website"}),F(ui,{property:"og:url",content:"https://format-3.co/"}),F(ui,{property:"og:title",get content(){return e.title??""}}),F(ui,{property:"og:description",get content(){return e.description??""}}),F(ui,{property:"keywords",get content(){return e.keywords??""}}),F(__,{rel:"canonical",get href(){return`https://format-3.co${e.path??""}`}}),F(__,{rel:"preconnect",href:"https://www.googletagmanager.com"}),pe((()=>{const t=pe(()=>!!e.image);return()=>t()&&[F(ui,{property:"og:image",get content(){return e?.image.src}}),F(ui,{property:"og:image:width",get content(){return e?.image.width.toString()}}),F(ui,{property:"og:image:height",get content(){return e?.image.height.toString()}})]})()),F(ui,{property:"twitter:card",content:"summary_large_image"}),F(ui,{property:"twitter:url",content:"https://format-3.co/"}),F(ui,{property:"twitter:title",get content(){return e.title??""}}),F(ui,{property:"twitter:description",get content(){return e.description??""}}),pe((()=>{const t=pe(()=>!!e.image);return()=>t()&&F(ui,{property:"twitter:image",get content(){return e?.image.src}})})())]},VO=wt("<div><!#><!/><!#><!/>"),C7=ta();function F0(){return Ts(C7)??(()=>!0)}const Gre=i=>{const[e,t]=Gr(i,["children"]),n=Sn(!1),r=wf();tr(()=>{window.scrollTo(0,0),Vn(0),r.pathname!=="/"&&(rI(!0),Jl(1),wa(!0),iI(!0))}),mt(()=>{iI()&&n(!0)});const s=e3();return F(C7.Provider,{value:n,get children(){return[pe(()=>pe(()=>!!s?.seo)()&&F(ZO,{})),(()=>{const o=dt(VO),a=o.firstChild,[l,c]=ip(a.nextSibling),h=l.nextSibling,[u,d]=ip(h.nextSibling);return ln(o,t,!1,!0),Un(o,F($.Generic,{css:{position:"relative",zIndex:"10","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},as:"main",get children(){return[F(d7,{}),pe(()=>e.children),pe(()=>pe(()=>!!(!rI()&&Ay))()&&F(NO,{}))]}}),l,c),Un(o,F(UO,{}),u,d),Cn(),o})()]}})};var WO=Object.defineProperty,HO=(i,e,t)=>e in i?WO(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Dt=(i,e,t)=>HO(i,typeof e!="symbol"?e+"":e,t),zO=class{requestAnimationFrame(i){return requestAnimationFrame(i)}cancelAnimationFrame(i){cancelAnimationFrame(i)}},YO=class{constructor(){Dt(this,"_lastHandleId",0),Dt(this,"_lastImmediate",null)}requestAnimationFrame(i){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=setImmediate(()=>{i(Date.now())}),this._lastHandleId}cancelAnimationFrame(i){this._lastImmediate&&clearImmediate(this._lastImmediate)}},XO=class{constructor(){Dt(this,"_strategy"),this._strategy=typeof requestAnimationFrame=="function"?new zO:new YO}requestAnimationFrame(i){return this._strategy.requestAnimationFrame(i)}cancelAnimationFrame(i){this._strategy.cancelAnimationFrame(i)}},Hl=typeof window<"u"&&typeof window.document<"u",Pm=new Uint8Array([80,75,3,4]),KO=["v","ip","op","layers","fr","w","h"],I7="0.30.3",A7="@lottiefiles/dotlottie-web",jO=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return function(e={}){var t=e,n,r,s=new Promise((b,w)=>{n=b,r=w}),o=Object.assign({},t),a="./this.program",l="";typeof document<"u"&&document.currentScript&&(l=document.currentScript.src),i&&(l=i),l.startsWith("blob:")?l="":l=l.substr(0,l.replace(/[?#].*/,"").lastIndexOf("/")+1);var c=t.print||console.log.bind(console),h=t.printErr||console.error.bind(console);Object.assign(t,o),o=null,t.thisProgram&&(a=t.thisProgram);var u;t.wasmBinary&&(u=t.wasmBinary);var d,f=!1,g,p,m,C,A,I,y,x;function T(){var b=d.buffer;t.HEAP8=g=new Int8Array(b),t.HEAP16=m=new Int16Array(b),t.HEAPU8=p=new Uint8Array(b),t.HEAPU16=C=new Uint16Array(b),t.HEAP32=A=new Int32Array(b),t.HEAPU32=I=new Uint32Array(b),t.HEAPF32=y=new Float32Array(b),t.HEAPF64=x=new Float64Array(b)}var S=[],M=[],_=[];function v(){var b=t.preRun.shift();S.unshift(b)}var B=0,E=null;function L(b){throw t.onAbort?.(b),b="Aborted("+b+")",h(b),f=!0,b=new WebAssembly.RuntimeError(b+". Build with -sASSERTIONS for more info."),r(b),b}var G=b=>b.startsWith("data:application/octet-stream;base64,"),Z;if(Z="DotLottiePlayer.wasm",!G(Z)){var U=Z;Z=t.locateFile?t.locateFile(U,l):l+U}function V(b){if(b==Z&&u)return new Uint8Array(u);throw"both async and sync fetching of the wasm failed"}function z(b){return u||typeof fetch!="function"?Promise.resolve().then(()=>V(b)):fetch(b,{credentials:"same-origin"}).then(w=>{if(!w.ok)throw`failed to load wasm binary file at '${b}'`;return w.arrayBuffer()}).catch(()=>V(b))}function le(b,w,D){return z(b).then(N=>WebAssembly.instantiate(N,w)).then(D,N=>{h(`failed to asynchronously prepare wasm: ${N}`),L(N)})}function j(b,w){var D=Z;return u||typeof WebAssembly.instantiateStreaming!="function"||G(D)||typeof fetch!="function"?le(D,b,w):fetch(D,{credentials:"same-origin"}).then(N=>WebAssembly.instantiateStreaming(N,b).then(w,function(W){return h(`wasm streaming compile failed: ${W}`),h("falling back to ArrayBuffer instantiation"),le(D,b,w)}))}var re=b=>{for(;0<b.length;)b.shift()(t)},Ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,xe=(b,w,D)=>{var N=w+D;for(D=w;b[D]&&!(D>=N);)++D;if(16<D-w&&b.buffer&&Ae)return Ae.decode(b.subarray(w,D));for(N="";w<D;){var W=b[w++];if(W&128){var Q=b[w++]&63;if((W&224)==192)N+=String.fromCharCode((W&31)<<6|Q);else{var be=b[w++]&63;W=(W&240)==224?(W&15)<<12|Q<<6|be:(W&7)<<18|Q<<12|be<<6|b[w++]&63,65536>W?N+=String.fromCharCode(W):(W-=65536,N+=String.fromCharCode(55296|W>>10,56320|W&1023))}}else N+=String.fromCharCode(W)}return N};class J{constructor(w){this.ya=w-24}}var oe=0,fe=b=>{for(var w=0,D=0;D<b.length;++D){var N=b.charCodeAt(D);127>=N?w++:2047>=N?w+=2:55296<=N&&57343>=N?(w+=4,++D):w+=3}return w},ae=(b,w,D,N)=>{if(0<N){N=D+N-1;for(var W=0;W<b.length;++W){var Q=b.charCodeAt(W);if(55296<=Q&&57343>=Q){var be=b.charCodeAt(++W);Q=65536+((Q&1023)<<10)|be&1023}if(127>=Q){if(D>=N)break;w[D++]=Q}else{if(2047>=Q){if(D+1>=N)break;w[D++]=192|Q>>6}else{if(65535>=Q){if(D+2>=N)break;w[D++]=224|Q>>12}else{if(D+3>=N)break;w[D++]=240|Q>>18,w[D++]=128|Q>>12&63}w[D++]=128|Q>>6&63}w[D++]=128|Q&63}}w[D]=0}},Ce={},Je=b=>{for(;b.length;){var w=b.pop();b.pop()(w)}};function Se(b){return this.fromWireType(I[b>>2])}var qe={},ot={},$e={},O,$t=(b,w,D)=>{function N(ce){if(ce=D(ce),ce.length!==b.length)throw new O("Mismatched type converter count");for(var Ze=0;Ze<b.length;++Ze)We(b[Ze],ce[Ze])}b.forEach(function(ce){$e[ce]=w});var W=Array(w.length),Q=[],be=0;w.forEach((ce,Ze)=>{ot.hasOwnProperty(ce)?W[Ze]=ot[ce]:(Q.push(ce),qe.hasOwnProperty(ce)||(qe[ce]=[]),qe[ce].push(()=>{W[Ze]=ot[ce],++be,be===Q.length&&N(W)}))}),Q.length===0&&N(W)},St,nt=b=>{for(var w="";p[b];)w+=St[p[b++]];return w},Ie;function fn(b,w,D={}){var N=w.name;if(!b)throw new Ie(`type "${N}" must have a positive integer typeid pointer`);if(ot.hasOwnProperty(b)){if(D.ib)return;throw new Ie(`Cannot register type '${N}' twice`)}ot[b]=w,delete $e[b],qe.hasOwnProperty(b)&&(w=qe[b],delete qe[b],w.forEach(W=>W()))}function We(b,w,D={}){if(!("argPackAdvance"in w))throw new TypeError("registerType registeredInstance requires argPackAdvance");return fn(b,w,D)}var k=b=>{throw new Ie(b.ma.za.xa.name+" instance already deleted")},R=!1,q=()=>{},de=(b,w,D)=>w===D?b:D.Ca===void 0?null:(b=de(b,w,D.Ca),b===null?null:D.ab(b)),me={},se=[],Ye=()=>{for(;se.length;){var b=se.pop();b.ma.Ka=!1,b.delete()}},Te,et={},ft=(b,w)=>{if(w===void 0)throw new Ie("ptr should not be undefined");for(;b.Ca;)w=b.Na(w),b=b.Ca;return et[w]},ye=(b,w)=>{if(!w.za||!w.ya)throw new O("makeClassHandle requires ptr and ptrType");if(!!w.Da!=!!w.Aa)throw new O("Both smartPtrType and smartPtr must be specified");return w.count={value:1},Oe(Object.create(b,{ma:{value:w,writable:!0}}))},Oe=b=>typeof FinalizationRegistry>"u"?(Oe=w=>w,b):(R=new FinalizationRegistry(w=>{w=w.ma,--w.count.value,w.count.value===0&&(w.Aa?w.Da.Fa(w.Aa):w.za.xa.Fa(w.ya))}),Oe=w=>{var D=w.ma;return D.Aa&&R.register(w,{ma:D},w),w},q=w=>{R.unregister(w)},Oe(b));function at(){}var lt=(b,w)=>Object.defineProperty(w,"name",{value:b}),He=(b,w,D)=>{if(b[w].Ba===void 0){var N=b[w];b[w]=function(...W){if(!b[w].Ba.hasOwnProperty(W.length))throw new Ie(`Function '${D}' called with an invalid number of arguments (${W.length}) - expects one of (${b[w].Ba})!`);return b[w].Ba[W.length].apply(this,W)},b[w].Ba=[],b[w].Ba[N.Oa]=N}},Gt=(b,w,D)=>{if(t.hasOwnProperty(b)){if(D===void 0||t[b].Ba!==void 0&&t[b].Ba[D]!==void 0)throw new Ie(`Cannot register public name '${b}' twice`);if(He(t,b,b),t.hasOwnProperty(D))throw new Ie(`Cannot register multiple overloads of a function with the same number of arguments (${D})!`);t[b].Ba[D]=w}else t[b]=w,D!==void 0&&(t[b].vb=D)},Tt=b=>{if(b===void 0)return"_unknown";b=b.replace(/[^a-zA-Z0-9_]/g,"$");var w=b.charCodeAt(0);return 48<=w&&57>=w?`_${b}`:b};function cn(b,w,D,N,W,Q,be,ce){this.name=b,this.constructor=w,this.La=D,this.Fa=N,this.Ca=W,this.cb=Q,this.Na=be,this.ab=ce,this.kb=[]}var H=(b,w,D)=>{for(;w!==D;){if(!w.Na)throw new Ie(`Expected null or instance of ${D.name}, got an instance of ${w.name}`);b=w.Na(b),w=w.Ca}return b};function Fe(b,w){if(w===null){if(this.Ta)throw new Ie(`null is not a valid ${this.name}`);return 0}if(!w.ma)throw new Ie(`Cannot pass "${Bu(w)}" as a ${this.name}`);if(!w.ma.ya)throw new Ie(`Cannot pass deleted object as a pointer of type ${this.name}`);return H(w.ma.ya,w.ma.za.xa,this.xa)}function ie(b,w){if(w===null){if(this.Ta)throw new Ie(`null is not a valid ${this.name}`);if(this.Qa){var D=this.Ua();return b!==null&&b.push(this.Fa,D),D}return 0}if(!w||!w.ma)throw new Ie(`Cannot pass "${Bu(w)}" as a ${this.name}`);if(!w.ma.ya)throw new Ie(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.Pa&&w.ma.za.Pa)throw new Ie(`Cannot convert argument of type ${w.ma.Da?w.ma.Da.name:w.ma.za.name} to parameter type ${this.name}`);if(D=H(w.ma.ya,w.ma.za.xa,this.xa),this.Qa){if(w.ma.Aa===void 0)throw new Ie("Passing raw pointer to smart pointer is illegal");switch(this.pb){case 0:if(w.ma.Da===this)D=w.ma.Aa;else throw new Ie(`Cannot convert argument of type ${w.ma.Da?w.ma.Da.name:w.ma.za.name} to parameter type ${this.name}`);break;case 1:D=w.ma.Aa;break;case 2:if(w.ma.Da===this)D=w.ma.Aa;else{var N=w.clone();D=this.lb(D,ol(()=>N.delete())),b!==null&&b.push(this.Fa,D)}break;default:throw new Ie("Unsupporting sharing policy")}}return D}function ge(b,w){if(w===null){if(this.Ta)throw new Ie(`null is not a valid ${this.name}`);return 0}if(!w.ma)throw new Ie(`Cannot pass "${Bu(w)}" as a ${this.name}`);if(!w.ma.ya)throw new Ie(`Cannot pass deleted object as a pointer of type ${this.name}`);if(w.ma.za.Pa)throw new Ie(`Cannot convert argument of type ${w.ma.za.name} to parameter type ${this.name}`);return H(w.ma.ya,w.ma.za.xa,this.xa)}function Le(b,w,D,N,W,Q,be,ce,Ze,we,Ve){this.name=b,this.xa=w,this.Ta=D,this.Pa=N,this.Qa=W,this.jb=Q,this.pb=be,this.Za=ce,this.Ua=Ze,this.lb=we,this.Fa=Ve,W||w.Ca!==void 0?this.toWireType=ie:(this.toWireType=N?Fe:ge,this.Ea=null)}var De=(b,w,D)=>{if(!t.hasOwnProperty(b))throw new O("Replacing nonexistent public symbol");t[b].Ba!==void 0&&D!==void 0?t[b].Ba[D]=w:(t[b]=w,t[b].Oa=D)},it,bn=(b,w,D=[])=>(b.includes("j")?(b=b.replace(/p/g,"i"),w=(0,t["dynCall_"+b])(w,...D)):w=it.get(w)(...D),w),ai=(b,w)=>(...D)=>bn(b,w,D),It=(b,w)=>{b=nt(b);var D=b.includes("j")?ai(b,w):it.get(w);if(typeof D!="function")throw new Ie(`unknown function pointer with signature ${b}: ${w}`);return D},nr,Dr=b=>{b=Wi(b);var w=nt(b);return yn(b),w},rl=(b,w)=>{function D(Q){W[Q]||ot[Q]||($e[Q]?$e[Q].forEach(D):(N.push(Q),W[Q]=!0))}var N=[],W={};throw w.forEach(D),new nr(`${b}: `+N.map(Dr).join([", "]))},Sc=(b,w)=>{for(var D=[],N=0;N<b;N++)D.push(I[w+4*N>>2]);return D};function Ao(b){for(var w=1;w<b.length;++w)if(b[w]!==null&&b[w].Ea===void 0)return!0;return!1}function sl(b,w,D,N,W){var Q=w.length;if(2>Q)throw new Ie("argTypes array size mismatch! Must at least get return value and 'this' types!");var be=w[1]!==null&&D!==null,ce=Ao(w),Ze=w[0].name!=="void",we=Q-2,Ve=Array(we),Wt=[],rn=[];return lt(b,function(...ne){if(ne.length!==we)throw new Ie(`function ${b} called with ${ne.length} arguments, expected ${we}`);if(rn.length=0,Wt.length=be?2:1,Wt[0]=W,be){var gt=w[1].toWireType(rn,this);Wt[1]=gt}for(var vt=0;vt<we;++vt)Ve[vt]=w[vt+2].toWireType(rn,ne[vt]),Wt.push(Ve[vt]);if(ne=N(...Wt),ce)Je(rn);else for(vt=be?1:2;vt<w.length;vt++){var ei=vt===1?gt:Ve[vt-2];w[vt].Ea!==null&&w[vt].Ea(ei)}return gt=Ze?w[0].fromWireType(ne):void 0,gt})}var Mu=b=>{b=b.trim();let w=b.indexOf("(");return w!==-1?b.substr(0,w):b},Tc=[],ir=[],Ec=b=>{9<b&&--ir[b+1]===0&&(ir[b]=void 0,Tc.push(b))},ia=b=>{if(!b)throw new Ie("Cannot use deleted val. handle = "+b);return ir[b]},ol=b=>{switch(b){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let w=Tc.pop()||ir.length;return ir[w]=b,ir[w+1]=1,w}},Lu={name:"emscripten::val",fromWireType:b=>{var w=ia(b);return Ec(b),w},toWireType:(b,w)=>ol(w),argPackAdvance:8,readValueFromPointer:Se,Ea:null},nm=(b,w,D)=>{switch(w){case 1:return D?function(N){return this.fromWireType(g[N])}:function(N){return this.fromWireType(p[N])};case 2:return D?function(N){return this.fromWireType(m[N>>1])}:function(N){return this.fromWireType(C[N>>1])};case 4:return D?function(N){return this.fromWireType(A[N>>2])}:function(N){return this.fromWireType(I[N>>2])};default:throw new TypeError(`invalid integer width (${w}): ${b}`)}},Ru=(b,w)=>{var D=ot[b];if(D===void 0)throw b=`${w} has unknown type ${Dr(b)}`,new Ie(b);return D},Bu=b=>{if(b===null)return"null";var w=typeof b;return w==="object"||w==="array"||w==="function"?b.toString():""+b},im=(b,w)=>{switch(w){case 4:return function(D){return this.fromWireType(y[D>>2])};case 8:return function(D){return this.fromWireType(x[D>>3])};default:throw new TypeError(`invalid float width (${w}): ${b}`)}},rm=(b,w,D)=>{switch(w){case 1:return D?N=>g[N]:N=>p[N];case 2:return D?N=>m[N>>1]:N=>C[N>>1];case 4:return D?N=>A[N>>2]:N=>I[N>>2];default:throw new TypeError(`invalid integer width (${w}): ${b}`)}},zf=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,P=(b,w)=>{for(var D=b>>1,N=D+w/2;!(D>=N)&&C[D];)++D;if(D<<=1,32<D-b&&zf)return zf.decode(p.subarray(b,D));for(D="",N=0;!(N>=w/2);++N){var W=m[b+2*N>>1];if(W==0)break;D+=String.fromCharCode(W)}return D},X=(b,w,D)=>{if(D??(D=2147483647),2>D)return 0;D-=2;var N=w;D=D<2*b.length?D/2:b.length;for(var W=0;W<D;++W)m[w>>1]=b.charCodeAt(W),w+=2;return m[w>>1]=0,w-N},ee=b=>2*b.length,te=(b,w)=>{for(var D=0,N="";!(D>=w/4);){var W=A[b+4*D>>2];if(W==0)break;++D,65536<=W?(W-=65536,N+=String.fromCharCode(55296|W>>10,56320|W&1023)):N+=String.fromCharCode(W)}return N},K=(b,w,D)=>{if(D??(D=2147483647),4>D)return 0;var N=w;D=N+D-4;for(var W=0;W<b.length;++W){var Q=b.charCodeAt(W);if(55296<=Q&&57343>=Q){var be=b.charCodeAt(++W);Q=65536+((Q&1023)<<10)|be&1023}if(A[w>>2]=Q,w+=4,w+4>D)break}return A[w>>2]=0,w-N},_e=b=>{for(var w=0,D=0;D<b.length;++D){var N=b.charCodeAt(D);55296<=N&&57343>=N&&++D,w+=4}return w},Me=[],Ue=b=>{var w=Me.length;return Me.push(b),w},ze=(b,w)=>{for(var D=Array(b),N=0;N<b;++N)D[N]=Ru(I[w+4*N>>2],"parameter "+N);return D},pt=Reflect.construct,ut={},tt=()=>{if(!Ft){var b={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:a||"./this.program"},w;for(w in ut)ut[w]===void 0?delete b[w]:b[w]=ut[w];var D=[];for(w in b)D.push(`${w}=${b[w]}`);Ft=D}return Ft},Ft,Jt=[null,[],[]],Gn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);L("initRandomDevice")},An=b=>(An=Gn())(b),Nt=b=>b%4===0&&(b%100!==0||b%400===0),rt=[31,29,31,30,31,30,31,31,30,31,30,31],Wn=[31,28,31,30,31,30,31,31,30,31,30,31];function Qt(b){var w=Array(fe(b)+1);return ae(b,w,0,w.length),w}var mr=(b,w,D,N)=>{function W(ne,gt,vt){for(ne=typeof ne=="number"?ne.toString():ne||"";ne.length<gt;)ne=vt[0]+ne;return ne}function Q(ne,gt){return W(ne,gt,"0")}function be(ne,gt){function vt(ra){return 0>ra?-1:0<ra?1:0}var ei;return(ei=vt(ne.getFullYear()-gt.getFullYear()))===0&&(ei=vt(ne.getMonth()-gt.getMonth()))===0&&(ei=vt(ne.getDate()-gt.getDate())),ei}function ce(ne){switch(ne.getDay()){case 0:return new Date(ne.getFullYear()-1,11,29);case 1:return ne;case 2:return new Date(ne.getFullYear(),0,3);case 3:return new Date(ne.getFullYear(),0,2);case 4:return new Date(ne.getFullYear(),0,1);case 5:return new Date(ne.getFullYear()-1,11,31);case 6:return new Date(ne.getFullYear()-1,11,30)}}function Ze(ne){var gt=ne.Ia;for(ne=new Date(new Date(ne.Ja+1900,0,1).getTime());0<gt;){var vt=ne.getMonth(),ei=(Nt(ne.getFullYear())?rt:Wn)[vt];if(gt>ei-ne.getDate())gt-=ei-ne.getDate()+1,ne.setDate(1),11>vt?ne.setMonth(vt+1):(ne.setMonth(0),ne.setFullYear(ne.getFullYear()+1));else{ne.setDate(ne.getDate()+gt);break}}return vt=new Date(ne.getFullYear()+1,0,4),gt=ce(new Date(ne.getFullYear(),0,4)),vt=ce(vt),0>=be(gt,ne)?0>=be(vt,ne)?ne.getFullYear()+1:ne.getFullYear():ne.getFullYear()-1}var we=I[N+40>>2];N={sb:A[N>>2],rb:A[N+4>>2],Ra:A[N+8>>2],Va:A[N+12>>2],Sa:A[N+16>>2],Ja:A[N+20>>2],Ga:A[N+24>>2],Ia:A[N+28>>2],wb:A[N+32>>2],qb:A[N+36>>2],tb:we&&we?xe(p,we):""},D=D?xe(p,D):"",we={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ve in we)D=D.replace(new RegExp(Ve,"g"),we[Ve]);var Wt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),rn="January February March April May June July August September October November December".split(" ");we={"%a":ne=>Wt[ne.Ga].substring(0,3),"%A":ne=>Wt[ne.Ga],"%b":ne=>rn[ne.Sa].substring(0,3),"%B":ne=>rn[ne.Sa],"%C":ne=>Q((ne.Ja+1900)/100|0,2),"%d":ne=>Q(ne.Va,2),"%e":ne=>W(ne.Va,2," "),"%g":ne=>Ze(ne).toString().substring(2),"%G":Ze,"%H":ne=>Q(ne.Ra,2),"%I":ne=>(ne=ne.Ra,ne==0?ne=12:12<ne&&(ne-=12),Q(ne,2)),"%j":ne=>{for(var gt=0,vt=0;vt<=ne.Sa-1;gt+=(Nt(ne.Ja+1900)?rt:Wn)[vt++]);return Q(ne.Va+gt,3)},"%m":ne=>Q(ne.Sa+1,2),"%M":ne=>Q(ne.rb,2),"%n":()=>`
`,"%p":ne=>0<=ne.Ra&&12>ne.Ra?"AM":"PM","%S":ne=>Q(ne.sb,2),"%t":()=>"	","%u":ne=>ne.Ga||7,"%U":ne=>Q(Math.floor((ne.Ia+7-ne.Ga)/7),2),"%V":ne=>{var gt=Math.floor((ne.Ia+7-(ne.Ga+6)%7)/7);if(2>=(ne.Ga+371-ne.Ia-2)%7&&gt++,gt)gt==53&&(vt=(ne.Ga+371-ne.Ia)%7,vt==4||vt==3&&Nt(ne.Ja)||(gt=1));else{gt=52;var vt=(ne.Ga+7-ne.Ia-1)%7;(vt==4||vt==5&&Nt(ne.Ja%400-1))&&gt++}return Q(gt,2)},"%w":ne=>ne.Ga,"%W":ne=>Q(Math.floor((ne.Ia+7-(ne.Ga+6)%7)/7),2),"%y":ne=>(ne.Ja+1900).toString().substring(2),"%Y":ne=>ne.Ja+1900,"%z":ne=>{ne=ne.qb;var gt=0<=ne;return ne=Math.abs(ne)/60,(gt?"+":"-")+("0000"+(ne/60*100+ne%60)).slice(-4)},"%Z":ne=>ne.tb,"%%":()=>"%"},D=D.replace(/%%/g,"\0\0");for(Ve in we)D.includes(Ve)&&(D=D.replace(new RegExp(Ve,"g"),we[Ve](N)));return D=D.replace(/\0\0/g,"%"),Ve=Qt(D),Ve.length>w?0:(g.set(Ve,b),Ve.length-1)};O=t.InternalError=class extends Error{constructor(b){super(b),this.name="InternalError"}};for(var yo=Array(256),li=0;256>li;++li)yo[li]=String.fromCharCode(li);St=yo,Ie=t.BindingError=class extends Error{constructor(b){super(b),this.name="BindingError"}},Object.assign(at.prototype,{isAliasOf:function(b){if(!(this instanceof at&&b instanceof at))return!1;var w=this.ma.za.xa,D=this.ma.ya;b.ma=b.ma;var N=b.ma.za.xa;for(b=b.ma.ya;w.Ca;)D=w.Na(D),w=w.Ca;for(;N.Ca;)b=N.Na(b),N=N.Ca;return w===N&&D===b},clone:function(){if(this.ma.ya||k(this),this.ma.Ma)return this.ma.count.value+=1,this;var b=Oe,w=Object,D=w.create,N=Object.getPrototypeOf(this),W=this.ma;return b=b(D.call(w,N,{ma:{value:{count:W.count,Ka:W.Ka,Ma:W.Ma,ya:W.ya,za:W.za,Aa:W.Aa,Da:W.Da}}})),b.ma.count.value+=1,b.ma.Ka=!1,b},delete(){if(this.ma.ya||k(this),this.ma.Ka&&!this.ma.Ma)throw new Ie("Object already scheduled for deletion");q(this);var b=this.ma;--b.count.value,b.count.value===0&&(b.Aa?b.Da.Fa(b.Aa):b.za.xa.Fa(b.ya)),this.ma.Ma||(this.ma.Aa=void 0,this.ma.ya=void 0)},isDeleted:function(){return!this.ma.ya},deleteLater:function(){if(this.ma.ya||k(this),this.ma.Ka&&!this.ma.Ma)throw new Ie("Object already scheduled for deletion");return se.push(this),se.length===1&&Te&&Te(Ye),this.ma.Ka=!0,this}}),t.getInheritedInstanceCount=()=>Object.keys(et).length,t.getLiveInheritedInstances=()=>{var b=[],w;for(w in et)et.hasOwnProperty(w)&&b.push(et[w]);return b},t.flushPendingDeletes=Ye,t.setDelayFunction=b=>{Te=b,se.length&&Te&&Te(Ye)},Object.assign(Le.prototype,{eb(b){return this.Za&&(b=this.Za(b)),b},Xa(b){this.Fa?.(b)},argPackAdvance:8,readValueFromPointer:Se,fromWireType:function(b){function w(){return this.Qa?ye(this.xa.La,{za:this.jb,ya:D,Da:this,Aa:b}):ye(this.xa.La,{za:this,ya:b})}var D=this.eb(b);if(!D)return this.Xa(b),null;var N=ft(this.xa,D);if(N!==void 0)return N.ma.count.value===0?(N.ma.ya=D,N.ma.Aa=b,N.clone()):(N=N.clone(),this.Xa(b),N);if(N=this.xa.cb(D),N=me[N],!N)return w.call(this);N=this.Pa?N.$a:N.pointerType;var W=de(D,this.xa,N.xa);return W===null?w.call(this):this.Qa?ye(N.xa.La,{za:N,ya:W,Da:this,Aa:b}):ye(N.xa.La,{za:N,ya:W})}}),nr=t.UnboundTypeError=((b,w)=>{var D=lt(w,function(N){this.name=w,this.message=N,N=Error(N).stack,N!==void 0&&(this.stack=this.toString()+`
`+N.replace(/^Error(:[^\n]*)?\n/,""))});return D.prototype=Object.create(b.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},D})(Error,"UnboundTypeError"),ir.push(0,1,void 0,1,null,1,!0,1,!1,1),t.count_emval_handles=()=>ir.length/2-5-Tc.length;var al={c:(b,w,D,N)=>{L(`Assertion failed: ${b?xe(p,b):""}, at: `+[w?w?xe(p,w):"":"unknown filename",D,N?N?xe(p,N):"":"unknown function"])},m:(b,w,D)=>{var N=new J(b);throw I[N.ya+16>>2]=0,I[N.ya+4>>2]=w,I[N.ya+8>>2]=D,oe=b,oe},B:function(){return 0},P:()=>{},M:()=>{},R:function(){return 0},N:()=>{},A:function(){},O:()=>{},v:b=>{var w=Ce[b];delete Ce[b];var D=w.Ua,N=w.Fa,W=w.Ya,Q=W.map(be=>be.hb).concat(W.map(be=>be.nb));$t([b],Q,be=>{var ce={};return W.forEach((Ze,we)=>{var Ve=be[we],Wt=Ze.fb,rn=Ze.gb,ne=be[we+W.length],gt=Ze.mb,vt=Ze.ob;ce[Ze.bb]={read:ei=>Ve.fromWireType(Wt(rn,ei)),write:(ei,ra)=>{var Cr=[];gt(vt,ei,ne.toWireType(Cr,ra)),Je(Cr)}}}),[{name:w.name,fromWireType:Ze=>{var we={},Ve;for(Ve in ce)we[Ve]=ce[Ve].read(Ze);return N(Ze),we},toWireType:(Ze,we)=>{for(var Ve in ce)if(!(Ve in we))throw new TypeError(`Missing field: "${Ve}"`);var Wt=D();for(Ve in ce)ce[Ve].write(Wt,we[Ve]);return Ze!==null&&Ze.push(N,Wt),Wt},argPackAdvance:8,readValueFromPointer:Se,Ea:N}]})},I:()=>{},Y:(b,w,D,N)=>{w=nt(w),We(b,{name:w,fromWireType:function(W){return!!W},toWireType:function(W,Q){return Q?D:N},argPackAdvance:8,readValueFromPointer:function(W){return this.fromWireType(p[W])},Ea:null})},r:(b,w,D,N,W,Q,be,ce,Ze,we,Ve,Wt,rn)=>{Ve=nt(Ve),Q=It(W,Q),ce&&(ce=It(be,ce)),we&&(we=It(Ze,we)),rn=It(Wt,rn);var ne=Tt(Ve);Gt(ne,function(){rl(`Cannot construct ${Ve} due to unbound types`,[N])}),$t([b,w,D],N?[N]:[],gt=>{if(gt=gt[0],N)var vt=gt.xa,ei=vt.La;else ei=at.prototype;gt=lt(Ve,function(...sm){if(Object.getPrototypeOf(this)!==ra)throw new Ie("Use 'new' to construct "+Ve);if(Cr.Ha===void 0)throw new Ie(Ve+" has no accessible constructor");var a_=Cr.Ha[sm.length];if(a_===void 0)throw new Ie(`Tried to invoke ctor of ${Ve} with invalid number of parameters (${sm.length}) - expected (${Object.keys(Cr.Ha).toString()}) parameters instead!`);return a_.apply(this,sm)});var ra=Object.create(ei,{constructor:{value:gt}});gt.prototype=ra;var Cr=new cn(Ve,gt,ra,rn,vt,Q,ce,we);if(Cr.Ca){var Pu;(Pu=Cr.Ca).Wa??(Pu.Wa=[]),Cr.Ca.Wa.push(Cr)}return vt=new Le(Ve,Cr,!0,!1,!1),Pu=new Le(Ve+"*",Cr,!1,!1,!1),ei=new Le(Ve+" const*",Cr,!1,!0,!1),me[b]={pointerType:Pu,$a:ei},De(ne,gt),[vt,Pu,ei]})},q:(b,w,D,N,W,Q)=>{var be=Sc(w,D);W=It(N,W),$t([],[b],ce=>{ce=ce[0];var Ze=`constructor ${ce.name}`;if(ce.xa.Ha===void 0&&(ce.xa.Ha=[]),ce.xa.Ha[w-1]!==void 0)throw new Ie(`Cannot register multiple constructors with identical number of parameters (${w-1}) for class '${ce.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ce.xa.Ha[w-1]=()=>{rl(`Cannot construct ${ce.name} due to unbound types`,be)},$t([],be,we=>(we.splice(1,0,null),ce.xa.Ha[w-1]=sl(Ze,we,null,W,Q),[])),[]})},f:(b,w,D,N,W,Q,be,ce)=>{var Ze=Sc(D,N);w=nt(w),w=Mu(w),Q=It(W,Q),$t([],[b],we=>{function Ve(){rl(`Cannot call ${Wt} due to unbound types`,Ze)}we=we[0];var Wt=`${we.name}.${w}`;w.startsWith("@@")&&(w=Symbol[w.substring(2)]),ce&&we.xa.kb.push(w);var rn=we.xa.La,ne=rn[w];return ne===void 0||ne.Ba===void 0&&ne.className!==we.name&&ne.Oa===D-2?(Ve.Oa=D-2,Ve.className=we.name,rn[w]=Ve):(He(rn,w,Wt),rn[w].Ba[D-2]=Ve),$t([],Ze,gt=>(gt=sl(Wt,gt,we,Q,be),rn[w].Ba===void 0?(gt.Oa=D-2,rn[w]=gt):rn[w].Ba[D-2]=gt,[])),[]})},X:b=>We(b,Lu),x:(b,w,D,N)=>{function W(){}w=nt(w),W.values={},We(b,{name:w,constructor:W,fromWireType:function(Q){return this.constructor.values[Q]},toWireType:(Q,be)=>be.value,argPackAdvance:8,readValueFromPointer:nm(w,D,N),Ea:null}),Gt(w,W)},k:(b,w,D)=>{var N=Ru(b,"enum");w=nt(w),b=N.constructor,N=Object.create(N.constructor.prototype,{value:{value:D},constructor:{value:lt(`${N.name}_${w}`,function(){})}}),b.values[D]=N,b[w]=N},C:(b,w,D)=>{w=nt(w),We(b,{name:w,fromWireType:N=>N,toWireType:(N,W)=>W,argPackAdvance:8,readValueFromPointer:im(w,D),Ea:null})},E:(b,w,D,N,W,Q)=>{var be=Sc(w,D);b=nt(b),b=Mu(b),W=It(N,W),Gt(b,function(){rl(`Cannot call ${b} due to unbound types`,be)},w-1),$t([],be,ce=>(De(b,sl(b,[ce[0],null].concat(ce.slice(1)),null,W,Q),w-1),[]))},l:(b,w,D,N,W)=>{if(w=nt(w),W===-1&&(W=4294967295),W=ce=>ce,N===0){var Q=32-8*D;W=ce=>ce<<Q>>>Q}var be=w.includes("unsigned")?function(ce,Ze){return Ze>>>0}:function(ce,Ze){return Ze};We(b,{name:w,fromWireType:W,toWireType:be,argPackAdvance:8,readValueFromPointer:rm(w,D,N!==0),Ea:null})},g:(b,w,D)=>{function N(Q){return new W(g.buffer,I[Q+4>>2],I[Q>>2])}var W=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][w];D=nt(D),We(b,{name:D,fromWireType:N,argPackAdvance:8,readValueFromPointer:N},{ib:!0})},w:b=>{We(b,Lu)},ca:(b,w,D,N,W,Q,be,ce,Ze,we,Ve,Wt)=>{D=nt(D),Q=It(W,Q),ce=It(be,ce),we=It(Ze,we),Wt=It(Ve,Wt),$t([b],[w],rn=>(rn=rn[0],[new Le(D,rn.xa,!1,!1,!0,rn,N,Q,ce,we,Wt)]))},D:(b,w)=>{w=nt(w);var D=w==="std::string";We(b,{name:w,fromWireType:function(N){var W=I[N>>2],Q=N+4;if(D)for(var be=Q,ce=0;ce<=W;++ce){var Ze=Q+ce;if(ce==W||p[Ze]==0){if(be=be?xe(p,be,Ze-be):"",we===void 0)var we=be;else we+="\0",we+=be;be=Ze+1}}else{for(we=Array(W),ce=0;ce<W;++ce)we[ce]=String.fromCharCode(p[Q+ce]);we=we.join("")}return yn(N),we},toWireType:function(N,W){W instanceof ArrayBuffer&&(W=new Uint8Array(W));var Q=typeof W=="string";if(!(Q||W instanceof Uint8Array||W instanceof Uint8ClampedArray||W instanceof Int8Array))throw new Ie("Cannot pass non-string to std::string");var be=D&&Q?fe(W):W.length,ce=Ti(4+be+1),Ze=ce+4;if(I[ce>>2]=be,D&&Q)ae(W,p,Ze,be+1);else if(Q)for(Q=0;Q<be;++Q){var we=W.charCodeAt(Q);if(255<we)throw yn(Ze),new Ie("String has UTF-16 code units that do not fit in 8 bits");p[Ze+Q]=we}else for(Q=0;Q<be;++Q)p[Ze+Q]=W[Q];return N!==null&&N.push(yn,ce),ce},argPackAdvance:8,readValueFromPointer:Se,Ea(N){yn(N)}})},u:(b,w,D)=>{if(D=nt(D),w===2)var N=P,W=X,Q=ee,be=ce=>C[ce>>1];else w===4&&(N=te,W=K,Q=_e,be=ce=>I[ce>>2]);We(b,{name:D,fromWireType:ce=>{for(var Ze=I[ce>>2],we,Ve=ce+4,Wt=0;Wt<=Ze;++Wt){var rn=ce+4+Wt*w;(Wt==Ze||be(rn)==0)&&(Ve=N(Ve,rn-Ve),we===void 0?we=Ve:(we+="\0",we+=Ve),Ve=rn+w)}return yn(ce),we},toWireType:(ce,Ze)=>{if(typeof Ze!="string")throw new Ie(`Cannot pass non-string to C++ string type ${D}`);var we=Q(Ze),Ve=Ti(4+we+w);return I[Ve>>2]=we/w,W(Ze,Ve+4,we+w),ce!==null&&ce.push(yn,Ve),Ve},argPackAdvance:8,readValueFromPointer:Se,Ea(ce){yn(ce)}})},s:(b,w,D,N,W,Q)=>{Ce[b]={name:nt(w),Ua:It(D,N),Fa:It(W,Q),Ya:[]}},j:(b,w,D,N,W,Q,be,ce,Ze,we)=>{Ce[b].Ya.push({bb:nt(w),hb:D,fb:It(N,W),gb:Q,nb:be,mb:It(ce,Ze),ob:we})},Z:(b,w)=>{w=nt(w),We(b,{ub:!0,name:w,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},J:()=>{throw 1/0},aa:(b,w,D,N)=>(b=Me[b],w=ia(w),b(null,w,D,N)),F:Ec,$:(b,w,D)=>{var N=ze(b,w),W=N.shift();b--;var Q=Array(b);return w=`methodCaller<(${N.map(be=>be.name).join(", ")}) => ${W.name}>`,Ue(lt(w,(be,ce,Ze,we)=>{for(var Ve=0,Wt=0;Wt<b;++Wt)Q[Wt]=N[Wt].readValueFromPointer(we+Ve),Ve+=N[Wt].argPackAdvance;return ce=D===1?pt(ce,Q):ce.apply(be,Q),be=[],ce=W.toWireType(be,ce),be.length&&(I[Ze>>2]=ol(be)),ce}))},ba:b=>{9<b&&(ir[b+1]+=1)},_:b=>{var w=ia(b);Je(w),Ec(b)},o:(b,w)=>(b=Ru(b,"_emval_take_value"),b=b.readValueFromPointer(w),ol(b)),W:()=>{L("")},V:()=>performance.now(),L:b=>{var w=p.length;if(b>>>=0,2147483648<b)return!1;for(var D=1;4>=D;D*=2){var N=w*(1+.2/D);N=Math.min(N,b+100663296);var W=Math;N=Math.max(b,N);e:{W=(W.min.call(W,2147483648,N+(65536-N%65536)%65536)-d.buffer.byteLength+65535)/65536;try{d.grow(W),T();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},S:(b,w)=>{var D=0;return tt().forEach((N,W)=>{var Q=w+D;for(W=I[b+4*W>>2]=Q,Q=0;Q<N.length;++Q)g[W++]=N.charCodeAt(Q);g[W]=0,D+=N.length+1}),0},T:(b,w)=>{var D=tt();I[b>>2]=D.length;var N=0;return D.forEach(W=>N+=W.length+1),I[w>>2]=N,0},t:()=>52,z:()=>52,H:function(){return 70},Q:(b,w,D,N)=>{for(var W=0,Q=0;Q<D;Q++){var be=I[w>>2],ce=I[w+4>>2];w+=8;for(var Ze=0;Ze<ce;Ze++){var we=p[be+Ze],Ve=Jt[b];we===0||we===10?((b===1?c:h)(xe(Ve,0)),Ve.length=0):Ve.push(we)}W+=ce}return I[N>>2]=W,0},U:(b,w)=>(An(p.subarray(b,b+w)),0),i:dE,d:uE,e:hE,p:fE,y:mE,b:lE,a:cE,h:pE,n:gE,G:CE,K:(b,w,D,N)=>mr(b,w,D,N)},Ct=function(){function b(D){return Ct=D.exports,d=Ct.da,T(),it=Ct.ha,M.unshift(Ct.ea),B--,t.monitorRunDependencies?.(B),B==0&&E&&(D=E,E=null,D()),Ct}var w={a:al};if(B++,t.monitorRunDependencies?.(B),t.instantiateWasm)try{return t.instantiateWasm(w,b)}catch(D){h(`Module.instantiateWasm callback failed with error: ${D}`),r(D)}return j(w,function(D){b(D.instance)}).catch(r),{}}(),Ti=b=>(Ti=Ct.fa)(b),Wi=b=>(Wi=Ct.ga)(b),yn=b=>(yn=Ct.ia)(b),In=(b,w)=>(In=Ct.ja)(b,w),Hi=b=>(Hi=Ct.ka)(b),qn=()=>(qn=Ct.la)();t.dynCall_iijj=(b,w,D,N,W,Q)=>(t.dynCall_iijj=Ct.na)(b,w,D,N,W,Q),t.dynCall_vijj=(b,w,D,N,W,Q)=>(t.dynCall_vijj=Ct.oa)(b,w,D,N,W,Q),t.dynCall_jiii=(b,w,D,N)=>(t.dynCall_jiii=Ct.pa)(b,w,D,N),t.dynCall_jii=(b,w,D)=>(t.dynCall_jii=Ct.qa)(b,w,D);var s_=t.dynCall_viiij=(b,w,D,N,W,Q)=>(s_=t.dynCall_viiij=Ct.ra)(b,w,D,N,W,Q);t.dynCall_jiji=(b,w,D,N,W)=>(t.dynCall_jiji=Ct.sa)(b,w,D,N,W),t.dynCall_viijii=(b,w,D,N,W,Q,be)=>(t.dynCall_viijii=Ct.ta)(b,w,D,N,W,Q,be),t.dynCall_iiiiij=(b,w,D,N,W,Q,be)=>(t.dynCall_iiiiij=Ct.ua)(b,w,D,N,W,Q,be),t.dynCall_iiiiijj=(b,w,D,N,W,Q,be,ce,Ze)=>(t.dynCall_iiiiijj=Ct.va)(b,w,D,N,W,Q,be,ce,Ze),t.dynCall_iiiiiijj=(b,w,D,N,W,Q,be,ce,Ze,we)=>(t.dynCall_iiiiiijj=Ct.wa)(b,w,D,N,W,Q,be,ce,Ze,we);function lE(b,w){var D=qn();try{it.get(b)(w)}catch(N){if(Hi(D),N!==N+0)throw N;In(1,0)}}function cE(b,w,D){var N=qn();try{it.get(b)(w,D)}catch(W){if(Hi(N),W!==W+0)throw W;In(1,0)}}function hE(b,w,D,N){var W=qn();try{return it.get(b)(w,D,N)}catch(Q){if(Hi(W),Q!==Q+0)throw Q;In(1,0)}}function uE(b,w,D){var N=qn();try{return it.get(b)(w,D)}catch(W){if(Hi(N),W!==W+0)throw W;In(1,0)}}function dE(b,w){var D=qn();try{return it.get(b)(w)}catch(N){if(Hi(D),N!==N+0)throw N;In(1,0)}}function fE(b,w,D,N,W,Q){var be=qn();try{return it.get(b)(w,D,N,W,Q)}catch(ce){if(Hi(be),ce!==ce+0)throw ce;In(1,0)}}function gE(b,w,D,N,W){var Q=qn();try{it.get(b)(w,D,N,W)}catch(be){if(Hi(Q),be!==be+0)throw be;In(1,0)}}function pE(b,w,D,N){var W=qn();try{it.get(b)(w,D,N)}catch(Q){if(Hi(W),Q!==Q+0)throw Q;In(1,0)}}function mE(b){var w=qn();try{it.get(b)()}catch(D){if(Hi(w),D!==D+0)throw D;In(1,0)}}function CE(b,w,D,N,W,Q){var be=qn();try{s_(b,w,D,N,W,Q)}catch(ce){if(Hi(be),ce!==ce+0)throw ce;In(1,0)}}var Yf;E=function b(){Yf||o_(),Yf||(E=b)};function o_(){function b(){if(!Yf&&(Yf=!0,t.calledRun=!0,!f)){if(re(M),n(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var w=t.postRun.shift();_.unshift(w)}re(_)}}if(!(0<B)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)v();re(S),0<B||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),b()},1)):b())}}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return o_(),s}})(),$O=jO,Rp=class{constructor(){throw new Error("RendererLoader is a static class and cannot be instantiated.")}static async _tryLoad(i){return await $O({locateFile:()=>i})}static async _loadWithBackup(){return this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch(async i=>{let e=`https://unpkg.com/${A7}@${I7}/dist/dotlottie-player.wasm`;console.warn(`Primary WASM load failed from ${this._wasmURL}. Error: ${i.message}`),console.warn(`Attempting to load WASM from backup URL: ${e}`);try{return await this._tryLoad(e)}catch(t){throw console.error(`Primary WASM URL failed: ${i.message}`),console.error(`Backup WASM URL failed: ${t.message}`),new Error("WASM loading failed from all sources.")}})),this._ModulePromise}static async load(){return this._loadWithBackup()}static setWasmUrl(i){this._wasmURL=i,this._ModulePromise=null}};Dt(Rp,"_ModulePromise",null),Dt(Rp,"_wasmURL",`https://cdn.jsdelivr.net/npm/${A7}@${I7}/dist/dotlottie-player.wasm`);var y7=class{constructor(){Dt(this,"_eventListeners",new Map)}addEventListener(i,e){let t=this._eventListeners.get(i);t||(t=new Set,this._eventListeners.set(i,t)),t.add(e)}removeEventListener(i,e){let t=this._eventListeners.get(i);t&&(e?(t.delete(e),t.size===0&&this._eventListeners.delete(i)):this._eventListeners.delete(i))}dispatch(i){this._eventListeners.get(i.type)?.forEach(e=>e(i))}removeAllEventListeners(){this._eventListeners.clear()}};function JO(i){return/^#([\da-f]{6}|[\da-f]{8})$/iu.test(i)}function QO(i){if(!JO(i))return 0;let e=i.replace("#","");return e=e.length===6?`${e}ff`:e,parseInt(e,16)}function j5(i){if(i.byteLength<4)return!1;let e=new Uint8Array(i.slice(0,Pm.byteLength));for(let t=0;t<Pm.length;t+=1)if(Pm[t]!==e[t])return!1;return!0}function $5(i){return KO.every(e=>Object.prototype.hasOwnProperty.call(i,e))}function J5(i){if(typeof i=="string")try{return $5(JSON.parse(i))}catch{return!1}else return $5(i)}var Gm=(i,e)=>i==="reverse"?e.Mode.Reverse:i==="bounce"?e.Mode.Bounce:i==="reverse-bounce"?e.Mode.ReverseBounce:e.Mode.Forward,Dm=(i,e)=>i==="contain"?e.Fit.Contain:i==="cover"?e.Fit.Cover:i==="fill"?e.Fit.Fill:i==="fit-height"?e.Fit.FitHeight:i==="fit-width"?e.Fit.FitWidth:e.Fit.None,Fm=(i,e)=>{let t=new e.VectorFloat;return t.push_back(i[0]),t.push_back(i[1]),t},Nm=(i,e)=>{let t=new e.VectorFloat;return i.length!==2||(t.push_back(i[0]),t.push_back(i[1])),t},_7=class xn{constructor(e){Dt(this,"_canvas"),Dt(this,"_context",null),Dt(this,"_eventManager"),Dt(this,"_animationFrameId",null),Dt(this,"_frameManager"),Dt(this,"_dotLottieCore",null),Dt(this,"_renderConfig",{}),Dt(this,"_isFrozen",!1),Dt(this,"_backgroundColor",null),Dt(this,"_pointerUpMethod"),Dt(this,"_pointerDownMethod"),Dt(this,"_pointerMoveMethod"),Dt(this,"_pointerEnterMethod"),Dt(this,"_pointerExitMethod"),Dt(this,"_onCompleteMethod"),this._canvas=e.canvas,this._context=this._canvas.getContext("2d"),this._eventManager=new y7,this._frameManager=new XO,this._renderConfig=e.renderConfig??{},Rp.load().then(t=>{xn._wasmModule=t,this._dotLottieCore=new t.DotLottiePlayer({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:Gm(e.mode??"forward",t),segment:Nm(e.segment??[],t),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:Fm(e.layout.align,t),fit:Dm(e.layout.fit,t)}:t.createDefaultLayout()}),this._eventManager.dispatch({type:"ready"}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)}).catch(t=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load wasm module: ${t}`)})}),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}_dispatchError(e){console.error(e),this._eventManager.dispatch({type:"loadError",error:new Error(e)})}async _fetchData(e){let t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch animation data from URL: ${e}. ${t.status}: ${t.statusText}`);let n=await t.arrayBuffer();return j5(n)?n:new TextDecoder().decode(n)}_loadFromData(e){if(this._dotLottieCore===null)return;let t=this._canvas.width,n=this._canvas.height,r=!1;if(typeof e=="string"){if(!J5(e)){this._dispatchError("Invalid Lottie JSON string: The provided string does not conform to the Lottie JSON format.");return}r=this._dotLottieCore.loadAnimationData(e,t,n)}else if(e instanceof ArrayBuffer){if(!j5(e)){this._dispatchError("Invalid dotLottie ArrayBuffer: The provided ArrayBuffer does not conform to the dotLottie format.");return}r=this._dotLottieCore.loadDotLottieData(e,t,n)}else if(typeof e=="object"){if(!J5(e)){this._dispatchError("Invalid Lottie JSON object: The provided object does not conform to the Lottie JSON format.");return}r=this._dotLottieCore.loadAnimationData(JSON.stringify(e),t,n)}else{this._dispatchError(`Unsupported data type for animation data. Expected: 
          - string (Lottie JSON),
          - ArrayBuffer (dotLottie),
          - object (Lottie JSON). 
          Received: ${typeof e}`);return}r?(this._eventManager.dispatch({type:"load"}),Hl&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay"))):this._dispatchError("Failed to load animation data")}_loadFromSrc(e){this._fetchData(e).then(t=>this._loadFromData(t)).catch(t=>this._dispatchError(`Failed to load animation data from URL: ${e}. ${t}`))}get activeAnimationId(){return this._dotLottieCore?.activeAnimationId()}get activeThemeId(){return this._dotLottieCore?.activeThemeId()}get layout(){let e=this._dotLottieCore?.config().layout;if(e)return{align:[e.align.get(0),e.align.get(1)],fit:(()=>{switch(e.fit){case xn._wasmModule?.Fit.Contain:return"contain";case xn._wasmModule?.Fit.Cover:return"cover";case xn._wasmModule?.Fit.Fill:return"fill";case xn._wasmModule?.Fit.FitHeight:return"fit-height";case xn._wasmModule?.Fit.FitWidth:return"fit-width";case xn._wasmModule?.Fit.None:return"none";default:return"contain"}})()}}get marker(){return this._dotLottieCore?.config().marker}get manifest(){try{let e=this._dotLottieCore?.manifestString();if(this._dotLottieCore===null||!e)return null;let t=JSON.parse(e);return Object.keys(t).length===0?null:t}catch{return null}}get renderConfig(){return this._renderConfig}get segment(){let e=this._dotLottieCore?.config().segment;if(e&&e.size()===2)return[e.get(0),e.get(1)]}get loop(){return this._dotLottieCore?.config().loopAnimation??!1}get mode(){let e=this._dotLottieCore?.config().mode;return e===xn._wasmModule?.Mode.Reverse?"reverse":e===xn._wasmModule?.Mode.Bounce?"bounce":e===xn._wasmModule?.Mode.ReverseBounce?"reverse-bounce":"forward"}get isFrozen(){return this._isFrozen}get backgroundColor(){return this._backgroundColor??""}get autoplay(){return this._dotLottieCore?.config().autoplay??!1}get useFrameInterpolation(){return this._dotLottieCore?.config().useFrameInterpolation??!1}get speed(){return this._dotLottieCore?.config().speed??0}get isReady(){return this._dotLottieCore!==null}get isLoaded(){return this._dotLottieCore?.isLoaded()??!1}get isPlaying(){return this._dotLottieCore?.isPlaying()??!1}get isPaused(){return this._dotLottieCore?.isPaused()??!1}get isStopped(){return this._dotLottieCore?.isStopped()??!1}get currentFrame(){return this._dotLottieCore?.currentFrame()??0}get loopCount(){return this._dotLottieCore?.loopCount()??0}get totalFrames(){return this._dotLottieCore?.totalFrames()??0}get duration(){return this._dotLottieCore?.duration()??0}get segmentDuration(){return this._dotLottieCore?.segmentDuration()??0}get canvas(){return this._canvas}load(e){this._dotLottieCore===null||xn._wasmModule===null||(this._dotLottieCore.setConfig({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:Gm(e.mode??"forward",xn._wasmModule),segment:Nm(e.segment??[],xn._wasmModule),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:Fm(e.layout.align,xn._wasmModule),fit:Dm(e.layout.fit,xn._wasmModule)}:xn._wasmModule.createDefaultLayout()}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),this.setBackgroundColor(e.backgroundColor??""))}_render(){if(this._dotLottieCore===null||this._context===null)return!1;if(this._dotLottieCore.render()){let e=this._dotLottieCore.buffer(),t=new Uint8ClampedArray(e,0,this._canvas.width*this._canvas.height*4),n=null;return typeof ImageData>"u"?(n=this._context.createImageData(this._canvas.width,this._canvas.height),n.data.set(t)):n=new ImageData(t,this._canvas.width,this._canvas.height),this._context.putImageData(n,0,0),this._eventManager.dispatch({type:"render",currentFrame:this._dotLottieCore.currentFrame()}),!0}return!1}_draw(){if(this._dotLottieCore===null||this._context===null||!this._dotLottieCore.isPlaying())return;let e=this._dotLottieCore.requestFrame();this._dotLottieCore.setFrame(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render()&&this._dotLottieCore.isComplete()&&(this._dotLottieCore.config().loopAnimation?this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()}):this._eventManager.dispatch({type:"complete"}))),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))}play(){this._dotLottieCore!==null&&(this._dotLottieCore.play()||this._dotLottieCore.isPlaying())&&(this._isFrozen=!1,this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)))}pause(){this._dotLottieCore!==null&&(this._dotLottieCore.pause()||this._dotLottieCore.isPaused())&&this._eventManager.dispatch({type:"pause"})}stop(){this._dotLottieCore!==null&&this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._eventManager.dispatch({type:"stop"}))}setFrame(e){this._dotLottieCore===null||e<0||e>this._dotLottieCore.totalFrames()||this._dotLottieCore.seek(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render())}setSpeed(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),speed:e})}setBackgroundColor(e){this._dotLottieCore!==null&&(Hl&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=e:this._dotLottieCore.setConfig({...this._dotLottieCore.config(),backgroundColor:QO(e)}),this._backgroundColor=e)}setLoop(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),loopAnimation:e})}setUseFrameInterpolation(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),useFrameInterpolation:e})}addEventListener(e,t){this._eventManager.addEventListener(e,t)}removeEventListener(e,t){this._eventManager.removeEventListener(e,t)}destroy(){this._dotLottieCore?.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners()}freeze(){this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}))}unfreeze(){this._animationFrameId===null&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}))}resize(){if(Hl&&this._canvas instanceof HTMLCanvasElement){let e=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,{height:t,width:n}=this._canvas.getBoundingClientRect();this._canvas.width=n*e,this._canvas.height=t*e}this._dotLottieCore?.resize(this._canvas.width,this._canvas.height)&&this._render()}setSegment(e,t){this._dotLottieCore===null||xn._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),segment:Nm([e,t],xn._wasmModule)})}setMode(e){this._dotLottieCore===null||xn._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),mode:Gm(e,xn._wasmModule)})}setRenderConfig(e){this._renderConfig=e}loadAnimation(e){this._dotLottieCore===null||this._dotLottieCore.activeAnimationId()===e||(this._dotLottieCore.loadAnimation(e,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to animation :${e}`)}))}setMarker(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),marker:e})}markers(){let e=this._dotLottieCore?.markers();if(e){let t=[];for(let n=0;n<e.size();n+=1){let r=e.get(n);t.push({name:r.name,time:r.time,duration:r.duration})}return t}return[]}loadTheme(e){if(this._dotLottieCore===null)return!1;let t=this._dotLottieCore.loadTheme(e);return this._render(),t}loadThemeData(e){if(this._dotLottieCore===null)return!1;let t=this._dotLottieCore.loadThemeData(e);return this._render(),t}setLayout(e){this._dotLottieCore===null||xn._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),layout:{align:Fm(e.align,xn._wasmModule),fit:Dm(e.fit,xn._wasmModule)}})}setViewport(e,t,n,r){return this._dotLottieCore===null?!1:this._dotLottieCore.setViewport(e,t,n,r)}static setWasmUrl(e){Rp.setWasmUrl(e)}loadStateMachine(e){return this._dotLottieCore?.loadStateMachine(e)??!1}startStateMachine(){let e=this._dotLottieCore?.startStateMachine()??!1;return e&&this._setupStateMachineListeners(),e}stopStateMachine(){let e=this._dotLottieCore?.stopStateMachine()??!1;return e&&this._cleanupStateMachineListeners(),e}_getPointerPosition(e){let t=this._canvas.getBoundingClientRect(),n=this._canvas.width/t.width,r=this._canvas.height/t.height,s=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,o=(e.clientX-t.left)*n/s,a=(e.clientY-t.top)*r/s;return{x:o,y:a}}_onPointerUp(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerUp: ${t} ${n}`)}_onPointerDown(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerDown: ${t} ${n}`)}_onPointerMove(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerMove: ${t} ${n}`)}_onPointerEnter(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerEnter: ${t} ${n}`)}_onPointerLeave(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerExit: ${t} ${n}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}postStateMachineEvent(e){let t=this._dotLottieCore?.postEventPayload(e)??1;return t===2?this.play():t===3?this.pause():t===4&&this._render(),t}getStateMachineListeners(){if(!this._dotLottieCore)return[];let e=this._dotLottieCore.stateMachineFrameworkSetup(),t=[];for(let n=0;n<e.size();n+=1)t.push(e.get(n));return t}_setupStateMachineListeners(){if(Hl&&this._canvas instanceof HTMLCanvasElement&&this._dotLottieCore!==null&&this.isLoaded){let e=this.getStateMachineListeners();e.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),e.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),e.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),e.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),e.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),e.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod)}}_cleanupStateMachineListeners(){Hl&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}loadStateMachineData(e){return this._dotLottieCore?.loadStateMachineData(e)??!1}animationSize(){let e=this._dotLottieCore?.animationSize().get(0)??0,t=this._dotLottieCore?.animationSize().get(1)??0;return{width:e,height:t}}setStateMachineBooleanContext(e,t){return this._dotLottieCore?.setStateMachineBooleanContext(e,t)??!1}setStateMachineNumericContext(e,t){return this._dotLottieCore?.setStateMachineNumericContext(e,t)??!1}setStateMachineStringContext(e,t){return this._dotLottieCore?.setStateMachineStringContext(e,t)??!1}};Dt(_7,"_wasmModule",null);var Dre=_7,qO=class{constructor(){if(typeof window>"u")throw new Error("Worker is not available in this environment.");return new Worker("data:application/javascript;base64,InVzZSBzdHJpY3QiOwooKCkgPT4gewogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlOwogIHZhciBfX3B1YmxpY0ZpZWxkID0gKG9iaiwga2V5LCB2YWx1ZSkgPT4gX19kZWZOb3JtYWxQcm9wKG9iaiwgdHlwZW9mIGtleSAhPT0gInN5bWJvbCIgPyBrZXkgKyAiIiA6IGtleSwgdmFsdWUpOwoKICAvLyBzcmMvYW5pbWF0aW9uLWZyYW1lLW1hbmFnZXIudHMKICB2YXIgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjaykgewogICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSB7CiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTsKICAgIH0KICB9OwogIHZhciBOb2RlQW5pbWF0aW9uRnJhbWVTdHJhdGVneSA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfbGFzdEhhbmRsZUlkIiwgMCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9sYXN0SW1tZWRpYXRlIiwgbnVsbCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgaWYgKHRoaXMuX2xhc3RIYW5kbGVJZCA+PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgewogICAgICAgIHRoaXMuX2xhc3RIYW5kbGVJZCA9IDA7CiAgICAgIH0KICAgICAgdGhpcy5fbGFzdEhhbmRsZUlkICs9IDE7CiAgICAgIHRoaXMuX2xhc3RJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGUoKCkgPT4gewogICAgICAgIGNhbGxiYWNrKERhdGUubm93KCkpOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuX2xhc3RIYW5kbGVJZDsKICAgIH0KICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKF9pZCkgewogICAgICBpZiAodGhpcy5fbGFzdEltbWVkaWF0ZSkgewogICAgICAgIGNsZWFySW1tZWRpYXRlKHRoaXMuX2xhc3RJbW1lZGlhdGUpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgQW5pbWF0aW9uRnJhbWVNYW5hZ2VyID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9zdHJhdGVneSIpOwogICAgICB0aGlzLl9zdHJhdGVneSA9IHR5cGVvZiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPT09ICJmdW5jdGlvbiIgPyBuZXcgV2ViQW5pbWF0aW9uRnJhbWVTdHJhdGVneSgpIDogbmV3IE5vZGVBbmltYXRpb25GcmFtZVN0cmF0ZWd5KCk7CiAgICB9CiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0cmF0ZWd5LnJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7CiAgICB9CiAgICBjYW5jZWxBbmltYXRpb25GcmFtZShpZCkgewogICAgICB0aGlzLl9zdHJhdGVneS5jYW5jZWxBbmltYXRpb25GcmFtZShpZCk7CiAgICB9CiAgfTsKCiAgLy8gc3JjL2NvbnN0YW50cy50cwogIHZhciBJU19CUk9XU0VSID0gdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gInVuZGVmaW5lZCI7CiAgdmFyIFpJUF9TSUdOQVRVUkUgPSBuZXcgVWludDhBcnJheShbODAsIDc1LCAzLCA0XSk7CiAgdmFyIExPVFRJRV9KU09OX01BTkRBVE9SWV9GSUVMRFMgPSBbInYiLCAiaXAiLCAib3AiLCAibGF5ZXJzIiwgImZyIiwgInciLCAiaCJdOwogIHZhciBQQUNLQUdFX1ZFUlNJT04gPSAiMC4zMC4zIjsKICB2YXIgUEFDS0FHRV9OQU1FID0gIkBsb3R0aWVmaWxlcy9kb3Rsb3R0aWUtd2ViIjsKCiAgLy8gc3JjL2NvcmUvZG90bG90dGllLXBsYXllci5qcwogIHZhciBjcmVhdGVEb3RMb3R0aWVQbGF5ZXJNb2R1bGUgPSAoKCkgPT4gewogICAgdmFyIF9zY3JpcHREaXIgPSB0eXBlb2YgZG9jdW1lbnQgIT0gInVuZGVmaW5lZCIgPyBkb2N1bWVudC5jdXJyZW50U2NyaXB0Py5zcmMgOiB2b2lkIDA7CiAgICByZXR1cm4gZnVuY3Rpb24obW9kdWxlQXJnID0ge30pIHsKICAgICAgdmFyIGsgPSBtb2R1bGVBcmcsIGFhLCBiYSwgcmVhZHlQcm9taXNlID0gbmV3IFByb21pc2UoKGEsIGIpID0+IHsKICAgICAgICBhYSA9IGE7CiAgICAgICAgYmEgPSBiOwogICAgICB9KSwgY2EgPSBPYmplY3QuYXNzaWduKHt9LCBrKSwgZGEgPSAiLi90aGlzLnByb2dyYW0iLCB0ID0gIiI7CiAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBkb2N1bWVudCAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0ICYmICh0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpOwogICAgICBfc2NyaXB0RGlyICYmICh0ID0gX3NjcmlwdERpcik7CiAgICAgIHQuc3RhcnRzV2l0aCgiYmxvYjoiKSA/IHQgPSAiIiA6IHQgPSB0LnN1YnN0cigwLCB0LnJlcGxhY2UoL1s/I10uKi8sICIiKS5sYXN0SW5kZXhPZigiLyIpICsgMSk7CiAgICAgIHZhciBlYSA9IGsucHJpbnQgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKSwgdyA9IGsucHJpbnRFcnIgfHwgY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpOwogICAgICBPYmplY3QuYXNzaWduKGssIGNhKTsKICAgICAgY2EgPSBudWxsOwogICAgICBrLnRoaXNQcm9ncmFtICYmIChkYSA9IGsudGhpc1Byb2dyYW0pOwogICAgICB2YXIgeDsKICAgICAgay53YXNtQmluYXJ5ICYmICh4ID0gay53YXNtQmluYXJ5KTsKICAgICAgdmFyIGZhLCBoYSA9IGZhbHNlLCB5LCBBLCBCLCBDLCBFLCBGLCBqYSwga2E7CiAgICAgIGZ1bmN0aW9uIGxhKCkgewogICAgICAgIHZhciBhID0gZmEuYnVmZmVyOwogICAgICAgIGsuSEVBUDggPSB5ID0gbmV3IEludDhBcnJheShhKTsKICAgICAgICBrLkhFQVAxNiA9IEIgPSBuZXcgSW50MTZBcnJheShhKTsKICAgICAgICBrLkhFQVBVOCA9IEEgPSBuZXcgVWludDhBcnJheShhKTsKICAgICAgICBrLkhFQVBVMTYgPSBDID0gbmV3IFVpbnQxNkFycmF5KGEpOwogICAgICAgIGsuSEVBUDMyID0gRSA9IG5ldyBJbnQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUFUzMiA9IEYgPSBuZXcgVWludDMyQXJyYXkoYSk7CiAgICAgICAgay5IRUFQRjMyID0gamEgPSBuZXcgRmxvYXQzMkFycmF5KGEpOwogICAgICAgIGsuSEVBUEY2NCA9IGthID0gbmV3IEZsb2F0NjRBcnJheShhKTsKICAgICAgfQogICAgICB2YXIgbWEgPSBbXSwgbmEgPSBbXSwgb2EgPSBbXTsKICAgICAgZnVuY3Rpb24gcGEoKSB7CiAgICAgICAgdmFyIGEgPSBrLnByZVJ1bi5zaGlmdCgpOwogICAgICAgIG1hLnVuc2hpZnQoYSk7CiAgICAgIH0KICAgICAgdmFyIEcgPSAwLCBxYSA9IG51bGwsIEggPSBudWxsOwogICAgICBmdW5jdGlvbiByYShhKSB7CiAgICAgICAgay5vbkFib3J0Py4oYSk7CiAgICAgICAgYSA9ICJBYm9ydGVkKCIgKyBhICsgIikiOwogICAgICAgIHcoYSk7CiAgICAgICAgaGEgPSB0cnVlOwogICAgICAgIGEgPSBuZXcgV2ViQXNzZW1ibHkuUnVudGltZUVycm9yKGEgKyAiLiBCdWlsZCB3aXRoIC1zQVNTRVJUSU9OUyBmb3IgbW9yZSBpbmZvLiIpOwogICAgICAgIGJhKGEpOwogICAgICAgIHRocm93IGE7CiAgICAgIH0KICAgICAgdmFyIHNhID0gKGEpID0+IGEuc3RhcnRzV2l0aCgiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCIpLCBJOwogICAgICBJID0gIkRvdExvdHRpZVBsYXllci53YXNtIjsKICAgICAgaWYgKCFzYShJKSkgewogICAgICAgIHZhciB0YSA9IEk7CiAgICAgICAgSSA9IGsubG9jYXRlRmlsZSA/IGsubG9jYXRlRmlsZSh0YSwgdCkgOiB0ICsgdGE7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdWEoYSkgewogICAgICAgIGlmIChhID09IEkgJiYgeCkgcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpOwogICAgICAgIHRocm93ICJib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCI7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdmEoYSkgewogICAgICAgIHJldHVybiB4IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIGZldGNoID8gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB1YShhKSkgOiBmZXRjaChhLCB7IGNyZWRlbnRpYWxzOiAic2FtZS1vcmlnaW4iIH0pLnRoZW4oKGIpID0+IHsKICAgICAgICAgIGlmICghYi5vaykgdGhyb3cgYGZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyR7YX0nYDsKICAgICAgICAgIHJldHVybiBiLmFycmF5QnVmZmVyKCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4gdWEoYSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHdhKGEsIGIsIGMpIHsKICAgICAgICByZXR1cm4gdmEoYSkudGhlbigoZCkgPT4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoZCwgYikpLnRoZW4oYywgKGQpID0+IHsKICAgICAgICAgIHcoYGZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICR7ZH1gKTsKICAgICAgICAgIHJhKGQpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHhhKGEsIGIpIHsKICAgICAgICB2YXIgYyA9IEk7CiAgICAgICAgcmV0dXJuIHggfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcgfHwgc2EoYykgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgZmV0Y2ggPyB3YShjLCBhLCBiKSA6IGZldGNoKGMsIHsgY3JlZGVudGlhbHM6ICJzYW1lLW9yaWdpbiIgfSkudGhlbigKICAgICAgICAgIChkKSA9PiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhkLCBhKS50aGVuKGIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdyhgd2FzbSBzdHJlYW1pbmcgY29tcGlsZSBmYWlsZWQ6ICR7ZX1gKTsKICAgICAgICAgICAgdygiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKTsKICAgICAgICAgICAgcmV0dXJuIHdhKGMsIGEsIGIpOwogICAgICAgICAgfSkKICAgICAgICApOwogICAgICB9CiAgICAgIHZhciB5YSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IDAgPCBhLmxlbmd0aDsgKSBhLnNoaWZ0KCkoayk7CiAgICAgIH0sIHphID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGY4IikgOiB2b2lkIDAsIEogPSAoYSwgYiwgYykgPT4gewogICAgICAgIHZhciBkID0gYiArIGM7CiAgICAgICAgZm9yIChjID0gYjsgYVtjXSAmJiAhKGMgPj0gZCk7ICkgKytjOwogICAgICAgIGlmICgxNiA8IGMgLSBiICYmIGEuYnVmZmVyICYmIHphKSByZXR1cm4gemEuZGVjb2RlKGEuc3ViYXJyYXkoYiwgYykpOwogICAgICAgIGZvciAoZCA9ICIiOyBiIDwgYzsgKSB7CiAgICAgICAgICB2YXIgZSA9IGFbYisrXTsKICAgICAgICAgIGlmIChlICYgMTI4KSB7CiAgICAgICAgICAgIHZhciBmID0gYVtiKytdICYgNjM7CiAgICAgICAgICAgIGlmICgxOTIgPT0gKGUgJiAyMjQpKSBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKGUgJiAzMSkgPDwgNiB8IGYpOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB2YXIgbCA9IGFbYisrXSAmIDYzOwogICAgICAgICAgICAgIGUgPSAyMjQgPT0gKGUgJiAyNDApID8gKGUgJiAxNSkgPDwgMTIgfCBmIDw8IDYgfCBsIDogKGUgJiA3KSA8PCAxOCB8IGYgPDwgMTIgfCBsIDw8IDYgfCBhW2IrK10gJiA2MzsKICAgICAgICAgICAgICA2NTUzNiA+IGUgPyBkICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiAoZSAtPSA2NTUzNiwgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2IHwgZSA+PiAxMCwgNTYzMjAgfCBlICYgMTAyMykpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgZCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZDsKICAgICAgfTsKICAgICAgY2xhc3MgQWEgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHRoaXMueWEgPSBhIC0gMjQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBCYSA9IDAsIENhID0gMCwgRGEgPSAoYSkgPT4gewogICAgICAgIGZvciAodmFyIGIgPSAwLCBjID0gMDsgYyA8IGEubGVuZ3RoOyArK2MpIHsKICAgICAgICAgIHZhciBkID0gYS5jaGFyQ29kZUF0KGMpOwogICAgICAgICAgMTI3ID49IGQgPyBiKysgOiAyMDQ3ID49IGQgPyBiICs9IDIgOiA1NTI5NiA8PSBkICYmIDU3MzQzID49IGQgPyAoYiArPSA0LCArK2MpIDogYiArPSAzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgRWEgPSAoYSwgYiwgYywgZCkgPT4gewogICAgICAgIGlmICgwIDwgZCkgewogICAgICAgICAgZCA9IGMgKyBkIC0gMTsKICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYS5sZW5ndGg7ICsrZSkgewogICAgICAgICAgICB2YXIgZiA9IGEuY2hhckNvZGVBdChlKTsKICAgICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICAgIHZhciBsID0gYS5jaGFyQ29kZUF0KCsrZSk7CiAgICAgICAgICAgICAgZiA9IDY1NTM2ICsgKChmICYgMTAyMykgPDwgMTApIHwgbCAmIDEwMjM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKDEyNyA+PSBmKSB7CiAgICAgICAgICAgICAgaWYgKGMgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgYltjKytdID0gZjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoMjA0NyA+PSBmKSB7CiAgICAgICAgICAgICAgICBpZiAoYyArIDEgPj0gZCkgYnJlYWs7CiAgICAgICAgICAgICAgICBiW2MrK10gPSAxOTIgfCBmID4+IDY7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICg2NTUzNSA+PSBmKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMiA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjI0IHwgZiA+PiAxMjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmIChjICsgMyA+PSBkKSBicmVhazsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMjQwIHwgZiA+PiAxODsKICAgICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiAxMiAmIDYzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYltjKytdID0gMTI4IHwgZiA+PiA2ICYgNjM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJbYysrXSA9IDEyOCB8IGYgJiA2MzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYltjXSA9IDA7CiAgICAgICAgfQogICAgICB9LCBGYSA9IHt9LCBHYSA9IChhKSA9PiB7CiAgICAgICAgZm9yICg7IGEubGVuZ3RoOyApIHsKICAgICAgICAgIHZhciBiID0gYS5wb3AoKTsKICAgICAgICAgIGEucG9wKCkoYik7CiAgICAgICAgfQogICAgICB9OwogICAgICBmdW5jdGlvbiBLKGEpIHsKICAgICAgICByZXR1cm4gdGhpcy5mcm9tV2lyZVR5cGUoRlthID4+IDJdKTsKICAgICAgfQogICAgICB2YXIgTCA9IHt9LCBNID0ge30sIEhhID0ge30sIElhLCBQID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBmdW5jdGlvbiBkKGgpIHsKICAgICAgICAgIGggPSBjKGgpOwogICAgICAgICAgaWYgKGgubGVuZ3RoICE9PSBhLmxlbmd0aCkgdGhyb3cgbmV3IElhKCJNaXNtYXRjaGVkIHR5cGUgY29udmVydGVyIGNvdW50Iik7CiAgICAgICAgICBmb3IgKHZhciBuID0gMDsgbiA8IGEubGVuZ3RoOyArK24pIE8oYVtuXSwgaFtuXSk7CiAgICAgICAgfQogICAgICAgIGEuZm9yRWFjaChmdW5jdGlvbihoKSB7CiAgICAgICAgICBIYVtoXSA9IGI7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGUgPSBBcnJheShiLmxlbmd0aCksIGYgPSBbXSwgbCA9IDA7CiAgICAgICAgYi5mb3JFYWNoKChoLCBuKSA9PiB7CiAgICAgICAgICBNLmhhc093blByb3BlcnR5KGgpID8gZVtuXSA9IE1baF0gOiAoZi5wdXNoKGgpLCBMLmhhc093blByb3BlcnR5KGgpIHx8IChMW2hdID0gW10pLCBMW2hdLnB1c2goKCkgPT4gewogICAgICAgICAgICBlW25dID0gTVtoXTsKICAgICAgICAgICAgKytsOwogICAgICAgICAgICBsID09PSBmLmxlbmd0aCAmJiBkKGUpOwogICAgICAgICAgfSkpOwogICAgICAgIH0pOwogICAgICAgIDAgPT09IGYubGVuZ3RoICYmIGQoZSk7CiAgICAgIH0sIEphLCBRID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gIiI7IEFbYV07ICkgYiArPSBKYVtBW2ErK11dOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBSOwogICAgICBmdW5jdGlvbiBLYShhLCBiLCBjID0ge30pIHsKICAgICAgICB2YXIgZCA9IGIubmFtZTsKICAgICAgICBpZiAoIWEpIHRocm93IG5ldyBSKGB0eXBlICIke2R9IiBtdXN0IGhhdmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIHR5cGVpZCBwb2ludGVyYCk7CiAgICAgICAgaWYgKE0uaGFzT3duUHJvcGVydHkoYSkpIHsKICAgICAgICAgIGlmIChjLmliKSByZXR1cm47CiAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIHR5cGUgJyR7ZH0nIHR3aWNlYCk7CiAgICAgICAgfQogICAgICAgIE1bYV0gPSBiOwogICAgICAgIGRlbGV0ZSBIYVthXTsKICAgICAgICBMLmhhc093blByb3BlcnR5KGEpICYmIChiID0gTFthXSwgZGVsZXRlIExbYV0sIGIuZm9yRWFjaCgoZSkgPT4gZSgpKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gTyhhLCBiLCBjID0ge30pIHsKICAgICAgICBpZiAoISgiYXJnUGFja0FkdmFuY2UiIGluIGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJyZWdpc3RlclR5cGUgcmVnaXN0ZXJlZEluc3RhbmNlIHJlcXVpcmVzIGFyZ1BhY2tBZHZhbmNlIik7CiAgICAgICAgcmV0dXJuIEthKGEsIGIsIGMpOwogICAgICB9CiAgICAgIHZhciBMYSA9IChhKSA9PiB7CiAgICAgICAgdGhyb3cgbmV3IFIoYS5tYS56YS54YS5uYW1lICsgIiBpbnN0YW5jZSBhbHJlYWR5IGRlbGV0ZWQiKTsKICAgICAgfSwgTWEgPSBmYWxzZSwgT2EgPSAoKSA9PiB7CiAgICAgIH0sIFBhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoYiA9PT0gYykgcmV0dXJuIGE7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYy5DYSkgcmV0dXJuIG51bGw7CiAgICAgICAgYSA9IFBhKGEsIGIsIGMuQ2EpOwogICAgICAgIHJldHVybiBudWxsID09PSBhID8gbnVsbCA6IGMuYWIoYSk7CiAgICAgIH0sIFFhID0ge30sIFJhID0gW10sIFNhID0gKCkgPT4gewogICAgICAgIGZvciAoOyBSYS5sZW5ndGg7ICkgewogICAgICAgICAgdmFyIGEgPSBSYS5wb3AoKTsKICAgICAgICAgIGEubWEuS2EgPSBmYWxzZTsKICAgICAgICAgIGFbImRlbGV0ZSJdKCk7CiAgICAgICAgfQogICAgICB9LCBUYSwgVWEgPSB7fSwgVmEgPSAoYSwgYikgPT4gewogICAgICAgIGlmICh2b2lkIDAgPT09IGIpIHRocm93IG5ldyBSKCJwdHIgc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQiKTsKICAgICAgICBmb3IgKDsgYS5DYTsgKSBiID0gYS5OYShiKSwgYSA9IGEuQ2E7CiAgICAgICAgcmV0dXJuIFVhW2JdOwogICAgICB9LCBYYSA9IChhLCBiKSA9PiB7CiAgICAgICAgaWYgKCFiLnphIHx8ICFiLnlhKSB0aHJvdyBuZXcgSWEoIm1ha2VDbGFzc0hhbmRsZSByZXF1aXJlcyBwdHIgYW5kIHB0clR5cGUiKTsKICAgICAgICBpZiAoISFiLkRhICE9PSAhIWIuQWEpIHRocm93IG5ldyBJYSgiQm90aCBzbWFydFB0clR5cGUgYW5kIHNtYXJ0UHRyIG11c3QgYmUgc3BlY2lmaWVkIik7CiAgICAgICAgYi5jb3VudCA9IHsgdmFsdWU6IDEgfTsKICAgICAgICByZXR1cm4gV2EoT2JqZWN0LmNyZWF0ZShhLCB7IG1hOiB7IHZhbHVlOiBiLCB3cml0YWJsZTogdHJ1ZSB9IH0pKTsKICAgICAgfSwgV2EgPSAoYSkgPT4gewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PT0gdHlwZW9mIEZpbmFsaXphdGlvblJlZ2lzdHJ5KSByZXR1cm4gV2EgPSAoYikgPT4gYiwgYTsKICAgICAgICBNYSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeSgoYikgPT4gewogICAgICAgICAgYiA9IGIubWE7CiAgICAgICAgICAtLWIuY291bnQudmFsdWU7CiAgICAgICAgICAwID09PSBiLmNvdW50LnZhbHVlICYmIChiLkFhID8gYi5EYS5GYShiLkFhKSA6IGIuemEueGEuRmEoYi55YSkpOwogICAgICAgIH0pOwogICAgICAgIFdhID0gKGIpID0+IHsKICAgICAgICAgIHZhciBjID0gYi5tYTsKICAgICAgICAgIGMuQWEgJiYgTWEucmVnaXN0ZXIoYiwgeyBtYTogYyB9LCBiKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH07CiAgICAgICAgT2EgPSAoYikgPT4gewogICAgICAgICAgTWEudW5yZWdpc3RlcihiKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBXYShhKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gWWEoKSB7CiAgICAgIH0KICAgICAgdmFyIFphID0gKGEsIGIpID0+IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLCAibmFtZSIsIHsgdmFsdWU6IGEgfSksICRhID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAodm9pZCAwID09PSBhW2JdLkJhKSB7CiAgICAgICAgICB2YXIgZCA9IGFbYl07CiAgICAgICAgICBhW2JdID0gZnVuY3Rpb24oLi4uZSkgewogICAgICAgICAgICBpZiAoIWFbYl0uQmEuaGFzT3duUHJvcGVydHkoZS5sZW5ndGgpKQogICAgICAgICAgICAgIHRocm93IG5ldyBSKAogICAgICAgICAgICAgICAgYEZ1bmN0aW9uICcke2N9JyBjYWxsZWQgd2l0aCBhbiBpbnZhbGlkIG51bWJlciBvZiBhcmd1bWVudHMgKCR7ZS5sZW5ndGh9KSAtIGV4cGVjdHMgb25lIG9mICgke2FbYl0uQmF9KSFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgcmV0dXJuIGFbYl0uQmFbZS5sZW5ndGhdLmFwcGx5KHRoaXMsIGUpOwogICAgICAgICAgfTsKICAgICAgICAgIGFbYl0uQmEgPSBbXTsKICAgICAgICAgIGFbYl0uQmFbZC5PYV0gPSBkOwogICAgICAgIH0KICAgICAgfSwgYWIgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGEpKSB7CiAgICAgICAgICBpZiAodm9pZCAwID09PSBjIHx8IHZvaWQgMCAhPT0ga1thXS5CYSAmJiB2b2lkIDAgIT09IGtbYV0uQmFbY10pCiAgICAgICAgICAgIHRocm93IG5ldyBSKGBDYW5ub3QgcmVnaXN0ZXIgcHVibGljIG5hbWUgJyR7YX0nIHR3aWNlYCk7CiAgICAgICAgICAkYShrLCBhLCBhKTsKICAgICAgICAgIGlmIChrLmhhc093blByb3BlcnR5KGMpKQogICAgICAgICAgICB0aHJvdyBuZXcgUihgQ2Fubm90IHJlZ2lzdGVyIG11bHRpcGxlIG92ZXJsb2FkcyBvZiBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyAoJHtjfSkhYCk7CiAgICAgICAgICBrW2FdLkJhW2NdID0gYjsKICAgICAgICB9IGVsc2Uga1thXSA9IGIsIHZvaWQgMCAhPT0gYyAmJiAoa1thXS52YiA9IGMpOwogICAgICB9LCBiYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKHZvaWQgMCA9PT0gYSkgcmV0dXJuICJfdW5rbm93biI7CiAgICAgICAgYSA9IGEucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCAiJCIpOwogICAgICAgIHZhciBiID0gYS5jaGFyQ29kZUF0KDApOwogICAgICAgIHJldHVybiA0OCA8PSBiICYmIDU3ID49IGIgPyBgXyR7YX1gIDogYTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gY2IoYSwgYiwgYywgZCwgZSwgZiwgbCwgaCkgewogICAgICAgIHRoaXMubmFtZSA9IGE7CiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGI7CiAgICAgICAgdGhpcy5MYSA9IGM7CiAgICAgICAgdGhpcy5GYSA9IGQ7CiAgICAgICAgdGhpcy5DYSA9IGU7CiAgICAgICAgdGhpcy5jYiA9IGY7CiAgICAgICAgdGhpcy5OYSA9IGw7CiAgICAgICAgdGhpcy5hYiA9IGg7CiAgICAgICAgdGhpcy5rYiA9IFtdOwogICAgICB9CiAgICAgIHZhciBkYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgZm9yICg7IGIgIT09IGM7ICkgewogICAgICAgICAgaWYgKCFiLk5hKSB0aHJvdyBuZXcgUihgRXhwZWN0ZWQgbnVsbCBvciBpbnN0YW5jZSBvZiAke2MubmFtZX0sIGdvdCBhbiBpbnN0YW5jZSBvZiAke2IubmFtZX1gKTsKICAgICAgICAgIGEgPSBiLk5hKGEpOwogICAgICAgICAgYiA9IGIuQ2E7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBmdW5jdGlvbiBlYihhLCBiKSB7CiAgICAgICAgaWYgKG51bGwgPT09IGIpIHsKICAgICAgICAgIGlmICh0aGlzLlRhKSB0aHJvdyBuZXcgUihgbnVsbCBpcyBub3QgYSB2YWxpZCAke3RoaXMubmFtZX1gKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgcmV0dXJuIGRiKGIubWEueWEsIGIubWEuemEueGEsIHRoaXMueGEpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdiKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgaWYgKHRoaXMuUWEpIHsKICAgICAgICAgICAgdmFyIGMgPSB0aGlzLlVhKCk7CiAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICByZXR1cm4gYzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAoIWIgfHwgIWIubWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyAiJHtmYihiKX0iIGFzIGEgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCFiLm1hLnlhKSB0aHJvdyBuZXcgUihgQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgJHt0aGlzLm5hbWV9YCk7CiAgICAgICAgaWYgKCF0aGlzLlBhICYmIGIubWEuemEuUGEpCiAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICApOwogICAgICAgIGMgPSBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgICBpZiAodGhpcy5RYSkgewogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gYi5tYS5BYSkgdGhyb3cgbmV3IFIoIlBhc3NpbmcgcmF3IHBvaW50ZXIgdG8gc21hcnQgcG9pbnRlciBpcyBpbGxlZ2FsIik7CiAgICAgICAgICBzd2l0Y2ggKHRoaXMucGIpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmIChiLm1hLkRhID09PSB0aGlzKSBjID0gYi5tYS5BYTsKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLkRhID8gYi5tYS5EYS5uYW1lIDogYi5tYS56YS5uYW1lfSB0byBwYXJhbWV0ZXIgdHlwZSAke3RoaXMubmFtZX1gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBpZiAoYi5tYS5EYSA9PT0gdGhpcykgYyA9IGIubWEuQWE7CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGIuY2xvbmUoKTsKICAgICAgICAgICAgICAgIGMgPSB0aGlzLmxiKAogICAgICAgICAgICAgICAgICBjLAogICAgICAgICAgICAgICAgICBoYigoKSA9PiBkWyJkZWxldGUiXSgpKQogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIG51bGwgIT09IGEgJiYgYS5wdXNoKHRoaXMuRmEsIGMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiVW5zdXBwb3J0aW5nIHNoYXJpbmcgcG9saWN5Iik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGliKGEsIGIpIHsKICAgICAgICBpZiAobnVsbCA9PT0gYikgewogICAgICAgICAgaWYgKHRoaXMuVGEpIHRocm93IG5ldyBSKGBudWxsIGlzIG5vdCBhIHZhbGlkICR7dGhpcy5uYW1lfWApOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIGlmICghYi5tYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBwYXNzICIke2ZiKGIpfSIgYXMgYSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoIWIubWEueWEpIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBkZWxldGVkIG9iamVjdCBhcyBhIHBvaW50ZXIgb2YgdHlwZSAke3RoaXMubmFtZX1gKTsKICAgICAgICBpZiAoYi5tYS56YS5QYSkgdGhyb3cgbmV3IFIoYENhbm5vdCBjb252ZXJ0IGFyZ3VtZW50IG9mIHR5cGUgJHtiLm1hLnphLm5hbWV9IHRvIHBhcmFtZXRlciB0eXBlICR7dGhpcy5uYW1lfWApOwogICAgICAgIHJldHVybiBkYihiLm1hLnlhLCBiLm1hLnphLnhhLCB0aGlzLnhhKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBqYihhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtLCBwKSB7CiAgICAgICAgdGhpcy5uYW1lID0gYTsKICAgICAgICB0aGlzLnhhID0gYjsKICAgICAgICB0aGlzLlRhID0gYzsKICAgICAgICB0aGlzLlBhID0gZDsKICAgICAgICB0aGlzLlFhID0gZTsKICAgICAgICB0aGlzLmpiID0gZjsKICAgICAgICB0aGlzLnBiID0gbDsKICAgICAgICB0aGlzLlphID0gaDsKICAgICAgICB0aGlzLlVhID0gbjsKICAgICAgICB0aGlzLmxiID0gbTsKICAgICAgICB0aGlzLkZhID0gcDsKICAgICAgICBlIHx8IHZvaWQgMCAhPT0gYi5DYSA/IHRoaXMudG9XaXJlVHlwZSA9IGdiIDogKHRoaXMudG9XaXJlVHlwZSA9IGQgPyBlYiA6IGliLCB0aGlzLkVhID0gbnVsbCk7CiAgICAgIH0KICAgICAgdmFyIGtiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBpZiAoIWsuaGFzT3duUHJvcGVydHkoYSkpIHRocm93IG5ldyBJYSgiUmVwbGFjaW5nIG5vbmV4aXN0ZW50IHB1YmxpYyBzeW1ib2wiKTsKICAgICAgICB2b2lkIDAgIT09IGtbYV0uQmEgJiYgdm9pZCAwICE9PSBjID8ga1thXS5CYVtjXSA9IGIgOiAoa1thXSA9IGIsIGtbYV0uT2EgPSBjKTsKICAgICAgfSwgUywgbGIgPSAoYSwgYiwgYyA9IFtdKSA9PiB7CiAgICAgICAgYS5pbmNsdWRlcygiaiIpID8gKGEgPSBhLnJlcGxhY2UoL3AvZywgImkiKSwgYiA9ICgwLCBrWyJkeW5DYWxsXyIgKyBhXSkoYiwgLi4uYykpIDogYiA9IFMuZ2V0KGIpKC4uLmMpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBtYiA9IChhLCBiKSA9PiAoLi4uYykgPT4gbGIoYSwgYiwgYyksIFQgPSAoYSwgYikgPT4gewogICAgICAgIGEgPSBRKGEpOwogICAgICAgIHZhciBjID0gYS5pbmNsdWRlcygiaiIpID8gbWIoYSwgYikgOiBTLmdldChiKTsKICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgYykgdGhyb3cgbmV3IFIoYHVua25vd24gZnVuY3Rpb24gcG9pbnRlciB3aXRoIHNpZ25hdHVyZSAke2F9OiAke2J9YCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIG5iLCBwYiA9IChhKSA9PiB7CiAgICAgICAgYSA9IG9iKGEpOwogICAgICAgIHZhciBiID0gUShhKTsKICAgICAgICBVKGEpOwogICAgICAgIHJldHVybiBiOwogICAgICB9LCBxYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gYyhmKSB7CiAgICAgICAgICBlW2ZdIHx8IE1bZl0gfHwgKEhhW2ZdID8gSGFbZl0uZm9yRWFjaChjKSA6IChkLnB1c2goZiksIGVbZl0gPSB0cnVlKSk7CiAgICAgICAgfQogICAgICAgIHZhciBkID0gW10sIGUgPSB7fTsKICAgICAgICBiLmZvckVhY2goYyk7CiAgICAgICAgdGhyb3cgbmV3IG5iKGAke2F9OiBgICsgZC5tYXAocGIpLmpvaW4oWyIsICJdKSk7CiAgICAgIH0sIHJiID0gKGEsIGIpID0+IHsKICAgICAgICBmb3IgKHZhciBjID0gW10sIGQgPSAwOyBkIDwgYTsgZCsrKSBjLnB1c2goRltiICsgNCAqIGQgPj4gMl0pOwogICAgICAgIHJldHVybiBjOwogICAgICB9OwogICAgICBmdW5jdGlvbiBzYihhKSB7CiAgICAgICAgZm9yICh2YXIgYiA9IDE7IGIgPCBhLmxlbmd0aDsgKytiKSBpZiAobnVsbCAhPT0gYVtiXSAmJiB2b2lkIDAgPT09IGFbYl0uRWEpIHJldHVybiB0cnVlOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0YihhLCBiLCBjLCBkLCBlKSB7CiAgICAgICAgdmFyIGYgPSBiLmxlbmd0aDsKICAgICAgICBpZiAoMiA+IGYpIHRocm93IG5ldyBSKCJhcmdUeXBlcyBhcnJheSBzaXplIG1pc21hdGNoISBNdXN0IGF0IGxlYXN0IGdldCByZXR1cm4gdmFsdWUgYW5kICd0aGlzJyB0eXBlcyEiKTsKICAgICAgICB2YXIgbCA9IG51bGwgIT09IGJbMV0gJiYgbnVsbCAhPT0gYywgaCA9IHNiKGIpLCBuID0gInZvaWQiICE9PSBiWzBdLm5hbWUsIG0gPSBmIC0gMiwgcCA9IEFycmF5KG0pLCB1ID0gW10sIHYgPSBbXTsKICAgICAgICByZXR1cm4gWmEoYSwgZnVuY3Rpb24oLi4uZykgewogICAgICAgICAgaWYgKGcubGVuZ3RoICE9PSBtKSB0aHJvdyBuZXcgUihgZnVuY3Rpb24gJHthfSBjYWxsZWQgd2l0aCAke2cubGVuZ3RofSBhcmd1bWVudHMsIGV4cGVjdGVkICR7bX1gKTsKICAgICAgICAgIHYubGVuZ3RoID0gMDsKICAgICAgICAgIHUubGVuZ3RoID0gbCA/IDIgOiAxOwogICAgICAgICAgdVswXSA9IGU7CiAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICB2YXIgcSA9IGJbMV0udG9XaXJlVHlwZSh2LCB0aGlzKTsKICAgICAgICAgICAgdVsxXSA9IHE7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IG07ICsrcikgcFtyXSA9IGJbciArIDJdLnRvV2lyZVR5cGUodiwgZ1tyXSksIHUucHVzaChwW3JdKTsKICAgICAgICAgIGcgPSBkKC4uLnUpOwogICAgICAgICAgaWYgKGgpIEdhKHYpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgKHIgPSBsID8gMSA6IDI7IHIgPCBiLmxlbmd0aDsgcisrKSB7CiAgICAgICAgICAgICAgdmFyIHogPSAxID09PSByID8gcSA6IHBbciAtIDJdOwogICAgICAgICAgICAgIG51bGwgIT09IGJbcl0uRWEgJiYgYltyXS5FYSh6KTsKICAgICAgICAgICAgfQogICAgICAgICAgcSA9IG4gPyBiWzBdLmZyb21XaXJlVHlwZShnKSA6IHZvaWQgMDsKICAgICAgICAgIHJldHVybiBxOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciB1YiA9IChhKSA9PiB7CiAgICAgICAgYSA9IGEudHJpbSgpOwogICAgICAgIGNvbnN0IGIgPSBhLmluZGV4T2YoIigiKTsKICAgICAgICByZXR1cm4gLTEgIT09IGIgPyBhLnN1YnN0cigwLCBiKSA6IGE7CiAgICAgIH0sIHZiID0gW10sIFYgPSBbXSwgd2IgPSAoYSkgPT4gewogICAgICAgIDkgPCBhICYmIDAgPT09IC0tVlthICsgMV0gJiYgKFZbYV0gPSB2b2lkIDAsIHZiLnB1c2goYSkpOwogICAgICB9LCB5YiA9IChhKSA9PiB7CiAgICAgICAgaWYgKCFhKSB0aHJvdyBuZXcgUigiQ2Fubm90IHVzZSBkZWxldGVkIHZhbC4gaGFuZGxlID0gIiArIGEpOwogICAgICAgIHJldHVybiBWW2FdOwogICAgICB9LCBoYiA9IChhKSA9PiB7CiAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICBjYXNlIHZvaWQgMDoKICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICBjYXNlIG51bGw6CiAgICAgICAgICAgIHJldHVybiA0OwogICAgICAgICAgY2FzZSB0cnVlOgogICAgICAgICAgICByZXR1cm4gNjsKICAgICAgICAgIGNhc2UgZmFsc2U6CiAgICAgICAgICAgIHJldHVybiA4OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgY29uc3QgYiA9IHZiLnBvcCgpIHx8IFYubGVuZ3RoOwogICAgICAgICAgICBWW2JdID0gYTsKICAgICAgICAgICAgVltiICsgMV0gPSAxOwogICAgICAgICAgICByZXR1cm4gYjsKICAgICAgICB9CiAgICAgIH0sIHpiID0gewogICAgICAgIG5hbWU6ICJlbXNjcmlwdGVuOjp2YWwiLAogICAgICAgIGZyb21XaXJlVHlwZTogKGEpID0+IHsKICAgICAgICAgIHZhciBiID0geWIoYSk7CiAgICAgICAgICB3YihhKTsKICAgICAgICAgIHJldHVybiBiOwogICAgICAgIH0sCiAgICAgICAgdG9XaXJlVHlwZTogKGEsIGIpID0+IGhiKGIpLAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIEVhOiBudWxsCiAgICAgIH0sIEFiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBzd2l0Y2ggKGIpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKHlbZF0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2RdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKEJbZCA+PiAxXSk7CiAgICAgICAgICAgIH0gOiBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKENbZCA+PiAxXSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBjID8gZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShFW2QgPj4gMl0pOwogICAgICAgICAgICB9IDogZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShGW2QgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgaW52YWxpZCBpbnRlZ2VyIHdpZHRoICgke2J9KTogJHthfWApOwogICAgICAgIH0KICAgICAgfSwgQmIgPSAoYSwgYikgPT4gewogICAgICAgIHZhciBjID0gTVthXTsKICAgICAgICBpZiAodm9pZCAwID09PSBjKSB0aHJvdyBhID0gYCR7Yn0gaGFzIHVua25vd24gdHlwZSAke3BiKGEpfWAsIG5ldyBSKGEpOwogICAgICAgIHJldHVybiBjOwogICAgICB9LCBmYiA9IChhKSA9PiB7CiAgICAgICAgaWYgKG51bGwgPT09IGEpIHJldHVybiAibnVsbCI7CiAgICAgICAgdmFyIGIgPSB0eXBlb2YgYTsKICAgICAgICByZXR1cm4gIm9iamVjdCIgPT09IGIgfHwgImFycmF5IiA9PT0gYiB8fCAiZnVuY3Rpb24iID09PSBiID8gYS50b1N0cmluZygpIDogIiIgKyBhOwogICAgICB9LCBDYiA9IChhLCBiKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihjKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVdpcmVUeXBlKGphW2MgPj4gMl0pOwogICAgICAgICAgICB9OwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oYykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShrYVtjID4+IDNdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgZmxvYXQgd2lkdGggKCR7Yn0pOiAke2F9YCk7CiAgICAgICAgfQogICAgICB9LCBEYiA9IChhLCBiLCBjKSA9PiB7CiAgICAgICAgc3dpdGNoIChiKSB7CiAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIHJldHVybiBjID8gKGQpID0+IHlbZF0gOiAoZCkgPT4gQVtkXTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gQltkID4+IDFdIDogKGQpID0+IENbZCA+PiAxXTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgcmV0dXJuIGMgPyAoZCkgPT4gRVtkID4+IDJdIDogKGQpID0+IEZbZCA+PiAyXTsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGludmFsaWQgaW50ZWdlciB3aWR0aCAoJHtifSk6ICR7YX1gKTsKICAgICAgICB9CiAgICAgIH0sIEViID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIFRleHREZWNvZGVyID8gbmV3IFRleHREZWNvZGVyKCJ1dGYtMTZsZSIpIDogdm9pZCAwLCBGYiA9IChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBhID4+IDE7CiAgICAgICAgZm9yICh2YXIgZCA9IGMgKyBiIC8gMjsgIShjID49IGQpICYmIENbY107ICkgKytjOwogICAgICAgIGMgPDw9IDE7CiAgICAgICAgaWYgKDMyIDwgYyAtIGEgJiYgRWIpIHJldHVybiBFYi5kZWNvZGUoQS5zdWJhcnJheShhLCBjKSk7CiAgICAgICAgYyA9ICIiOwogICAgICAgIGZvciAoZCA9IDA7ICEoZCA+PSBiIC8gMik7ICsrZCkgewogICAgICAgICAgdmFyIGUgPSBCW2EgKyAyICogZCA+PiAxXTsKICAgICAgICAgIGlmICgwID09IGUpIGJyZWFrOwogICAgICAgICAgYyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYzsKICAgICAgfSwgR2IgPSAoYSwgYiwgYykgPT4gewogICAgICAgIGMgPz8gKGMgPSAyMTQ3NDgzNjQ3KTsKICAgICAgICBpZiAoMiA+IGMpIHJldHVybiAwOwogICAgICAgIGMgLT0gMjsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGMgPCAyICogYS5sZW5ndGggPyBjIC8gMiA6IGEubGVuZ3RoOwogICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgYzsgKytlKSBCW2IgPj4gMV0gPSBhLmNoYXJDb2RlQXQoZSksIGIgKz0gMjsKICAgICAgICBCW2IgPj4gMV0gPSAwOwogICAgICAgIHJldHVybiBiIC0gZDsKICAgICAgfSwgSGIgPSAoYSkgPT4gMiAqIGEubGVuZ3RoLCBJYiA9IChhLCBiKSA9PiB7CiAgICAgICAgZm9yICh2YXIgYyA9IDAsIGQgPSAiIjsgIShjID49IGIgLyA0KTsgKSB7CiAgICAgICAgICB2YXIgZSA9IEVbYSArIDQgKiBjID4+IDJdOwogICAgICAgICAgaWYgKDAgPT0gZSkgYnJlYWs7CiAgICAgICAgICArK2M7CiAgICAgICAgICA2NTUzNiA8PSBlID8gKGUgLT0gNjU1MzYsIGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NiB8IGUgPj4gMTAsIDU2MzIwIHwgZSAmIDEwMjMpKSA6IGQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGQ7CiAgICAgIH0sIEpiID0gKGEsIGIsIGMpID0+IHsKICAgICAgICBjID8/IChjID0gMjE0NzQ4MzY0Nyk7CiAgICAgICAgaWYgKDQgPiBjKSByZXR1cm4gMDsKICAgICAgICB2YXIgZCA9IGI7CiAgICAgICAgYyA9IGQgKyBjIC0gNDsKICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IGEubGVuZ3RoOyArK2UpIHsKICAgICAgICAgIHZhciBmID0gYS5jaGFyQ29kZUF0KGUpOwogICAgICAgICAgaWYgKDU1Mjk2IDw9IGYgJiYgNTczNDMgPj0gZikgewogICAgICAgICAgICB2YXIgbCA9IGEuY2hhckNvZGVBdCgrK2UpOwogICAgICAgICAgICBmID0gNjU1MzYgKyAoKGYgJiAxMDIzKSA8PCAxMCkgfCBsICYgMTAyMzsKICAgICAgICAgIH0KICAgICAgICAgIEVbYiA+PiAyXSA9IGY7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgICBpZiAoYiArIDQgPiBjKSBicmVhazsKICAgICAgICB9CiAgICAgICAgRVtiID4+IDJdID0gMDsKICAgICAgICByZXR1cm4gYiAtIGQ7CiAgICAgIH0sIEtiID0gKGEpID0+IHsKICAgICAgICBmb3IgKHZhciBiID0gMCwgYyA9IDA7IGMgPCBhLmxlbmd0aDsgKytjKSB7CiAgICAgICAgICB2YXIgZCA9IGEuY2hhckNvZGVBdChjKTsKICAgICAgICAgIDU1Mjk2IDw9IGQgJiYgNTczNDMgPj0gZCAmJiArK2M7CiAgICAgICAgICBiICs9IDQ7CiAgICAgICAgfQogICAgICAgIHJldHVybiBiOwogICAgICB9LCBMYiA9IFtdLCBNYiA9IChhKSA9PiB7CiAgICAgICAgdmFyIGIgPSBMYi5sZW5ndGg7CiAgICAgICAgTGIucHVzaChhKTsKICAgICAgICByZXR1cm4gYjsKICAgICAgfSwgTmIgPSAoYSwgYikgPT4gewogICAgICAgIGZvciAodmFyIGMgPSBBcnJheShhKSwgZCA9IDA7IGQgPCBhOyArK2QpIGNbZF0gPSBCYihGW2IgKyA0ICogZCA+PiAyXSwgInBhcmFtZXRlciAiICsgZCk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0sIE9iID0gUmVmbGVjdC5jb25zdHJ1Y3QsIFBiID0ge30sIFJiID0gKCkgPT4gewogICAgICAgIGlmICghUWIpIHsKICAgICAgICAgIHZhciBhID0gewogICAgICAgICAgICBVU0VSOiAid2ViX3VzZXIiLAogICAgICAgICAgICBMT0dOQU1FOiAid2ViX3VzZXIiLAogICAgICAgICAgICBQQVRIOiAiLyIsCiAgICAgICAgICAgIFBXRDogIi8iLAogICAgICAgICAgICBIT01FOiAiL2hvbWUvd2ViX3VzZXIiLAogICAgICAgICAgICBMQU5HOiAoIm9iamVjdCIgPT0gdHlwZW9mIG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIG5hdmlnYXRvci5sYW5ndWFnZXNbMF0gfHwgIkMiKS5yZXBsYWNlKAogICAgICAgICAgICAgICItIiwKICAgICAgICAgICAgICAiXyIKICAgICAgICAgICAgKSArICIuVVRGLTgiLAogICAgICAgICAgICBfOiBkYSB8fCAiLi90aGlzLnByb2dyYW0iCiAgICAgICAgICB9LCBiOwogICAgICAgICAgZm9yIChiIGluIFBiKSB2b2lkIDAgPT09IFBiW2JdID8gZGVsZXRlIGFbYl0gOiBhW2JdID0gUGJbYl07CiAgICAgICAgICB2YXIgYyA9IFtdOwogICAgICAgICAgZm9yIChiIGluIGEpIGMucHVzaChgJHtifT0ke2FbYl19YCk7CiAgICAgICAgICBRYiA9IGM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBRYjsKICAgICAgfSwgUWIsIFNiID0gW251bGwsIFtdLCBbXV0sIFRiID0gKCkgPT4gewogICAgICAgIGlmICgib2JqZWN0IiA9PSB0eXBlb2YgY3J5cHRvICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMpCiAgICAgICAgICByZXR1cm4gKGEpID0+IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYSk7CiAgICAgICAgcmEoImluaXRSYW5kb21EZXZpY2UiKTsKICAgICAgfSwgVWIgPSAoYSkgPT4gKFViID0gVGIoKSkoYSksIFZiID0gKGEpID0+IDAgPT09IGEgJSA0ICYmICgwICE9PSBhICUgMTAwIHx8IDAgPT09IGEgJSA0MDApLCBXYiA9IFszMSwgMjksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXSwgWGIgPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07CiAgICAgIGZ1bmN0aW9uIFliKGEpIHsKICAgICAgICB2YXIgYiA9IEFycmF5KERhKGEpICsgMSk7CiAgICAgICAgRWEoYSwgYiwgMCwgYi5sZW5ndGgpOwogICAgICAgIHJldHVybiBiOwogICAgICB9CiAgICAgIHZhciBaYiA9IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgZnVuY3Rpb24gZShnLCBxLCByKSB7CiAgICAgICAgICBmb3IgKGcgPSAibnVtYmVyIiA9PSB0eXBlb2YgZyA/IGcudG9TdHJpbmcoKSA6IGcgfHwgIiI7IGcubGVuZ3RoIDwgcTsgKSBnID0gclswXSArIGc7CiAgICAgICAgICByZXR1cm4gZzsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZihnLCBxKSB7CiAgICAgICAgICByZXR1cm4gZShnLCBxLCAiMCIpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGcsIHEpIHsKICAgICAgICAgIGZ1bmN0aW9uIHIoTikgewogICAgICAgICAgICByZXR1cm4gMCA+IE4gPyAtMSA6IDAgPCBOID8gMSA6IDA7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgejsKICAgICAgICAgIDAgPT09ICh6ID0gcihnLmdldEZ1bGxZZWFyKCkgLSBxLmdldEZ1bGxZZWFyKCkpKSAmJiAwID09PSAoeiA9IHIoZy5nZXRNb250aCgpIC0gcS5nZXRNb250aCgpKSkgJiYgKHogPSByKGcuZ2V0RGF0ZSgpIC0gcS5nZXREYXRlKCkpKTsKICAgICAgICAgIHJldHVybiB6OwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBoKGcpIHsKICAgICAgICAgIHN3aXRjaCAoZy5nZXREYXkoKSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAyOSk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICByZXR1cm4gZzsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDMpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSwgMCwgMik7CiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpLCAwLCAxKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCkgLSAxLCAxMSwgMzEpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGcuZ2V0RnVsbFllYXIoKSAtIDEsIDExLCAzMCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIG4oZykgewogICAgICAgICAgdmFyIHEgPSBnLklhOwogICAgICAgICAgZm9yIChnID0gbmV3IERhdGUobmV3IERhdGUoZy5KYSArIDE5MDAsIDAsIDEpLmdldFRpbWUoKSk7IDAgPCBxOyApIHsKICAgICAgICAgICAgdmFyIHIgPSBnLmdldE1vbnRoKCksIHogPSAoVmIoZy5nZXRGdWxsWWVhcigpKSA/IFdiIDogWGIpW3JdOwogICAgICAgICAgICBpZiAocSA+IHogLSBnLmdldERhdGUoKSkKICAgICAgICAgICAgICBxIC09IHogLSBnLmdldERhdGUoKSArIDEsIGcuc2V0RGF0ZSgxKSwgMTEgPiByID8gZy5zZXRNb250aChyICsgMSkgOiAoZy5zZXRNb250aCgwKSwgZy5zZXRGdWxsWWVhcihnLmdldEZ1bGxZZWFyKCkgKyAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIGcuc2V0RGF0ZShnLmdldERhdGUoKSArIHEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByID0gbmV3IERhdGUoZy5nZXRGdWxsWWVhcigpICsgMSwgMCwgNCk7CiAgICAgICAgICBxID0gaChuZXcgRGF0ZShnLmdldEZ1bGxZZWFyKCksIDAsIDQpKTsKICAgICAgICAgIHIgPSBoKHIpOwogICAgICAgICAgcmV0dXJuIDAgPj0gbChxLCBnKSA/IDAgPj0gbChyLCBnKSA/IGcuZ2V0RnVsbFllYXIoKSArIDEgOiBnLmdldEZ1bGxZZWFyKCkgOiBnLmdldEZ1bGxZZWFyKCkgLSAxOwogICAgICAgIH0KICAgICAgICB2YXIgbSA9IEZbZCArIDQwID4+IDJdOwogICAgICAgIGQgPSB7CiAgICAgICAgICBzYjogRVtkID4+IDJdLAogICAgICAgICAgcmI6IEVbZCArIDQgPj4gMl0sCiAgICAgICAgICBSYTogRVtkICsgOCA+PiAyXSwKICAgICAgICAgIFZhOiBFW2QgKyAxMiA+PiAyXSwKICAgICAgICAgIFNhOiBFW2QgKyAxNiA+PiAyXSwKICAgICAgICAgIEphOiBFW2QgKyAyMCA+PiAyXSwKICAgICAgICAgIEdhOiBFW2QgKyAyNCA+PiAyXSwKICAgICAgICAgIElhOiBFW2QgKyAyOCA+PiAyXSwKICAgICAgICAgIHdiOiBFW2QgKyAzMiA+PiAyXSwKICAgICAgICAgIHFiOiBFW2QgKyAzNiA+PiAyXSwKICAgICAgICAgIHRiOiBtID8gbSA/IEooQSwgbSkgOiAiIiA6ICIiCiAgICAgICAgfTsKICAgICAgICBjID0gYyA/IEooQSwgYykgOiAiIjsKICAgICAgICBtID0gewogICAgICAgICAgIiVjIjogIiVhICViICVkICVIOiVNOiVTICVZIiwKICAgICAgICAgICIlRCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJUYiOiAiJVktJW0tJWQiLAogICAgICAgICAgIiVoIjogIiViIiwKICAgICAgICAgICIlciI6ICIlSTolTTolUyAlcCIsCiAgICAgICAgICAiJVIiOiAiJUg6JU0iLAogICAgICAgICAgIiVUIjogIiVIOiVNOiVTIiwKICAgICAgICAgICIleCI6ICIlbS8lZC8leSIsCiAgICAgICAgICAiJVgiOiAiJUg6JU06JVMiLAogICAgICAgICAgIiVFYyI6ICIlYyIsCiAgICAgICAgICAiJUVDIjogIiVDIiwKICAgICAgICAgICIlRXgiOiAiJW0vJWQvJXkiLAogICAgICAgICAgIiVFWCI6ICIlSDolTTolUyIsCiAgICAgICAgICAiJUV5IjogIiV5IiwKICAgICAgICAgICIlRVkiOiAiJVkiLAogICAgICAgICAgIiVPZCI6ICIlZCIsCiAgICAgICAgICAiJU9lIjogIiVlIiwKICAgICAgICAgICIlT0giOiAiJUgiLAogICAgICAgICAgIiVPSSI6ICIlSSIsCiAgICAgICAgICAiJU9tIjogIiVtIiwKICAgICAgICAgICIlT00iOiAiJU0iLAogICAgICAgICAgIiVPUyI6ICIlUyIsCiAgICAgICAgICAiJU91IjogIiV1IiwKICAgICAgICAgICIlT1UiOiAiJVUiLAogICAgICAgICAgIiVPViI6ICIlViIsCiAgICAgICAgICAiJU93IjogIiV3IiwKICAgICAgICAgICIlT1ciOiAiJVciLAogICAgICAgICAgIiVPeSI6ICIleSIKICAgICAgICB9OwogICAgICAgIGZvciAodmFyIHAgaW4gbSkgYyA9IGMucmVwbGFjZShuZXcgUmVnRXhwKHAsICJnIiksIG1bcF0pOwogICAgICAgIHZhciB1ID0gIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5Ii5zcGxpdCgiICIpLCB2ID0gIkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXIiLnNwbGl0KCIgIik7CiAgICAgICAgbSA9IHsKICAgICAgICAgICIlYSI6IChnKSA9PiB1W2cuR2FdLnN1YnN0cmluZygwLCAzKSwKICAgICAgICAgICIlQSI6IChnKSA9PiB1W2cuR2FdLAogICAgICAgICAgIiViIjogKGcpID0+IHZbZy5TYV0uc3Vic3RyaW5nKDAsIDMpLAogICAgICAgICAgIiVCIjogKGcpID0+IHZbZy5TYV0sCiAgICAgICAgICAiJUMiOiAoZykgPT4gZigoZy5KYSArIDE5MDApIC8gMTAwIHwgMCwgMiksCiAgICAgICAgICAiJWQiOiAoZykgPT4gZihnLlZhLCAyKSwKICAgICAgICAgICIlZSI6IChnKSA9PiBlKGcuVmEsIDIsICIgIiksCiAgICAgICAgICAiJWciOiAoZykgPT4gbihnKS50b1N0cmluZygpLnN1YnN0cmluZygyKSwKICAgICAgICAgICIlRyI6IG4sCiAgICAgICAgICAiJUgiOiAoZykgPT4gZihnLlJhLCAyKSwKICAgICAgICAgICIlSSI6IChnKSA9PiB7CiAgICAgICAgICAgIGcgPSBnLlJhOwogICAgICAgICAgICAwID09IGcgPyBnID0gMTIgOiAxMiA8IGcgJiYgKGcgLT0gMTIpOwogICAgICAgICAgICByZXR1cm4gZihnLCAyKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiJWoiOiAoZykgPT4gewogICAgICAgICAgICBmb3IgKHZhciBxID0gMCwgciA9IDA7IHIgPD0gZy5TYSAtIDE7IHEgKz0gKFZiKGcuSmEgKyAxOTAwKSA/IFdiIDogWGIpW3IrK10pIDsKICAgICAgICAgICAgcmV0dXJuIGYoZy5WYSArIHEsIDMpOwogICAgICAgICAgfSwKICAgICAgICAgICIlbSI6IChnKSA9PiBmKGcuU2EgKyAxLCAyKSwKICAgICAgICAgICIlTSI6IChnKSA9PiBmKGcucmIsIDIpLAogICAgICAgICAgIiVuIjogKCkgPT4gIlxuIiwKICAgICAgICAgICIlcCI6IChnKSA9PiAwIDw9IGcuUmEgJiYgMTIgPiBnLlJhID8gIkFNIiA6ICJQTSIsCiAgICAgICAgICAiJVMiOiAoZykgPT4gZihnLnNiLCAyKSwKICAgICAgICAgICIldCI6ICgpID0+ICIJIiwKICAgICAgICAgICIldSI6IChnKSA9PiBnLkdhIHx8IDcsCiAgICAgICAgICAiJVUiOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIGcuR2EpIC8gNyksIDIpLAogICAgICAgICAgIiVWIjogKGcpID0+IHsKICAgICAgICAgICAgdmFyIHEgPSBNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpOwogICAgICAgICAgICAyID49IChnLkdhICsgMzcxIC0gZy5JYSAtIDIpICUgNyAmJiBxKys7CiAgICAgICAgICAgIGlmIChxKSA1MyA9PSBxICYmIChyID0gKGcuR2EgKyAzNzEgLSBnLklhKSAlIDcsIDQgPT0gciB8fCAzID09IHIgJiYgVmIoZy5KYSkgfHwgKHEgPSAxKSk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHEgPSA1MjsKICAgICAgICAgICAgICB2YXIgciA9IChnLkdhICsgNyAtIGcuSWEgLSAxKSAlIDc7CiAgICAgICAgICAgICAgKDQgPT0gciB8fCA1ID09IHIgJiYgVmIoZy5KYSAlIDQwMCAtIDEpKSAmJiBxKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGYocSwgMik7CiAgICAgICAgICB9LAogICAgICAgICAgIiV3IjogKGcpID0+IGcuR2EsCiAgICAgICAgICAiJVciOiAoZykgPT4gZihNYXRoLmZsb29yKChnLklhICsgNyAtIChnLkdhICsgNikgJSA3KSAvIDcpLCAyKSwKICAgICAgICAgICIleSI6IChnKSA9PiAoZy5KYSArIDE5MDApLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDIpLAogICAgICAgICAgIiVZIjogKGcpID0+IGcuSmEgKyAxOTAwLAogICAgICAgICAgIiV6IjogKGcpID0+IHsKICAgICAgICAgICAgZyA9IGcucWI7CiAgICAgICAgICAgIHZhciBxID0gMCA8PSBnOwogICAgICAgICAgICBnID0gTWF0aC5hYnMoZykgLyA2MDsKICAgICAgICAgICAgcmV0dXJuIChxID8gIisiIDogIi0iKSArIFN0cmluZygiMDAwMCIgKyAoZyAvIDYwICogMTAwICsgZyAlIDYwKSkuc2xpY2UoLTQpOwogICAgICAgICAgfSwKICAgICAgICAgICIlWiI6IChnKSA9PiBnLnRiLAogICAgICAgICAgIiUlIjogKCkgPT4gIiUiCiAgICAgICAgfTsKICAgICAgICBjID0gYy5yZXBsYWNlKC8lJS9nLCAiXDBcMCIpOwogICAgICAgIGZvciAocCBpbiBtKSBjLmluY2x1ZGVzKHApICYmIChjID0gYy5yZXBsYWNlKG5ldyBSZWdFeHAocCwgImciKSwgbVtwXShkKSkpOwogICAgICAgIGMgPSBjLnJlcGxhY2UoL1wwXDAvZywgIiUiKTsKICAgICAgICBwID0gWWIoYyk7CiAgICAgICAgaWYgKHAubGVuZ3RoID4gYikgcmV0dXJuIDA7CiAgICAgICAgeS5zZXQocCwgYSk7CiAgICAgICAgcmV0dXJuIHAubGVuZ3RoIC0gMTsKICAgICAgfTsKICAgICAgSWEgPSBrLkludGVybmFsRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgICAgICBjb25zdHJ1Y3RvcihhKSB7CiAgICAgICAgICBzdXBlcihhKTsKICAgICAgICAgIHRoaXMubmFtZSA9ICJJbnRlcm5hbEVycm9yIjsKICAgICAgICB9CiAgICAgIH07CiAgICAgIGZvciAodmFyICRiID0gQXJyYXkoMjU2KSwgYWMgPSAwOyAyNTYgPiBhYzsgKythYykgJGJbYWNdID0gU3RyaW5nLmZyb21DaGFyQ29kZShhYyk7CiAgICAgIEphID0gJGI7CiAgICAgIFIgPSBrLkJpbmRpbmdFcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3IgewogICAgICAgIGNvbnN0cnVjdG9yKGEpIHsKICAgICAgICAgIHN1cGVyKGEpOwogICAgICAgICAgdGhpcy5uYW1lID0gIkJpbmRpbmdFcnJvciI7CiAgICAgICAgfQogICAgICB9OwogICAgICBPYmplY3QuYXNzaWduKFlhLnByb3RvdHlwZSwgewogICAgICAgIGlzQWxpYXNPZjogZnVuY3Rpb24oYSkgewogICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFlhICYmIGEgaW5zdGFuY2VvZiBZYSkpIHJldHVybiBmYWxzZTsKICAgICAgICAgIHZhciBiID0gdGhpcy5tYS56YS54YSwgYyA9IHRoaXMubWEueWE7CiAgICAgICAgICBhLm1hID0gYS5tYTsKICAgICAgICAgIHZhciBkID0gYS5tYS56YS54YTsKICAgICAgICAgIGZvciAoYSA9IGEubWEueWE7IGIuQ2E7ICkgYyA9IGIuTmEoYyksIGIgPSBiLkNhOwogICAgICAgICAgZm9yICg7IGQuQ2E7ICkgYSA9IGQuTmEoYSksIGQgPSBkLkNhOwogICAgICAgICAgcmV0dXJuIGIgPT09IGQgJiYgYyA9PT0gYTsKICAgICAgICB9LAogICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHRoaXMubWEueWEgfHwgTGEodGhpcyk7CiAgICAgICAgICBpZiAodGhpcy5tYS5NYSkgcmV0dXJuIHRoaXMubWEuY291bnQudmFsdWUgKz0gMSwgdGhpczsKICAgICAgICAgIHZhciBhID0gV2EsIGIgPSBPYmplY3QsIGMgPSBiLmNyZWF0ZSwgZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKSwgZSA9IHRoaXMubWE7CiAgICAgICAgICBhID0gYSgKICAgICAgICAgICAgYy5jYWxsKGIsIGQsIHsKICAgICAgICAgICAgICBtYTogeyB2YWx1ZTogeyBjb3VudDogZS5jb3VudCwgS2E6IGUuS2EsIE1hOiBlLk1hLCB5YTogZS55YSwgemE6IGUuemEsIEFhOiBlLkFhLCBEYTogZS5EYSB9IH0KICAgICAgICAgICAgfSkKICAgICAgICAgICk7CiAgICAgICAgICBhLm1hLmNvdW50LnZhbHVlICs9IDE7CiAgICAgICAgICBhLm1hLkthID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFsiZGVsZXRlIl0oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBPYSh0aGlzKTsKICAgICAgICAgIHZhciBhID0gdGhpcy5tYTsKICAgICAgICAgIC0tYS5jb3VudC52YWx1ZTsKICAgICAgICAgIDAgPT09IGEuY291bnQudmFsdWUgJiYgKGEuQWEgPyBhLkRhLkZhKGEuQWEpIDogYS56YS54YS5GYShhLnlhKSk7CiAgICAgICAgICB0aGlzLm1hLk1hIHx8ICh0aGlzLm1hLkFhID0gdm9pZCAwLCB0aGlzLm1hLnlhID0gdm9pZCAwKTsKICAgICAgICB9LAogICAgICAgIGlzRGVsZXRlZDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gIXRoaXMubWEueWE7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVMYXRlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICB0aGlzLm1hLnlhIHx8IExhKHRoaXMpOwogICAgICAgICAgaWYgKHRoaXMubWEuS2EgJiYgIXRoaXMubWEuTWEpIHRocm93IG5ldyBSKCJPYmplY3QgYWxyZWFkeSBzY2hlZHVsZWQgZm9yIGRlbGV0aW9uIik7CiAgICAgICAgICBSYS5wdXNoKHRoaXMpOwogICAgICAgICAgMSA9PT0gUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgICAgIHRoaXMubWEuS2EgPSB0cnVlOwogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgay5nZXRJbmhlcml0ZWRJbnN0YW5jZUNvdW50ID0gKCkgPT4gT2JqZWN0LmtleXMoVWEpLmxlbmd0aDsKICAgICAgay5nZXRMaXZlSW5oZXJpdGVkSW5zdGFuY2VzID0gKCkgPT4gewogICAgICAgIHZhciBhID0gW10sIGI7CiAgICAgICAgZm9yIChiIGluIFVhKSBVYS5oYXNPd25Qcm9wZXJ0eShiKSAmJiBhLnB1c2goVWFbYl0pOwogICAgICAgIHJldHVybiBhOwogICAgICB9OwogICAgICBrLmZsdXNoUGVuZGluZ0RlbGV0ZXMgPSBTYTsKICAgICAgay5zZXREZWxheUZ1bmN0aW9uID0gKGEpID0+IHsKICAgICAgICBUYSA9IGE7CiAgICAgICAgUmEubGVuZ3RoICYmIFRhICYmIFRhKFNhKTsKICAgICAgfTsKICAgICAgT2JqZWN0LmFzc2lnbihqYi5wcm90b3R5cGUsIHsKICAgICAgICBlYihhKSB7CiAgICAgICAgICB0aGlzLlphICYmIChhID0gdGhpcy5aYShhKSk7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9LAogICAgICAgIFhhKGEpIHsKICAgICAgICAgIHRoaXMuRmE/LihhKTsKICAgICAgICB9LAogICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBLLAogICAgICAgIGZyb21XaXJlVHlwZTogZnVuY3Rpb24oYSkgewogICAgICAgICAgZnVuY3Rpb24gYigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuUWEgPyBYYSh0aGlzLnhhLkxhLCB7IHphOiB0aGlzLmpiLCB5YTogYywgRGE6IHRoaXMsIEFhOiBhIH0pIDogWGEodGhpcy54YS5MYSwgeyB6YTogdGhpcywgeWE6IGEgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgYyA9IHRoaXMuZWIoYSk7CiAgICAgICAgICBpZiAoIWMpIHJldHVybiB0aGlzLlhhKGEpLCBudWxsOwogICAgICAgICAgdmFyIGQgPSBWYSh0aGlzLnhhLCBjKTsKICAgICAgICAgIGlmICh2b2lkIDAgIT09IGQpIHsKICAgICAgICAgICAgaWYgKDAgPT09IGQubWEuY291bnQudmFsdWUpIHJldHVybiBkLm1hLnlhID0gYywgZC5tYS5BYSA9IGEsIGQuY2xvbmUoKTsKICAgICAgICAgICAgZCA9IGQuY2xvbmUoKTsKICAgICAgICAgICAgdGhpcy5YYShhKTsKICAgICAgICAgICAgcmV0dXJuIGQ7CiAgICAgICAgICB9CiAgICAgICAgICBkID0gdGhpcy54YS5jYihjKTsKICAgICAgICAgIGQgPSBRYVtkXTsKICAgICAgICAgIGlmICghZCkgcmV0dXJuIGIuY2FsbCh0aGlzKTsKICAgICAgICAgIGQgPSB0aGlzLlBhID8gZC4kYSA6IGQucG9pbnRlclR5cGU7CiAgICAgICAgICB2YXIgZSA9IFBhKGMsIHRoaXMueGEsIGQueGEpOwogICAgICAgICAgcmV0dXJuIG51bGwgPT09IGUgPyBiLmNhbGwodGhpcykgOiB0aGlzLlFhID8gWGEoZC54YS5MYSwgeyB6YTogZCwgeWE6IGUsIERhOiB0aGlzLCBBYTogYSB9KSA6IFhhKGQueGEuTGEsIHsgemE6IGQsIHlhOiBlIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIG5iID0gay5VbmJvdW5kVHlwZUVycm9yID0gKChhLCBiKSA9PiB7CiAgICAgICAgdmFyIGMgPSBaYShiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICB0aGlzLm5hbWUgPSBiOwogICAgICAgICAgdGhpcy5tZXNzYWdlID0gZDsKICAgICAgICAgIGQgPSBFcnJvcihkKS5zdGFjazsKICAgICAgICAgIHZvaWQgMCAhPT0gZCAmJiAodGhpcy5zdGFjayA9IHRoaXMudG9TdHJpbmcoKSArICJcbiIgKyBkLnJlcGxhY2UoL15FcnJvcig6W15cbl0qKT9cbi8sICIiKSk7CiAgICAgICAgfSk7CiAgICAgICAgYy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGEucHJvdG90eXBlKTsKICAgICAgICBjLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGM7CiAgICAgICAgYy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRoaXMubWVzc2FnZSA/IHRoaXMubmFtZSA6IGAke3RoaXMubmFtZX06ICR7dGhpcy5tZXNzYWdlfWA7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gYzsKICAgICAgfSkoRXJyb3IsICJVbmJvdW5kVHlwZUVycm9yIik7CiAgICAgIFYucHVzaCgwLCAxLCB2b2lkIDAsIDEsIG51bGwsIDEsIHRydWUsIDEsIGZhbHNlLCAxKTsKICAgICAgay5jb3VudF9lbXZhbF9oYW5kbGVzID0gKCkgPT4gVi5sZW5ndGggLyAyIC0gNSAtIHZiLmxlbmd0aDsKICAgICAgdmFyIG1jID0gewogICAgICAgIGM6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICByYSgKICAgICAgICAgICAgYEFzc2VydGlvbiBmYWlsZWQ6ICR7YSA/IEooQSwgYSkgOiAiIn0sIGF0OiBgICsgW2IgPyBiID8gSihBLCBiKSA6ICIiIDogInVua25vd24gZmlsZW5hbWUiLCBjLCBkID8gZCA/IEooQSwgZCkgOiAiIiA6ICJ1bmtub3duIGZ1bmN0aW9uIl0KICAgICAgICAgICk7CiAgICAgICAgfSwKICAgICAgICBtOiAoYSwgYiwgYykgPT4gewogICAgICAgICAgdmFyIGQgPSBuZXcgQWEoYSk7CiAgICAgICAgICBGW2QueWEgKyAxNiA+PiAyXSA9IDA7CiAgICAgICAgICBGW2QueWEgKyA0ID4+IDJdID0gYjsKICAgICAgICAgIEZbZC55YSArIDggPj4gMl0gPSBjOwogICAgICAgICAgQmEgPSBhOwogICAgICAgICAgQ2ErKzsKICAgICAgICAgIHRocm93IEJhOwogICAgICAgIH0sCiAgICAgICAgQjogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFA6ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIE06ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIFI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICBOOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBBOiBmdW5jdGlvbigpIHsKICAgICAgICB9LAogICAgICAgIE86ICgpID0+IHsKICAgICAgICB9LAogICAgICAgIHY6IChhKSA9PiB7CiAgICAgICAgICB2YXIgYiA9IEZhW2FdOwogICAgICAgICAgZGVsZXRlIEZhW2FdOwogICAgICAgICAgdmFyIGMgPSBiLlVhLCBkID0gYi5GYSwgZSA9IGIuWWEsIGYgPSBlLm1hcCgobCkgPT4gbC5oYikuY29uY2F0KGUubWFwKChsKSA9PiBsLm5iKSk7CiAgICAgICAgICBQKFthXSwgZiwgKGwpID0+IHsKICAgICAgICAgICAgdmFyIGggPSB7fTsKICAgICAgICAgICAgZS5mb3JFYWNoKChuLCBtKSA9PiB7CiAgICAgICAgICAgICAgdmFyIHAgPSBsW21dLCB1ID0gbi5mYiwgdiA9IG4uZ2IsIGcgPSBsW20gKyBlLmxlbmd0aF0sIHEgPSBuLm1iLCByID0gbi5vYjsKICAgICAgICAgICAgICBoW24uYmJdID0gewogICAgICAgICAgICAgICAgcmVhZDogKHopID0+IHAuZnJvbVdpcmVUeXBlKHUodiwgeikpLAogICAgICAgICAgICAgICAgd3JpdGU6ICh6LCBOKSA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBEID0gW107CiAgICAgICAgICAgICAgICAgIHEociwgeiwgZy50b1dpcmVUeXBlKEQsIE4pKTsKICAgICAgICAgICAgICAgICAgR2EoRCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbmFtZTogYi5uYW1lLAogICAgICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAobikgPT4gewogICAgICAgICAgICAgICAgICB2YXIgbSA9IHt9LCBwOwogICAgICAgICAgICAgICAgICBmb3IgKHAgaW4gaCkgbVtwXSA9IGhbcF0ucmVhZChuKTsKICAgICAgICAgICAgICAgICAgZChuKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG07CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdG9XaXJlVHlwZTogKG4sIG0pID0+IHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBoKSBpZiAoIShwIGluIG0pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBNaXNzaW5nIGZpZWxkOiAiJHtwfSJgKTsKICAgICAgICAgICAgICAgICAgdmFyIHUgPSBjKCk7CiAgICAgICAgICAgICAgICAgIGZvciAocCBpbiBoKSBoW3BdLndyaXRlKHUsIG1bcF0pOwogICAgICAgICAgICAgICAgICBudWxsICE9PSBuICYmIG4ucHVzaChkLCB1KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHU7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgYXJnUGFja0FkdmFuY2U6IDgsCiAgICAgICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgICAgIEVhOiBkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICBdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBJOiAoKSA9PiB7CiAgICAgICAgfSwKICAgICAgICBZOiAoYSwgYiwgYywgZCkgPT4gewogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYiwKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICEhZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogZnVuY3Rpb24oZSwgZikgewogICAgICAgICAgICAgIHJldHVybiBmID8gYyA6IGQ7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21XaXJlVHlwZShBW2VdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgRWE6IG51bGwKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgcjogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUsIHYpID0+IHsKICAgICAgICAgIHAgPSBRKHApOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoICYmIChoID0gVChsLCBoKSk7CiAgICAgICAgICBtICYmIChtID0gVChuLCBtKSk7CiAgICAgICAgICB2ID0gVCh1LCB2KTsKICAgICAgICAgIHZhciBnID0gYmIocCk7CiAgICAgICAgICBhYihnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtwfSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIFtkXSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIFAoW2EsIGIsIGNdLCBkID8gW2RdIDogW10sIChxKSA9PiB7CiAgICAgICAgICAgIHEgPSBxWzBdOwogICAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICAgIHZhciByID0gcS54YTsKICAgICAgICAgICAgICB2YXIgeiA9IHIuTGE7CiAgICAgICAgICAgIH0gZWxzZSB6ID0gWWEucHJvdG90eXBlOwogICAgICAgICAgICBxID0gWmEocCwgZnVuY3Rpb24oLi4uTmEpIHsKICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpICE9PSBOKSB0aHJvdyBuZXcgUigiVXNlICduZXcnIHRvIGNvbnN0cnVjdCAiICsgcCk7CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gRC5IYSkgdGhyb3cgbmV3IFIocCArICIgaGFzIG5vIGFjY2Vzc2libGUgY29uc3RydWN0b3IiKTsKICAgICAgICAgICAgICB2YXIgeGIgPSBELkhhW05hLmxlbmd0aF07CiAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0geGIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgICAgYFRyaWVkIHRvIGludm9rZSBjdG9yIG9mICR7cH0gd2l0aCBpbnZhbGlkIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke05hLmxlbmd0aH0pIC0gZXhwZWN0ZWQgKCR7T2JqZWN0LmtleXMoRC5IYSkudG9TdHJpbmcoKX0pIHBhcmFtZXRlcnMgaW5zdGVhZCFgCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIHJldHVybiB4Yi5hcHBseSh0aGlzLCBOYSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgTiA9IE9iamVjdC5jcmVhdGUoeiwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogcSB9IH0pOwogICAgICAgICAgICBxLnByb3RvdHlwZSA9IE47CiAgICAgICAgICAgIHZhciBEID0gbmV3IGNiKHAsIHEsIE4sIHYsIHIsIGYsIGgsIG0pOwogICAgICAgICAgICBpZiAoRC5DYSkgewogICAgICAgICAgICAgIHZhciBpYTsKICAgICAgICAgICAgICAoaWEgPSBELkNhKS5XYSA/PyAoaWEuV2EgPSBbXSk7CiAgICAgICAgICAgICAgRC5DYS5XYS5wdXNoKEQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHIgPSBuZXcgamIocCwgRCwgdHJ1ZSwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgaWEgPSBuZXcgamIocCArICIqIiwgRCwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CiAgICAgICAgICAgIHogPSBuZXcgamIocCArICIgY29uc3QqIiwgRCwgZmFsc2UsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgUWFbYV0gPSB7IHBvaW50ZXJUeXBlOiBpYSwgJGE6IHogfTsKICAgICAgICAgICAga2IoZywgcSk7CiAgICAgICAgICAgIHJldHVybiBbciwgaWEsIHpdOwogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBxOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGUgPSBUKGQsIGUpOwogICAgICAgICAgUChbXSwgW2FdLCAoaCkgPT4gewogICAgICAgICAgICBoID0gaFswXTsKICAgICAgICAgICAgdmFyIG4gPSBgY29uc3RydWN0b3IgJHtoLm5hbWV9YDsKICAgICAgICAgICAgdm9pZCAwID09PSBoLnhhLkhhICYmIChoLnhhLkhhID0gW10pOwogICAgICAgICAgICBpZiAodm9pZCAwICE9PSBoLnhhLkhhW2IgLSAxXSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUigKICAgICAgICAgICAgICAgIGBDYW5ub3QgcmVnaXN0ZXIgbXVsdGlwbGUgY29uc3RydWN0b3JzIHdpdGggaWRlbnRpY2FsIG51bWJlciBvZiBwYXJhbWV0ZXJzICgke2IgLSAxfSkgZm9yIGNsYXNzICcke2gubmFtZX0nISBPdmVybG9hZCByZXNvbHV0aW9uIGlzIGN1cnJlbnRseSBvbmx5IHBlcmZvcm1lZCB1c2luZyB0aGUgcGFyYW1ldGVyIGNvdW50LCBub3QgYWN0dWFsIHR5cGUgaW5mbyFgCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSAoKSA9PiB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjb25zdHJ1Y3QgJHtoLm5hbWV9IGR1ZSB0byB1bmJvdW5kIHR5cGVzYCwgbCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIFAoW10sIGwsIChtKSA9PiB7CiAgICAgICAgICAgICAgbS5zcGxpY2UoMSwgMCwgbnVsbCk7CiAgICAgICAgICAgICAgaC54YS5IYVtiIC0gMV0gPSB0YihuLCBtLCBudWxsLCBlLCBmKTsKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGY6IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoKSA9PiB7CiAgICAgICAgICB2YXIgbiA9IHJiKGMsIGQpOwogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBiID0gdWIoYik7CiAgICAgICAgICBmID0gVChlLCBmKTsKICAgICAgICAgIFAoW10sIFthXSwgKG0pID0+IHsKICAgICAgICAgICAgZnVuY3Rpb24gcCgpIHsKICAgICAgICAgICAgICBxYihgQ2Fubm90IGNhbGwgJHt1fSBkdWUgdG8gdW5ib3VuZCB0eXBlc2AsIG4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG0gPSBtWzBdOwogICAgICAgICAgICB2YXIgdSA9IGAke20ubmFtZX0uJHtifWA7CiAgICAgICAgICAgIGIuc3RhcnRzV2l0aCgiQEAiKSAmJiAoYiA9IFN5bWJvbFtiLnN1YnN0cmluZygyKV0pOwogICAgICAgICAgICBoICYmIG0ueGEua2IucHVzaChiKTsKICAgICAgICAgICAgdmFyIHYgPSBtLnhhLkxhLCBnID0gdltiXTsKICAgICAgICAgICAgdm9pZCAwID09PSBnIHx8IHZvaWQgMCA9PT0gZy5CYSAmJiBnLmNsYXNzTmFtZSAhPT0gbS5uYW1lICYmIGcuT2EgPT09IGMgLSAyID8gKHAuT2EgPSBjIC0gMiwgcC5jbGFzc05hbWUgPSBtLm5hbWUsIHZbYl0gPSBwKSA6ICgkYSh2LCBiLCB1KSwgdltiXS5CYVtjIC0gMl0gPSBwKTsKICAgICAgICAgICAgUChbXSwgbiwgKHEpID0+IHsKICAgICAgICAgICAgICBxID0gdGIodSwgcSwgbSwgZiwgbCk7CiAgICAgICAgICAgICAgdm9pZCAwID09PSB2W2JdLkJhID8gKHEuT2EgPSBjIC0gMiwgdltiXSA9IHEpIDogdltiXS5CYVtjIC0gMl0gPSBxOwogICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgWDogKGEpID0+IE8oYSwgemIpLAogICAgICAgIHg6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgICAgfQogICAgICAgICAgYiA9IFEoYik7CiAgICAgICAgICBlLnZhbHVlcyA9IHt9OwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBlLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGYpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci52YWx1ZXNbZl07CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChmLCBsKSA9PiBsLnZhbHVlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEFiKGIsIGMsIGQpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgICBhYihiLCBlKTsKICAgICAgICB9LAogICAgICAgIGs6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IEJiKGEsICJlbnVtIik7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIGEgPSBkLmNvbnN0cnVjdG9yOwogICAgICAgICAgZCA9IE9iamVjdC5jcmVhdGUoZC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHsKICAgICAgICAgICAgdmFsdWU6IHsgdmFsdWU6IGMgfSwKICAgICAgICAgICAgY29uc3RydWN0b3I6IHsgdmFsdWU6IFphKGAke2QubmFtZX1fJHtifWAsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB9KSB9CiAgICAgICAgICB9KTsKICAgICAgICAgIGEudmFsdWVzW2NdID0gZDsKICAgICAgICAgIGFbYl0gPSBkOwogICAgICAgIH0sCiAgICAgICAgQzogKGEsIGIsIGMpID0+IHsKICAgICAgICAgIGIgPSBRKGIpOwogICAgICAgICAgTyhhLCB7CiAgICAgICAgICAgIG5hbWU6IGIsCiAgICAgICAgICAgIGZyb21XaXJlVHlwZTogKGQpID0+IGQsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IChkLCBlKSA9PiBlLAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IENiKGIsIGMpLAogICAgICAgICAgICBFYTogbnVsbAogICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBFOiAoYSwgYiwgYywgZCwgZSwgZikgPT4gewogICAgICAgICAgdmFyIGwgPSByYihiLCBjKTsKICAgICAgICAgIGEgPSBRKGEpOwogICAgICAgICAgYSA9IHViKGEpOwogICAgICAgICAgZSA9IFQoZCwgZSk7CiAgICAgICAgICBhYigKICAgICAgICAgICAgYSwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgcWIoYENhbm5vdCBjYWxsICR7YX0gZHVlIHRvIHVuYm91bmQgdHlwZXNgLCBsKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYiAtIDEKICAgICAgICAgICk7CiAgICAgICAgICBQKFtdLCBsLCAoaCkgPT4gewogICAgICAgICAgICBrYihhLCB0YihhLCBbaFswXSwgbnVsbF0uY29uY2F0KGguc2xpY2UoMSkpLCBudWxsLCBlLCBmKSwgYiAtIDEpOwogICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGw6IChhLCBiLCBjLCBkLCBlKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIC0xID09PSBlICYmIChlID0gNDI5NDk2NzI5NSk7CiAgICAgICAgICBlID0gKGgpID0+IGg7CiAgICAgICAgICBpZiAoMCA9PT0gZCkgewogICAgICAgICAgICB2YXIgZiA9IDMyIC0gOCAqIGM7CiAgICAgICAgICAgIGUgPSAoaCkgPT4gaCA8PCBmID4+PiBmOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGwgPSBiLmluY2x1ZGVzKCJ1bnNpZ25lZCIpID8gZnVuY3Rpb24oaCwgbikgewogICAgICAgICAgICByZXR1cm4gbiA+Pj4gMDsKICAgICAgICAgIH0gOiBmdW5jdGlvbihoLCBuKSB7CiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgICAgfTsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGUsCiAgICAgICAgICAgIHRvV2lyZVR5cGU6IGwsCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogRGIoYiwgYywgMCAhPT0gZCksCiAgICAgICAgICAgIEVhOiBudWxsCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGc6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBmdW5jdGlvbiBkKGYpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBlKHkuYnVmZmVyLCBGW2YgKyA0ID4+IDJdLCBGW2YgPj4gMl0pOwogICAgICAgICAgfQogICAgICAgICAgdmFyIGUgPSBbSW50OEFycmF5LCBVaW50OEFycmF5LCBJbnQxNkFycmF5LCBVaW50MTZBcnJheSwgSW50MzJBcnJheSwgVWludDMyQXJyYXksIEZsb2F0MzJBcnJheSwgRmxvYXQ2NEFycmF5XVtiXTsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgTyhhLCB7IG5hbWU6IGMsIGZyb21XaXJlVHlwZTogZCwgYXJnUGFja0FkdmFuY2U6IDgsIHJlYWRWYWx1ZUZyb21Qb2ludGVyOiBkIH0sIHsgaWI6IHRydWUgfSk7CiAgICAgICAgfSwKICAgICAgICB3OiAoYSkgPT4gewogICAgICAgICAgTyhhLCB6Yik7CiAgICAgICAgfSwKICAgICAgICBjYTogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0sIHAsIHUpID0+IHsKICAgICAgICAgIGMgPSBRKGMpOwogICAgICAgICAgZiA9IFQoZSwgZik7CiAgICAgICAgICBoID0gVChsLCBoKTsKICAgICAgICAgIG0gPSBUKG4sIG0pOwogICAgICAgICAgdSA9IFQocCwgdSk7CiAgICAgICAgICBQKFthXSwgW2JdLCAodikgPT4gewogICAgICAgICAgICB2ID0gdlswXTsKICAgICAgICAgICAgcmV0dXJuIFtuZXcgamIoYywgdi54YSwgZmFsc2UsIGZhbHNlLCB0cnVlLCB2LCBkLCBmLCBoLCBtLCB1KV07CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIEQ6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIHZhciBjID0gInN0ZDo6c3RyaW5nIiA9PT0gYjsKICAgICAgICAgIE8oYSwgewogICAgICAgICAgICBuYW1lOiBiLAogICAgICAgICAgICBmcm9tV2lyZVR5cGU6IGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICB2YXIgZSA9IEZbZCA+PiAyXSwgZiA9IGQgKyA0OwogICAgICAgICAgICAgIGlmIChjKQogICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IGYsIGggPSAwOyBoIDw9IGU7ICsraCkgewogICAgICAgICAgICAgICAgICB2YXIgbiA9IGYgKyBoOwogICAgICAgICAgICAgICAgICBpZiAoaCA9PSBlIHx8IDAgPT0gQVtuXSkgewogICAgICAgICAgICAgICAgICAgIGwgPSBsID8gSihBLCBsLCBuIC0gbCkgOiAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBtKSB2YXIgbSA9IGw7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gbDsKICAgICAgICAgICAgICAgICAgICBsID0gbiArIDE7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG0gPSBBcnJheShlKTsKICAgICAgICAgICAgICAgIGZvciAoaCA9IDA7IGggPCBlOyArK2gpIG1baF0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKEFbZiArIGhdKTsKICAgICAgICAgICAgICAgIG0gPSBtLmpvaW4oIiIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICAgIHJldHVybiBtOwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b1dpcmVUeXBlOiBmdW5jdGlvbihkLCBlKSB7CiAgICAgICAgICAgICAgZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyICYmIChlID0gbmV3IFVpbnQ4QXJyYXkoZSkpOwogICAgICAgICAgICAgIHZhciBmID0gInN0cmluZyIgPT0gdHlwZW9mIGU7CiAgICAgICAgICAgICAgaWYgKCEoZiB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBlIGluc3RhbmNlb2YgVWludDhDbGFtcGVkQXJyYXkgfHwgZSBpbnN0YW5jZW9mIEludDhBcnJheSkpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUigiQ2Fubm90IHBhc3Mgbm9uLXN0cmluZyB0byBzdGQ6OnN0cmluZyIpOwogICAgICAgICAgICAgIHZhciBsID0gYyAmJiBmID8gRGEoZSkgOiBlLmxlbmd0aDsKICAgICAgICAgICAgICB2YXIgaCA9IGJjKDQgKyBsICsgMSksIG4gPSBoICsgNDsKICAgICAgICAgICAgICBGW2ggPj4gMl0gPSBsOwogICAgICAgICAgICAgIGlmIChjICYmIGYpIEVhKGUsIEEsIG4sIGwgKyAxKTsKICAgICAgICAgICAgICBlbHNlIGlmIChmKQogICAgICAgICAgICAgICAgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgewogICAgICAgICAgICAgICAgICB2YXIgbSA9IGUuY2hhckNvZGVBdChmKTsKICAgICAgICAgICAgICAgICAgaWYgKDI1NSA8IG0pIHRocm93IFUobiksIG5ldyBSKCJTdHJpbmcgaGFzIFVURi0xNiBjb2RlIHVuaXRzIHRoYXQgZG8gbm90IGZpdCBpbiA4IGJpdHMiKTsKICAgICAgICAgICAgICAgICAgQVtuICsgZl0gPSBtOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgZm9yIChmID0gMDsgZiA8IGw7ICsrZikgQVtuICsgZl0gPSBlW2ZdOwogICAgICAgICAgICAgIG51bGwgIT09IGQgJiYgZC5wdXNoKFUsIGgpOwogICAgICAgICAgICAgIHJldHVybiBoOwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcmdQYWNrQWR2YW5jZTogOCwKICAgICAgICAgICAgcmVhZFZhbHVlRnJvbVBvaW50ZXI6IEssCiAgICAgICAgICAgIEVhKGQpIHsKICAgICAgICAgICAgICBVKGQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHU6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICBjID0gUShjKTsKICAgICAgICAgIGlmICgyID09PSBiKSB7CiAgICAgICAgICAgIHZhciBkID0gRmI7CiAgICAgICAgICAgIHZhciBlID0gR2I7CiAgICAgICAgICAgIHZhciBmID0gSGI7CiAgICAgICAgICAgIHZhciBsID0gKGgpID0+IENbaCA+PiAxXTsKICAgICAgICAgIH0gZWxzZSA0ID09PSBiICYmIChkID0gSWIsIGUgPSBKYiwgZiA9IEtiLCBsID0gKGgpID0+IEZbaCA+PiAyXSk7CiAgICAgICAgICBPKGEsIHsKICAgICAgICAgICAgbmFtZTogYywKICAgICAgICAgICAgZnJvbVdpcmVUeXBlOiAoaCkgPT4gewogICAgICAgICAgICAgIGZvciAodmFyIG4gPSBGW2ggPj4gMl0sIG0sIHAgPSBoICsgNCwgdSA9IDA7IHUgPD0gbjsgKyt1KSB7CiAgICAgICAgICAgICAgICB2YXIgdiA9IGggKyA0ICsgdSAqIGI7CiAgICAgICAgICAgICAgICBpZiAodSA9PSBuIHx8IDAgPT0gbCh2KSkKICAgICAgICAgICAgICAgICAgcCA9IGQocCwgdiAtIHApLCB2b2lkIDAgPT09IG0gPyBtID0gcCA6IChtICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIG0gKz0gcCksIHAgPSB2ICsgYjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgVShoKTsKICAgICAgICAgICAgICByZXR1cm4gbTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9XaXJlVHlwZTogKGgsIG4pID0+IHsKICAgICAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIG4pIHRocm93IG5ldyBSKGBDYW5ub3QgcGFzcyBub24tc3RyaW5nIHRvIEMrKyBzdHJpbmcgdHlwZSAke2N9YCk7CiAgICAgICAgICAgICAgdmFyIG0gPSBmKG4pLCBwID0gYmMoNCArIG0gKyBiKTsKICAgICAgICAgICAgICBGW3AgPj4gMl0gPSBtIC8gYjsKICAgICAgICAgICAgICBlKG4sIHAgKyA0LCBtICsgYik7CiAgICAgICAgICAgICAgbnVsbCAhPT0gaCAmJiBoLnB1c2goVSwgcCk7CiAgICAgICAgICAgICAgcmV0dXJuIHA7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ1BhY2tBZHZhbmNlOiA4LAogICAgICAgICAgICByZWFkVmFsdWVGcm9tUG9pbnRlcjogSywKICAgICAgICAgICAgRWEoaCkgewogICAgICAgICAgICAgIFUoaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgczogKGEsIGIsIGMsIGQsIGUsIGYpID0+IHsKICAgICAgICAgIEZhW2FdID0geyBuYW1lOiBRKGIpLCBVYTogVChjLCBkKSwgRmE6IFQoZSwgZiksIFlhOiBbXSB9OwogICAgICAgIH0sCiAgICAgICAgajogKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgIEZhW2FdLllhLnB1c2goeyBiYjogUShiKSwgaGI6IGMsIGZiOiBUKGQsIGUpLCBnYjogZiwgbmI6IGwsIG1iOiBUKGgsIG4pLCBvYjogbSB9KTsKICAgICAgICB9LAogICAgICAgIFo6IChhLCBiKSA9PiB7CiAgICAgICAgICBiID0gUShiKTsKICAgICAgICAgIE8oYSwgeyB1YjogdHJ1ZSwgbmFtZTogYiwgYXJnUGFja0FkdmFuY2U6IDAsIGZyb21XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSwgdG9XaXJlVHlwZTogKCkgPT4gewogICAgICAgICAgfSB9KTsKICAgICAgICB9LAogICAgICAgIEo6ICgpID0+IHsKICAgICAgICAgIHRocm93IEluZmluaXR5OwogICAgICAgIH0sCiAgICAgICAgYWE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBhID0gTGJbYV07CiAgICAgICAgICBiID0geWIoYik7CiAgICAgICAgICByZXR1cm4gYShudWxsLCBiLCBjLCBkKTsKICAgICAgICB9LAogICAgICAgIEY6IHdiLAogICAgICAgICQ6IChhLCBiLCBjKSA9PiB7CiAgICAgICAgICB2YXIgZCA9IE5iKGEsIGIpLCBlID0gZC5zaGlmdCgpOwogICAgICAgICAgYS0tOwogICAgICAgICAgdmFyIGYgPSBBcnJheShhKTsKICAgICAgICAgIGIgPSBgbWV0aG9kQ2FsbGVyPCgke2QubWFwKChsKSA9PiBsLm5hbWUpLmpvaW4oIiwgIil9KSA9PiAke2UubmFtZX0+YDsKICAgICAgICAgIHJldHVybiBNYigKICAgICAgICAgICAgWmEoYiwgKGwsIGgsIG4sIG0pID0+IHsKICAgICAgICAgICAgICBmb3IgKHZhciBwID0gMCwgdSA9IDA7IHUgPCBhOyArK3UpIGZbdV0gPSBkW3VdLnJlYWRWYWx1ZUZyb21Qb2ludGVyKG0gKyBwKSwgcCArPSBkW3VdLmFyZ1BhY2tBZHZhbmNlOwogICAgICAgICAgICAgIGggPSAxID09PSBjID8gT2IoaCwgZikgOiBoLmFwcGx5KGwsIGYpOwogICAgICAgICAgICAgIGwgPSBbXTsKICAgICAgICAgICAgICBoID0gZS50b1dpcmVUeXBlKGwsIGgpOwogICAgICAgICAgICAgIGwubGVuZ3RoICYmIChGW24gPj4gMl0gPSBoYihsKSk7CiAgICAgICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICAgYmE6IChhKSA9PiB7CiAgICAgICAgICA5IDwgYSAmJiAoVlthICsgMV0gKz0gMSk7CiAgICAgICAgfSwKICAgICAgICBfOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSB5YihhKTsKICAgICAgICAgIEdhKGIpOwogICAgICAgICAgd2IoYSk7CiAgICAgICAgfSwKICAgICAgICBvOiAoYSwgYikgPT4gewogICAgICAgICAgYSA9IEJiKGEsICJfZW12YWxfdGFrZV92YWx1ZSIpOwogICAgICAgICAgYSA9IGEucmVhZFZhbHVlRnJvbVBvaW50ZXIoYik7CiAgICAgICAgICByZXR1cm4gaGIoYSk7CiAgICAgICAgfSwKICAgICAgICBXOiAoKSA9PiB7CiAgICAgICAgICByYSgiIik7CiAgICAgICAgfSwKICAgICAgICBWOiAoKSA9PiBwZXJmb3JtYW5jZS5ub3coKSwKICAgICAgICBMOiAoYSkgPT4gewogICAgICAgICAgdmFyIGIgPSBBLmxlbmd0aDsKICAgICAgICAgIGEgPj4+PSAwOwogICAgICAgICAgaWYgKDIxNDc0ODM2NDggPCBhKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICBmb3IgKHZhciBjID0gMTsgNCA+PSBjOyBjICo9IDIpIHsKICAgICAgICAgICAgdmFyIGQgPSBiICogKDEgKyAwLjIgLyBjKTsKICAgICAgICAgICAgZCA9IE1hdGgubWluKGQsIGEgKyAxMDA2NjMyOTYpOwogICAgICAgICAgICB2YXIgZSA9IE1hdGg7CiAgICAgICAgICAgIGQgPSBNYXRoLm1heChhLCBkKTsKICAgICAgICAgICAgYTogewogICAgICAgICAgICAgIGUgPSAoZS5taW4uY2FsbChlLCAyMTQ3NDgzNjQ4LCBkICsgKDY1NTM2IC0gZCAlIDY1NTM2KSAlIDY1NTM2KSAtIGZhLmJ1ZmZlci5ieXRlTGVuZ3RoICsgNjU1MzUpIC8gNjU1MzY7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZhLmdyb3coZSk7CiAgICAgICAgICAgICAgICBsYSgpOwogICAgICAgICAgICAgICAgdmFyIGYgPSAxOwogICAgICAgICAgICAgICAgYnJlYWsgYTsKICAgICAgICAgICAgICB9IGNhdGNoIChsKSB7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGYgPSB2b2lkIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGYpIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0sCiAgICAgICAgUzogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gMDsKICAgICAgICAgIFJiKCkuZm9yRWFjaCgoZCwgZSkgPT4gewogICAgICAgICAgICB2YXIgZiA9IGIgKyBjOwogICAgICAgICAgICBlID0gRlthICsgNCAqIGUgPj4gMl0gPSBmOwogICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZC5sZW5ndGg7ICsrZikgeVtlKytdID0gZC5jaGFyQ29kZUF0KGYpOwogICAgICAgICAgICB5W2VdID0gMDsKICAgICAgICAgICAgYyArPSBkLmxlbmd0aCArIDE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0sCiAgICAgICAgVDogKGEsIGIpID0+IHsKICAgICAgICAgIHZhciBjID0gUmIoKTsKICAgICAgICAgIEZbYSA+PiAyXSA9IGMubGVuZ3RoOwogICAgICAgICAgdmFyIGQgPSAwOwogICAgICAgICAgYy5mb3JFYWNoKChlKSA9PiBkICs9IGUubGVuZ3RoICsgMSk7CiAgICAgICAgICBGW2IgPj4gMl0gPSBkOwogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICB0OiAoKSA9PiA1MiwKICAgICAgICB6OiAoKSA9PiA1MiwKICAgICAgICBIOiBmdW5jdGlvbigpIHsKICAgICAgICAgIHJldHVybiA3MDsKICAgICAgICB9LAogICAgICAgIFE6IChhLCBiLCBjLCBkKSA9PiB7CiAgICAgICAgICBmb3IgKHZhciBlID0gMCwgZiA9IDA7IGYgPCBjOyBmKyspIHsKICAgICAgICAgICAgdmFyIGwgPSBGW2IgPj4gMl0sIGggPSBGW2IgKyA0ID4+IDJdOwogICAgICAgICAgICBiICs9IDg7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgaDsgbisrKSB7CiAgICAgICAgICAgICAgdmFyIG0gPSBBW2wgKyBuXSwgcCA9IFNiW2FdOwogICAgICAgICAgICAgIDAgPT09IG0gfHwgMTAgPT09IG0gPyAoKDEgPT09IGEgPyBlYSA6IHcpKEoocCwgMCkpLCBwLmxlbmd0aCA9IDApIDogcC5wdXNoKG0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUgKz0gaDsKICAgICAgICAgIH0KICAgICAgICAgIEZbZCA+PiAyXSA9IGU7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIFU6IChhLCBiKSA9PiB7CiAgICAgICAgICBVYihBLnN1YmFycmF5KGEsIGEgKyBiKSk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9LAogICAgICAgIGk6IGNjLAogICAgICAgIGQ6IGRjLAogICAgICAgIGU6IGVjLAogICAgICAgIHA6IGZjLAogICAgICAgIHk6IGdjLAogICAgICAgIGI6IGhjLAogICAgICAgIGE6IGljLAogICAgICAgIGg6IGpjLAogICAgICAgIG46IGtjLAogICAgICAgIEc6IGxjLAogICAgICAgIEs6IChhLCBiLCBjLCBkKSA9PiBaYihhLCBiLCBjLCBkKQogICAgICB9LCBXID0gZnVuY3Rpb24oKSB7CiAgICAgICAgZnVuY3Rpb24gYShjKSB7CiAgICAgICAgICBXID0gYy5leHBvcnRzOwogICAgICAgICAgZmEgPSBXLmRhOwogICAgICAgICAgbGEoKTsKICAgICAgICAgIFMgPSBXLmhhOwogICAgICAgICAgbmEudW5zaGlmdChXLmVhKTsKICAgICAgICAgIEctLTsKICAgICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgICAgMCA9PSBHICYmIChudWxsICE9PSBxYSAmJiAoY2xlYXJJbnRlcnZhbChxYSksIHFhID0gbnVsbCksIEggJiYgKGMgPSBILCBIID0gbnVsbCwgYygpKSk7CiAgICAgICAgICByZXR1cm4gVzsKICAgICAgICB9CiAgICAgICAgdmFyIGIgPSB7IGE6IG1jIH07CiAgICAgICAgRysrOwogICAgICAgIGsubW9uaXRvclJ1bkRlcGVuZGVuY2llcz8uKEcpOwogICAgICAgIGlmIChrLmluc3RhbnRpYXRlV2FzbSkKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBrLmluc3RhbnRpYXRlV2FzbShiLCBhKTsKICAgICAgICAgIH0gY2F0Y2ggKGMpIHsKICAgICAgICAgICAgdyhgTW9kdWxlLmluc3RhbnRpYXRlV2FzbSBjYWxsYmFjayBmYWlsZWQgd2l0aCBlcnJvcjogJHtjfWApLCBiYShjKTsKICAgICAgICAgIH0KICAgICAgICB4YShiLCBmdW5jdGlvbihjKSB7CiAgICAgICAgICBhKGMuaW5zdGFuY2UpOwogICAgICAgIH0pLmNhdGNoKGJhKTsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0oKSwgYmMgPSAoYSkgPT4gKGJjID0gVy5mYSkoYSksIG9iID0gKGEpID0+IChvYiA9IFcuZ2EpKGEpLCBVID0gKGEpID0+IChVID0gVy5pYSkoYSksIFggPSAoYSwgYikgPT4gKFggPSBXLmphKShhLCBiKSwgWSA9IChhKSA9PiAoWSA9IFcua2EpKGEpLCBaID0gKCkgPT4gKFogPSBXLmxhKSgpOwogICAgICBrLmR5bkNhbGxfaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAoay5keW5DYWxsX2lpamogPSBXLm5hKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX3ZpamogPSAoYSwgYiwgYywgZCwgZSwgZikgPT4gKGsuZHluQ2FsbF92aWpqID0gVy5vYSkoYSwgYiwgYywgZCwgZSwgZik7CiAgICAgIGsuZHluQ2FsbF9qaWlpID0gKGEsIGIsIGMsIGQpID0+IChrLmR5bkNhbGxfamlpaSA9IFcucGEpKGEsIGIsIGMsIGQpOwogICAgICBrLmR5bkNhbGxfamlpID0gKGEsIGIsIGMpID0+IChrLmR5bkNhbGxfamlpID0gVy5xYSkoYSwgYiwgYyk7CiAgICAgIHZhciBuYyA9IGsuZHluQ2FsbF92aWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmKSA9PiAobmMgPSBrLmR5bkNhbGxfdmlpaWogPSBXLnJhKShhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgay5keW5DYWxsX2ppamkgPSAoYSwgYiwgYywgZCwgZSkgPT4gKGsuZHluQ2FsbF9qaWppID0gVy5zYSkoYSwgYiwgYywgZCwgZSk7CiAgICAgIGsuZHluQ2FsbF92aWlqaWkgPSAoYSwgYiwgYywgZCwgZSwgZiwgbCkgPT4gKGsuZHluQ2FsbF92aWlqaWkgPSBXLnRhKShhLCBiLCBjLCBkLCBlLCBmLCBsKTsKICAgICAgay5keW5DYWxsX2lpaWlpaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsKSA9PiAoay5keW5DYWxsX2lpaWlpaiA9IFcudWEpKGEsIGIsIGMsIGQsIGUsIGYsIGwpOwogICAgICBrLmR5bkNhbGxfaWlpaWlqaiA9IChhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKSA9PiAoay5keW5DYWxsX2lpaWlpamogPSBXLnZhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuKTsKICAgICAgay5keW5DYWxsX2lpaWlpaWpqID0gKGEsIGIsIGMsIGQsIGUsIGYsIGwsIGgsIG4sIG0pID0+IChrLmR5bkNhbGxfaWlpaWlpamogPSBXLndhKShhLCBiLCBjLCBkLCBlLCBmLCBsLCBoLCBuLCBtKTsKICAgICAgZnVuY3Rpb24gaGMoYSwgYikgewogICAgICAgIHZhciBjID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaWMoYSwgYiwgYykgewogICAgICAgIHZhciBkID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBTLmdldChhKShiLCBjKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBZKGQpOwogICAgICAgICAgaWYgKGUgIT09IGUgKyAwKSB0aHJvdyBlOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZWMoYSwgYiwgYywgZCkgewogICAgICAgIHZhciBlID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRjKGEsIGIsIGMpIHsKICAgICAgICB2YXIgZCA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIFMuZ2V0KGEpKGIsIGMpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIFkoZCk7CiAgICAgICAgICBpZiAoZSAhPT0gZSArIDApIHRocm93IGU7CiAgICAgICAgICBYKDEsIDApOwogICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBjYyhhLCBiKSB7CiAgICAgICAgdmFyIGMgPSBaKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBTLmdldChhKShiKTsKICAgICAgICB9IGNhdGNoIChkKSB7CiAgICAgICAgICBZKGMpOwogICAgICAgICAgaWYgKGQgIT09IGQgKyAwKSB0aHJvdyBkOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZmMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICByZXR1cm4gUy5nZXQoYSkoYiwgYywgZCwgZSwgZik7CiAgICAgICAgfSBjYXRjaCAoaCkgewogICAgICAgICAgWShsKTsKICAgICAgICAgIGlmIChoICE9PSBoICsgMCkgdGhyb3cgaDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGtjKGEsIGIsIGMsIGQsIGUpIHsKICAgICAgICB2YXIgZiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCwgZSk7CiAgICAgICAgfSBjYXRjaCAobCkgewogICAgICAgICAgWShmKTsKICAgICAgICAgIGlmIChsICE9PSBsICsgMCkgdGhyb3cgbDsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGpjKGEsIGIsIGMsIGQpIHsKICAgICAgICB2YXIgZSA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoYiwgYywgZCk7CiAgICAgICAgfSBjYXRjaCAoZikgewogICAgICAgICAgWShlKTsKICAgICAgICAgIGlmIChmICE9PSBmICsgMCkgdGhyb3cgZjsKICAgICAgICAgIFgoMSwgMCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdjKGEpIHsKICAgICAgICB2YXIgYiA9IFooKTsKICAgICAgICB0cnkgewogICAgICAgICAgUy5nZXQoYSkoKTsKICAgICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgICBZKGIpOwogICAgICAgICAgaWYgKGMgIT09IGMgKyAwKSB0aHJvdyBjOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbGMoYSwgYiwgYywgZCwgZSwgZikgewogICAgICAgIHZhciBsID0gWigpOwogICAgICAgIHRyeSB7CiAgICAgICAgICBuYyhhLCBiLCBjLCBkLCBlLCBmKTsKICAgICAgICB9IGNhdGNoIChoKSB7CiAgICAgICAgICBZKGwpOwogICAgICAgICAgaWYgKGggIT09IGggKyAwKSB0aHJvdyBoOwogICAgICAgICAgWCgxLCAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgdmFyIG9jOwogICAgICBIID0gZnVuY3Rpb24gcGMoKSB7CiAgICAgICAgb2MgfHwgcWMoKTsKICAgICAgICBvYyB8fCAoSCA9IHBjKTsKICAgICAgfTsKICAgICAgZnVuY3Rpb24gcWMoKSB7CiAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgIGlmICghb2MgJiYgKG9jID0gdHJ1ZSwgay5jYWxsZWRSdW4gPSB0cnVlLCAhaGEpKSB7CiAgICAgICAgICAgIHlhKG5hKTsKICAgICAgICAgICAgYWEoayk7CiAgICAgICAgICAgIGlmIChrLm9uUnVudGltZUluaXRpYWxpemVkKSBrLm9uUnVudGltZUluaXRpYWxpemVkKCk7CiAgICAgICAgICAgIGlmIChrLnBvc3RSdW4pCiAgICAgICAgICAgICAgZm9yICgiZnVuY3Rpb24iID09IHR5cGVvZiBrLnBvc3RSdW4gJiYgKGsucG9zdFJ1biA9IFtrLnBvc3RSdW5dKTsgay5wb3N0UnVuLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICB2YXIgYiA9IGsucG9zdFJ1bi5zaGlmdCgpOwogICAgICAgICAgICAgICAgb2EudW5zaGlmdChiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIHlhKG9hKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCEoMCA8IEcpKSB7CiAgICAgICAgICBpZiAoay5wcmVSdW4pIGZvciAoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygay5wcmVSdW4gJiYgKGsucHJlUnVuID0gW2sucHJlUnVuXSk7IGsucHJlUnVuLmxlbmd0aDsgKSBwYSgpOwogICAgICAgICAgeWEobWEpOwogICAgICAgICAgMCA8IEcgfHwgKGsuc2V0U3RhdHVzID8gKGsuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgay5zZXRTdGF0dXMoIiIpOwogICAgICAgICAgICB9LCAxKTsKICAgICAgICAgICAgYSgpOwogICAgICAgICAgfSwgMSkpIDogYSgpKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGsucHJlSW5pdCkKICAgICAgICBmb3IgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGsucHJlSW5pdCAmJiAoay5wcmVJbml0ID0gW2sucHJlSW5pdF0pOyAwIDwgay5wcmVJbml0Lmxlbmd0aDsgKSBrLnByZUluaXQucG9wKCkoKTsKICAgICAgcWMoKTsKICAgICAgcmV0dXJuIHJlYWR5UHJvbWlzZTsKICAgIH07CiAgfSkoKTsKICB2YXIgZG90bG90dGllX3BsYXllcl9kZWZhdWx0ID0gY3JlYXRlRG90TG90dGllUGxheWVyTW9kdWxlOwoKICAvLyBzcmMvY29yZS9kb3Rsb3R0aWUtd2FzbS1sb2FkZXIudHMKICB2YXIgRG90TG90dGllV2FzbUxvYWRlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlbmRlcmVyTG9hZGVyIGlzIGEgc3RhdGljIGNsYXNzIGFuZCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkLiIpOwogICAgfQogICAgc3RhdGljIGFzeW5jIF90cnlMb2FkKHVybCkgewogICAgICBjb25zdCBtb2R1bGUgPSBhd2FpdCBkb3Rsb3R0aWVfcGxheWVyX2RlZmF1bHQoeyBsb2NhdGVGaWxlOiAoKSA9PiB1cmwgfSk7CiAgICAgIHJldHVybiBtb2R1bGU7CiAgICB9CiAgICAvKioKICAgICAqIFRyaWVzIHRvIGxvYWQgdGhlIFdBU00gbW9kdWxlIGZyb20gdGhlIHByaW1hcnkgVVJMLCBmYWxsaW5nIGJhY2sgdG8gYSBiYWNrdXAgVVJMIGlmIG5lY2Vzc2FyeS4KICAgICAqIFRocm93cyBhbiBlcnJvciBpZiBib3RoIFVSTHMgZmFpbCB0byBsb2FkIHRoZSBtb2R1bGUuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIF9sb2FkV2l0aEJhY2t1cCgpIHsKICAgICAgaWYgKCF0aGlzLl9Nb2R1bGVQcm9taXNlKSB7CiAgICAgICAgdGhpcy5fTW9kdWxlUHJvbWlzZSA9IHRoaXMuX3RyeUxvYWQodGhpcy5fd2FzbVVSTCkuY2F0Y2goYXN5bmMgKGluaXRpYWxFcnJvcikgPT4gewogICAgICAgICAgY29uc3QgYmFja3VwVXJsID0gYGh0dHBzOi8vdW5wa2cuY29tLyR7UEFDS0FHRV9OQU1FfUAke1BBQ0tBR0VfVkVSU0lPTn0vZGlzdC9kb3Rsb3R0aWUtcGxheWVyLndhc21gOwogICAgICAgICAgY29uc29sZS53YXJuKGBQcmltYXJ5IFdBU00gbG9hZCBmYWlsZWQgZnJvbSAke3RoaXMuX3dhc21VUkx9LiBFcnJvcjogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBsb2FkIFdBU00gZnJvbSBiYWNrdXAgVVJMOiAke2JhY2t1cFVybH1gKTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl90cnlMb2FkKGJhY2t1cFVybCk7CiAgICAgICAgICB9IGNhdGNoIChiYWNrdXBFcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGBQcmltYXJ5IFdBU00gVVJMIGZhaWxlZDogJHtpbml0aWFsRXJyb3IubWVzc2FnZX1gKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQmFja3VwIFdBU00gVVJMIGZhaWxlZDogJHtiYWNrdXBFcnJvci5tZXNzYWdlfWApOwogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIldBU00gbG9hZGluZyBmYWlsZWQgZnJvbSBhbGwgc291cmNlcy4iKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fTW9kdWxlUHJvbWlzZTsKICAgIH0KICAgIC8qKgogICAgICogUHVibGljIG1ldGhvZCB0byBsb2FkIHRoZSBXZWJBc3NlbWJseSBtb2R1bGUuCiAgICAgKiBVdGlsaXplcyBhIHByaW1hcnkgYW5kIGJhY2t1cCBVUkwgZm9yIHJvYnVzdG5lc3MuCiAgICAgKiBAcmV0dXJucyBQcm9taXNlPE1vZHVsZT4gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgbG9hZGVkIG1vZHVsZS4KICAgICAqLwogICAgc3RhdGljIGFzeW5jIGxvYWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9sb2FkV2l0aEJhY2t1cCgpOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGEgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZSBhbmQgaW52YWxpZGF0ZXMgdGhlIGN1cnJlbnQgbW9kdWxlIHByb21pc2UuCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAtICBUaGUgbmV3IFVSTCBmb3IgdGhlIFdBU00gZmlsZS4KICAgICAqLwogICAgc3RhdGljIHNldFdhc21VcmwodXJsKSB7CiAgICAgIHRoaXMuX3dhc21VUkwgPSB1cmw7CiAgICAgIHRoaXMuX01vZHVsZVByb21pc2UgPSBudWxsOwogICAgfQogIH07CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbgogIF9fcHVibGljRmllbGQoRG90TG90dGllV2FzbUxvYWRlciwgIl9Nb2R1bGVQcm9taXNlIiwgbnVsbCk7CiAgLy8gVVJMIGZvciB0aGUgV0FTTSBmaWxlLCBjb25zdHJ1Y3RlZCB1c2luZyBwYWNrYWdlIGluZm9ybWF0aW9uCiAgX19wdWJsaWNGaWVsZChEb3RMb3R0aWVXYXNtTG9hZGVyLCAiX3dhc21VUkwiLCBgaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS8ke1BBQ0tBR0VfTkFNRX1AJHtQQUNLQUdFX1ZFUlNJT059L2Rpc3QvZG90bG90dGllLXBsYXllci53YXNtYCk7CgogIC8vIHNyYy9ldmVudC1tYW5hZ2VyLnRzCiAgdmFyIEV2ZW50TWFuYWdlciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRMaXN0ZW5lcnMiLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTsKICAgIH0KICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgbGV0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldCh0eXBlKTsKICAgICAgaWYgKCFsaXN0ZW5lcnMpIHsKICAgICAgICBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpOwogICAgICAgIHRoaXMuX2V2ZW50TGlzdGVuZXJzLnNldCh0eXBlLCBsaXN0ZW5lcnMpOwogICAgICB9CiAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpOwogICAgfQogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudExpc3RlbmVycy5nZXQodHlwZSk7CiAgICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm47CiAgICAgIGlmIChsaXN0ZW5lcikgewogICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpOwogICAgICAgIGlmIChsaXN0ZW5lcnMuc2l6ZSA9PT0gMCkgewogICAgICAgICAgdGhpcy5fZXZlbnRMaXN0ZW5lcnMuZGVsZXRlKHR5cGUpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5kZWxldGUodHlwZSk7CiAgICAgIH0KICAgIH0KICAgIGRpc3BhdGNoKGV2ZW50KSB7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50TGlzdGVuZXJzLmdldChldmVudC50eXBlKTsKICAgICAgbGlzdGVuZXJzPy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIoZXZlbnQpKTsKICAgIH0KICAgIHJlbW92ZUFsbEV2ZW50TGlzdGVuZXJzKCkgewogICAgICB0aGlzLl9ldmVudExpc3RlbmVycy5jbGVhcigpOwogICAgfQogIH07CgogIC8vIHNyYy91dGlscy50cwogIGZ1bmN0aW9uIGlzSGV4Q29sb3IoY29sb3IpIHsKICAgIHJldHVybiAvXiMoW1xkYS1mXXs2fXxbXGRhLWZdezh9KSQvaXUudGVzdChjb2xvcik7CiAgfQogIGZ1bmN0aW9uIGhleFN0cmluZ1RvUkdCQUludChjb2xvckhleCkgewogICAgaWYgKCFpc0hleENvbG9yKGNvbG9ySGV4KSkgewogICAgICByZXR1cm4gMDsKICAgIH0KICAgIGxldCBoZXggPSBjb2xvckhleC5yZXBsYWNlKCIjIiwgIiIpOwogICAgaGV4ID0gaGV4Lmxlbmd0aCA9PT0gNiA/IGAke2hleH1mZmAgOiBoZXg7CiAgICByZXR1cm4gcGFyc2VJbnQoaGV4LCAxNik7CiAgfQogIGZ1bmN0aW9uIGlzRG90TG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAoZmlsZURhdGEuYnl0ZUxlbmd0aCA8IDQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY29uc3QgZmlsZVNpZ25hdHVyZSA9IG5ldyBVaW50OEFycmF5KGZpbGVEYXRhLnNsaWNlKDAsIFpJUF9TSUdOQVRVUkUuYnl0ZUxlbmd0aCkpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBaSVBfU0lHTkFUVVJFLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGlmIChaSVBfU0lHTkFUVVJFW2ldICE9PSBmaWxlU2lnbmF0dXJlW2ldKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZnVuY3Rpb24gaXNMb3R0aWVKU09OKGpzb24pIHsKICAgIHJldHVybiBMT1RUSUVfSlNPTl9NQU5EQVRPUllfRklFTERTLmV2ZXJ5KChmaWVsZCkgPT4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIGZpZWxkKSk7CiAgfQogIGZ1bmN0aW9uIGlzTG90dGllKGZpbGVEYXRhKSB7CiAgICBpZiAodHlwZW9mIGZpbGVEYXRhID09PSAic3RyaW5nIikgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBpc0xvdHRpZUpTT04oSlNPTi5wYXJzZShmaWxlRGF0YSkpOwogICAgICB9IGNhdGNoIChfZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGlzTG90dGllSlNPTihmaWxlRGF0YSk7CiAgICB9CiAgfQoKICAvLyBzcmMvZG90bG90dGllLnRzCiAgdmFyIGNyZWF0ZUNvcmVNb2RlID0gKG1vZGUsIG1vZHVsZSkgPT4gewogICAgaWYgKG1vZGUgPT09ICJyZXZlcnNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImJvdW5jZSIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5Nb2RlLkJvdW5jZTsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gInJldmVyc2UtYm91bmNlIikgewogICAgICByZXR1cm4gbW9kdWxlLk1vZGUuUmV2ZXJzZUJvdW5jZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuTW9kZS5Gb3J3YXJkOwogICAgfQogIH07CiAgdmFyIGNyZWF0ZUNvcmVGaXQgPSAoZml0LCBtb2R1bGUpID0+IHsKICAgIGlmIChmaXQgPT09ICJjb250YWluIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5Db250YWluOwogICAgfSBlbHNlIGlmIChmaXQgPT09ICJjb3ZlciIpIHsKICAgICAgcmV0dXJuIG1vZHVsZS5GaXQuQ292ZXI7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpbGwiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpbGw7CiAgICB9IGVsc2UgaWYgKGZpdCA9PT0gImZpdC1oZWlnaHQiKSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0LkZpdEhlaWdodDsKICAgIH0gZWxzZSBpZiAoZml0ID09PSAiZml0LXdpZHRoIikgewogICAgICByZXR1cm4gbW9kdWxlLkZpdC5GaXRXaWR0aDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBtb2R1bGUuRml0Lk5vbmU7CiAgICB9CiAgfTsKICB2YXIgY3JlYXRlQ29yZUFsaWduID0gKGFsaWduLCBtb2R1bGUpID0+IHsKICAgIGNvbnN0IGNvcmVBbGlnbiA9IG5ldyBtb2R1bGUuVmVjdG9yRmxvYXQoKTsKICAgIGNvcmVBbGlnbi5wdXNoX2JhY2soYWxpZ25bMF0pOwogICAgY29yZUFsaWduLnB1c2hfYmFjayhhbGlnblsxXSk7CiAgICByZXR1cm4gY29yZUFsaWduOwogIH07CiAgdmFyIGNyZWF0ZUNvcmVTZWdtZW50ID0gKHNlZ21lbnQsIG1vZHVsZSkgPT4gewogICAgY29uc3QgY29yZXNlZ21lbnQgPSBuZXcgbW9kdWxlLlZlY3RvckZsb2F0KCk7CiAgICBpZiAoc2VnbWVudC5sZW5ndGggIT09IDIpIHJldHVybiBjb3Jlc2VnbWVudDsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzBdKTsKICAgIGNvcmVzZWdtZW50LnB1c2hfYmFjayhzZWdtZW50WzFdKTsKICAgIHJldHVybiBjb3Jlc2VnbWVudDsKICB9OwogIHZhciBfRG90TG90dGllID0gY2xhc3MgX0RvdExvdHRpZSB7CiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2NhbnZhcyIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfY29udGV4dCIsIG51bGwpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfZXZlbnRNYW5hZ2VyIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9hbmltYXRpb25GcmFtZUlkIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9mcmFtZU1hbmFnZXIiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2RvdExvdHRpZUNvcmUiLCBudWxsKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3JlbmRlckNvbmZpZyIsIHt9KTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX2lzRnJvemVuIiwgZmFsc2UpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfYmFja2dyb3VuZENvbG9yIiwgbnVsbCk7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyVXBNZXRob2QiKTsKICAgICAgX19wdWJsaWNGaWVsZCh0aGlzLCAiX3BvaW50ZXJEb3duTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyTW92ZU1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfcG9pbnRlckVudGVyTWV0aG9kIik7CiAgICAgIF9fcHVibGljRmllbGQodGhpcywgIl9wb2ludGVyRXhpdE1ldGhvZCIpOwogICAgICBfX3B1YmxpY0ZpZWxkKHRoaXMsICJfb25Db21wbGV0ZU1ldGhvZCIpOwogICAgICB0aGlzLl9jYW52YXMgPSBjb25maWcuY2FudmFzOwogICAgICB0aGlzLl9jb250ZXh0ID0gdGhpcy5fY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIoKTsKICAgICAgdGhpcy5fZnJhbWVNYW5hZ2VyID0gbmV3IEFuaW1hdGlvbkZyYW1lTWFuYWdlcigpOwogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWcucmVuZGVyQ29uZmlnID8/IHt9OwogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLmxvYWQoKS50aGVuKChtb2R1bGUpID0+IHsKICAgICAgICBfRG90TG90dGllLl93YXNtTW9kdWxlID0gbW9kdWxlOwogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBuZXcgbW9kdWxlLkRvdExvdHRpZVBsYXllcih7CiAgICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAwLAogICAgICAgICAgbG9vcEFuaW1hdGlvbjogY29uZmlnLmxvb3AgPz8gZmFsc2UsCiAgICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIG1vZHVsZSksCiAgICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChjb25maWcuc2VnbWVudCA/PyBbXSwgbW9kdWxlKSwKICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQgPz8gMSwKICAgICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogY29uZmlnLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyB0cnVlLAogICAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgICAgbGF5b3V0OiBjb25maWcubGF5b3V0ID8gewogICAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGNvbmZpZy5sYXlvdXQuYWxpZ24sIG1vZHVsZSksCiAgICAgICAgICAgIGZpdDogY3JlYXRlQ29yZUZpdChjb25maWcubGF5b3V0LmZpdCwgbW9kdWxlKQogICAgICAgICAgfSA6IG1vZHVsZS5jcmVhdGVEZWZhdWx0TGF5b3V0KCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicmVhZHkiIH0pOwogICAgICAgIGlmIChjb25maWcuZGF0YSkgewogICAgICAgICAgdGhpcy5fbG9hZEZyb21EYXRhKGNvbmZpZy5kYXRhKTsKICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICAgIHRoaXMuX2xvYWRGcm9tU3JjKGNvbmZpZy5zcmMpOwogICAgICAgIH0KICAgICAgICBpZiAoY29uZmlnLmJhY2tncm91bmRDb2xvcikgewogICAgICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kQ29sb3IoY29uZmlnLmJhY2tncm91bmRDb2xvcik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImxvYWRFcnJvciIsCiAgICAgICAgICBlcnJvcjogbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCB3YXNtIG1vZHVsZTogJHtlcnJvcn1gKQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5fcG9pbnRlclVwTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyVXAuYmluZCh0aGlzKTsKICAgICAgdGhpcy5fcG9pbnRlckRvd25NZXRob2QgPSB0aGlzLl9vblBvaW50ZXJEb3duLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kID0gdGhpcy5fb25Qb2ludGVyTW92ZS5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QgPSB0aGlzLl9vblBvaW50ZXJFbnRlci5iaW5kKHRoaXMpOwogICAgICB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCA9IHRoaXMuX29uUG9pbnRlckxlYXZlLmJpbmQodGhpcyk7CiAgICAgIHRoaXMuX29uQ29tcGxldGVNZXRob2QgPSB0aGlzLl9vbkNvbXBsZXRlLmJpbmQodGhpcyk7CiAgICB9CiAgICBfZGlzcGF0Y2hFcnJvcihtZXNzYWdlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkRXJyb3IiLCBlcnJvcjogbmV3IEVycm9yKG1lc3NhZ2UpIH0pOwogICAgfQogICAgYXN5bmMgX2ZldGNoRGF0YShzcmMpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzcmMpOwogICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYW5pbWF0aW9uIGRhdGEgZnJvbSBVUkw6ICR7c3JjfS4gJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7CiAgICAgIH0KICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgIGlmIChpc0RvdExvdHRpZShkYXRhKSkgewogICAgICAgIHJldHVybiBkYXRhOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSk7CiAgICB9CiAgICBfbG9hZEZyb21EYXRhKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwpIHJldHVybjsKICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuX2NhbnZhcy5oZWlnaHQ7CiAgICAgIGxldCBsb2FkZWQgPSBmYWxzZTsKICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAic3RyaW5nIikgewogICAgICAgIGlmICghaXNMb3R0aWUoZGF0YSkpIHsKICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoRXJyb3IoCiAgICAgICAgICAgICJJbnZhbGlkIExvdHRpZSBKU09OIHN0cmluZzogVGhlIHByb3ZpZGVkIHN0cmluZyBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBMb3R0aWUgSlNPTiBmb3JtYXQuIgogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uRGF0YShkYXRhLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIGlmIChkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICBpZiAoIWlzRG90TG90dGllKGRhdGEpKSB7CiAgICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgICAiSW52YWxpZCBkb3RMb3R0aWUgQXJyYXlCdWZmZXI6IFRoZSBwcm92aWRlZCBBcnJheUJ1ZmZlciBkb2VzIG5vdCBjb25mb3JtIHRvIHRoZSBkb3RMb3R0aWUgZm9ybWF0LiIKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGxvYWRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUubG9hZERvdExvdHRpZURhdGEoZGF0YSwgd2lkdGgsIGhlaWdodCk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICJvYmplY3QiKSB7CiAgICAgICAgaWYgKCFpc0xvdHRpZShkYXRhKSkgewogICAgICAgICAgdGhpcy5fZGlzcGF0Y2hFcnJvcigKICAgICAgICAgICAgIkludmFsaWQgTG90dGllIEpTT04gb2JqZWN0OiBUaGUgcHJvdmlkZWQgb2JqZWN0IGRvZXMgbm90IGNvbmZvcm0gdG8gdGhlIExvdHRpZSBKU09OIGZvcm1hdC4iCiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRBbmltYXRpb25EYXRhKEpTT04uc3RyaW5naWZ5KGRhdGEpLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKAogICAgICAgICAgYFVuc3VwcG9ydGVkIGRhdGEgdHlwZSBmb3IgYW5pbWF0aW9uIGRhdGEuIEV4cGVjdGVkOiAKICAgICAgICAgIC0gc3RyaW5nIChMb3R0aWUgSlNPTiksCiAgICAgICAgICAtIEFycmF5QnVmZmVyIChkb3RMb3R0aWUpLAogICAgICAgICAgLSBvYmplY3QgKExvdHRpZSBKU09OKS4gCiAgICAgICAgICBSZWNlaXZlZDogJHt0eXBlb2YgZGF0YX1gCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGxvYWRlZCkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJsb2FkIiB9KTsKICAgICAgICBpZiAoSVNfQlJPV1NFUikgewogICAgICAgICAgdGhpcy5yZXNpemUoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJmcmFtZSIsCiAgICAgICAgICBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkKICAgICAgICB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKS5hdXRvcGxheSkgewogICAgICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5wbGF5KCk7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAicGxheSIgfSk7CiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJzb21ldGhpbmcgd2VudCB3cm9uZywgdGhlIGFuaW1hdGlvbiB3YXMgc3VwcG9zZSB0byBhdXRvcGxheSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl9kaXNwYXRjaEVycm9yKCJGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSIpOwogICAgICB9CiAgICB9CiAgICBfbG9hZEZyb21TcmMoc3JjKSB7CiAgICAgIHRoaXMuX2ZldGNoRGF0YShzcmMpLnRoZW4oKGRhdGEpID0+IHRoaXMuX2xvYWRGcm9tRGF0YShkYXRhKSkuY2F0Y2goKGVycm9yKSA9PiB0aGlzLl9kaXNwYXRjaEVycm9yKGBGYWlsZWQgdG8gbG9hZCBhbmltYXRpb24gZGF0YSBmcm9tIFVSTDogJHtzcmN9LiAke2Vycm9yfWApKTsKICAgIH0KICAgIGdldCBhY3RpdmVBbmltYXRpb25JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZUFuaW1hdGlvbklkKCk7CiAgICB9CiAgICBnZXQgYWN0aXZlVGhlbWVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmFjdGl2ZVRoZW1lSWQoKTsKICAgIH0KICAgIGdldCBsYXlvdXQoKSB7CiAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxheW91dDsKICAgICAgaWYgKGxheW91dCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBhbGlnbjogW2xheW91dC5hbGlnbi5nZXQoMCksIGxheW91dC5hbGlnbi5nZXQoMSldLAogICAgICAgICAgZml0OiAoKCkgPT4gewogICAgICAgICAgICBzd2l0Y2ggKGxheW91dC5maXQpIHsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db250YWluOgogICAgICAgICAgICAgICAgcmV0dXJuICJjb250YWluIjsKICAgICAgICAgICAgICBjYXNlIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/LkZpdC5Db3ZlcjoKICAgICAgICAgICAgICAgIHJldHVybiAiY292ZXIiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpbGw6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpbGwiOwogICAgICAgICAgICAgIGNhc2UgX0RvdExvdHRpZS5fd2FzbU1vZHVsZT8uRml0LkZpdEhlaWdodDoKICAgICAgICAgICAgICAgIHJldHVybiAiZml0LWhlaWdodCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuRml0V2lkdGg6CiAgICAgICAgICAgICAgICByZXR1cm4gImZpdC13aWR0aCI7CiAgICAgICAgICAgICAgY2FzZSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5GaXQuTm9uZToKICAgICAgICAgICAgICAgIHJldHVybiAibm9uZSI7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAiY29udGFpbiI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKCkKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbWFya2VyKCkgewogICAgICBjb25zdCBtYXJrZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jb25maWcoKS5tYXJrZXI7CiAgICAgIHJldHVybiBtYXJrZXI7CiAgICB9CiAgICBnZXQgbWFuaWZlc3QoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbWFuaWZlc3QgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYW5pZmVzdFN0cmluZygpOwogICAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8ICFtYW5pZmVzdCkgcmV0dXJuIG51bGw7CiAgICAgICAgY29uc3QgbWFuaWZlc3RKc29uID0gSlNPTi5wYXJzZShtYW5pZmVzdCk7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1hbmlmZXN0SnNvbikubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsKICAgICAgICByZXR1cm4gbWFuaWZlc3RKc29uOwogICAgICB9IGNhdGNoIChfZXJyKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIGdldCByZW5kZXJDb25maWcoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJDb25maWc7CiAgICB9CiAgICBnZXQgc2VnbWVudCgpIHsKICAgICAgY29uc3Qgc2VnbWVudCA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNlZ21lbnQ7CiAgICAgIGlmIChzZWdtZW50ICYmIHNlZ21lbnQuc2l6ZSgpID09PSAyKSB7CiAgICAgICAgcmV0dXJuIFtzZWdtZW50LmdldCgwKSwgc2VnbWVudC5nZXQoMSldOwogICAgICB9CiAgICAgIHJldHVybiB2b2lkIDA7CiAgICB9CiAgICBnZXQgbG9vcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmxvb3BBbmltYXRpb24gPz8gZmFsc2U7CiAgICB9CiAgICBnZXQgbW9kZSgpIHsKICAgICAgY29uc3QgbW9kZSA9IHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLm1vZGU7CiAgICAgIGlmIChtb2RlID09PSBfRG90TG90dGllLl93YXNtTW9kdWxlPy5Nb2RlLlJldmVyc2UpIHsKICAgICAgICByZXR1cm4gInJldmVyc2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuQm91bmNlKSB7CiAgICAgICAgcmV0dXJuICJib3VuY2UiOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGU/Lk1vZGUuUmV2ZXJzZUJvdW5jZSkgewogICAgICAgIHJldHVybiAicmV2ZXJzZS1ib3VuY2UiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiZm9yd2FyZCI7CiAgICAgIH0KICAgIH0KICAgIGdldCBpc0Zyb3plbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2lzRnJvemVuOwogICAgfQogICAgZ2V0IGJhY2tncm91bmRDb2xvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2JhY2tncm91bmRDb2xvciA/PyAiIjsKICAgIH0KICAgIGdldCBhdXRvcGxheSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLmF1dG9wbGF5ID8/IGZhbHNlOwogICAgfQogICAgZ2V0IHVzZUZyYW1lSW50ZXJwb2xhdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnVzZUZyYW1lSW50ZXJwb2xhdGlvbiA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBzcGVlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmNvbmZpZygpLnNwZWVkID8/IDA7CiAgICB9CiAgICBnZXQgaXNSZWFkeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGw7CiAgICB9CiAgICBnZXQgaXNMb2FkZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc0xvYWRlZCgpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGxheWluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmlzUGxheWluZygpID8/IGZhbHNlOwogICAgfQogICAgZ2V0IGlzUGF1c2VkKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uaXNQYXVzZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBpc1N0b3BwZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5pc1N0b3BwZWQoKSA/PyBmYWxzZTsKICAgIH0KICAgIGdldCBjdXJyZW50RnJhbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5jdXJyZW50RnJhbWUoKSA/PyAwOwogICAgfQogICAgZ2V0IGxvb3BDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/Lmxvb3BDb3VudCgpID8/IDA7CiAgICB9CiAgICBnZXQgdG90YWxGcmFtZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy50b3RhbEZyYW1lcygpID8/IDA7CiAgICB9CiAgICBnZXQgZHVyYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5kdXJhdGlvbigpID8/IDA7CiAgICB9CiAgICBnZXQgc2VnbWVudER1cmF0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2VnbWVudER1cmF0aW9uKCkgPz8gMDsKICAgIH0KICAgIGdldCBjYW52YXMoKSB7CiAgICAgIHJldHVybiB0aGlzLl9jYW52YXM7CiAgICB9CiAgICBsb2FkKGNvbmZpZykgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICBhdXRvcGxheTogY29uZmlnLmF1dG9wbGF5ID8/IGZhbHNlLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogMCwKICAgICAgICBsb29wQW5pbWF0aW9uOiBjb25maWcubG9vcCA/PyBmYWxzZSwKICAgICAgICBtb2RlOiBjcmVhdGVDb3JlTW9kZShjb25maWcubW9kZSA/PyAiZm9yd2FyZCIsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpLAogICAgICAgIHNlZ21lbnQ6IGNyZWF0ZUNvcmVTZWdtZW50KGNvbmZpZy5zZWdtZW50ID8/IFtdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKSwKICAgICAgICBzcGVlZDogY29uZmlnLnNwZWVkID8/IDEsCiAgICAgICAgdXNlRnJhbWVJbnRlcnBvbGF0aW9uOiBjb25maWcudXNlRnJhbWVJbnRlcnBvbGF0aW9uID8/IHRydWUsCiAgICAgICAgbWFya2VyOiBjb25maWcubWFya2VyID8/ICIiLAogICAgICAgIGxheW91dDogY29uZmlnLmxheW91dCA/IHsKICAgICAgICAgIGFsaWduOiBjcmVhdGVDb3JlQWxpZ24oY29uZmlnLmxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQoY29uZmlnLmxheW91dC5maXQsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgICAgfSA6IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUuY3JlYXRlRGVmYXVsdExheW91dCgpCiAgICAgIH0pOwogICAgICBpZiAoY29uZmlnLmRhdGEpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbURhdGEoY29uZmlnLmRhdGEpOwogICAgICB9IGVsc2UgaWYgKGNvbmZpZy5zcmMpIHsKICAgICAgICB0aGlzLl9sb2FkRnJvbVNyYyhjb25maWcuc3JjKTsKICAgICAgfQogICAgICB0aGlzLnNldEJhY2tncm91bmRDb2xvcihjb25maWcuYmFja2dyb3VuZENvbG9yID8/ICIiKTsKICAgIH0KICAgIF9yZW5kZXIoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwpIHJldHVybiBmYWxzZTsKICAgICAgY29uc3QgcmVuZGVyZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnJlbmRlcigpOwogICAgICBpZiAocmVuZGVyZWQpIHsKICAgICAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmJ1ZmZlcigpOwogICAgICAgIGNvbnN0IGNsYW1wZWRCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYnVmZmVyLCAwLCB0aGlzLl9jYW52YXMud2lkdGggKiB0aGlzLl9jYW52YXMuaGVpZ2h0ICogNCk7CiAgICAgICAgbGV0IGltYWdlRGF0YSA9IG51bGw7CiAgICAgICAgaWYgKHR5cGVvZiBJbWFnZURhdGEgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICBpbWFnZURhdGEgPSB0aGlzLl9jb250ZXh0LmNyZWF0ZUltYWdlRGF0YSh0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICAgICAgaW1hZ2VEYXRhLmRhdGEuc2V0KGNsYW1wZWRCdWZmZXIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbWFnZURhdGEgPSBuZXcgSW1hZ2VEYXRhKGNsYW1wZWRCdWZmZXIsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuX2NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJyZW5kZXIiLAogICAgICAgICAgY3VycmVudEZyYW1lOiB0aGlzLl9kb3RMb3R0aWVDb3JlLmN1cnJlbnRGcmFtZSgpCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgX2RyYXcoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2NvbnRleHQgPT09IG51bGwgfHwgIXRoaXMuX2RvdExvdHRpZUNvcmUuaXNQbGF5aW5nKCkpIHJldHVybjsKICAgICAgY29uc3QgbmV4dEZyYW1lID0gdGhpcy5fZG90TG90dGllQ29yZS5yZXF1ZXN0RnJhbWUoKTsKICAgICAgY29uc3QgdXBkYXRlZCA9IHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0RnJhbWUobmV4dEZyYW1lKTsKICAgICAgaWYgKHVwZGF0ZWQpIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goewogICAgICAgICAgdHlwZTogImZyYW1lIiwKICAgICAgICAgIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHJlbmRlcmVkID0gdGhpcy5fcmVuZGVyKCk7CiAgICAgICAgaWYgKHJlbmRlcmVkKSB7CiAgICAgICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZS5pc0NvbXBsZXRlKCkpIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCkubG9vcEFuaW1hdGlvbikgewogICAgICAgICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAibG9vcCIsCiAgICAgICAgICAgICAgICBsb29wQ291bnQ6IHRoaXMuX2RvdExvdHRpZUNvcmUubG9vcENvdW50KCkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiY29tcGxldGUiIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICB9CiAgICBwbGF5KCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGxheSgpOwogICAgICBpZiAob2sgfHwgdGhpcy5fZG90TG90dGllQ29yZS5pc1BsYXlpbmcoKSkgewogICAgICAgIHRoaXMuX2lzRnJvemVuID0gZmFsc2U7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInBsYXkiIH0pOwogICAgICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSB0aGlzLl9mcmFtZU1hbmFnZXIucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2RyYXcuYmluZCh0aGlzKSk7CiAgICAgIH0KICAgIH0KICAgIHBhdXNlKCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICBjb25zdCBvayA9IHRoaXMuX2RvdExvdHRpZUNvcmUucGF1c2UoKTsKICAgICAgaWYgKG9rIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuaXNQYXVzZWQoKSkgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJwYXVzZSIgfSk7CiAgICAgIH0KICAgIH0KICAgIHN0b3AoKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGNvbnN0IG9rID0gdGhpcy5fZG90TG90dGllQ29yZS5zdG9wKCk7CiAgICAgIGlmIChvaykgewogICAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5kaXNwYXRjaCh7IHR5cGU6ICJmcmFtZSIsIGN1cnJlbnRGcmFtZTogdGhpcy5fZG90TG90dGllQ29yZS5jdXJyZW50RnJhbWUoKSB9KTsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAic3RvcCIgfSk7CiAgICAgIH0KICAgIH0KICAgIHNldEZyYW1lKGZyYW1lKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChmcmFtZSA8IDAgfHwgZnJhbWUgPiB0aGlzLl9kb3RMb3R0aWVDb3JlLnRvdGFsRnJhbWVzKCkpIHJldHVybjsKICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnNlZWsoZnJhbWUpOwogICAgICBpZiAob2spIHsKICAgICAgICB0aGlzLl9ldmVudE1hbmFnZXIuZGlzcGF0Y2goeyB0eXBlOiAiZnJhbWUiLCBjdXJyZW50RnJhbWU6IHRoaXMuX2RvdExvdHRpZUNvcmUuY3VycmVudEZyYW1lKCkgfSk7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNwZWVkKHNwZWVkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIHNwZWVkCiAgICAgIH0pOwogICAgfQogICAgc2V0QmFja2dyb3VuZENvbG9yKGNvbG9yKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7CiAgICAgICAgdGhpcy5fY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGhleFN0cmluZ1RvUkdCQUludChjb2xvcikKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLl9iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsKICAgIH0KICAgIHNldExvb3AobG9vcCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBsb29wQW5pbWF0aW9uOiBsb29wCiAgICAgIH0pOwogICAgfQogICAgc2V0VXNlRnJhbWVJbnRlcnBvbGF0aW9uKHVzZUZyYW1lSW50ZXJwb2xhdGlvbikgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICB1c2VGcmFtZUludGVycG9sYXRpb24KICAgICAgfSk7CiAgICB9CiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTsKICAgIH0KICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpOwogICAgfQogICAgZGVzdHJveSgpIHsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZT8uZGVsZXRlKCk7CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUgPSBudWxsOwogICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICB0eXBlOiAiZGVzdHJveSIKICAgICAgfSk7CiAgICAgIHRoaXMuX2V2ZW50TWFuYWdlci5yZW1vdmVBbGxFdmVudExpc3RlbmVycygpOwogICAgICB0aGlzLl9jbGVhbnVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9CiAgICBmcmVlemUoKSB7CiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZUlkID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2ZyYW1lTWFuYWdlci5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IG51bGw7CiAgICAgIHRoaXMuX2lzRnJvemVuID0gdHJ1ZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImZyZWV6ZSIgfSk7CiAgICB9CiAgICB1bmZyZWV6ZSgpIHsKICAgICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgIT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWVJZCA9IHRoaXMuX2ZyYW1lTWFuYWdlci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fZHJhdy5iaW5kKHRoaXMpKTsKICAgICAgdGhpcy5faXNGcm96ZW4gPSBmYWxzZTsKICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogInVuZnJlZXplIiB9KTsKICAgIH0KICAgIHJlc2l6ZSgpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICBjb25zdCBkcHIgPSB0aGlzLl9yZW5kZXJDb25maWcuZGV2aWNlUGl4ZWxSYXRpbyB8fCB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOwogICAgICAgIGNvbnN0IHsgaGVpZ2h0OiBjbGllbnRIZWlnaHQsIHdpZHRoOiBjbGllbnRXaWR0aCB9ID0gdGhpcy5fY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IGNsaWVudFdpZHRoICogZHByOwogICAgICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBjbGllbnRIZWlnaHQgKiBkcHI7CiAgICAgIH0KICAgICAgY29uc3Qgb2sgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5yZXNpemUodGhpcy5fY2FudmFzLndpZHRoLCB0aGlzLl9jYW52YXMuaGVpZ2h0KTsKICAgICAgaWYgKG9rKSB7CiAgICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIH0KICAgIH0KICAgIHNldFNlZ21lbnQoc3RhcnRGcmFtZSwgZW5kRnJhbWUpIHsKICAgICAgaWYgKHRoaXMuX2RvdExvdHRpZUNvcmUgPT09IG51bGwgfHwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICB0aGlzLl9kb3RMb3R0aWVDb3JlLnNldENvbmZpZyh7CiAgICAgICAgLi4udGhpcy5fZG90TG90dGllQ29yZS5jb25maWcoKSwKICAgICAgICBzZWdtZW50OiBjcmVhdGVDb3JlU2VnbWVudChbc3RhcnRGcmFtZSwgZW5kRnJhbWVdLCBfRG90TG90dGllLl93YXNtTW9kdWxlKQogICAgICB9KTsKICAgIH0KICAgIHNldE1vZGUobW9kZSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCB8fCBfRG90TG90dGllLl93YXNtTW9kdWxlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1vZGU6IGNyZWF0ZUNvcmVNb2RlKG1vZGUsIF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUpCiAgICAgIH0pOwogICAgfQogICAgc2V0UmVuZGVyQ29uZmlnKGNvbmZpZykgewogICAgICB0aGlzLl9yZW5kZXJDb25maWcgPSBjb25maWc7CiAgICB9CiAgICBsb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IHRoaXMuX2RvdExvdHRpZUNvcmUuYWN0aXZlQW5pbWF0aW9uSWQoKSA9PT0gYW5pbWF0aW9uSWQpIHJldHVybjsKICAgICAgY29uc3QgbG9hZGVkID0gdGhpcy5fZG90TG90dGllQ29yZS5sb2FkQW5pbWF0aW9uKGFuaW1hdGlvbklkLCB0aGlzLl9jYW52YXMud2lkdGgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpOwogICAgICBpZiAobG9hZGVkKSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsgdHlwZTogImxvYWQiIH0pOwogICAgICAgIHRoaXMucmVzaXplKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fZXZlbnRNYW5hZ2VyLmRpc3BhdGNoKHsKICAgICAgICAgIHR5cGU6ICJsb2FkRXJyb3IiLAogICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFuaW1hdGlvbiA6JHthbmltYXRpb25JZH1gKQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBzZXRNYXJrZXIobWFya2VyKSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsKSByZXR1cm47CiAgICAgIHRoaXMuX2RvdExvdHRpZUNvcmUuc2V0Q29uZmlnKHsKICAgICAgICAuLi50aGlzLl9kb3RMb3R0aWVDb3JlLmNvbmZpZygpLAogICAgICAgIG1hcmtlcgogICAgICB9KTsKICAgIH0KICAgIG1hcmtlcnMoKSB7CiAgICAgIGNvbnN0IG1hcmtlcnMgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5tYXJrZXJzKCk7CiAgICAgIGlmIChtYXJrZXJzKSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrZXJzLnNpemUoKTsgaSArPSAxKSB7CiAgICAgICAgICBjb25zdCBtYXJrZXIgPSBtYXJrZXJzLmdldChpKTsKICAgICAgICAgIHJlc3VsdC5wdXNoKHsKICAgICAgICAgICAgbmFtZTogbWFya2VyLm5hbWUsCiAgICAgICAgICAgIHRpbWU6IG1hcmtlci50aW1lLAogICAgICAgICAgICBkdXJhdGlvbjogbWFya2VyLmR1cmF0aW9uCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICByZXR1cm4gW107CiAgICB9CiAgICBsb2FkVGhlbWUodGhlbWVJZCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZSh0aGVtZUlkKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBsb2FkVGhlbWVEYXRhKHRoZW1lRGF0YSkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBsb2FkZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgICAgdGhpcy5fcmVuZGVyKCk7CiAgICAgIHJldHVybiBsb2FkZWQ7CiAgICB9CiAgICBzZXRMYXlvdXQobGF5b3V0KSB7CiAgICAgIGlmICh0aGlzLl9kb3RMb3R0aWVDb3JlID09PSBudWxsIHx8IF9Eb3RMb3R0aWUuX3dhc21Nb2R1bGUgPT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5fZG90TG90dGllQ29yZS5zZXRDb25maWcoewogICAgICAgIC4uLnRoaXMuX2RvdExvdHRpZUNvcmUuY29uZmlnKCksCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICBhbGlnbjogY3JlYXRlQ29yZUFsaWduKGxheW91dC5hbGlnbiwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSksCiAgICAgICAgICBmaXQ6IGNyZWF0ZUNvcmVGaXQobGF5b3V0LmZpdCwgX0RvdExvdHRpZS5fd2FzbU1vZHVsZSkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgc2V0Vmlld3BvcnQoeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICBpZiAodGhpcy5fZG90TG90dGllQ29yZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0KICAgIHN0YXRpYyBzZXRXYXNtVXJsKHVybCkgewogICAgICBEb3RMb3R0aWVXYXNtTG9hZGVyLnNldFdhc21VcmwodXJsKTsKICAgIH0KICAgIGxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LmxvYWRTdGF0ZU1hY2hpbmUoc3RhdGVNYWNoaW5lSWQpID8/IGZhbHNlOwogICAgfQogICAgc3RhcnRTdGF0ZU1hY2hpbmUoKSB7CiAgICAgIGNvbnN0IHN0YXJ0ZWQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5zdGFydFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RhcnRlZCkgewogICAgICAgIHRoaXMuX3NldHVwU3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0YXJ0ZWQ7CiAgICB9CiAgICBzdG9wU3RhdGVNYWNoaW5lKCkgewogICAgICBjb25zdCBzdG9wcGVkID0gdGhpcy5fZG90TG90dGllQ29yZT8uc3RvcFN0YXRlTWFjaGluZSgpID8/IGZhbHNlOwogICAgICBpZiAoc3RvcHBlZCkgewogICAgICAgIHRoaXMuX2NsZWFudXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKTsKICAgICAgfQogICAgICByZXR1cm4gc3RvcHBlZDsKICAgIH0KICAgIF9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpIHsKICAgICAgY29uc3QgcmVjdCA9IHRoaXMuX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5fY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aDsKICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5fY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0OwogICAgICBjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gdGhpcy5fcmVuZGVyQ29uZmlnLmRldmljZVBpeGVsUmF0aW8gfHwgd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTsKICAgICAgY29uc3QgeCA9IChldmVudC5jbGllbnRYIC0gcmVjdC5sZWZ0KSAqIHNjYWxlWCAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIGNvbnN0IHkgPSAoZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wKSAqIHNjYWxlWSAvIGRldmljZVBpeGVsUmF0aW87CiAgICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICAgIH07CiAgICB9CiAgICBfb25Qb2ludGVyVXAoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyVXA6ICR7eH0gJHt5fWApOwogICAgfQogICAgX29uUG9pbnRlckRvd24oZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRG93bjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTW92ZShldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJNb3ZlOiAke3h9ICR7eX1gKTsKICAgIH0KICAgIF9vblBvaW50ZXJFbnRlcihldmVudCkgewogICAgICBjb25zdCB7IHgsIHkgfSA9IHRoaXMuX2dldFBvaW50ZXJQb3NpdGlvbihldmVudCk7CiAgICAgIHRoaXMucG9zdFN0YXRlTWFjaGluZUV2ZW50KGBPblBvaW50ZXJFbnRlcjogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Qb2ludGVyTGVhdmUoZXZlbnQpIHsKICAgICAgY29uc3QgeyB4LCB5IH0gPSB0aGlzLl9nZXRQb2ludGVyUG9zaXRpb24oZXZlbnQpOwogICAgICB0aGlzLnBvc3RTdGF0ZU1hY2hpbmVFdmVudChgT25Qb2ludGVyRXhpdDogJHt4fSAke3l9YCk7CiAgICB9CiAgICBfb25Db21wbGV0ZSgpIHsKICAgICAgdGhpcy5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoIk9uQ29tcGxldGUiKTsKICAgIH0KICAgIC8qKgogICAgICogQGV4cGVyaW1lbnRhbAogICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIGJlIHBvc3RlZCB0byB0aGUgc3RhdGUgbWFjaGluZQogICAgICogQHJldHVybnMgYm9vbGVhbiAtIHRydWUgaWYgdGhlIGV2ZW50IHdhcyBwb3N0ZWQgc3VjY2Vzc2Z1bGx5LCBmYWxzZSBvdGhlcndpc2UKICAgICAqLwogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KGV2ZW50KSB7CiAgICAgIGNvbnN0IHJ0ID0gdGhpcy5fZG90TG90dGllQ29yZT8ucG9zdEV2ZW50UGF5bG9hZChldmVudCkgPz8gMTsKICAgICAgaWYgKHJ0ID09PSAyKSB7CiAgICAgICAgdGhpcy5wbGF5KCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDMpIHsKICAgICAgICB0aGlzLnBhdXNlKCk7CiAgICAgIH0gZWxzZSBpZiAocnQgPT09IDQpIHsKICAgICAgICB0aGlzLl9yZW5kZXIoKTsKICAgICAgfQogICAgICByZXR1cm4gcnQ7CiAgICB9CiAgICBnZXRTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmICghdGhpcy5fZG90TG90dGllQ29yZSkgcmV0dXJuIFtdOwogICAgICBjb25zdCBsaXN0ZW5lcnNWZWN0b3IgPSB0aGlzLl9kb3RMb3R0aWVDb3JlLnN0YXRlTWFjaGluZUZyYW1ld29ya1NldHVwKCk7CiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IFtdOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVyc1ZlY3Rvci5zaXplKCk7IGkgKz0gMSkgewogICAgICAgIGxpc3RlbmVycy5wdXNoKGxpc3RlbmVyc1ZlY3Rvci5nZXQoaSkpOwogICAgICB9CiAgICAgIHJldHVybiBsaXN0ZW5lcnM7CiAgICB9CiAgICBfc2V0dXBTdGF0ZU1hY2hpbmVMaXN0ZW5lcnMoKSB7CiAgICAgIGlmIChJU19CUk9XU0VSICYmIHRoaXMuX2NhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50ICYmIHRoaXMuX2RvdExvdHRpZUNvcmUgIT09IG51bGwgJiYgdGhpcy5pc0xvYWRlZCkgewogICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlclVwIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLCB0aGlzLl9wb2ludGVyVXBNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRG93biIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgfQogICAgICAgIGlmIChsaXN0ZW5lcnMuaW5jbHVkZXMoIlBvaW50ZXJNb3ZlIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsIHRoaXMuX3BvaW50ZXJNb3ZlTWV0aG9kKTsKICAgICAgICB9CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmNsdWRlcygiUG9pbnRlckVudGVyIikpIHsKICAgICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJQb2ludGVyRXhpdCIpKSB7CiAgICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmxlYXZlIiwgdGhpcy5fcG9pbnRlckV4aXRNZXRob2QpOwogICAgICAgIH0KICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKCJDb21wbGV0ZSIpKSB7CiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoImNvbXBsZXRlIiwgdGhpcy5fb25Db21wbGV0ZU1ldGhvZCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICBfY2xlYW51cFN0YXRlTWFjaGluZUxpc3RlbmVycygpIHsKICAgICAgaWYgKElTX0JST1dTRVIgJiYgdGhpcy5fY2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIiwgdGhpcy5fcG9pbnRlclVwTWV0aG9kKTsKICAgICAgICB0aGlzLl9jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLCB0aGlzLl9wb2ludGVyRG93bk1ldGhvZCk7CiAgICAgICAgdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJtb3ZlIiwgdGhpcy5fcG9pbnRlck1vdmVNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZW50ZXIiLCB0aGlzLl9wb2ludGVyRW50ZXJNZXRob2QpOwogICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybGVhdmUiLCB0aGlzLl9wb2ludGVyRXhpdE1ldGhvZCk7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCJjb21wbGV0ZSIsIHRoaXMuX29uQ29tcGxldGVNZXRob2QpOwogICAgICB9CiAgICB9CiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSB7CiAgICAgIHJldHVybiB0aGlzLl9kb3RMb3R0aWVDb3JlPy5sb2FkU3RhdGVNYWNoaW5lRGF0YShzdGF0ZU1hY2hpbmVEYXRhKSA/PyBmYWxzZTsKICAgIH0KICAgIGFuaW1hdGlvblNpemUoKSB7CiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fZG90TG90dGllQ29yZT8uYW5pbWF0aW9uU2l6ZSgpLmdldCgwKSA/PyAwOwogICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLl9kb3RMb3R0aWVDb3JlPy5hbmltYXRpb25TaXplKCkuZ2V0KDEpID8/IDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH07CiAgICB9CiAgICBzZXRTdGF0ZU1hY2hpbmVCb29sZWFuQ29udGV4dChuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gdGhpcy5fZG90TG90dGllQ29yZT8uc2V0U3RhdGVNYWNoaW5lQm9vbGVhbkNvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogICAgc2V0U3RhdGVNYWNoaW5lTnVtZXJpY0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZU51bWVyaWNDb250ZXh0KG5hbWUsIHZhbHVlKSA/PyBmYWxzZTsKICAgIH0KICAgIHNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2RvdExvdHRpZUNvcmU/LnNldFN0YXRlTWFjaGluZVN0cmluZ0NvbnRleHQobmFtZSwgdmFsdWUpID8/IGZhbHNlOwogICAgfQogIH07CiAgX19wdWJsaWNGaWVsZChfRG90TG90dGllLCAiX3dhc21Nb2R1bGUiLCBudWxsKTsKICB2YXIgRG90TG90dGllID0gX0RvdExvdHRpZTsKCiAgLy8gc3JjL3dvcmtlci9kb3Rsb3R0aWUud29ya2VyLnRzCiAgdmFyIGluc3RhbmNlc01hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgdmFyIGV2ZW50SGFuZGxlck1hcCA9IHsKICAgIHJlYWR5OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlYWR5IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgY29tcGxldGU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uQ29tcGxldGUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGxvYWRFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25Mb2FkIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBsb2FkRXJyb3I6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9hZEVycm9yRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uTG9hZEVycm9yIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogbG9hZEVycm9yRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIGxvb3A6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgbG9vcEV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkxvb3AiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBsb29wRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBsYXk6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgcGxheUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblBsYXkiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwbGF5RXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHBhdXNlOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHBhdXNlRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uUGF1c2UiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiBwYXVzZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBzdG9wOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHN0b3BFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25TdG9wIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogc3RvcEV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmFtZTogKGluc3RhbmNlSWQpID0+IChldmVudCkgPT4gewogICAgICBjb25zdCBmcmFtZUV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvbkZyYW1lIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJhbWVFdmVudAogICAgICAgIH0KICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9LAogICAgcmVuZGVyOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHJlbmRlckV2ZW50ID0gZXZlbnQ7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gewogICAgICAgIGlkOiAiIiwKICAgICAgICBtZXRob2Q6ICJvblJlbmRlciIsCiAgICAgICAgcmVzdWx0OiB7CiAgICAgICAgICBpbnN0YW5jZUlkLAogICAgICAgICAgZXZlbnQ6IHJlbmRlckV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBmcmVlemU6IChpbnN0YW5jZUlkKSA9PiAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uRnJlZXplIiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZnJlZXplRXZlbnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIHNlbGYucG9zdE1lc3NhZ2UocmVzcG9uc2UpOwogICAgfSwKICAgIHVuZnJlZXplOiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IHVuZnJlZXplRXZlbnQgPSBldmVudDsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG1ldGhvZDogIm9uVW5mcmVlemUiLAogICAgICAgIHJlc3VsdDogewogICAgICAgICAgaW5zdGFuY2VJZCwKICAgICAgICAgIGV2ZW50OiB1bmZyZWV6ZUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0sCiAgICBkZXN0cm95OiAoaW5zdGFuY2VJZCkgPT4gKGV2ZW50KSA9PiB7CiAgICAgIGNvbnN0IGRlc3Ryb3lFdmVudCA9IGV2ZW50OwogICAgICBjb25zdCByZXNwb25zZSA9IHsKICAgICAgICBpZDogIiIsCiAgICAgICAgbWV0aG9kOiAib25EZXN0cm95IiwKICAgICAgICByZXN1bHQ6IHsKICAgICAgICAgIGluc3RhbmNlSWQsCiAgICAgICAgICBldmVudDogZGVzdHJveUV2ZW50CiAgICAgICAgfQogICAgICB9OwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBjb21tYW5kcyA9IHsKICAgIGdldERvdExvdHRpZUluc3RhbmNlU3RhdGUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgY29uc3Qgc3RhdGUgPSB7CiAgICAgICAgaXNMb2FkZWQ6IGluc3RhbmNlLmlzTG9hZGVkLAogICAgICAgIGlzUGF1c2VkOiBpbnN0YW5jZS5pc1BhdXNlZCwKICAgICAgICBpc1BsYXlpbmc6IGluc3RhbmNlLmlzUGxheWluZywKICAgICAgICBpc1N0b3BwZWQ6IGluc3RhbmNlLmlzU3RvcHBlZCwKICAgICAgICBpc0Zyb3plbjogaW5zdGFuY2UuaXNGcm96ZW4sCiAgICAgICAgbG9vcDogaW5zdGFuY2UubG9vcCwKICAgICAgICBtb2RlOiBpbnN0YW5jZS5tb2RlLAogICAgICAgIHNwZWVkOiBpbnN0YW5jZS5zcGVlZCwKICAgICAgICBjdXJyZW50RnJhbWU6IGluc3RhbmNlLmN1cnJlbnRGcmFtZSwKICAgICAgICB0b3RhbEZyYW1lczogaW5zdGFuY2UudG90YWxGcmFtZXMsCiAgICAgICAgZHVyYXRpb246IGluc3RhbmNlLmR1cmF0aW9uLAogICAgICAgIHVzZUZyYW1lSW50ZXJwb2xhdGlvbjogaW5zdGFuY2UudXNlRnJhbWVJbnRlcnBvbGF0aW9uLAogICAgICAgIHJlbmRlckNvbmZpZzogaW5zdGFuY2UucmVuZGVyQ29uZmlnLAogICAgICAgIG1hcmtlcjogaW5zdGFuY2UubWFya2VyLAogICAgICAgIGJhY2tncm91bmRDb2xvcjogaW5zdGFuY2UuYmFja2dyb3VuZENvbG9yLAogICAgICAgIG1hcmtlcnM6IGluc3RhbmNlLm1hcmtlcnMoKSwKICAgICAgICBhY3RpdmVBbmltYXRpb25JZDogaW5zdGFuY2UuYWN0aXZlQW5pbWF0aW9uSWQsCiAgICAgICAgYWN0aXZlVGhlbWVJZDogaW5zdGFuY2UuYWN0aXZlVGhlbWVJZCwKICAgICAgICBhdXRvcGxheTogaW5zdGFuY2UuYXV0b3BsYXksCiAgICAgICAgc2VnbWVudDogaW5zdGFuY2Uuc2VnbWVudCwKICAgICAgICBsYXlvdXQ6IGluc3RhbmNlLmxheW91dCwKICAgICAgICBzZWdtZW50RHVyYXRpb246IGluc3RhbmNlLnNlZ21lbnREdXJhdGlvbiwKICAgICAgICBpc1JlYWR5OiBpbnN0YW5jZS5pc1JlYWR5LAogICAgICAgIG1hbmlmZXN0OiBpbnN0YW5jZS5tYW5pZmVzdAogICAgICB9OwogICAgICByZXR1cm4gewogICAgICAgIHN0YXRlCiAgICAgIH07CiAgICB9LAogICAgc2V0TGF5b3V0KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGxheW91dCA9IHJlcXVlc3QucGFyYW1zLmxheW91dDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TGF5b3V0KGxheW91dCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3VjY2VzczogdHJ1ZQogICAgICB9OwogICAgfSwKICAgIGdldFN0YXRlTWFjaGluZUxpc3RlbmVycyhyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0U3RhdGVNYWNoaW5lTGlzdGVuZXJzKCk7CiAgICB9LAogICAgcG9zdFN0YXRlTWFjaGluZUV2ZW50KHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGV2ZW50ID0gcmVxdWVzdC5wYXJhbXMuZXZlbnQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wb3N0U3RhdGVNYWNoaW5lRXZlbnQoZXZlbnQpOwogICAgfSwKICAgIHN0YXJ0U3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zdGFydFN0YXRlTWFjaGluZSgpOwogICAgfSwKICAgIHN0b3BTdGF0ZU1hY2hpbmUocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLnN0b3BTdGF0ZU1hY2hpbmUoKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lKHJlcXVlc3QpIHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHN0YXRlTWFjaGluZUlkID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkU3RhdGVNYWNoaW5lKHN0YXRlTWFjaGluZUlkKTsKICAgIH0sCiAgICBsb2FkU3RhdGVNYWNoaW5lRGF0YShyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzdGF0ZU1hY2hpbmVEYXRhID0gcmVxdWVzdC5wYXJhbXMuc3RhdGVNYWNoaW5lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRTdGF0ZU1hY2hpbmVEYXRhKHN0YXRlTWFjaGluZURhdGEpOwogICAgfSwKICAgIGNyZWF0ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHJlcXVlc3QucGFyYW1zLmNvbmZpZzsKICAgICAgY29uc3Qgd2lkdGggPSByZXF1ZXN0LnBhcmFtcy53aWR0aDsKICAgICAgY29uc3QgaGVpZ2h0ID0gcmVxdWVzdC5wYXJhbXMuaGVpZ2h0OwogICAgICBpZiAoaW5zdGFuY2VzTWFwLmhhcyhpbnN0YW5jZUlkKSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGFscmVhZHkgZXhpc3RzLmApOwogICAgICB9CiAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IERvdExvdHRpZShjb25maWcpOwogICAgICBpbnN0YW5jZS5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICBpbnN0YW5jZS5jYW52YXMud2lkdGggPSB3aWR0aDsKICAgICAgaW5zdGFuY2VzTWFwLnNldChpbnN0YW5jZUlkLCBpbnN0YW5jZSk7CiAgICAgIGNvbnN0IGV2ZW50cyA9IFsKICAgICAgICAiY29tcGxldGUiLAogICAgICAgICJmcmFtZSIsCiAgICAgICAgImxvYWQiLAogICAgICAgICJsb2FkRXJyb3IiLAogICAgICAgICJsb29wIiwKICAgICAgICAicGF1c2UiLAogICAgICAgICJwbGF5IiwKICAgICAgICAic3RvcCIsCiAgICAgICAgImRlc3Ryb3kiLAogICAgICAgICJmcmVlemUiLAogICAgICAgICJ1bmZyZWV6ZSIsCiAgICAgICAgInJlbmRlciIsCiAgICAgICAgInJlYWR5IgogICAgICBdOwogICAgICBldmVudHMuZm9yRWFjaCgoZXZlbnQpID0+IHsKICAgICAgICBpbnN0YW5jZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBldmVudEhhbmRsZXJNYXBbZXZlbnRdKGluc3RhbmNlSWQpKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5zdGFuY2VJZAogICAgICB9OwogICAgfSwKICAgIGRlc3Ryb3k6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHJldHVybjsKICAgICAgaW5zdGFuY2UuZGVzdHJveSgpOwogICAgICBpbnN0YW5jZXNNYXAuZGVsZXRlKGluc3RhbmNlSWQpOwogICAgfSwKICAgIGZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmZyZWV6ZSgpOwogICAgfSwKICAgIGxvYWQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBjb25maWcgPSByZXF1ZXN0LnBhcmFtcy5jb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLmxvYWQoY29uZmlnKTsKICAgIH0sCiAgICBsb2FkQW5pbWF0aW9uOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgYW5pbWF0aW9uSWQgPSByZXF1ZXN0LnBhcmFtcy5hbmltYXRpb25JZDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UubG9hZEFuaW1hdGlvbihhbmltYXRpb25JZCk7CiAgICB9LAogICAgbG9hZFRoZW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgdGhlbWVJZCA9IHJlcXVlc3QucGFyYW1zLnRoZW1lSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5sb2FkVGhlbWUodGhlbWVJZCk7CiAgICB9LAogICAgbG9hZFRoZW1lRGF0YTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHRoZW1lRGF0YSA9IHJlcXVlc3QucGFyYW1zLnRoZW1lRGF0YTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGluc3RhbmNlLmxvYWRUaGVtZURhdGEodGhlbWVEYXRhKTsKICAgIH0sCiAgICBwYXVzZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5wYXVzZSgpOwogICAgfSwKICAgIHBsYXk6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICByZXR1cm4gaW5zdGFuY2UucGxheSgpOwogICAgfSwKICAgIHJlc2l6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHdpZHRoID0gcmVxdWVzdC5wYXJhbXMud2lkdGg7CiAgICAgIGNvbnN0IGhlaWdodCA9IHJlcXVlc3QucGFyYW1zLmhlaWdodDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2UuY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgICAgaW5zdGFuY2UuY2FudmFzLndpZHRoID0gd2lkdGg7CiAgICAgIGluc3RhbmNlLnJlc2l6ZSgpOwogICAgICByZXR1cm4gewogICAgICAgIHN1Y2Nlc3M6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICBzZXRCYWNrZ3JvdW5kQ29sb3I6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSByZXF1ZXN0LnBhcmFtcy5iYWNrZ3JvdW5kQ29sb3I7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kQ29sb3IpOwogICAgfSwKICAgIHNldEZyYW1lOiAocmVxdWVzdCkgPT4gewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgZnJhbWUgPSByZXF1ZXN0LnBhcmFtcy5mcmFtZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0RnJhbWUoZnJhbWUpOwogICAgfSwKICAgIHNldE1vZGU6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBtb2RlID0gcmVxdWVzdC5wYXJhbXMubW9kZTsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TW9kZShtb2RlKTsKICAgIH0sCiAgICBzZXRSZW5kZXJDb25maWc6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCByZW5kZXJDb25maWcgPSByZXF1ZXN0LnBhcmFtcy5yZW5kZXJDb25maWc7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFJlbmRlckNvbmZpZyhyZW5kZXJDb25maWcpOwogICAgfSwKICAgIHNldFNlZ21lbnQ6IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBzZWdtZW50ID0gcmVxdWVzdC5wYXJhbXMuc2VnbWVudDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0U2VnbWVudChzZWdtZW50WzBdLCBzZWdtZW50WzFdKTsKICAgIH0sCiAgICBzZXRTcGVlZDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IHNwZWVkID0gcmVxdWVzdC5wYXJhbXMuc3BlZWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFNwZWVkKHNwZWVkKTsKICAgIH0sCiAgICBzZXRVc2VGcmFtZUludGVycG9sYXRpb246IChyZXF1ZXN0KSA9PiB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCB1c2VGcmFtZUludGVycG9sYXRpb24gPSByZXF1ZXN0LnBhcmFtcy51c2VGcmFtZUludGVycG9sYXRpb247CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnNldFVzZUZyYW1lSW50ZXJwb2xhdGlvbih1c2VGcmFtZUludGVycG9sYXRpb24pOwogICAgfSwKICAgIHNldFdhc21Vcmw6IChyZXF1ZXN0KSA9PiB7CiAgICAgIERvdExvdHRpZS5zZXRXYXNtVXJsKHJlcXVlc3QucGFyYW1zLnVybCk7CiAgICB9LAogICAgc3RvcDogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnN0b3AoKTsKICAgIH0sCiAgICB1bmZyZWV6ZTogKHJlcXVlc3QpID0+IHsKICAgICAgY29uc3QgaW5zdGFuY2VJZCA9IHJlcXVlc3QucGFyYW1zLmluc3RhbmNlSWQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIGluc3RhbmNlLnVuZnJlZXplKCk7CiAgICB9LAogICAgc2V0Vmlld3BvcnQocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgeCA9IHJlcXVlc3QucGFyYW1zLng7CiAgICAgIGNvbnN0IHkgPSByZXF1ZXN0LnBhcmFtcy55OwogICAgICBjb25zdCB3aWR0aCA9IHJlcXVlc3QucGFyYW1zLndpZHRoOwogICAgICBjb25zdCBoZWlnaHQgPSByZXF1ZXN0LnBhcmFtcy5oZWlnaHQ7CiAgICAgIGNvbnN0IGluc3RhbmNlID0gaW5zdGFuY2VzTWFwLmdldChpbnN0YW5jZUlkKTsKICAgICAgaWYgKCFpbnN0YW5jZSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2Ugd2l0aCBpZCAke2luc3RhbmNlSWR9IGRvZXMgbm90IGV4aXN0LmApOwogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZS5zZXRWaWV3cG9ydCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTsKICAgIH0sCiAgICBzZXRNYXJrZXIocmVxdWVzdCkgewogICAgICBjb25zdCBpbnN0YW5jZUlkID0gcmVxdWVzdC5wYXJhbXMuaW5zdGFuY2VJZDsKICAgICAgY29uc3QgbWFya2VyID0gcmVxdWVzdC5wYXJhbXMubWFya2VyOwogICAgICBjb25zdCBpbnN0YW5jZSA9IGluc3RhbmNlc01hcC5nZXQoaW5zdGFuY2VJZCk7CiAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RhbmNlIHdpdGggaWQgJHtpbnN0YW5jZUlkfSBkb2VzIG5vdCBleGlzdC5gKTsKICAgICAgfQogICAgICBpbnN0YW5jZS5zZXRNYXJrZXIobWFya2VyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9LAogICAgc2V0TG9vcChyZXF1ZXN0KSB7CiAgICAgIGNvbnN0IGluc3RhbmNlSWQgPSByZXF1ZXN0LnBhcmFtcy5pbnN0YW5jZUlkOwogICAgICBjb25zdCBsb29wID0gcmVxdWVzdC5wYXJhbXMubG9vcDsKICAgICAgY29uc3QgaW5zdGFuY2UgPSBpbnN0YW5jZXNNYXAuZ2V0KGluc3RhbmNlSWQpOwogICAgICBpZiAoIWluc3RhbmNlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnN0YW5jZSB3aXRoIGlkICR7aW5zdGFuY2VJZH0gZG9lcyBub3QgZXhpc3QuYCk7CiAgICAgIH0KICAgICAgaW5zdGFuY2Uuc2V0TG9vcChsb29wKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWNjZXNzOiB0cnVlCiAgICAgIH07CiAgICB9CiAgfTsKICBmdW5jdGlvbiBleGVjdXRlQ29tbWFuZChycGNSZXF1ZXN0KSB7CiAgICBjb25zdCBtZXRob2QgPSBycGNSZXF1ZXN0Lm1ldGhvZDsKICAgIGlmICh0eXBlb2YgY29tbWFuZHNbbWV0aG9kXSA9PT0gImZ1bmN0aW9uIikgewogICAgICByZXR1cm4gY29tbWFuZHNbbWV0aG9kXShycGNSZXF1ZXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgTWV0aG9kICR7bWV0aG9kfSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gY29tbWFuZHMuYCk7CiAgICB9CiAgfQogIHNlbGYub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXN1bHQgPSBleGVjdXRlQ29tbWFuZChldmVudC5kYXRhKTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSB7CiAgICAgICAgaWQ6IGV2ZW50LmRhdGEuaWQsCiAgICAgICAgbWV0aG9kOiBldmVudC5kYXRhLm1ldGhvZCwKICAgICAgICByZXN1bHQKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShyZXNwb25zZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zdCBlcnJvclJlc3BvbnNlID0gewogICAgICAgIGlkOiBldmVudC5kYXRhLmlkLAogICAgICAgIG1ldGhvZDogZXZlbnQuZGF0YS5tZXRob2QsCiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UKICAgICAgfTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZShlcnJvclJlc3BvbnNlKTsKICAgIH0KICB9OwogIHZhciBkdW1teSA9ICIiOwogIHZhciBkb3Rsb3R0aWVfd29ya2VyX2RlZmF1bHQgPSBkdW1teTsKfSkoKTsK",{type:"classic"})}},eU=class{constructor(){Dt(this,"_workers",new Map),Dt(this,"_animationWorkerMap",new Map)}getWorker(i){return this._workers.has(i)||this._workers.set(i,new qO),this._workers.get(i)}assignAnimationToWorker(i,e){this._animationWorkerMap.set(i,e)}unassignAnimationFromWorker(i){this._animationWorkerMap.delete(i)}sendMessage(i,e,t){this.getWorker(i).postMessage(e,t||[])}terminateWorker(i){let e=this._workers.get(i);e&&(e.terminate(),this._workers.delete(i))}};function Q5(i){if(i instanceof OffscreenCanvas)return{width:i.width,height:i.height};let{height:e,width:t}=i.getBoundingClientRect();return{width:t*window.devicePixelRatio,height:e*window.devicePixelRatio}}function q5(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}var ev=class Gl{constructor(e){Dt(this,"_eventManager",new y7),Dt(this,"_id"),Dt(this,"_worker"),Dt(this,"_canvas"),Dt(this,"_dotLottieInstanceState",{markers:[],autoplay:!1,backgroundColor:"",currentFrame:0,duration:0,loop:!1,mode:"forward",segment:[0,0],segmentDuration:0,speed:1,totalFrames:0,isLoaded:!1,isPlaying:!1,isPaused:!1,isStopped:!0,isFrozen:!1,useFrameInterpolation:!1,renderConfig:{devicePixelRatio:window.devicePixelRatio},activeAnimationId:"",activeThemeId:"",layout:void 0,marker:void 0,isReady:!1,manifest:null}),Dt(this,"_created",!1),Dt(this,"_pointerUpMethod"),Dt(this,"_pointerDownMethod"),Dt(this,"_pointerMoveMethod"),Dt(this,"_pointerEnterMethod"),Dt(this,"_pointerExitMethod"),Dt(this,"_onCompleteMethod"),this._canvas=e.canvas,this._id=`dotlottie-${q5()}`;let t=e.workerId||"defaultWorker";this._worker=Gl._workerManager.getWorker(t),Gl._workerManager.assignAnimationToWorker(this._id,t),Gl._wasmUrl&&this._sendMessage("setWasmUrl",{url:Gl._wasmUrl}),this._create(e),this._worker.addEventListener("message",this._handleWorkerEvent.bind(this)),this._pointerUpMethod=this._onPointerUp.bind(this),this._pointerDownMethod=this._onPointerDown.bind(this),this._pointerMoveMethod=this._onPointerMove.bind(this),this._pointerEnterMethod=this._onPointerEnter.bind(this),this._pointerExitMethod=this._onPointerLeave.bind(this),this._onCompleteMethod=this._onComplete.bind(this)}async _handleWorkerEvent(e){let t=e.data;t.id||(t.method==="onLoad"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onComplete"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onDestroy"&&t.result.instanceId===this._id&&this._eventManager.dispatch(t.result.event),t.method==="onUnfreeze"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._dotLottieInstanceState.isFrozen=!1,this._eventManager.dispatch(t.result.event)),t.method==="onFrame"&&t.result.instanceId===this._id&&(this._dotLottieInstanceState.currentFrame=t.result.event.currentFrame,this._eventManager.dispatch(t.result.event)),t.method==="onRender"&&t.result.instanceId===this._id&&this._eventManager.dispatch(t.result.event),t.method==="onFreeze"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onPause"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onPlay"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onStop"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onLoadError"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onReady"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)))}async _create(e){let t;this._canvas instanceof HTMLCanvasElement?t=this._canvas.transferControlToOffscreen():t=this._canvas;let{instanceId:n}=await this._sendMessage("create",{instanceId:this._id,config:{...e,canvas:t},...Q5(this._canvas)},[t]);if(n!==this._id)throw new Error("Instance ID mismatch");this._created=!0,await this._updateDotLottieInstanceState()}get isLoaded(){return this._dotLottieInstanceState.isLoaded}get isPlaying(){return this._dotLottieInstanceState.isPlaying}get isPaused(){return this._dotLottieInstanceState.isPaused}get isStopped(){return this._dotLottieInstanceState.isStopped}get currentFrame(){return this._dotLottieInstanceState.currentFrame}get isFrozen(){return this._dotLottieInstanceState.isFrozen}get segmentDuration(){return this._dotLottieInstanceState.segmentDuration}get totalFrames(){return this._dotLottieInstanceState.totalFrames}get segment(){return this._dotLottieInstanceState.segment}get speed(){return this._dotLottieInstanceState.speed}get duration(){return this._dotLottieInstanceState.duration}get isReady(){return this._dotLottieInstanceState.isReady}get mode(){return this._dotLottieInstanceState.mode}get canvas(){return this._canvas}get autoplay(){return this._dotLottieInstanceState.autoplay}get backgroundColor(){return this._dotLottieInstanceState.backgroundColor}get loop(){return this._dotLottieInstanceState.loop}get useFrameInterpolation(){return this._dotLottieInstanceState.useFrameInterpolation}get renderConfig(){return this._dotLottieInstanceState.renderConfig}get manifest(){return this._dotLottieInstanceState.manifest}get activeAnimationId(){return this._dotLottieInstanceState.activeAnimationId}get marker(){return this._dotLottieInstanceState.marker}get activeThemeId(){return this._dotLottieInstanceState.activeThemeId}get layout(){return this._dotLottieInstanceState.layout}async play(){this._created&&(await this._sendMessage("play",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async pause(){this._created&&(await this._sendMessage("pause",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async stop(){this._created&&(await this._sendMessage("stop",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSpeed(e){this._created&&(await this._sendMessage("setSpeed",{instanceId:this._id,speed:e}),await this._updateDotLottieInstanceState())}async setMode(e){this._created&&(await this._sendMessage("setMode",{instanceId:this._id,mode:e}),await this._updateDotLottieInstanceState())}async setFrame(e){this._created&&(await this._sendMessage("setFrame",{frame:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSegment(e,t){this._created&&(await this._sendMessage("setSegment",{instanceId:this._id,segment:[e,t]}),await this._updateDotLottieInstanceState())}async setRenderConfig(e){this._created&&(await this._sendMessage("setRenderConfig",{instanceId:this._id,renderConfig:e}),await this._updateDotLottieInstanceState())}async setUseFrameInterpolation(e){this._created&&(await this._sendMessage("setUseFrameInterpolation",{instanceId:this._id,useFrameInterpolation:e}),await this._updateDotLottieInstanceState())}async loadTheme(e){if(!this._created)return!1;let t=this._sendMessage("loadTheme",{instanceId:this._id,themeId:e});return await this._updateDotLottieInstanceState(),t}async load(e){this._created&&(await this._sendMessage("load",{config:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLoop(e){this._created&&(await this._sendMessage("setLoop",{instanceId:this._id,loop:e}),await this._updateDotLottieInstanceState())}async resize(){if(!this._created)return;let{height:e,width:t}=Q5(this._canvas);this._canvas.width=t,this._canvas.height=e,await this._sendMessage("resize",{height:e,instanceId:this._id,width:t}),await this._updateDotLottieInstanceState()}async destroy(){this._created&&(this._created=!1,await this._sendMessage("destroy",{instanceId:this._id}),this._cleanupStateMachineListeners(),Gl._workerManager.unassignAnimationFromWorker(this._id),this._eventManager.removeAllEventListeners())}async freeze(){this._created&&(await this._sendMessage("freeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async unfreeze(){this._created&&(await this._sendMessage("unfreeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setBackgroundColor(e){this._created&&(await this._sendMessage("setBackgroundColor",{instanceId:this._id,backgroundColor:e}),await this._updateDotLottieInstanceState())}async loadAnimation(e){this._created&&(await this._sendMessage("loadAnimation",{animationId:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLayout(e){this._created&&(await this._sendMessage("setLayout",{instanceId:this._id,layout:e}),await this._updateDotLottieInstanceState())}async _updateDotLottieInstanceState(){if(!this._created)return;let e=await this._sendMessage("getDotLottieInstanceState",{instanceId:this._id});this._dotLottieInstanceState=e.state}markers(){return this._dotLottieInstanceState.markers}async setMarker(e){this._created&&(await this._sendMessage("setMarker",{instanceId:this._id,marker:e}),await this._updateDotLottieInstanceState())}async loadThemeData(e){if(!this._created)return!1;let t=await this._sendMessage("loadThemeData",{instanceId:this._id,themeData:e});return await this._updateDotLottieInstanceState(),t}async setViewport(e,t,n,r){return this._created?this._sendMessage("setViewport",{x:e,y:t,width:n,height:r,instanceId:this._id}):!1}async _sendMessage(e,t,n){let r={id:`dotlottie-request-${q5()}`,method:e,params:t};return this._worker.postMessage(r,n||[]),new Promise((s,o)=>{let a=l=>{let c=l.data;c.id===r.id&&(this._worker.removeEventListener("message",a),c.error?o(new Error(`Failed to execute method ${e}: ${c.error}`)):s(c.result))};this._worker.addEventListener("message",a)})}addEventListener(e,t){this._eventManager.addEventListener(e,t)}removeEventListener(e,t){this._eventManager.removeEventListener(e,t)}static setWasmUrl(e){Gl._wasmUrl=e}async loadStateMachine(e){if(!this._created)return!1;let t=await this._sendMessage("loadStateMachine",{instanceId:this._id,stateMachineId:e});return await this._updateDotLottieInstanceState(),t}async loadStateMachineData(e){if(!this._created)return!1;let t=await this._sendMessage("loadStateMachineData",{instanceId:this._id,stateMachineData:e});return await this._updateDotLottieInstanceState(),t}async startStateMachine(){if(!this._created)return!1;this._setupStateMachineListeners();let e=await this._sendMessage("startStateMachine",{instanceId:this._id});return await this._updateDotLottieInstanceState(),e}async stopStateMachine(){return this._created?(this._cleanupStateMachineListeners(),this._sendMessage("stopStateMachine",{instanceId:this._id})):!1}async postStateMachineEvent(e){return this._created?this._sendMessage("postStateMachineEvent",{event:e,instanceId:this._id}):1}async getStateMachineListeners(){return this._created?this._sendMessage("getStateMachineListeners",{instanceId:this._id}):[]}_getPointerPosition(e){let t=this._canvas.getBoundingClientRect(),n=this._canvas.width/t.width,r=this._canvas.height/t.height,s=this._dotLottieInstanceState.renderConfig.devicePixelRatio||window.devicePixelRatio||1,o=(e.clientX-t.left)*n/s,a=(e.clientY-t.top)*r/s;return{x:o,y:a}}_onPointerUp(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerUp: ${t} ${n}`)}_onPointerDown(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerDown: ${t} ${n}`)}_onPointerMove(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerMove: ${t} ${n}`)}_onPointerEnter(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerEnter: ${t} ${n}`)}_onPointerLeave(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerExit: ${t} ${n}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}async _setupStateMachineListeners(){if(Hl&&this._canvas instanceof HTMLCanvasElement&&this.isLoaded){let e=await this._sendMessage("getStateMachineListeners",{instanceId:this._id});e.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._pointerUpMethod),e.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._pointerDownMethod),e.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._pointerMoveMethod),e.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._pointerEnterMethod),e.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._pointerExitMethod),e.includes("Complete")&&this.addEventListener("complete",this._onCompleteMethod)}}_cleanupStateMachineListeners(){Hl&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._pointerUpMethod),this._canvas.removeEventListener("pointerdown",this._pointerDownMethod),this._canvas.removeEventListener("pointermove",this._pointerMoveMethod),this._canvas.removeEventListener("pointerenter",this._pointerEnterMethod),this._canvas.removeEventListener("pointerleave",this._pointerExitMethod),this.removeEventListener("complete",this._onCompleteMethod))}};Dt(ev,"_workerManager",new eU),Dt(ev,"_wasmUrl","");const tU=wt("<br>"),nU=i=>{const[e,t]=Gr(i,["children","tag","isTriggered","ref","spacing"]),n=Sn(!1);return mt(()=>{e.isTriggered&&n(!0)}),F($.Generic,$n({get as(){return e.tag??"div"},ref(r){const s=e.ref;typeof s=="function"?s(r):e.ref=r},get css(){return{"span > span":{display:"inline-block"},"> span":{paddingBottom:`${e.spacing??6}rem`,marginBottom:`-${e.spacing??6}rem`}}}},t,{get children(){return F(Nn,{get each(){return e.children.replace(`
`,`

`).split(/[ \n]/)},children:(r,s)=>r===""?dt(tU):[F($.Generic,{css:{display:"inline-flex",overflow:"hidden"},as:"span",get children(){return F($.Generic,{css:{willChange:"transform"},as:"span",get style(){return{transform:n()?"skewY(0deg) translateY(0)":"skewY(10deg) translateY(115%)",transition:`transform 1000ms cubic-bezier(0.25, 0, 0.1, 1) ${s()*.04}s, opacity 0.3s ease ${s()*.04}s`,opacity:n()?1:0}},children:r})}})," "]})}}))},Ql=Sn(null),N0=i=>{let e=!1;an(()=>{e&&Ql(null)});function t(n){i.isDisabled||i.exclude?.().includes(n.target)||(Ql({type:i.type,isDraggable:i.isDraggable??!1}),e=!0)}return mt(()=>{i.override===!1&&(Ql(null),e=!1)}),F(i.children,{onMouseEnter:t,onMouseMove:t,onMouseLeave:()=>{Ql(null),e=!1}})},iU=wt('<svg width="144" height="145" viewBox="0 0 144 145" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M72 144.002C32.2987 144.002 0 111.703 0 72.002C0 32.3007 32.2987 0.00195312 72 0.00195312C111.701 0.00195312 144 32.3007 144 72.002C144 111.703 111.701 144.002 72 144.002ZM72 24.002C45.5325 24.002 24 45.5345 24 72.002C24 98.4695 45.5325 120.002 72 120.002C98.4675 120.002 120 98.4695 120 72.002C120 45.5345 98.4675 24.002 72 24.002Z" fill="white" style="fill:white;fill:white;fill-opacity:1;">'),rU=(i={})=>(()=>{const e=dt(iU);return ln(e,i,!0,!0),Cn(),e})(),Au=i=>(mt(()=>{for(const[e,t]of Object.entries(i))if(e.startsWith("on")){const n=e.slice(2).toLowerCase();let r=t,s={};Array.isArray(t)&&([r,s]=t),window.addEventListener(n,r,s),an(()=>{window.removeEventListener(n,r,s)})}}),null),sU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M60.973 0.501709L59.7505 0.527959V0.531709L59.9605 9.68546L68.1317 9.49796L68.1055 8.42546L61.1567 8.58296L60.973 0.501709ZM48.402 2.42938C50.7045 1.80688 52.6732 2.48938 53.7719 4.05313L52.9282 4.83688C52.0094 3.53938 50.5244 2.99188 48.7019 3.48313C46.3994 4.10563 45.1094 5.97688 45.6757 8.05813C46.242 10.1394 48.297 11.0994 50.5994 10.4769C52.422 9.98188 53.4232 8.75938 53.562 7.17688L54.687 7.42813C54.5294 9.33313 53.1757 10.9156 50.8732 11.5419C47.9332 12.3406 45.1994 11.0319 44.4832 8.38438C43.7669 5.73688 45.4657 3.22813 48.4057 2.43313L48.402 2.42938ZM40.085 15.4795L41.1837 14.9395L37.1525 6.71948L36.0537 7.25948L40.085 15.4795ZM32.31 20.2419L27.4668 13.7718L30.9263 11.1819L30.285 10.3231L22.3838 16.2369L23.025 17.0956L26.4863 14.5044L31.3313 20.9769L32.31 20.2419ZM104.513 25.9155L105.308 26.8493V26.8455L108.229 24.3593L110.791 27.3705L109.538 31.818L110.446 32.8868L111.706 28.3493C112.838 29.328 114.154 29.478 115.272 28.5293C116.603 27.3968 116.431 25.7993 115.193 24.3443L111.484 19.983L104.513 25.9155ZM114.499 27.618C113.712 28.2855 112.756 28.0455 111.912 27.0555L109.036 23.6768L111.473 21.603L114.349 24.9818C115.193 25.9718 115.287 26.9468 114.499 27.618ZM123.864 40.7054L124.824 40.2292V40.2254L121.036 32.6279L112.842 36.7117L116.63 44.3092L117.59 43.8329L114.335 37.3079L117.129 35.9129L120.057 41.7892L121.017 41.3129L118.089 35.4367L120.609 34.1804L123.864 40.7054ZM128.269 52.0042L120.334 58.6304L120.06 57.3592L122.262 55.5292L121.062 49.9567L118.302 49.1804L118.028 47.9092L127.992 50.6917L128.273 52.0004L128.269 52.0042ZM122.224 50.2792L123.188 54.7529L126.957 51.6067L122.224 50.2792ZM129.511 67.8479L129.709 63.3254L120.563 62.9279L120.364 67.4504C120.229 70.5179 121.924 72.6366 124.714 72.7566C127.504 72.8766 129.376 70.9191 129.511 67.8479ZM124.771 71.5191C122.644 71.4291 121.321 69.8654 121.426 67.4954H121.422L121.568 64.1691L128.599 64.4766L128.457 67.7878C128.352 70.1691 126.912 71.6129 124.771 71.5191ZM123.443 92.5116L113.119 93.0629L113.663 91.8816L116.52 91.7354L118.898 86.5566L117.15 84.2804L117.694 83.0991L124.005 91.2966L123.447 92.5116H123.443ZM117.728 91.6716L119.636 87.5136L122.629 91.4091L117.728 91.6716ZM110.705 96.6405L109.932 97.593H109.936L112.917 100.008L110.427 103.079L105.822 102.663L104.941 103.754L109.632 104.159C108.878 105.453 108.972 106.777 110.112 107.699C111.47 108.798 113.007 108.337 114.211 106.852L117.815 102.404L110.705 96.6405ZM110.866 106.769C110.063 106.117 110.123 105.131 110.941 104.122V104.126L113.735 100.679L116.221 102.693L113.427 106.139C112.61 107.148 111.668 107.422 110.866 106.769ZM102.72 116.103L97.8525 109.649L98.8313 108.91L103.699 115.364L107.149 112.762L107.794 113.617L99.915 119.56L99.2701 118.705L102.72 116.103ZM90.0911 114.434L88.9961 114.978L93.0536 123.183L94.1486 122.639L90.0911 114.434ZM81.8306 127.507C79.5319 128.14 77.5631 127.465 76.4569 125.905L77.2969 125.118C78.2194 126.412 79.7044 126.955 81.5231 126.453C83.8219 125.819 85.1044 123.948 84.5344 121.87C83.9644 119.793 81.9019 118.84 79.6031 119.47C77.7844 119.969 76.7869 121.199 76.6519 122.782L75.5269 122.534C75.6769 120.629 77.0269 119.043 79.3219 118.409C82.2581 117.599 84.9956 118.897 85.7231 121.54C86.4506 124.184 84.7631 126.697 81.8231 127.507H81.8306ZM69.2596 129.487L70.482 129.453L70.2383 120.307L62.0708 120.524L62.1008 121.593L69.0458 121.409L69.2596 129.487ZM47.2363 127.263L47.4576 126.217L54.5938 127.721L55.1751 124.964L48.7513 123.611L48.9726 122.564L55.3963 123.918L56.0413 120.862L48.9051 119.358L49.1263 118.312L57.4326 120.063L55.5426 129.018L47.2363 127.267V127.263ZM35.6853 114.093C34.7666 113.545 33.6341 113.8 33.0566 114.764C32.4716 115.735 32.7828 116.857 33.7016 117.408C34.6316 117.967 35.7903 117.723 36.3716 116.748C36.9453 115.784 36.6153 114.648 35.6853 114.093ZM24.5554 103.012L25.3467 103.946L18.3529 109.852L14.6592 105.479C13.4254 104.017 13.2604 102.423 14.5954 101.294C15.7167 100.349 17.0329 100.503 18.1617 101.486L19.4367 96.9518L20.3404 98.0243L19.0729 102.468L21.6229 105.487L24.5554 103.012ZM17.9517 102.783C17.1117 101.789 16.1554 101.546 15.3679 102.213C14.5804 102.881 14.6704 103.856 15.5067 104.849L18.3717 108.239L20.8167 106.173L17.9517 102.783ZM6.04691 89.0842L5.08691 89.5567L8.84816 97.1692L17.0569 93.1154L13.2957 85.5029L12.3357 85.9792L15.5644 92.5192L12.7632 93.9029L9.85316 88.0154L8.89316 88.4879L11.8032 94.3754L9.27567 95.6242L6.04691 89.0842ZM1.68115 77.7628L9.6424 71.1665L9.9124 72.4378L7.70365 74.2603L8.88115 79.8365L11.6412 80.6203L11.9112 81.8915L1.95865 79.0715L1.68115 77.7628ZM7.71865 79.5103L6.7699 75.0328L2.9899 78.164L7.71865 79.5103ZM0.492226 61.9267L0.282227 66.4492L9.42848 66.8767L9.63848 62.3542C9.78098 59.283 8.09348 57.1642 5.30348 57.033C2.51348 56.9017 0.634726 58.8555 0.492226 61.9267ZM5.24723 58.2705C7.37348 58.368 8.69348 59.9355 8.58098 62.3055L8.42723 65.6317L1.39598 65.3017L1.54973 61.9905C1.66223 59.6092 3.10598 58.1692 5.24723 58.2705ZM6.65658 37.278L16.9841 36.7643L16.4366 37.9455L13.5753 38.0805L11.1791 43.2518L12.9191 45.5318L12.3716 46.713L6.09033 38.4893L6.65283 37.2743L6.65658 37.278ZM10.4441 42.2955L12.3678 38.1405L7.46283 38.3843L10.4441 42.2955ZM19.4116 33.2017L20.1878 32.253H20.1841L17.2103 29.823L19.7116 26.763L24.3128 27.198L25.2016 26.1105L20.5103 25.6868C21.2678 24.393 21.1816 23.0692 20.0453 22.143C18.6916 21.0367 17.1541 21.4905 15.9428 22.9717L12.3203 27.408L19.4116 33.2017ZM19.2878 23.0692C20.0866 23.7255 20.0228 24.708 19.2016 25.7167L16.3928 29.1555L13.9141 27.1305L16.7228 23.6917C17.5441 22.683 18.4891 22.4167 19.2878 23.0692ZM82.9963 2.80062L82.7713 3.84687L75.6388 2.31687L75.0463 5.07312L81.4663 6.45312L81.2413 7.49937L74.8213 6.11937L74.165 9.17562L81.2975 10.7056L81.0725 11.7519L72.77 9.96688L74.6938 1.01562L82.9963 2.80062ZM94.4867 16.0119C95.4055 16.5669 96.5379 16.3119 97.1192 15.3519C97.7042 14.3807 97.4005 13.2594 96.4817 12.7044C95.5555 12.1457 94.3967 12.3857 93.8117 13.3569C93.2304 14.3169 93.5605 15.4532 94.4867 16.0119Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),oU=(i={})=>(()=>{const e=dt(sU);return ln(e,i,!0,!0),Cn(),e})(),aU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M56.8818 5.60191L56.6006 0.805659L57.8081 0.73441L58.0856 5.49316C58.2093 7.64566 59.3794 8.83816 61.6556 8.70691C63.9319 8.57566 64.9406 7.25191 64.8168 5.09941L64.5394 0.340659L65.7619 0.269409L66.0431 5.06566C66.2044 7.85191 64.7118 9.62566 61.7231 9.80191C58.7193 9.97816 57.0431 8.38816 56.8818 5.60191ZM48.6432 3.62535L50.7948 11.4144L49.6135 11.7406L47.461 3.94812L43.2948 5.09936L43.0098 4.06812L52.5235 1.44312L52.8085 2.47437L48.6432 3.62535ZM35.123 14.5491C36.6268 15.5204 38.4605 15.2541 39.8855 14.5341C41.5018 13.7204 42.3755 12.5391 41.918 11.6279C41.4193 10.6379 40.5455 10.8891 37.9655 11.8604C35.7267 12.7154 34.088 13.1429 33.2968 11.5716C32.5805 10.1504 33.5142 8.37664 35.678 7.28914C37.5792 6.33289 39.488 6.29914 40.6842 7.05289L40.208 8.09164C39.1805 7.46539 37.7105 7.46539 36.113 8.26789C34.4517 9.10414 33.893 10.1841 34.2793 10.9454C34.7143 11.8116 35.5992 11.5791 37.8267 10.7316C40.5267 9.71539 42.0943 9.31039 42.9305 10.9754C43.7443 12.5916 42.5517 14.3916 40.343 15.5054C38.3292 16.5216 36.0868 16.6079 34.6805 15.6591L35.123 14.5529V14.5491ZM24.5791 15.8165L23.844 15.0402L23.8403 15.0365L17.6753 20.8752L23.9716 27.524L30.1366 21.6852L29.4016 20.909L24.1066 25.9228L21.9578 23.654L26.724 19.139L25.989 18.3627L21.2228 22.8777L19.2841 20.8302L24.5791 15.8165ZM110.874 19.2179L106.966 28.7916H106.959L107.863 29.8641L117.973 27.6554L117.136 26.6616L108.301 28.6004L111.718 20.2229L110.874 19.2179ZM112.106 35.778L112.74 36.8242V36.8205L120.566 32.073L119.933 31.0267L112.106 35.778ZM126.283 44.0957L125.296 44.5119L122.469 37.7882L119.87 38.8794L122.416 44.9319L121.43 45.3482L118.884 39.2957L116.004 40.5069L118.831 47.2307L117.845 47.6469L114.553 39.8207L122.99 36.2694L126.283 44.0957ZM121.5 59.6768L128.937 55.8443L128.933 55.8368L128.73 54.5018L120.484 53.0543L127.891 49.0193L127.699 47.7593L119.157 52.473L119.382 53.9355L127.534 55.3605L120.181 59.1443L120.405 60.6068L129.968 62.5643L129.777 61.3155L121.5 59.6768ZM128.51 77.5003C128.067 79.8441 126.593 81.3141 124.707 81.6178L124.37 80.5153C125.937 80.2528 127.077 79.1616 127.43 77.3053C127.872 74.9616 126.755 72.9853 124.64 72.5841C122.525 72.1828 120.758 73.6116 120.316 75.9553C119.963 77.8078 120.627 79.2441 121.988 80.0616L121.272 80.9653C119.626 79.9903 118.797 78.0816 119.24 75.7416C119.806 72.7491 122.176 70.8628 124.868 71.3728C127.561 71.8828 129.076 74.5078 128.51 77.5003ZM113.923 91.6454L124.228 90.7904L124.749 89.5566L118.198 81.5466L117.692 82.7429L119.507 84.9666L117.283 90.2166L114.429 90.4491L113.923 91.6454ZM118.49 90.1191L120.275 85.9041L123.384 89.7141L118.49 90.1191ZM115.279 95.1633L115.279 95.1633L115.144 93.9821C113.457 93.8133 111.526 94.9533 110.232 96.8021C108.814 98.8271 108.616 100.976 110.101 102.015C111.627 103.083 112.816 101.985 114.709 99.8096C116.266 98.0058 116.933 97.3833 117.728 97.9383C118.429 98.4296 118.448 99.6408 117.383 101.167C116.359 102.63 115.062 103.327 113.862 103.263L113.937 104.403C115.343 104.501 117.012 103.563 118.231 101.82C119.618 99.8358 119.603 97.8333 118.298 96.9183C116.858 95.9096 115.613 97.0646 114.049 98.8796C112.238 100.957 111.589 101.595 110.682 100.957C109.846 100.372 110.056 98.9171 111.094 97.4321C112.005 96.1272 113.498 95.021 115.279 95.1633L115.279 95.1671V95.1633ZM106.243 114.888L106.246 114.892L106.243 114.888L106.243 114.888ZM106.243 114.888L105.508 114.115L110.795 109.09L108.853 107.047L104.094 111.569L103.355 110.793L108.114 106.27L105.961 104.005L100.674 109.03L99.9351 108.254L106.089 102.404L112.396 109.038L106.243 114.888ZM94.9579 115.402C93.4541 114.434 91.6204 114.704 90.1954 115.42C88.5791 116.238 87.7054 117.419 88.1666 118.33C88.6654 119.32 89.5391 119.065 92.1191 118.09C94.3579 117.232 95.9966 116.804 96.7916 118.372C97.5116 119.793 96.5779 121.567 94.4141 122.658C92.5129 123.618 90.6041 123.655 89.4079 122.902L89.8841 121.863C90.9116 122.485 92.3854 122.485 93.9791 121.679C95.6404 120.839 96.1954 119.759 95.8091 118.998C95.3704 118.132 94.4891 118.364 92.2616 119.219C89.5616 120.239 87.9941 120.644 87.1579 118.983C86.3404 117.367 87.5329 115.567 89.7379 114.449C91.7516 113.433 93.9941 113.343 95.4004 114.288L94.9616 115.398L94.9579 115.402ZM81.4495 126.356L79.2829 118.571L80.4604 118.241L82.6279 126.029L86.7942 124.871L87.0792 125.902L77.5692 128.546L77.2842 127.514L81.4495 126.356ZM73.2091 124.387L73.4978 129.183L72.2904 129.254L72.0053 124.496C71.8778 122.347 70.7079 121.151 68.4279 121.286C66.1479 121.421 65.1428 122.748 65.2703 124.897L65.5553 129.656L64.3328 129.73L64.0441 124.934C63.8791 122.148 65.3679 120.371 68.3566 120.194C71.3604 120.014 73.0366 121.601 73.2054 124.387H73.2091ZM54.9915 128.808L59.4652 129.506L60.8752 120.461L56.4015 119.763C53.364 119.291 51.0765 120.738 50.6452 123.498C50.214 126.258 51.954 128.336 54.9915 128.808ZM51.8677 123.689C52.1977 121.586 53.8965 120.446 56.2402 120.809V120.806L59.529 121.319L58.4452 128.276L55.1677 127.766C52.8127 127.398 51.5377 125.804 51.8677 123.689ZM39.0877 124.293L37.6777 123.775L43.9327 120.577L45.309 116.83L46.4452 117.247L45.069 120.993L47.7615 127.484L46.3365 126.959L44.1652 121.679L39.0877 124.293ZM32.1952 111.832C31.3214 111.217 30.1702 111.389 29.5252 112.308H29.5214C28.8727 113.238 29.0977 114.378 29.9752 114.993C30.8639 115.615 32.0339 115.458 32.6864 114.528C33.3314 113.609 33.0839 112.454 32.1952 111.832ZM22.9709 101.141L22.9699 101.143L22.0709 100.068L11.9609 102.258L12.7972 103.256L21.6359 101.332L18.2047 109.702L19.0484 110.707L22.9699 101.143L22.9709 101.144V101.141ZM17.8445 94.1432L17.2107 93.0969L9.37695 97.8294L10.0107 98.8757L17.8445 94.1432ZM3.68393 85.8068L4.67018 85.3943L7.48643 92.1218L10.0852 91.0343L7.54642 84.978L8.53268 84.5655L11.0714 90.6218L13.9514 89.4143L11.1352 82.6868L12.1214 82.2743L15.4027 90.1043L6.96143 93.6405L3.68018 85.8105L3.68393 85.8068ZM8.4875 70.2407L1.04751 74.0657H1.05124L1.25375 75.4007L9.49625 76.8595L2.08624 80.8832L2.2775 82.1432L10.8238 77.4445L10.6025 75.9819L2.45376 74.5495L9.81126 70.7769L9.59 69.3145L0.03125 67.3457L0.21875 68.5945L8.4875 70.2407ZM1.51318 52.3944C1.96318 50.0544 3.43691 48.5844 5.32316 48.2844L5.65692 49.3869C4.08942 49.6457 2.94567 50.7369 2.58942 52.5894C2.13942 54.9294 3.25317 56.9094 5.37192 57.3144C7.48692 57.7194 9.25316 56.2944 9.70316 53.9507C10.0594 52.0982 9.39941 50.6619 8.03816 49.8407L8.75442 48.9407C10.3969 49.9157 11.2257 51.8282 10.7757 54.1682C10.2019 57.1607 7.83192 59.0432 5.13942 58.5257C2.44692 58.0082 0.939425 55.3832 1.51318 52.3944ZM16.1259 38.2755L5.82091 39.1118L5.2959 40.3418L11.8284 48.363L12.3384 47.1668L10.5272 44.9393L12.7622 39.6968L15.6159 39.4718L16.1259 38.2755ZM11.5584 39.7943L9.76591 44.0055L6.66466 40.1918L11.5584 39.7943ZM14.7728 34.7579C16.554 34.9041 18.0465 33.7979 18.9615 32.4966C20.0002 31.0154 20.214 29.5604 19.3778 28.9716C18.4703 28.3341 17.8215 28.9716 16.0065 31.0454C14.439 32.8566 13.194 34.0079 11.754 32.9991C10.449 32.0841 10.4378 30.0816 11.829 28.0979C13.0515 26.3541 14.7202 25.4204 16.1265 25.5216L16.1977 26.6616C14.9977 26.5979 13.7003 27.2916 12.6728 28.7541C11.604 30.2766 11.6228 31.4916 12.324 31.9829C13.119 32.5379 13.7865 31.9191 15.3465 30.1154C17.244 27.9441 18.4365 26.8454 19.959 27.9141C21.4403 28.9529 21.2415 31.1054 19.8203 33.1304C18.5228 34.9791 16.5915 36.1116 14.904 35.9429L14.769 34.7579H14.7728ZM75.1027 1.21053L70.6327 0.509277L69.2114 9.55053L73.6814 10.2518C76.7152 10.728 79.0064 9.28053 79.4414 6.52428C79.8764 3.76803 78.1364 1.68678 75.1027 1.21053ZM78.2227 6.33678C77.8927 8.43678 76.1902 9.57678 73.8464 9.20928L73.8502 9.21303L70.5614 8.69553L71.6527 1.74303L74.9264 2.25678C77.2814 2.62803 78.5564 4.22178 78.2227 6.33678ZM91.0131 5.75194L92.4231 6.27319L86.1606 9.46444L84.7769 13.2069L83.6406 12.7869L85.0244 9.04444L82.3394 2.54944L83.7606 3.07444L85.9281 8.35819L91.0094 5.74819L91.0131 5.75194ZM97.8834 18.2278C98.7609 18.8466 99.9121 18.6741 100.557 17.7553C101.21 16.8291 100.985 15.6853 100.107 15.0703C99.2221 14.4478 98.0484 14.6053 97.3959 15.5316C96.7509 16.4466 96.9984 17.6053 97.8834 18.2278Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),lU=(i={})=>(()=>{const e=dt(aU);return ln(e,i,!0,!0),Cn(),e})(),cU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M68.4094 1.58569L68.0569 9.65944L66.8344 9.60694L67.1869 1.52944L62.8706 1.34194L62.9156 0.273193L72.7744 0.704444L72.7294 1.77319L68.4131 1.58569H68.4094ZM62.0939 3.11197C61.2164 1.41322 59.3601 0.468218 56.9939 0.775718H56.9976C53.9789 1.16947 51.9539 3.42322 52.3064 6.14197C52.6551 8.86072 55.1864 10.5257 58.2089 10.1357C60.5714 9.82822 62.1314 8.44447 62.5439 6.57697L61.4639 6.17572C61.1114 7.72822 59.9526 8.80072 58.0814 9.04447C55.7189 9.34822 53.8101 8.11822 53.5326 5.98072C53.2551 3.84322 54.7851 2.16697 57.1514 1.85947C59.0226 1.61947 60.4176 2.36197 61.1526 3.77197L62.0939 3.11197ZM46.2234 3.19821L53.5546 10.4845L52.3134 10.8745L50.2884 8.85321L44.8546 10.5632L44.3409 13.3832L43.0996 13.7732L44.9484 3.59571L46.2271 3.19446L46.2234 3.19821ZM45.0684 9.37446L49.4334 7.99821L45.9496 4.53696L45.0646 9.37071L45.0684 9.37446ZM40.8237 15.112L37.2162 7.87822L37.2199 7.88197L41.0861 5.95072L40.6061 4.99072L31.7749 9.39697L32.2549 10.357L36.1211 8.42572L39.7286 15.6595L40.8237 15.112ZM35.2319 18.0182L35.2301 18.0196L29.7044 10.7245L28.7707 11.4332L33.2407 17.3357L23.4232 15.4795L22.3882 16.2632L27.9157 23.5607L28.8494 22.852L24.2257 16.7432L34.3694 18.6707L35.2301 18.0196L35.2319 18.022V18.0182ZM23.7798 28.1618C25.8198 25.8818 25.8498 22.8818 23.8061 21.0555V21.0518C21.7623 19.2255 18.7848 19.593 16.7448 21.873C14.7048 24.153 14.6748 27.153 16.7186 28.9793C18.7623 30.8093 21.7398 30.4418 23.7798 28.1618ZM22.9623 27.4343C21.3648 29.2193 19.1485 29.4968 17.5435 28.0605V28.0643C15.9348 26.628 15.9648 24.393 17.5623 22.608C19.1598 20.8193 21.3686 20.553 22.9736 21.9893C24.5786 23.4255 24.5598 25.6455 22.9623 27.4343ZM115.49 29.0806C116.442 27.4231 116.228 25.3531 114.687 23.5306L114.691 23.5269C112.722 21.1981 109.73 20.7219 107.637 22.4919C105.545 24.2619 105.515 27.2919 107.484 29.6206C109.021 31.4431 111.031 31.9981 112.824 31.3344L112.572 30.2094C111.08 30.7569 109.546 30.3631 108.327 28.9231C106.786 27.1044 106.786 24.8319 108.432 23.4406C110.078 22.0494 112.317 22.4244 113.859 24.2469C115.077 25.6869 115.205 27.2619 114.421 28.6456L115.49 29.0806ZM119.533 30.3145L118.918 29.257L111.013 33.8695L115.13 40.927L116.056 40.387L112.554 34.387L119.533 30.3145ZM115.946 43.1395L115.451 42.022L123.821 38.317L124.316 39.4345L115.946 43.1395ZM125.592 51.9857C127.122 50.8419 127.744 48.8544 127.054 46.5744C126.169 43.6607 123.616 42.0369 120.991 42.8319C118.366 43.6269 117.139 46.3982 118.024 49.3119C118.718 51.5957 120.338 52.9007 122.247 53.0019L122.464 51.8694C120.878 51.7757 119.626 50.8082 119.078 49.0044C118.388 46.7207 119.288 44.6357 121.351 44.0132C123.413 43.3907 125.318 44.6244 126.008 46.9044C126.556 48.7082 126.049 50.2082 124.782 51.1644L125.592 51.9857ZM123.958 55.3045L129.519 60.8208L129.718 62.5683L125.24 58.0308L120.662 63.9483L120.474 62.302L124.427 57.2095L122.687 55.4433L119.735 55.777L119.597 54.562L128.694 53.5345L128.833 54.7495L123.954 55.3008L123.958 55.3045ZM127.935 73.5444L119.915 72.5432L120.065 71.3282L128.086 72.3294L128.622 68.0394L129.683 68.1707L128.461 77.9619L127.4 77.8307L127.935 73.5444ZM120.845 87.6184C118.224 86.8197 116.99 84.0822 117.882 81.1572C118.775 78.2322 121.325 76.6497 123.946 77.4484C126.567 78.2472 127.801 80.9809 126.909 83.9097C126.016 86.8347 123.466 88.4172 120.845 87.6184ZM123.586 78.6334C121.524 78.0034 119.634 79.1884 118.932 81.4797C118.235 83.7709 119.15 85.7959 121.209 86.4259C123.271 87.0559 125.157 85.8859 125.859 83.591C126.556 81.2997 125.645 79.2597 123.586 78.6334ZM115.059 101.527C116.934 101.909 118.831 101.051 120.072 99.0144L120.076 99.0069C121.662 96.4081 121.171 93.4194 118.831 91.9906C116.491 90.5656 113.607 91.4919 112.021 94.0944C110.776 96.1269 110.881 98.2081 112.077 99.7006L113.067 99.1081C112.081 97.8631 111.969 96.2844 112.951 94.6756C114.192 92.6431 116.345 91.9269 118.186 93.0481C120.024 94.1731 120.372 96.4156 119.131 98.4519C118.149 100.064 116.694 100.687 115.134 100.376L115.059 101.527ZM105.784 109.323C103.759 107.478 103.819 104.478 105.878 102.217C107.941 99.9556 110.922 99.6181 112.947 101.467C114.972 103.312 114.916 106.312 112.853 108.573C110.791 110.834 107.809 111.172 105.784 109.327V109.323ZM112.114 102.378C110.521 100.927 108.304 101.182 106.688 102.956C105.072 104.729 105.031 106.949 106.624 108.401C108.218 109.852 110.427 109.604 112.039 107.834C113.652 106.064 113.704 103.829 112.111 102.378H112.114ZM95.1982 111.615L94.3281 112.26L99.7881 119.61L100.729 118.908L96.3119 112.961L106.114 114.907L107.157 114.131L101.697 106.781L100.756 107.482L105.327 113.636L95.1982 111.615ZM92.2667 122.377L88.7229 115.109L89.8217 114.573L93.3654 121.841L97.2504 119.947L97.7192 120.911L88.8467 125.238L88.3779 124.274L92.2629 122.381L92.2667 122.377ZM75.9385 119.624L83.2022 126.978H83.206L84.4847 126.588L86.4272 116.429L85.1822 116.808L84.6422 119.624L79.1897 121.286L77.1835 119.246L75.9385 119.624ZM80.041 122.144L84.4172 120.813H84.421L83.491 125.639L80.041 122.144ZM72.4132 129.299C70.0469 129.584 68.1982 128.624 67.3357 126.918L68.2844 126.266C69.0082 127.679 70.3957 128.437 72.2669 128.212C74.6332 127.927 76.1819 126.266 75.9232 124.124C75.6644 121.987 73.7707 120.738 71.4044 121.023C69.5294 121.248 68.3632 122.313 67.9957 123.858L66.9194 123.449C67.3507 121.586 68.9182 120.217 71.2844 119.932C74.3107 119.568 76.8232 121.256 77.1494 123.978C77.4757 126.701 75.4357 128.936 72.4094 129.299H72.4132ZM61.4325 120.315L61.0087 128.388L56.6925 128.16L56.6362 129.228L66.4912 129.746L66.5475 128.677L62.2312 128.448L62.655 120.378L61.4325 120.315ZM52.0554 123.547L50.6642 128.148L49.5055 127.796L50.8854 123.232C51.5079 121.169 50.8254 119.643 48.6392 118.983C46.4529 118.323 45.0504 119.216 44.4279 121.278L43.0479 125.842L41.8779 125.486L43.2692 120.884C44.0792 118.211 46.0892 117.063 48.9579 117.929C51.8379 118.799 52.8654 120.869 52.0554 123.543V123.547ZM39.2787 115.162C40.7 115.882 42.0012 117.206 42.1099 118.991L43.265 118.691C43.1975 116.996 41.7987 115.241 39.7887 114.217C37.5837 113.096 35.4274 113.201 34.6062 114.813C33.7624 116.471 35.0149 117.494 37.4337 119.069C39.4362 120.359 40.145 120.937 39.7062 121.799C39.3162 122.561 38.1162 122.752 36.4587 121.908C34.8687 121.098 33.9987 119.913 33.8937 118.713L32.7725 118.946C32.87 120.356 34.0287 121.874 35.9262 122.842C38.0862 123.941 40.0662 123.648 40.7899 122.227C41.5887 120.656 40.2724 119.587 38.2587 118.289C35.9487 116.786 35.2287 116.235 35.7312 115.244C36.1924 114.337 37.6662 114.341 39.2787 115.162ZM27.1895 110.46C27.8795 109.575 29.0382 109.458 29.882 110.115C30.737 110.782 30.9283 111.948 30.2383 112.833C29.5408 113.73 28.3633 113.831 27.5083 113.163C26.6645 112.503 26.492 111.352 27.1895 110.46ZM14.8475 101.396C13.91 103.061 14.1463 105.131 15.7025 106.938L15.7063 106.942C17.6938 109.252 20.69 109.698 22.7675 107.909C24.845 106.117 24.845 103.091 22.8538 100.781C21.2975 98.9769 19.2838 98.4369 17.4988 99.1194L17.7575 100.241C19.2463 99.6818 20.78 100.057 22.0138 101.486C23.5738 103.289 23.5925 105.562 21.9613 106.968C20.3263 108.378 18.0838 108.022 16.5275 106.214C15.2938 104.786 15.1475 103.211 15.92 101.819L14.8475 101.396ZM11.4128 101.246L10.7866 100.196L17.7316 96.0557L14.1728 90.0857L15.0916 89.5382L19.2766 96.5582L11.4128 101.246ZM14.7571 88.443L14.2508 87.3292L5.91455 91.113L6.42084 92.2267L14.7571 88.443ZM3.11701 83.9996C2.40451 81.7234 3.00826 79.7321 4.53076 78.5734L5.34453 79.3871C4.08453 80.3546 3.59327 81.8584 4.15952 83.6584C4.87202 85.9346 6.78827 87.1496 8.84702 86.5046C10.902 85.8596 11.7832 83.7671 11.0707 81.4946C10.5082 79.6946 9.2445 78.7384 7.65825 78.6634L7.86452 77.5309C9.77327 77.6134 11.4083 78.9071 12.1208 81.1796C13.032 84.0859 11.832 86.8684 9.21826 87.6859C6.60076 88.5034 4.03201 86.9059 3.12076 83.9996H3.11701ZM0.515022 69.7681L6.12878 75.2356H6.13254L1.25754 75.8319L1.40752 77.0469L10.4938 75.9369L10.3438 74.7219L7.39629 75.0819L5.64127 73.3306L9.54878 68.2044L9.34627 66.5581L4.82004 72.5169L0.30127 68.0206L0.515022 69.7681ZM1.98474 57.0294L10.0172 57.9594L9.87473 59.1744L1.84224 58.2444L1.34724 62.5382L0.282227 62.4144L1.41473 52.6082L2.47974 52.7319L1.98474 57.0257V57.0294ZM11.9667 49.3309C12.8292 46.3984 11.5729 43.6759 8.94419 42.8996V42.8959C6.31544 42.1196 3.78419 43.7246 2.91794 46.6609C2.05544 49.5971 3.31169 52.3196 5.94044 53.0959C8.56919 53.8721 11.1004 52.2671 11.9667 49.3309ZM10.9167 49.0196C10.2379 51.3221 8.35541 52.5184 6.28916 51.9109C4.22291 51.2996 3.29294 49.2709 3.97169 46.9721C4.65044 44.6734 6.52917 43.4884 8.59542 44.0959C10.6617 44.7034 11.5954 46.7209 10.9167 49.0196ZM9.62035 31.4993C10.8428 29.4518 12.7366 28.5781 14.6116 28.9418L14.5479 30.0931C12.9879 29.7968 11.5366 30.4306 10.5691 32.0506C9.34661 34.0981 9.71412 36.3368 11.5629 37.4431C13.4116 38.5493 15.5604 37.8143 16.7829 35.7668C17.7504 34.1468 17.6266 32.5718 16.6254 31.3343L17.6079 30.7343C18.8154 32.2156 18.9391 34.2931 17.7166 36.3406C16.1529 38.9543 13.2766 39.9106 10.9254 38.5043C8.57414 37.0981 8.0566 34.1131 9.62035 31.4993ZM78.7509 1.72815L77.4046 6.34065H77.3971C76.6134 9.0219 77.6596 11.0806 80.5471 11.9244C83.4234 12.7644 85.4259 11.5981 86.2096 8.9169L87.5596 4.3044L86.3859 3.9594L85.0471 8.53815C84.4434 10.6081 83.0484 11.5156 80.8584 10.8744C78.6684 10.2369 77.9709 8.71815 78.5746 6.64815L79.9134 2.0694L78.7509 1.72815ZM87.3882 10.8034L87.3883 10.8044L86.2407 11.1147C86.327 12.8097 87.737 14.5497 89.7582 15.5547C91.9707 16.6534 94.1269 16.5297 94.9332 14.9097C95.7619 13.2409 94.502 12.2322 92.0682 10.6797C90.0507 9.40841 89.3382 8.83841 89.7695 7.97216C90.1482 7.20716 91.3482 7.00466 93.0132 7.83341C94.6107 8.62841 95.492 9.80591 95.6082 11.0022L96.7257 10.7584C96.6132 9.35216 95.4395 7.84466 93.5345 6.89591C91.367 5.81591 89.387 6.13092 88.6782 7.55591C87.8945 9.13091 89.222 10.1884 91.247 11.4672C93.5682 12.9522 94.2957 13.4959 93.8007 14.4897C93.347 15.4047 91.8732 15.4122 90.2532 14.6059C88.8247 13.8973 87.5124 12.5889 87.3883 10.8044L87.392 10.8034H87.3882ZM99.7012 19.5633C100.552 20.2158 101.707 20.0883 102.39 19.1958L102.386 19.1921C103.076 18.2921 102.896 17.1408 102.045 16.4921C101.182 15.8358 100.009 15.9483 99.3187 16.8483C98.64 17.7408 98.8387 18.9071 99.7012 19.5633Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),hU=(i={})=>(()=>{const e=dt(cU);return ln(e,i,!0,!0),Cn(),e})(),uU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M75.2301 1.07577L75.1364 2.14077L67.8726 1.49577L67.6214 4.30077L74.1614 4.88202L74.0676 5.94702L67.5276 5.36577L67.2501 8.47827L74.5139 9.12327L74.4201 10.1883L65.9639 9.43827L66.7739 0.322021L75.2301 1.07202V1.07577ZM55.9361 10.1544L57.1549 10.0494H57.1586L56.8249 6.22443L60.7624 5.87943L63.6611 9.47943L65.0599 9.35568L62.0899 5.69943C63.5449 5.34318 64.4299 4.35693 64.3024 2.89443C64.1486 1.15443 62.7499 0.370677 60.8449 0.535677L55.1411 1.03443L55.9361 10.1544ZM63.1061 2.99943C63.1961 4.03068 62.4461 4.67193 61.1486 4.78443V4.78068L56.7274 5.16693L56.4499 1.97943L60.8711 1.59318C62.1686 1.48068 63.0161 1.97193 63.1061 2.99943ZM46.0775 3.23575L46.0811 3.24073L44.795 3.64825L44.645 12.0183L39.5075 5.32825L38.2925 5.7145L44.2737 13.4208L45.6837 12.9708L45.8225 4.69825L50.7012 11.377L52.1112 10.927L52.5575 1.177L51.3537 1.5595L51.02 9.9895L46.0811 3.24073L46.085 3.2395L46.0775 3.23575ZM37.055 17.2907C39.6913 15.7419 40.6363 12.8957 39.2488 10.5332C37.8613 8.17067 34.9175 7.60817 32.2775 9.15692C29.6413 10.7057 28.6963 13.5519 30.0838 15.9144C31.4713 18.2769 34.4188 18.8394 37.055 17.2907ZM36.5 16.3494C34.4338 17.5607 32.2401 17.1482 31.1488 15.2919V15.2957C30.0576 13.4394 30.7663 11.3244 32.8326 10.1094C34.8988 8.89442 37.0813 9.31442 38.1726 11.1707C39.2638 13.0269 38.5663 15.1344 36.5 16.3494ZM25.5048 13.6907L31.6023 20.5232L30.6985 21.3294L27.9048 18.1982L22.7485 22.7994L25.5423 25.9307L24.6273 26.7444L18.5298 19.9119L19.4448 19.0982L22.036 22.0007L27.1923 17.3994L24.601 14.4969L25.5048 13.6907ZM104.518 25.9307L105.313 26.8607H105.316L108.234 24.3669L111.069 27.6819C112.325 29.1557 113.889 29.5307 115.198 28.4132C116.525 27.2769 116.368 25.7019 115.108 24.2282L111.478 19.9832L104.518 25.9307ZM114.406 27.4944C113.623 28.1657 112.67 27.9369 111.826 26.9469V26.9507L109.033 23.6844L111.466 21.6032L114.26 24.8694C115.104 25.8594 115.19 26.8232 114.406 27.4944ZM119.259 29.8794L118.633 28.8257L110.765 33.5057L114.943 40.5294L115.861 39.9819L112.31 34.0119L119.259 29.8794ZM125.761 43.0794L118.861 50.7782L118.408 49.5594L120.324 47.4294L118.333 42.0894L115.486 41.7219L115.033 40.5032L125.293 41.8232L125.761 43.0794ZM119.533 42.2432L121.13 46.5332L124.408 42.8769L119.533 42.2432ZM129.103 56.2398L129.103 56.2382L129.106 56.2419L129.103 56.2398ZM124.231 53.2644L129.103 56.2398L129.395 57.7157L123.406 54.0369L119.491 54.8094L119.259 53.6207L123.174 52.8482L127.318 47.1707L127.61 48.6594L124.231 53.2644ZM124.58 73.8857C121.842 73.7244 120.005 71.3544 120.185 68.3019C120.365 65.2494 122.469 63.1119 125.206 63.2732C127.944 63.4344 129.781 65.8044 129.601 68.8569C129.421 71.9094 127.317 74.0469 124.58 73.8857ZM125.131 64.5069C122.982 64.3794 121.419 65.9732 121.276 68.3657C121.134 70.7582 122.503 72.5094 124.651 72.6369C126.804 72.7644 128.364 71.1819 128.506 68.7894C128.649 66.3969 127.284 64.6307 125.131 64.5032V64.5069ZM128.69 76.6607L124.036 75.4644H124.04C121.336 74.7707 119.315 75.8844 118.565 78.7982C117.819 81.7007 119.053 83.6619 121.756 84.3557L126.41 85.5519L126.714 84.3669L122.094 83.1819C120.009 82.6457 119.056 81.2807 119.623 79.0719C120.189 76.8632 121.685 76.1132 123.77 76.6494L128.39 77.8344L128.69 76.6607ZM116.525 85.6757L117.042 84.5657L125.341 88.4282L122.926 93.6182C122.12 95.3507 120.74 96.1719 119.157 95.4369C117.83 94.8182 117.417 93.5582 117.834 92.1219L113.184 92.8682L113.776 91.5969L118.34 90.8807L120.009 87.2994L116.529 85.6794L116.525 85.6757ZM119.09 91.7619C118.542 92.9394 118.722 93.9107 119.66 94.3457C120.597 94.7807 121.445 94.2894 121.992 93.1119L123.864 89.0882L120.961 87.7382L119.09 91.7619ZM113.195 98.3764L113.199 98.3769H113.195L113.195 98.3764ZM113.195 98.3764C111.426 98.1196 109.872 99.1278 108.875 100.368C107.742 101.782 107.439 103.222 108.234 103.859C109.1 104.553 109.786 103.961 111.729 102.003C113.409 100.293 114.725 99.2244 116.097 100.323C117.342 101.321 117.226 103.319 115.711 105.209C114.38 106.871 112.659 107.696 111.256 107.508V106.364C112.452 106.503 113.791 105.896 114.905 104.501C116.067 103.046 116.124 101.834 115.46 101.302C114.702 100.694 113.997 101.272 112.325 102.974C110.292 105.022 109.036 106.042 107.581 104.876C106.167 103.743 106.505 101.613 108.05 99.6819C109.46 97.9194 111.462 96.9107 113.135 97.1882L113.195 98.3764ZM103.621 116.966L97.6436 110.036L98.5623 109.245L101.3 112.421L106.531 107.91L103.794 104.733L104.72 103.935L110.697 110.865L109.771 111.663L107.232 108.72L102.001 113.231L104.54 116.175L103.621 116.966ZM92.1316 113.178C89.4691 114.682 88.4753 117.513 89.8216 119.898C91.1716 122.287 94.1078 122.898 96.7703 121.395C99.4328 119.891 100.427 117.06 99.0803 114.675C97.7303 112.286 94.7941 111.675 92.1316 113.178ZM92.6716 114.135C94.7603 112.957 96.9466 113.407 98.0041 115.282V115.286C99.0616 117.161 98.3153 119.265 96.2303 120.442C94.1416 121.62 91.9666 121.162 90.9091 119.287C89.8516 117.408 90.5866 115.312 92.6716 114.135ZM82.8874 127.072L78.0612 120.236L77.5887 128.658L76.3774 129.022L76.9887 119.283L78.4062 118.859L83.1724 125.621L83.4537 117.352L84.8712 116.928L90.7212 124.736L89.4987 125.103L84.4774 118.327L84.1849 126.693L82.8912 127.079L82.8874 127.072ZM73.1376 119.992L71.9151 120.078V120.082L72.1851 123.911L68.2438 124.188L65.4051 120.539L64.0063 120.637L66.9126 124.342C65.4538 124.676 64.5501 125.647 64.6551 127.109C64.7751 128.853 66.1626 129.663 68.0714 129.528L73.7826 129.123L73.1376 119.992ZM65.8513 127.027C65.7763 125.996 66.5376 125.366 67.8351 125.276H67.8389L72.2638 124.964L72.4888 128.156L68.0638 128.467C66.7663 128.561 65.9226 128.058 65.8513 127.027ZM53.6938 128.752L53.8063 127.687L61.0588 128.452L61.3551 125.651L54.8263 124.961L54.9388 123.896L61.4676 124.586L61.7976 121.481L54.5451 120.716L54.6576 119.651L63.1026 120.543L62.1426 129.648L53.6976 128.756L53.6938 128.752ZM43.0139 124.766L42.7176 125.793L42.7139 125.797L50.8701 128.159L53.4164 119.366L45.2601 117.003L44.9639 118.031L51.9689 120.059L51.0989 123.059L44.7914 121.233L44.4951 122.261L50.8026 124.087L50.0189 126.794L43.0139 124.766ZM40.0774 124.713L38.9787 124.177L42.5224 116.909L36.2749 113.864L36.7437 112.901L44.0899 116.486L40.0774 124.713ZM30.4999 110.595C29.6486 109.946 28.4936 110.081 27.8149 110.973H27.8111C27.1286 111.877 27.3124 113.028 28.1674 113.673C29.0336 114.326 30.2074 114.21 30.8936 113.306C31.5686 112.413 31.3624 111.247 30.4999 110.595ZM25.3361 103.814L26.1461 104.729L19.2873 110.793L15.5898 106.612C14.3073 105.161 14.1236 103.586 15.4323 102.431C16.7223 101.291 18.2898 101.639 19.5723 103.091L22.4598 106.357L25.3361 103.814ZM18.8223 103.841C17.9598 102.866 17.0073 102.656 16.2348 103.338C15.4623 104.021 15.5636 104.984 16.4261 105.959L19.2723 109.177L21.6686 107.058L18.8223 103.841ZM11.9797 102.066L11.9824 102.071L11.9787 102.067L11.9797 102.066ZM19.7674 97.2557L11.9797 102.066L11.3374 101.028L18.2149 96.7795L14.5624 90.8657L15.4737 90.3032L19.7674 97.2557ZM4.61768 87.9444L11.3864 80.1294L11.8627 81.3407L9.98393 83.5006L12.0614 88.8069L14.9114 89.1256L15.3877 90.3369L5.10893 89.1894L4.62143 87.9444H4.61768ZM10.8577 88.6756L9.18892 84.4156L5.97518 88.1281L10.8577 88.6794V88.6756ZM0.732422 73.3645L1.04742 74.8345L1.05117 74.8382L5.97867 77.7332L2.67492 82.3945L2.99367 83.8795L7.03992 78.1308L10.9437 77.2908L10.6887 76.1058L6.78492 76.942L0.732422 73.3645ZM5.27738 57.1195C8.01488 57.2358 9.89363 59.572 9.76613 62.6283C9.63863 65.6845 7.56863 67.8558 4.82738 67.7395C2.08988 67.6233 0.211134 65.287 0.338634 62.227C0.466134 59.1708 2.53613 56.9995 5.27738 57.1158V57.1195ZM4.87988 66.5058C7.03238 66.5958 8.56613 64.9758 8.67113 62.5833C8.77238 60.187 7.37738 58.4583 5.22488 58.3683C3.07238 58.2783 1.53863 59.8833 1.43738 62.2795C1.33613 64.6758 2.73113 66.4158 4.88363 66.5095L4.87988 66.5058ZM1.11865 54.4194L5.7949 55.5331C8.5099 56.1819 10.5162 55.0344 11.2137 52.1094C11.9074 49.1956 10.6399 47.2569 7.9249 46.6081L3.24865 45.4944L2.96365 46.6831L7.6024 47.7894C9.69865 48.2881 10.6737 49.6344 10.1449 51.8544C9.61615 54.0744 8.1349 54.8469 6.03865 54.3481L1.3999 53.2419L1.11865 54.4194ZM13.1336 45.1983L12.6348 46.3158L4.26855 42.592L6.5973 37.3608C7.37355 35.6133 8.7423 34.7695 10.3361 35.4783C11.6748 36.0745 12.1098 37.327 11.7161 38.7745L16.3548 37.9495L15.7848 39.232L11.2323 40.0233L9.62356 43.6345L13.1298 45.1945L13.1336 45.1983ZM10.4636 39.1533C10.9923 37.9645 10.7936 36.997 9.8523 36.577C8.9073 36.157 8.07105 36.6633 7.5423 37.852L5.73856 41.9058L8.66356 43.207L10.4673 39.1533H10.4636ZM20.5324 30.3818C19.5574 31.6418 18.0162 32.6731 16.2424 32.4443V32.4556L16.3212 33.6443C17.9974 33.8918 19.9849 32.8493 21.3649 31.0643C22.8799 29.1106 23.1799 26.9731 21.7474 25.8631C20.2737 24.7231 19.0362 25.7618 17.0374 27.8431C15.3912 29.5681 14.6937 30.1568 13.9287 29.5643C13.2499 29.0393 13.2874 27.8243 14.4274 26.3543C15.5224 24.9443 16.8499 24.3106 18.0462 24.4306L18.0274 23.2868C16.6249 23.1181 14.9187 23.9731 13.6137 25.6568C12.1324 27.5693 12.0499 29.5718 13.3099 30.5468C14.7012 31.6231 15.9987 30.5318 17.6487 28.7956C19.5574 26.8081 20.2362 26.2043 21.1137 26.8831C21.9199 27.5056 21.6424 28.9493 20.5324 30.3818ZM85.9774 4.87438L86.2586 3.83938H86.2549L78.0574 1.61938L75.6611 10.4581L83.8586 12.6781L84.1399 11.6431L77.1011 9.73438L77.9186 6.71939L84.2561 8.43688L84.5374 7.40189L78.1999 5.68438L78.9386 2.96563L85.9774 4.87438ZM88.9211 4.88184L90.0311 5.39934L86.6111 12.7231L92.9074 15.6631L92.4536 16.6343L85.0474 13.1768L88.9211 4.88184ZM98.7313 18.8395C99.5976 19.4732 100.749 19.3195 101.413 18.4157L101.409 18.412C102.08 17.497 101.874 16.3532 101.011 15.7195C100.138 15.082 98.9638 15.217 98.2926 16.132C97.6326 17.0395 97.8576 18.1982 98.7313 18.8395Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),dU=(i={})=>(()=>{const e=dt(uU);return ln(e,i,!0,!0),Cn(),e})(),fU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M73.8274 5.40878C73.6699 8.14628 71.2999 9.98753 68.2436 9.81128C65.1874 9.63503 63.0499 7.53128 63.2074 4.79378C63.3649 2.05628 65.7349 0.215032 68.7911 0.391282C71.8474 0.567532 73.9849 2.67128 73.8274 5.40878ZM64.4449 4.86503C64.3211 7.01753 65.9149 8.57753 68.3074 8.71628C70.6999 8.85503 72.4549 7.48628 72.5786 5.33753C72.7024 3.18503 71.1199 1.62503 68.7274 1.48628C66.3349 1.34753 64.5686 2.71253 64.4449 4.86503ZM53.662 7.47355L53.6602 7.47127H53.664L53.662 7.47355ZM53.662 7.47355C54.7534 8.88916 56.5673 9.25241 58.149 9.05752C59.9452 8.83252 61.1677 8.01127 61.0402 7.00252C60.9015 5.90002 59.9977 5.84752 57.2415 5.89627C54.8452 5.95252 53.1577 5.80252 52.9402 4.05502C52.7415 2.47252 54.219 1.11877 56.6227 0.818771C58.734 0.556271 60.5452 1.16377 61.419 2.27752L60.6202 3.09502C59.8627 2.16127 58.4752 1.66627 56.7052 1.88752C54.8602 2.12002 53.9715 2.94877 54.0802 3.79627C54.2002 4.75627 55.1115 4.83877 57.4927 4.78252C60.3765 4.73002 61.989 4.87627 62.2177 6.72502C62.4427 8.52127 60.714 9.81502 58.2615 10.1225C56.0227 10.4038 53.8815 9.73252 52.8765 8.36752L53.662 7.47355ZM47.2552 5.62999L47.2538 5.6316C46.0046 4.20746 43.956 3.74491 41.7465 4.59874C38.8665 5.71249 37.4415 8.35249 38.4352 10.9212C39.429 13.49 42.234 14.5212 45.099 13.415C46.7715 12.755 47.8102 11.5475 47.9827 10.4412L48.5565 11.9262L49.6252 11.5137L47.9115 7.07749L42.714 9.08374L43.1002 10.0812L47.2852 8.46499C47.8215 9.99124 46.6177 11.6487 44.7015 12.3875C42.489 13.2425 40.3777 12.485 39.5977 10.4637C38.8215 8.45374 39.8902 6.48499 42.1365 5.61499C43.899 4.93249 45.4402 5.32249 46.4902 6.51499L47.2538 5.6316L47.259 5.63749L47.2552 5.62999ZM38.4125 16.2313L39.3275 15.6538H39.3312L34.4412 7.91382L33.4475 8.54007L37.4037 14.8026L27.7775 12.1213L26.6787 12.8151L31.5687 20.5551L32.5587 19.9288L28.4675 13.4488L38.4125 16.2313ZM30.2749 21.7962L29.3299 22.5725L23.5137 15.5075L24.4587 14.7312L30.2749 21.7962ZM15.0948 25.5275L23.7123 28.0212V28.0287L24.3985 27.275L21.121 18.9312L27.0648 24.3537L27.8635 23.4762L21.1023 17.3037L19.8573 18.6687L22.9923 26.6562L14.761 24.2525L13.4785 25.655L20.2398 31.8275L21.0385 30.95L15.0948 25.5275ZM114.688 23.5287C116.229 25.3512 116.443 27.4212 115.49 29.0787L114.421 28.6437C115.205 27.2599 115.078 25.6849 113.859 24.2449C112.318 22.4224 110.079 22.0474 108.433 23.4387C106.786 24.8299 106.786 27.1024 108.328 28.9212C109.546 30.3612 111.08 30.7549 112.573 30.2074L112.824 31.3324C111.031 31.9962 109.021 31.4412 107.484 29.6187C105.515 27.2899 105.545 24.2599 107.638 22.4899C109.73 20.7199 112.723 21.1962 114.691 23.5249L114.688 23.5287ZM119.971 40.3475C117.579 41.6862 114.751 40.685 113.259 38.015C111.766 35.345 112.385 32.4087 114.777 31.07C117.17 29.7312 119.997 30.7325 121.49 33.4025C122.986 36.0725 122.364 39.0087 119.971 40.3475ZM115.377 32.15C113.499 33.2037 113.041 35.3862 114.211 37.4787C115.381 39.5712 117.477 40.31 119.36 39.2562C121.239 38.2025 121.704 36.0275 120.53 33.9387C119.36 31.8462 117.256 31.0962 115.377 32.15ZM124.374 42.0801L117.845 48.2301L118.145 49.2051L126.995 50.6226L119.304 52.9851L119.653 54.1176L128.405 51.4288L127.861 49.6626L119.39 48.3051L125.645 42.4363L125.086 40.6213L116.334 43.3101L116.683 44.4426L124.374 42.0801ZM119.862 57.05L119.675 55.8388L128.72 54.4363L128.907 55.6475L119.862 57.05ZM120.5 66.8787L120.53 67.9624L129.68 67.6999L129.646 66.5262L122.244 66.7399L129.455 59.8249L129.418 58.5237L120.268 58.7862L120.301 59.9599L127.959 59.7387L120.5 66.8787ZM125.15 79.8913L124.775 78.7813C126.335 78.4813 127.452 77.3488 127.76 75.4851C128.15 73.1076 126.995 71.1838 124.869 70.8351C122.731 70.4826 121.006 71.9188 120.624 74.2588C120.29 76.2838 121.104 78.1626 122.694 78.4776L123.421 74.0488L124.479 74.2213L123.575 79.7188L118.88 78.9463L119.067 77.8138L120.639 78.0726C119.772 77.3601 119.259 75.8563 119.54 74.0788C120.039 71.0451 122.352 69.1513 125.071 69.6013C127.79 70.0476 129.342 72.6163 128.844 75.6613C128.457 78.0013 127.017 79.5351 125.15 79.8876V79.8913ZM116.664 87.5413C117.298 86.0788 118.535 84.6951 120.309 84.4776V84.4738L119.938 83.3413C118.25 83.5176 116.589 85.0213 115.693 87.0913C114.71 89.3601 114.95 91.5051 116.611 92.2251C118.318 92.9638 119.263 91.6513 120.68 89.1388C121.846 87.0613 122.375 86.3151 123.264 86.7013C124.048 87.0426 124.314 88.2238 123.575 89.9338C122.866 91.5726 121.738 92.5138 120.549 92.6938L120.849 93.7963C122.248 93.6126 123.691 92.3601 124.535 90.4063C125.495 88.1826 125.079 86.2251 123.616 85.5913C122 84.8938 121.018 86.2738 119.848 88.3663C118.49 90.7626 117.984 91.5163 116.968 91.0776C116.034 90.6726 115.944 89.2026 116.664 87.5413ZM111.83 102.883C109.558 101.353 109.179 98.3751 110.889 95.8363C112.599 93.2976 115.498 92.5326 117.774 94.0626C120.046 95.5926 120.425 98.5701 118.715 101.109C117.005 103.648 114.106 104.413 111.83 102.883ZM117.08 95.0901C115.291 93.8863 113.135 94.4638 111.796 96.4513C110.458 98.4388 110.739 100.644 112.528 101.848C114.316 103.051 116.465 102.485 117.804 100.498C119.143 98.5101 118.869 96.2938 117.08 95.0901ZM103.839 104.341C101.66 106.494 101.442 109.486 103.37 111.436C105.294 113.386 108.29 113.206 110.469 111.058C112.647 108.905 112.865 105.913 110.937 103.963C109.01 102.013 106.017 102.189 103.839 104.341ZM104.607 105.121C106.314 103.438 108.541 103.299 110.056 104.833H110.06C111.575 106.366 111.406 108.594 109.7 110.278C107.994 111.961 105.774 112.093 104.259 110.559C102.744 109.025 102.901 106.805 104.607 105.121ZM91.7787 113.754L92.6824 113.154L102.687 115.711L98.4499 109.325L99.4286 108.676L104.491 116.304L103.407 117.024L93.7212 114.556L97.8162 120.729L96.8374 121.378L91.7749 113.75L91.7787 113.754ZM86.3074 118.07C85.3136 118.467 84.8299 119.525 85.2499 120.567C85.6736 121.617 86.7536 122.049 87.7474 121.651C88.7524 121.25 89.2586 120.181 88.8349 119.127C88.4149 118.089 87.3124 117.665 86.3074 118.07ZM76.385 128.724C74.0412 129.155 72.1325 128.311 71.1687 126.661L72.0762 125.949C72.8862 127.317 74.3187 127.989 76.175 127.647C78.5187 127.216 79.9625 125.461 79.5725 123.342C79.1825 121.224 77.21 120.095 74.8662 120.526C73.01 120.867 71.9075 122.004 71.6412 123.571L70.5425 123.23C70.8575 121.344 72.3387 119.877 74.6825 119.446C77.6787 118.895 80.2962 120.425 80.7912 123.121C81.2862 125.817 79.385 128.176 76.3887 128.727L76.385 128.724ZM64.5538 120.282C61.4938 120.234 59.2063 122.172 59.1613 124.914C59.1163 127.655 61.3401 129.669 64.4001 129.717C67.4601 129.766 69.7476 127.827 69.7926 125.086C69.8376 122.345 67.6138 120.331 64.5538 120.282ZM64.5388 121.381C66.9351 121.419 68.5926 122.911 68.5588 125.067C68.5251 127.224 66.8188 128.66 64.4226 128.622C62.0263 128.585 60.3801 127.092 60.4138 124.936C60.4476 122.78 62.1426 121.344 64.5388 121.381ZM53.3451 119.199L55.4601 127.917L57.2151 120.065L58.3739 120.324L56.3789 129.26L54.5226 128.847L52.5201 120.507L47.1426 127.197L45.3389 126.792L47.3339 117.856L48.4926 118.115L46.7376 125.967L52.3514 118.977L53.3451 119.199ZM45.8415 117.028L44.6977 116.593L41.439 125.146L42.5827 125.581L45.8415 117.028ZM34.8838 111.762L35.84 112.272L38.3375 122.296L41.9488 115.535L42.9838 116.086L38.6713 124.164L37.5238 123.552L35.0975 113.855L31.6063 120.391L30.5713 119.84L34.8838 111.762ZM22.2485 109.828L22.2462 109.827L22.25 109.824L22.2485 109.828ZM24.0762 115.13C22.2402 113.631 21.6247 111.623 22.2485 109.828L23.3937 110.056C22.8762 111.56 23.3037 113.094 24.7662 114.286C26.6337 115.809 28.8762 115.764 30.2375 114.091C31.6062 112.411 31.22 110.202 29.3825 108.706C27.7925 107.409 25.7562 107.18 24.695 108.402L28.175 111.237L27.5 112.066L23.18 108.545L26.1837 104.859L27.0725 105.582L26.0637 106.816C27.11 106.419 28.6737 106.722 30.0762 107.847C32.4575 109.79 32.9487 112.737 31.2087 114.875C29.4687 117.009 26.4687 117.08 24.0762 115.13ZM20.6748 103.366C21.361 101.716 20.7723 99.9575 19.816 98.6825C18.7285 97.235 17.4085 96.5863 16.5948 97.1975C15.7098 97.865 16.111 98.6788 17.5285 101.045C18.7698 103.096 19.4823 104.634 18.076 105.691C16.801 106.651 14.896 106.044 13.4373 104.109C12.1548 102.406 11.7835 100.535 12.3123 99.2263L13.4185 99.5113C12.9873 100.633 13.246 102.08 14.3223 103.509C15.4435 104.994 16.6023 105.35 17.2848 104.836C18.0573 104.255 17.6748 103.426 16.441 101.386C14.9598 98.9113 14.2848 97.4413 15.7698 96.32C17.2173 95.2325 19.1973 96.0838 20.686 98.06C22.0435 99.8638 22.5273 102.054 21.8448 103.603L20.6748 103.366ZM15.4548 89.5588C14.0973 86.8175 11.3223 85.6738 8.86603 86.8925H8.86228C6.40978 88.1151 5.64103 91.0138 7.00228 93.755C8.36353 96.4963 11.1385 97.6401 13.5948 96.4213C16.0473 95.1988 16.8123 92.3 15.4548 89.5588ZM14.4723 90.0463C15.5373 92.1913 14.9748 94.3513 13.0435 95.3113C11.1123 96.2713 9.04978 95.4163 7.98478 93.2675C6.91978 91.1188 7.49353 88.9738 9.42103 88.0138C11.3485 87.0538 13.4073 87.9013 14.4723 90.0463ZM5.64134 75.3012C8.29259 74.5962 10.7826 76.2724 11.5663 79.2312C12.3501 82.1899 11.0188 84.8787 8.37134 85.5837C5.72009 86.2887 3.23009 84.6124 2.44634 81.6537C1.66259 78.6949 2.99384 76.0062 5.64134 75.3049V75.3012ZM8.05259 84.3837C10.1338 83.8324 11.1201 81.8262 10.5051 79.5087C9.89009 77.1912 8.04509 75.9537 5.96009 76.5049C3.87884 77.0562 2.88884 79.0474 3.50384 81.3649C4.11884 83.6824 5.96759 84.9312 8.05259 84.3799V84.3837ZM9.46635 65.1613L9.3951 64.0813V64.085L0.256348 64.6813L0.331347 65.8513L7.72635 65.3675L0.770097 72.5413L0.856348 73.8388L9.9951 73.2425L9.9201 72.0725L2.2701 72.5713L9.46635 65.1613ZM6.71019 55.0326C7.82019 55.1826 8.50269 56.1276 8.36019 57.1889C8.21393 58.2614 7.29893 59.0151 6.18893 58.8614C5.06393 58.7076 4.38519 57.7401 4.53144 56.6676C4.67769 55.6064 5.58519 54.8826 6.71019 55.0326ZM8.38635 39.7737C6.4776 39.7924 4.80135 41.0337 4.01385 43.2837L4.0176 43.2874C3.0126 46.1637 4.1226 48.9837 6.7101 49.8874C9.2976 50.7912 11.9226 49.2762 12.9276 46.3999C13.7114 44.1462 13.1751 42.1362 11.6901 40.9287L10.8464 41.7162C12.0726 42.7249 12.5151 44.2437 11.8926 46.0249C11.1051 48.2749 9.15135 49.4262 7.1151 48.7174C5.07885 48.0049 4.2651 45.8824 5.0526 43.6324C5.6751 41.8512 6.9651 40.9399 8.5551 40.9137L8.38635 39.7737ZM15.8265 30.2039C18.1927 31.5839 18.7627 34.5314 17.2215 37.1714C15.6802 39.8151 12.834 40.7676 10.4677 39.3839C8.10148 38.0039 7.53148 35.0564 9.07273 32.4164C10.614 29.7726 13.4602 28.8201 15.8265 30.2039ZM11.0902 38.3189C12.9502 39.4064 15.0652 38.6901 16.2727 36.6201C17.4802 34.5501 17.0565 32.3676 15.1965 31.2839C13.3365 30.1964 11.229 30.9014 10.0215 32.9714C8.81398 35.0414 9.23023 37.2314 11.0902 38.3189ZM79.1413 11.5401C82.1001 12.3201 84.7888 10.9851 85.4864 8.33385C86.1839 5.6826 84.5038 3.19635 81.5451 2.41635C78.5863 1.63635 75.8976 2.97135 75.2001 5.6226C74.5026 8.27385 76.1826 10.7601 79.1413 11.5401ZM79.4188 10.4788C77.1013 9.8676 75.8488 8.0226 76.3963 5.9376V5.94135C76.9438 3.85635 78.9464 2.86635 81.2638 3.4776C83.5813 4.08885 84.8226 5.9301 84.2751 8.0151C83.7276 10.0963 81.7364 11.0901 79.4188 10.4788ZM93.369 17.1575L92.394 16.6813L89.5252 6.75875L86.169 13.6475L85.1152 13.1337L89.124 4.90625L90.294 5.47625L93.0765 15.0725L96.3202 8.4125L97.374 8.92625L93.3652 17.1538L93.369 17.1575ZM99.864 19.6849C100.711 20.3411 101.866 20.2174 102.553 19.3286C103.246 18.4286 103.07 17.2774 102.223 16.6249C101.364 15.9649 100.186 16.0699 99.4927 16.9699C98.8102 17.8586 99.0052 19.0249 99.864 19.6849Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),gU=(i={})=>(()=>{const e=dt(fU);return ln(e,i,!0,!0),Cn(),e})(),pU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M67.4112 3.08527C66.6837 1.31902 64.9137 0.220274 62.5325 0.325274L62.5287 0.321524C59.4875 0.456524 57.2787 2.52652 57.3987 5.26777C57.5187 8.00902 59.8962 9.88027 62.9412 9.74902C65.3225 9.64402 66.9912 8.39902 67.5612 6.57277L66.5187 6.08152C66.035 7.59652 64.79 8.56777 62.9037 8.65027C60.5225 8.75152 58.7262 7.36402 58.6325 5.21152C58.5387 3.05902 60.2075 1.52152 62.5887 1.41652C64.475 1.33402 65.8025 2.19652 66.4137 3.66277L67.4112 3.08527ZM52.7486 10.9304L51.5561 11.2117L49.4448 2.30542L50.6373 2.02417L52.7486 10.9304ZM42.9349 14.1366L39.6311 6.75656V6.75281L43.5761 4.98656L43.1374 4.00781L34.1299 8.04281L34.5686 9.02156L38.5136 7.25531L41.8174 14.6353L42.9349 14.1366ZM26.2363 21.0215L26.2425 21.0241L26.015 22.1878C27.5713 22.8553 29.7575 22.3528 31.5463 20.9803C33.5075 19.4765 34.3438 17.4853 33.2413 16.049C32.1088 14.5753 30.6463 15.2615 28.1825 16.7653C26.1538 18.0178 25.3288 18.4078 24.74 17.639C24.2188 16.9603 24.5638 15.7978 26.0413 14.6653C27.4588 13.5778 28.9063 13.3078 30.0313 13.7278L30.305 12.6178C28.9888 12.0965 27.1213 12.4865 25.43 13.784C23.5063 15.2578 22.9175 17.174 23.8888 18.4378C24.9613 19.8328 26.4913 19.109 28.5313 17.849C30.8825 16.4128 31.6925 16.0003 32.3675 16.8815C32.9863 17.6915 32.3488 19.0153 30.9125 20.1178C29.6466 21.0878 27.8982 21.695 26.2425 21.0241L26.2438 21.0178L26.2363 21.0215ZM115.49 29.0765C116.443 27.419 116.229 25.349 114.688 23.5265L114.691 23.5227C112.723 21.194 109.73 20.7177 107.638 22.4877C105.545 24.2577 105.515 27.2877 107.484 29.6165C109.021 31.439 111.031 31.994 112.824 31.3302L112.573 30.2052C111.08 30.7527 109.546 30.359 108.328 28.919C106.786 27.1002 106.786 24.8277 108.433 23.4365C110.079 22.0452 112.318 22.4202 113.859 24.2427C115.078 25.6827 115.205 27.2577 114.421 28.6415L115.49 29.0765ZM121.764 34.0828L121.22 32.9878L113.019 37.0565L116.649 44.3765L117.609 43.9003L114.522 37.6753L121.764 34.0828ZM118.441 50.2453L118.104 49.0678L126.905 46.5403L127.242 47.7178L118.441 50.2453ZM126.954 64.5253C128.686 63.7153 129.702 61.8965 129.489 59.5228L129.485 59.5265C129.211 56.4928 127.04 54.3853 124.31 54.629C121.58 54.8728 119.814 57.3365 120.087 60.3703C120.301 62.744 121.621 64.3528 123.47 64.8403L123.912 63.7753C122.375 63.3628 121.347 62.1628 121.179 60.284C120.969 57.9103 122.274 56.0503 124.419 55.859C126.564 55.664 128.18 57.2615 128.394 59.6353C128.562 61.514 127.764 62.879 126.327 63.5578L126.954 64.5253ZM124.393 71.5002L128.285 78.3027L128.008 80.039L124.903 74.474L118.91 78.959L119.169 77.3202L124.336 73.4652L123.129 71.2977L120.193 70.8327L120.384 69.6252L129.425 71.0577L129.234 72.2652L124.385 71.4965L124.393 71.5002ZM112.347 97.1204C112.621 98.2979 113.214 99.3666 114.076 100.21L114.091 100.214L114.849 99.3441C114.087 98.6054 113.604 97.6754 113.386 96.6966L113.409 96.6816L116.772 95.4141C116.259 96.8616 116.435 98.2754 117.507 98.9204C118.535 99.5354 119.907 99.3029 120.886 97.6754C121.824 96.1116 121.43 94.6566 120.327 93.9929C119.735 93.6366 119.124 93.5691 118.407 93.7191C118.899 92.2304 118.61 90.8804 117.504 90.2166C116.105 89.3766 114.41 90.1154 113.21 92.1179C112.456 93.3741 112.141 94.7166 112.205 96.0216C111.215 96.4566 110.319 97.0341 109.749 98.1329L110.634 98.6654C111.005 97.9941 111.462 97.5554 112.347 97.1204ZM113.255 95.5829C113.255 94.6154 113.514 93.6404 114.05 92.7441V92.7404C114.864 91.3866 116.026 90.7604 116.945 91.3116C117.755 91.7991 117.912 92.7741 117.327 94.0716L113.33 95.5529C113.324 95.5567 113.318 95.5595 113.311 95.5619C113.305 95.5642 113.299 95.566 113.292 95.5679C113.279 95.5716 113.266 95.5754 113.255 95.5829ZM118.055 97.9416C117.181 97.4204 117.275 96.2691 117.886 95.0016V94.9979C118.842 94.6679 119.322 94.7166 119.791 94.9979C120.436 95.3879 120.665 96.2204 120.087 97.1841C119.469 98.2116 118.644 98.2979 118.055 97.9416ZM103.82 108.925L103.813 108.922L104.037 107.755C102.481 107.088 100.295 107.59 98.5061 108.967C96.5449 110.474 95.7124 112.465 96.8149 113.902C97.9474 115.379 99.4136 114.689 101.874 113.182C103.902 111.929 104.724 111.535 105.316 112.304C105.837 112.983 105.496 114.145 104.019 115.282C102.605 116.369 101.161 116.643 100.032 116.223L99.7587 117.333C101.075 117.854 102.946 117.46 104.634 116.163C106.557 114.689 107.142 112.773 106.171 111.509C105.099 110.114 103.569 110.842 101.529 112.102C99.1774 113.542 98.3674 113.954 97.6924 113.073C97.0699 112.263 97.7074 110.935 99.1436 109.833C100.406 108.863 102.157 108.256 103.813 108.922L103.812 108.925H103.82ZM87.1363 115.829L90.4476 123.202L86.5063 124.972L86.9451 125.947L95.9451 121.904L95.5063 120.929L91.5651 122.699L88.2538 115.327L87.1363 115.829ZM77.311 119.054L78.4998 118.769L80.6223 127.672L79.4335 127.957L77.311 119.054ZM62.6599 126.91C63.3874 128.677 65.1612 129.772 67.5424 129.667V129.663C70.5874 129.528 72.7924 127.45 72.6687 124.713C72.5487 121.975 70.1674 120.104 67.1224 120.239C64.7374 120.348 63.0724 121.593 62.5024 123.419L63.5449 123.91C64.0249 122.395 65.2699 121.42 67.1562 121.338C69.5374 121.233 71.3374 122.62 71.4312 124.773C71.5287 126.925 69.8599 128.467 67.4787 128.572C65.5962 128.654 64.2687 127.795 63.6537 126.329L62.6599 126.91ZM55.8048 124.038L48.8336 127.615L47.1123 127.259L52.8123 124.409L48.6086 118.221L50.2323 118.555L53.8436 123.891L56.0636 122.785L56.6636 119.875L57.8636 120.123L56.0186 129.089L54.8186 128.841L55.8086 124.034L55.8048 124.038ZM35.8102 114.164C34.8877 113.616 33.7552 113.879 33.1814 114.843L33.1852 114.839C32.6039 115.814 32.9189 116.935 33.8377 117.483C34.7677 118.038 35.9227 117.79 36.5039 116.815C37.0777 115.851 36.7402 114.719 35.8102 114.164ZM15.2676 106.417C13.7301 104.594 13.5163 102.524 14.4726 100.867L15.5376 101.302C14.7501 102.682 14.8813 104.26 16.0963 105.7C17.6338 107.523 19.8726 107.902 21.5188 106.514C23.1651 105.123 23.1688 102.854 21.6313 101.032C20.4126 99.5879 18.8826 99.1979 17.3901 99.7416L17.1426 98.6166C18.9351 97.9529 20.9413 98.5116 22.4788 100.334C24.4438 102.663 24.4138 105.693 22.3176 107.459C20.2213 109.225 17.2326 108.749 15.2676 106.42V106.417ZM8.73784 96.9314L8.73857 96.9329H8.73482L8.73784 96.9314ZM16.9398 92.8792L8.73784 96.9314L8.19482 95.8379L15.4398 92.2567L12.3611 86.0279L13.3211 85.5554L16.9398 92.8792ZM11.54 79.6865L11.8775 80.864L3.07627 83.384L2.73877 82.2065L11.54 79.6865ZM3.03871 65.3991C1.30621 66.2053 0.289958 68.024 0.499958 70.3978V70.4016C0.769958 73.4391 2.94121 75.5503 5.67121 75.3066C8.40121 75.0666 10.1675 72.6066 9.89746 69.5691C9.68746 67.1916 8.36746 65.5791 6.51871 65.0916L6.07621 66.1566C7.60996 66.5691 8.63746 67.7728 8.80621 69.6516C9.01621 72.0253 7.70746 73.8816 5.56246 74.0728C3.41746 74.2641 1.80121 72.6628 1.59121 70.2891C1.42246 68.4103 2.22496 67.0453 3.66121 66.3666L3.03871 65.3991ZM1.73395 51.6215L5.61284 58.4236L0.770195 57.6478L0.575195 58.8553L9.61269 60.3028L9.80769 59.0953L6.87519 58.6265L5.67144 56.459L10.8427 52.6115L11.1052 50.9765L5.10894 55.454L2.01145 49.8853L1.73395 51.6215ZM17.6938 32.8152C17.42 31.6377 16.8275 30.5652 15.9688 29.7214L15.2075 30.5877C15.965 31.3264 16.4488 32.2564 16.6625 33.2352L16.64 33.2502L13.2763 34.5139C13.79 33.0664 13.6138 31.6527 12.545 31.0077C11.5175 30.3889 10.145 30.6177 9.16627 32.2452C8.22502 33.8089 8.61502 35.2639 9.71752 35.9277C10.3063 36.2839 10.9175 36.3552 11.6338 36.2052C11.1425 37.6939 11.4313 39.0439 12.5338 39.7077C13.9325 40.5514 15.6238 39.8127 16.8275 37.8139C17.585 36.5577 17.9 35.2152 17.8363 33.9139C18.8263 33.4827 19.7225 32.9052 20.2963 31.8064L19.4113 31.2739C19.0363 31.9414 18.5788 32.3802 17.6938 32.8152ZM11.9863 31.9864C12.86 32.5114 12.7663 33.6589 12.1513 34.9264V34.9302C11.1913 35.2602 10.715 35.2114 10.2463 34.9302C9.60127 34.5402 9.37626 33.7039 9.95376 32.7439C10.5725 31.7164 11.3975 31.6302 11.9863 31.9864ZM16.7825 34.3489C16.7825 35.3164 16.5238 36.2914 15.9838 37.1877C15.17 38.5414 14.0075 39.1639 13.0888 38.6127C12.2788 38.1289 12.1213 37.1539 12.71 35.8564L16.7075 34.3789C16.7197 34.3688 16.7341 34.3652 16.7483 34.3617C16.7603 34.3587 16.7722 34.3558 16.7825 34.3489ZM74.2664 5.96906L81.2414 2.40281L82.9627 2.75906L77.2552 5.60156L81.4552 11.7966L79.8315 11.4591L76.2239 6.11531L74.0039 7.21781L73.4002 10.1278L72.2002 9.88031L74.0564 0.914062L75.2564 1.16156L74.2589 5.96906H74.2664ZM94.2575 15.8728C95.1762 16.4203 96.3125 16.1616 96.8862 15.1978C97.4675 14.2228 97.1562 13.1016 96.2375 12.5541C95.3037 11.9991 94.1487 12.2428 93.5675 13.2178C92.9937 14.1816 93.3275 15.3178 94.2575 15.8728Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),mU=(i={})=>(()=>{const e=dt(pU);return ln(e,i,!0,!0),Cn(),e})(),CU=wt('<svg width="130" height="131" viewBox="0 0 130 131" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M106.966 23.8953C106.382 25.5946 107.087 27.3203 108.131 28.5335C109.318 29.9125 110.682 30.4815 111.458 29.8108C112.302 29.0836 111.846 28.2962 110.275 26.0166C108.899 24.0423 108.086 22.5427 109.427 21.3935C110.64 20.3498 112.596 20.8359 114.182 22.6821C115.576 24.306 116.07 26.1598 115.625 27.5049L114.498 27.2939C114.86 26.141 114.502 24.7054 113.334 23.3452C112.113 21.9286 110.93 21.646 110.278 22.2036C109.54 22.8366 109.981 23.6429 111.348 25.6097C112.995 27.9947 113.767 29.4265 112.347 30.6435C110.968 31.8304 108.926 31.1032 107.306 29.2155C105.829 27.4974 105.203 25.3309 105.787 23.7333L106.974 23.8953H106.966Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M123.374 36.5137C124.448 38.6538 124.169 40.7299 122.847 42.124L121.908 41.4495C123.001 40.2853 123.246 38.7179 122.398 37.0224C121.324 34.8822 119.23 33.9817 117.293 34.9538C115.356 35.9221 114.821 38.1414 115.895 40.2815C116.743 41.977 118.148 42.7193 119.734 42.5422L119.712 43.6989C117.805 43.925 115.974 42.9039 114.904 40.7638C113.533 38.0284 114.275 35.0744 116.739 33.8423C119.203 32.6102 122.01 33.782 123.382 36.5175L123.374 36.5137Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M118.815 50.4769L118.555 49.275L127.545 47.3232L128.765 52.9448C129.172 54.825 128.566 56.317 126.851 56.69C125.412 57.0028 124.316 56.2454 123.773 54.84L120.503 58.265L120.205 56.886L123.426 53.5364L122.582 49.6555L118.815 50.4731V50.4769ZM124.568 53.7888C124.847 55.0661 125.582 55.733 126.595 55.5107C127.609 55.2922 127.989 54.3804 127.71 53.1031L126.765 48.7437L123.622 49.4257L124.568 53.785V53.7888Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M125.039 73.0876C122.289 72.9745 120.397 70.6272 120.521 67.5564C120.646 64.4857 122.722 62.3003 125.476 62.4134C128.227 62.5264 130.118 64.8737 129.994 67.9445C129.869 71.0153 127.793 73.2006 125.039 73.0876ZM125.423 63.6567C123.261 63.5701 121.72 65.1978 121.622 67.6054C121.524 70.0093 122.925 71.7462 125.088 71.8367C127.251 71.9233 128.792 70.3069 128.89 67.9031C128.988 65.4992 127.586 63.7472 125.423 63.6605V63.6567Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M128.305 80.1528L127.955 81.3321L120.17 79.0187L118.181 85.7103L117.148 85.4051L119.488 77.5342L128.305 80.1566V80.1528Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M123.201 94.2594L122.587 95.3257L115.545 91.2791L112.067 97.3339L111.133 96.7989L115.225 89.6777L123.201 94.2594Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M109.266 112.932L105.724 115.788C103.32 117.725 100.6 117.616 98.8365 115.434C97.0731 113.253 97.5441 110.566 99.948 108.629L103.49 105.773L109.266 112.936V112.932ZM100.619 109.455C98.7649 110.95 98.4635 112.989 99.8048 114.654C101.157 116.331 103.203 116.459 105.068 114.956L107.661 112.864L103.222 107.36L100.619 109.458V109.455Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M84.3777 122.612C83.2699 120.091 84.5472 117.359 87.3618 116.12C90.1763 114.884 93.0512 115.788 94.1589 118.309C95.2667 120.83 93.9894 123.561 91.1748 124.797C88.3602 126.033 85.4854 125.129 84.3777 122.608V122.612ZM93.021 118.81C92.1507 116.828 90.0068 116.161 87.8026 117.13C85.5984 118.098 84.6527 120.125 85.5269 122.107C86.401 124.089 88.526 124.763 90.734 123.791C92.9381 122.823 93.8952 120.792 93.021 118.81Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M72.5714 129.707L68.9129 122.137L67.0553 130.408L65.7969 130.566L68.0086 121.011L69.4818 120.822L73.0914 128.309L74.7341 120.159L76.2073 119.971L80.7174 128.674L79.4477 128.836L75.5857 121.293L73.9165 129.537L72.5676 129.707H72.5714Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M51.371 119.451L52.4448 119.628L58.0626 128.355L59.3097 120.755L60.474 120.947L58.9819 130.024L57.6933 129.813L52.2489 121.377L51.0432 128.724L49.8789 128.532L51.371 119.455V119.451Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M34.7566 116.376C35.2992 115.389 36.4296 115.088 37.3715 115.608C38.3248 116.132 38.6978 117.258 38.1552 118.245C37.6051 119.244 36.4522 119.53 35.4989 119.006C34.5569 118.486 34.2028 117.375 34.7529 116.373L34.7566 116.376Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M24.466 107.959C24.9935 106.241 24.2324 104.542 23.151 103.359C21.9227 102.018 20.5399 101.498 19.7826 102.187C18.9612 102.941 19.4435 103.713 21.09 105.944C22.5293 107.873 23.3922 109.342 22.0885 110.537C20.9092 111.618 18.9424 111.2 17.2958 109.406C15.849 107.831 15.2951 105.993 15.6983 104.633L16.8324 104.81C16.5084 105.974 16.9115 107.398 18.1248 108.717C19.3907 110.096 20.5851 110.337 21.2181 109.757C21.934 109.097 21.4706 108.31 20.0388 106.388C18.3169 104.056 17.4993 102.651 18.8783 101.388C20.2197 100.16 22.2844 100.819 23.9649 102.651C25.4984 104.32 26.1954 106.464 25.6604 108.084L24.4698 107.959H24.466Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M7.65626 95.8908C6.51462 93.7846 6.72561 91.7048 7.99913 90.2693L8.95993 90.9135C7.90494 92.1117 7.71278 93.6904 8.61705 95.3558C9.7587 97.462 11.8837 98.2909 13.7865 97.2548C15.6892 96.2224 16.1527 93.9881 15.011 91.8819C14.1068 90.2165 12.6788 89.5195 11.1 89.7493L11.085 88.5926C12.984 88.3062 14.8452 89.2633 15.9869 91.3657C17.4488 94.0559 16.8045 97.0287 14.3818 98.3437C11.9629 99.6586 9.11817 98.5773 7.65626 95.8871V95.8908Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M11.749 81.7766L12.0504 82.971L3.12826 85.2166L1.72286 79.6365C1.25188 77.7714 1.80952 76.2605 3.51257 75.831C4.94057 75.4693 6.05962 76.1927 6.64739 77.5793L9.80105 74.0488L10.1439 75.4165L7.03548 78.8679L8.00381 82.7186L11.7452 81.7766H11.749ZM5.89006 78.6531C5.5698 77.3871 4.81624 76.7428 3.81023 76.999C2.80422 77.2515 2.45382 78.1746 2.77408 79.4406L3.86298 83.7622L6.98273 82.9785L5.89383 78.6531H5.89006Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M4.82747 59.3845C7.58174 59.4297 9.5297 61.728 9.48072 64.8026C9.43174 67.8771 7.40842 70.1114 4.65415 70.0662C1.89988 70.021 -0.0480783 67.7226 0.000903284 64.6481C0.0498848 61.5736 2.0732 59.3392 4.82747 59.3845ZM4.67299 68.8228C6.83948 68.8567 8.33907 67.1914 8.37675 64.7837C8.41443 62.3761 6.97136 60.6731 4.80486 60.6391C2.63837 60.6052 1.13878 62.2593 1.1011 64.6669C1.06343 67.0746 2.5065 68.7889 4.67299 68.8228Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M1.29688 52.433L1.6096 51.2424L9.46926 53.2996L11.2364 46.5439L12.2763 46.8152L10.1964 54.7615L1.29688 52.433Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M5.92188 38.1713L6.49835 37.0862L13.6723 40.8954L16.9465 34.7275L17.896 35.2324L14.0453 42.4855L5.92188 38.1713Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M19.2422 19.0471L22.686 16.0781C25.0258 14.0623 27.7499 14.0812 29.5811 16.2062C31.4122 18.3313 31.0317 21.029 28.6919 23.0448L25.2481 26.0138L19.2422 19.0471ZM27.9986 22.2385C29.8034 20.6824 30.037 18.6365 28.6391 17.0163C27.2337 15.3848 25.184 15.3245 23.3717 16.8882L20.8473 19.0622L25.4666 24.42L27.9986 22.2385Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M43.7985 8.55284C44.9892 11.0358 43.8061 13.8089 41.033 15.139C38.2598 16.469 35.3586 15.6589 34.1642 13.1759C32.9736 10.693 34.1567 7.91984 36.9298 6.58981C39.7029 5.25977 42.6041 6.06985 43.7985 8.55284ZM35.287 12.6371C36.2252 14.5889 38.3842 15.1842 40.5582 14.1443C42.7285 13.1006 43.6064 11.0471 42.6682 9.0954C41.73 7.14367 39.5823 6.54082 37.4083 7.58451C35.2381 8.62819 34.3489 10.6854 35.287 12.6371Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M55.374 1.07759L59.2774 8.52279L60.8637 0.199694L62.1146 0L60.2156 9.61922L58.7499 9.85283L54.8992 2.49052L53.524 10.6893L52.0583 10.9229L47.2656 2.37749L48.5316 2.17403L52.6348 9.58531L54.0326 1.29236L55.374 1.07759Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M76.8906 10.6366L75.8092 10.4934L69.9126 1.95931L68.9141 9.5929L67.7461 9.43842L68.9405 0.320312L70.2366 0.489864L75.9524 8.74137L76.9169 1.364L78.085 1.51848L76.8906 10.6366Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><path d="M93.6103 13.1607C93.1017 14.1667 91.9826 14.502 91.0218 14.016C90.0497 13.5224 89.639 12.4109 90.1515 11.4049C90.6677 10.3875 91.8093 10.0635 92.7814 10.5571C93.7422 11.0431 94.1303 12.1471 93.6141 13.1644L93.6103 13.1607Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),IU=(i={})=>(()=>{const e=dt(CU);return ln(e,i,!0,!0),Cn(),e})(),AU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M69.5114 9.49239L64.5501 0.421143H64.5464L63.2076 0.443642L58.5464 9.67989L59.8476 9.65739L61.1414 7.09614L66.8414 6.99864L68.2101 9.51489L69.5114 9.49239ZM66.2676 5.93739L61.6926 6.01614L63.9126 1.62864L66.2676 5.93739ZM53.7724 1.23886L54.0312 2.27761L46.9512 4.02886L47.6262 6.76261L54.0012 5.18761L54.2599 6.22636L47.8849 7.80136L48.6349 10.8351L55.7149 9.08386L55.9737 10.1226L47.7312 12.1626L45.5337 3.27511L53.7762 1.23511L53.7724 1.23886ZM40.7185 15.1588L37.0923 7.93635L37.0885 7.9326L40.951 5.99385L40.471 5.0376L31.6548 9.46635L32.1348 10.4226L35.9973 8.48385L39.6235 15.7063L40.7185 15.1588ZM22.1977 16.4412L22.9589 17.1949L17.8327 22.3812L19.8352 24.3612L24.4514 19.6887L25.2127 20.4424L20.5964 25.1149L22.8202 27.3087L27.9464 22.1224L28.7077 22.8762L22.7414 28.9174L16.2314 22.4824L22.1977 16.4412ZM111.53 21.6051L107.776 29.7501L108.418 30.5414L117.155 28.5464L110.904 33.6126L111.65 34.5351L118.76 28.7714L117.598 27.3351L109.231 29.2439L112.839 21.4626L111.643 19.9851L104.533 25.7489L105.279 26.6714L111.53 21.6051ZM124.497 42.3012L125.469 41.8474H125.465L121.884 34.1487L113.585 38.0112L117.166 45.7099L118.137 45.2562L115.062 38.6449L117.894 37.3287L120.665 43.2799L121.636 42.8299L118.865 36.8787L121.419 35.6899L124.497 42.3012ZM129.042 55.4938L127.996 55.7226L126.436 48.5976L123.684 49.2013L125.09 55.6176L124.044 55.8463L122.637 49.4301L119.585 50.0976L121.145 57.2226L120.099 57.4513L118.28 49.1563L127.224 47.1951L129.042 55.4901V55.4938ZM120.414 65.8063L128.495 65.9375H128.499L128.427 70.2613L129.5 70.28L129.657 60.4138L128.585 60.395L128.514 64.715L120.432 64.5838L120.414 65.8063ZM124.805 86.4275L117.17 83.7762L117.571 82.6212L125.206 85.2725L126.624 81.1887L127.636 81.5412L124.4 90.8637L123.387 90.5112L124.805 86.4275ZM109.269 98.6788L116.99 103.595H116.994L117.646 102.575L114.365 100.486L118.077 94.6588L121.355 96.7476L122.011 95.7163L114.29 90.8L113.634 91.8313L117.17 94.0851L113.457 99.9126L109.921 97.6588L109.269 98.6788ZM107.011 114.249L106.261 113.484L111.47 108.376L109.498 106.366L104.81 110.964L104.06 110.199L108.748 105.601L106.561 103.37L101.353 108.478L100.603 107.713L106.666 101.769L113.075 108.305L107.011 114.249ZM88.4712 115.224L91.9812 122.506H91.9775L88.085 124.381L88.55 125.345L97.4375 121.062L96.9725 120.099L93.08 121.974L89.5737 114.691L88.4712 115.224ZM75.1888 128.934L74.9488 127.891L82.055 126.256L81.4213 123.511L75.0238 124.985L74.7838 123.943L81.1813 122.469L80.48 119.424L73.3738 121.059L73.1338 120.016L81.4063 118.111L83.4613 127.033L75.1888 128.938V128.934ZM59.5215 120.511L64.4752 129.586H64.479L65.8177 129.564L70.4902 120.331L69.189 120.354L67.8915 122.911L62.1915 123.005L60.8227 120.489L59.5215 120.511ZM62.769 124.066L67.344 123.991V123.995L65.1202 128.379L62.769 124.066ZM51.6536 118.809L53.4949 127.588L55.4936 119.795L56.6411 120.091L54.3649 128.956L52.5236 128.484L50.7836 120.088L45.1999 126.605L43.4111 126.144L45.6874 117.279L46.8349 117.575L44.8361 125.368L50.6636 118.558L51.6499 118.813L51.6536 118.809ZM34.4599 113.337C33.5524 112.764 32.4124 112.992 31.8124 113.941V113.937C31.2086 114.897 31.4899 116.026 32.3936 116.6C33.3086 117.181 34.4711 116.967 35.0786 116.007C35.6786 115.059 35.3749 113.919 34.4599 113.337ZM22.8013 100.932L19.175 109.137L25.3475 103.974L26.1088 104.885L19.0888 110.761L17.87 109.306L21.3538 101.469L13.0175 103.505L11.8325 102.087L18.8525 96.2112L19.6138 97.1187L13.4413 102.282L22.1488 100.152L22.805 100.936L22.8013 100.932ZM4.91504 89.1343L4.91357 89.135V89.1313L4.91504 89.1343ZM4.91504 89.1343L5.87732 88.6663L9.06108 95.2288L11.5961 93.9988L8.72732 88.0888L9.69107 87.62L12.5598 93.53L15.3723 92.165L12.1886 85.6025L13.1523 85.1338L16.8611 92.7763L8.62232 96.7738L4.91504 89.1343ZM1.12256 75.545L1.1234 75.5448L3.07256 83.8062L11.9826 81.7025L10.0326 73.4375L8.99006 73.685L10.6663 80.7838L7.62506 81.5L6.11756 75.11L5.07506 75.3575L6.58256 81.7475L3.84131 82.3962L2.16506 75.2975L1.1234 75.5448L1.12256 75.5413V75.545ZM9.56744 65.015L1.48619 65.1463L1.48994 65.1425L1.41869 60.8225L0.346191 60.8413L0.503692 70.7075L1.57619 70.6888L1.50494 66.3688L9.58619 66.2375L9.56744 65.015ZM4.86139 44.5363L12.5376 47.0638L12.1551 48.2263L4.47889 45.6988L3.12514 49.8051L2.10889 49.4713L5.19514 40.1001L6.21139 40.4338L4.85764 44.5401L4.86139 44.5363ZM20.1915 32.045L12.3952 27.2488L11.7615 28.28L15.0727 30.3163L11.454 36.2038L8.14272 34.1675L7.50146 35.21L15.2977 40.0063L15.939 38.9638L12.3652 36.7663L15.984 30.8788L19.5577 33.0763L20.1915 32.045ZM77.4688 10.9812L75.4851 2.2325L73.6101 10.055L72.4551 9.7775L74.5888 0.875L76.4376 1.3175L78.3126 9.6875L83.7876 3.08L85.5838 3.51125L83.4501 12.4137L82.2951 12.1362L84.1701 4.31375L78.4513 11.2175L77.4576 10.9812H77.4688ZM94.7524 16.175C95.6674 16.73 96.8036 16.4825 97.3886 15.5263L97.3849 15.53C97.9774 14.5625 97.6774 13.4375 96.7624 12.8788C95.8399 12.3125 94.6811 12.5488 94.0886 13.5163C93.5074 14.4725 93.8261 15.6088 94.7524 16.175Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),yU=(i={})=>(()=>{const e=dt(AU);return ln(e,i,!0,!0),Cn(),e})(),_U=wt('<svg width="134" height="134" viewBox="0 0 134 134" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M72.4318 11.8445L71.0993 11.6964L67.4995 2.491L68.7472 2.62974L71.8988 10.6816L76.7422 3.51871L77.9778 3.65609L72.4318 11.8445Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M84.6349 5.27246L82.1188 13.6541L80.9981 13.3177L83.5142 4.93604L84.6349 5.27246Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M90.9184 7.18172L98.178 10.8137L97.7199 11.7293L91.485 8.60995L90.2798 11.0189L95.8934 13.8274L95.4353 14.743L89.8217 11.9345L88.4856 14.6051L94.7206 17.7244L94.2625 18.64L87.0029 15.0081L90.9184 7.18172Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M108.618 18.0772L109.573 18.9471L106.352 26.2672L113.484 22.509L114.376 23.3215L106.096 27.6165L105.05 26.6645L108.242 19.4321L101.329 23.275L100.284 22.323L103.797 13.6864L104.698 14.5071L101.621 21.9586L108.618 18.0772Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M118.539 37.7494L115.227 39.3263L114.724 38.2699L122.625 34.5083L124.92 39.3284C125.716 41.0011 125.469 42.4956 123.962 43.2133C122.476 43.9206 121.127 43.1858 120.331 41.5131L118.539 37.7494ZM119.453 37.3146L121.218 41.0232C121.753 42.1457 122.573 42.5922 123.464 42.1679C124.355 41.7435 124.515 40.8307 123.98 39.7082L122.215 35.9996L119.453 37.3146Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M123.889 50.4104L120.299 51.1645L120.058 50.0194L128.623 48.2207L129.748 53.5764C130.123 55.3656 129.537 56.784 127.903 57.1272C126.531 57.4153 125.494 56.6866 124.989 55.3481L121.857 58.5838L121.582 57.2717L124.666 54.1081L123.889 50.4104ZM124.879 50.2025L125.751 54.3535C126.007 55.5701 126.701 56.2089 127.667 56.0059C128.634 55.803 129.001 54.9413 128.745 53.7247L127.873 49.5737L124.879 50.2025Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M131.278 67.9416C131.162 70.8645 129.188 72.9451 126.57 72.8411C123.951 72.7371 122.149 70.5065 122.265 67.5836C122.381 64.6608 124.355 62.5801 126.973 62.6841C129.592 62.7881 131.394 65.0187 131.278 67.9416ZM130.23 67.9C130.321 65.6104 128.984 63.9472 126.926 63.8654C124.868 63.7837 123.404 65.3356 123.313 67.6252C123.222 69.9148 124.559 71.5659 126.617 71.6476C128.675 71.7293 130.139 70.1896 130.23 67.9Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M122.957 84.8391C120.963 84.2764 120.048 82.3591 120.683 80.1069C121.22 78.2066 122.699 77.003 124.276 76.9794L124.509 78.1724C123.265 78.1379 122.084 78.9571 121.68 80.3882C121.23 81.9835 121.785 83.2926 123.31 83.7229L128.483 85.1827L128.166 86.3088L122.957 84.8391Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M125.943 92.7167L122.072 99.852L121.172 99.3639L124.497 93.2356L122.129 91.9513L119.136 97.4689L118.236 96.9807L121.229 91.4632L118.604 90.0394L115.28 96.1676L114.38 95.6795L118.25 88.5442L125.943 92.7167Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M115.655 102.063C117.61 103.808 117.559 106.703 115.619 108.876C114.101 110.576 112.169 111.057 110.473 110.376L110.74 109.308C112.153 109.867 113.628 109.533 114.829 108.187C116.347 106.486 116.405 104.316 114.868 102.945C113.331 101.573 111.182 101.876 109.664 103.577C108.463 104.923 108.298 106.425 109.013 107.766L107.981 108.152C107.113 106.544 107.372 104.57 108.89 102.87C110.83 100.697 113.7 100.318 115.655 102.063Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M100.338 120.504L103.733 118.15L99.3313 111.799L100.293 111.132L104.695 117.483L108.091 115.129L108.674 115.971L100.921 121.345L100.338 120.504Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M83.1666 121.537C84.1873 121.261 85.2241 121.858 85.4995 122.878C85.7749 123.899 85.1786 124.936 84.1579 125.211C83.1372 125.487 82.1003 124.891 81.8249 123.87C81.5496 122.849 82.1458 121.812 83.1666 121.537Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M62.9422 122.196L64.2774 122.317L68.0612 131.449L66.8109 131.335L63.4984 123.348L58.7997 130.607L57.5616 130.494L62.9422 122.196Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M50.8863 129.02L53.227 120.588L54.3545 120.901L52.0137 129.333L50.8863 129.02Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M44.5668 127.242L37.2337 123.761L37.6728 122.836L43.9709 125.826L45.126 123.393L39.4555 120.701L39.8946 119.776L45.5651 122.468L46.8456 119.77L40.5475 116.78L40.9866 115.855L48.3197 119.337L44.5668 127.242Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M26.6295 116.701L25.6572 115.85L28.7321 108.468L21.6762 112.367L20.7681 111.573L28.9614 107.113L30.0254 108.044L26.9792 115.339L33.8138 111.359L34.8779 112.29L31.537 120.995L30.6197 120.192L33.5479 112.681L26.6295 116.701Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M16.3209 97.2418L19.6001 95.5968L20.1248 96.6427L12.3026 100.567L9.90891 95.7947C9.07824 94.1388 9.29432 92.6396 10.7869 91.8909C12.2576 91.1531 13.6212 91.8599 14.4519 93.5159L16.3209 97.2418ZM15.4167 97.6953L13.575 94.0239C13.0176 92.9127 12.1885 92.4832 11.306 92.9258C10.4236 93.3685 10.283 94.2844 10.8405 95.3956L12.6822 99.0671L15.4167 97.6953Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M10.7114 84.7039L14.2851 83.8749L14.5495 85.0147L6.02474 86.9923L4.78806 81.6613C4.37492 79.8804 4.93146 78.45 6.55806 78.0727C7.92345 77.7559 8.97576 78.4627 9.50897 79.7904L12.572 76.4899L12.8749 77.7959L9.85754 81.0233L10.7114 84.7039ZM9.72591 84.9325L8.76742 80.8007C8.48648 79.5897 7.77867 78.9656 6.81696 79.1887C5.85525 79.4118 5.50636 80.281 5.78729 81.4921L6.74579 85.6239L9.72591 84.9325Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M2.96583 67.3513C3.02279 64.4267 4.95363 62.3066 7.57361 62.3576C10.1936 62.4086 12.0404 64.6023 11.9834 67.527C11.9265 70.4516 9.99564 72.5717 7.37565 72.5207C4.75567 72.4697 2.90886 70.2759 2.96583 67.3513ZM4.01382 67.3717C3.9692 69.6627 5.33925 71.2985 7.39868 71.3386C9.45811 71.3788 10.8908 69.7975 10.9354 67.5065C10.9801 65.2156 9.60978 63.5919 7.55035 63.5518C5.49092 63.5117 4.05844 65.0808 4.01382 67.3717Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M10.9413 50.2617C12.9467 50.7825 13.9021 52.6802 13.3139 54.9453C12.8176 56.8564 11.3637 58.0907 9.78753 58.1473L9.52932 56.9595C10.7738 56.9678 11.9374 56.1241 12.3111 54.6849C12.7278 53.0805 12.1454 51.7833 10.6118 51.385L5.40929 50.034L5.70339 48.9015L10.9413 50.2617Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M7.80094 42.4313L11.5243 35.2182L12.4341 35.6878L9.23622 41.8829L11.6297 43.1184L14.5089 37.5407L15.4187 38.0103L12.5395 43.588L15.193 44.9577L18.3908 38.7627L19.3006 39.2323L15.5772 46.4454L7.80094 42.4313Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M17.8995 32.8715C15.9101 31.1658 15.9039 28.2707 17.7999 26.0592C19.2834 24.3289 21.2057 23.8096 22.915 24.4562L22.6689 25.5297C21.2452 24.9994 19.7777 25.3627 18.6036 26.7322C17.1201 28.4625 17.1053 30.6332 18.669 31.9739C20.2328 33.3147 22.3758 32.9686 23.8593 31.2382C25.0334 29.8688 25.1685 28.3631 24.427 27.037L25.4503 26.6299C26.3504 28.2204 26.1307 30.1994 24.6472 31.9298C22.7511 34.1412 19.8889 34.5771 17.8995 32.8715Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M32.8345 14.1337L29.487 16.5556L34.0165 22.8163L33.0685 23.5021L28.539 17.2415L25.1914 19.6634L24.5913 18.8339L32.2344 13.3042L32.8345 14.1337Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M48.9769 12.1537C47.9731 12.4847 46.9052 11.9465 46.5741 10.9427C46.2431 9.93891 46.7813 8.87101 47.7851 8.53994C48.7889 8.20887 49.8568 8.74707 50.1878 9.75088C50.5189 10.7547 49.9807 11.8226 48.9769 12.1537Z" fill="black" style="fill:black;fill-opacity:1;">'),vU=(i={})=>(()=>{const e=dt(_U);return ln(e,i,!0,!0),Cn(),e})(),bU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M69.8826 9.93133C72.9314 10.1976 75.3501 8.42383 75.5901 5.69383C75.8301 2.96008 73.7526 0.79633 70.7039 0.53008C67.6551 0.26383 65.2364 2.03383 64.9964 4.76758C64.7564 7.50133 66.8339 9.66508 69.8826 9.93133ZM69.9764 8.84008C67.5876 8.63008 66.0389 7.02133 66.2264 4.87633C66.4139 2.73133 68.2176 1.41508 70.6064 1.62508C72.9951 1.83133 74.5326 3.43633 74.3451 5.58508C74.1576 7.73383 72.3651 9.05008 69.9764 8.84008ZM61.561 9.67999L60.3423 9.76624L59.686 0.638741L60.9048 0.55249L61.561 9.67999ZM53.1912 10.8313L51.3874 2.95254L55.6024 1.98879L55.3624 0.946289L45.7437 3.14754L45.9837 4.19004L50.1949 3.22629L51.9987 11.105L53.1912 10.8313ZM38.1389 6.10239C40.3026 5.09739 42.3576 5.43864 43.7039 6.79614L43.0026 7.71114C41.8776 6.58989 40.3214 6.29739 38.6114 7.09239C36.4476 8.09739 35.4951 10.1561 36.3989 12.1099C37.3026 14.0636 39.4964 14.6636 41.6601 13.6586C43.3701 12.8636 44.1539 11.4911 44.0226 9.90489L45.1739 9.96114C45.3426 11.8661 44.2739 13.6549 42.1101 14.6561C39.3464 15.9386 36.4326 15.1136 35.2776 12.6274C34.1226 10.1411 35.3714 7.38114 38.1351 6.09864L38.1389 6.10239ZM26.8308 12.9025L26.8285 12.9014H26.8323L26.8308 12.9025ZM26.8308 12.9025L36.1698 17.3414L35.1273 18.1214L32.5435 16.8876L27.9835 20.3076L28.4335 23.1426L27.3948 23.9226L25.7598 13.7039L26.8308 12.9025ZM31.4523 16.3701L27.7885 19.1151L27.016 14.2589L31.4523 16.3701ZM107.9 28.4562C106.861 27.2487 106.16 25.5312 106.741 23.8399H106.749L105.567 23.6787C104.986 25.2687 105.609 27.4249 107.079 29.1349C108.691 31.0137 110.724 31.7374 112.096 30.5562C113.51 29.3449 112.741 27.9199 111.102 25.5462C109.741 23.5887 109.302 22.7862 110.037 22.1562C110.686 21.6012 111.864 21.8824 113.079 23.2924C114.241 24.6462 114.597 26.0749 114.237 27.2225L115.359 27.4324C115.801 26.0937 115.31 24.2487 113.922 22.6324C112.344 20.7949 110.397 20.3112 109.19 21.3499C107.855 22.4937 108.665 23.9862 110.034 25.9512C111.597 28.2199 112.051 29.0037 111.211 29.7274C110.439 30.3949 109.081 29.8287 107.9 28.4562ZM122.758 38.1912L123.695 37.6737L123.691 37.67L119.581 30.2412L111.575 34.6737L115.685 42.1025L116.623 41.585L113.09 35.2062L115.824 33.695L119.004 39.44L119.941 38.9225L116.761 33.1775L119.225 31.8125L122.758 38.1912ZM128.056 50.2962L127.033 50.6112L124.891 43.6399L122.199 44.4687L124.126 50.7462L123.103 51.0612L121.175 44.7837L118.19 45.7024L120.331 52.6737L119.308 52.9887L116.814 44.8699L125.566 42.1812L128.06 50.2999L128.056 50.2962ZM129.65 60.9387L124.842 60.8599L124.846 60.8562C122.052 60.8112 120.346 62.3674 120.297 65.3749C120.249 68.3712 121.902 69.9912 124.696 70.0362L129.504 70.1149L129.522 68.8924L124.756 68.8137C122.6 68.7799 121.355 67.6737 121.392 65.3937C121.43 63.1137 122.709 62.0374 124.865 62.0712L129.631 62.1499L129.65 60.9387ZM122.99 73.6476C121.288 74.2026 120.339 75.7926 119.998 77.3488C119.608 79.1151 119.975 80.5401 120.973 80.7613C122.056 80.9976 122.409 80.1651 123.283 77.5476C124.033 75.2713 124.734 73.7301 126.455 74.1051C128.011 74.4463 128.795 76.2913 128.274 78.6538C127.816 80.7313 126.639 82.2351 125.3 82.6851L124.794 81.6613C125.926 81.2563 126.856 80.1163 127.239 78.3726C127.636 76.5538 127.153 75.4438 126.316 75.2601C125.371 75.0538 124.993 75.8826 124.246 78.1476C123.331 80.8851 122.656 82.3551 120.838 81.9538C119.071 81.5638 118.426 79.5051 118.955 77.0901C119.439 74.8851 120.785 73.0926 122.409 72.6013L122.99 73.6438V73.6476ZM114.969 89.0188L114.425 90.1138L122.63 94.1788L123.174 93.0801L114.969 89.0188ZM107.506 100.861L108.136 99.98L118.396 98.7875L112.156 94.34L112.839 93.3838L120.294 98.6975L119.54 99.7588L109.614 100.921L115.648 105.219L114.965 106.175L107.51 100.861H107.506ZM93.4326 112.899L102.733 117.417V117.414L103.813 116.619L102.26 106.389L101.214 107.161L101.641 110L97.0514 113.382L94.4789 112.126L93.4326 112.899ZM98.1389 113.911L101.825 111.196V111.192L102.556 116.056L98.1389 113.911ZM91.3662 124.122C89.195 125.109 87.1437 124.752 85.8087 123.384L86.5175 122.476C87.635 123.609 89.1837 123.912 90.905 123.132C93.0762 122.146 94.0475 120.095 93.1587 118.134C92.27 116.172 90.0837 115.554 87.9125 116.54C86.195 117.32 85.4 118.689 85.52 120.275L84.3687 120.207C84.2187 118.302 85.2987 116.521 87.47 115.535C90.245 114.275 93.1512 115.126 94.2837 117.624C95.4162 120.121 94.145 122.866 91.37 124.126L91.3662 124.122ZM76.3588 119.263L78.0913 127.156L78.0951 127.16L73.8726 128.086L74.1013 129.132L83.7388 127.014L83.5101 125.967L79.2876 126.894L77.5551 119L76.3588 119.263ZM67.9849 120.346L69.2074 120.268L69.7924 129.406L68.5699 129.485L67.9849 120.346ZM59.6601 120.031C56.6151 119.739 54.1814 121.49 53.9189 124.22C53.6601 126.95 55.7189 129.129 58.7639 129.421C61.8089 129.714 64.2464 127.963 64.5051 125.233C64.7639 122.503 62.7051 120.324 59.6601 120.031ZM59.5551 121.119C61.9401 121.348 63.4776 122.968 63.2714 125.113L63.2751 125.109C63.0689 127.254 61.2539 128.555 58.8689 128.326C56.4801 128.101 54.9614 126.481 55.1639 124.336C55.3664 122.191 57.1701 120.89 59.5551 121.119ZM42.9727 116.083L44.0002 116.428L48.1214 125.896L50.5627 118.633L51.6727 119.008L48.7552 127.685L47.5214 127.273L43.5239 118.115L41.1652 125.135L40.0552 124.76L42.9727 116.083ZM32.9638 112.359C32.0788 111.759 30.9313 111.95 30.3013 112.88C29.6638 113.821 29.9076 114.958 30.7963 115.558C31.6963 116.165 32.8626 115.985 33.5001 115.048C34.1301 114.118 33.8601 112.966 32.9638 112.359ZM23.5998 106.505L23.601 106.501L24.781 106.655C25.351 105.058 24.7098 102.909 23.2248 101.21C21.601 99.3463 19.561 98.6376 18.196 99.8301C16.7935 101.053 17.5735 102.47 19.231 104.833C20.6073 106.779 21.0535 107.578 20.3223 108.215C19.6773 108.778 18.496 108.508 17.2698 107.105C16.096 105.763 15.7323 104.338 16.081 103.186L14.956 102.984C14.521 104.326 15.0273 106.168 16.4298 107.773C18.0235 109.595 19.9698 110.064 21.1698 109.014C22.4973 107.859 21.676 106.374 20.2885 104.42C18.706 102.163 18.241 101.383 19.0773 100.651C19.846 99.9801 21.2073 100.531 22.3998 101.896C23.449 103.095 24.165 104.808 23.601 106.501L23.5998 106.501V106.505ZM7.46744 92.2849L6.53369 92.8099V92.8174L10.7074 100.209L18.6762 95.7086L14.5024 88.3174L13.5687 88.8424L17.1537 95.1911L14.4349 96.7249L11.2099 91.0061L10.2762 91.5311L13.5049 97.2499L11.0524 98.6336L7.46744 92.2849ZM2.06381 80.2251L3.08381 79.9026L5.28506 86.8588L7.97381 86.0076L5.99381 79.7451L7.01381 79.4226L8.99381 85.6851L11.9713 84.7438L9.77006 77.7876L10.7901 77.4651L13.3513 85.5613L4.62131 88.3213L2.06006 80.2251H2.06381ZM0.496347 69.7175L5.30385 69.6387C8.0976 69.5937 9.7551 67.985 9.70635 64.9775C9.6576 61.9812 7.95135 60.4137 5.1576 60.4587L0.350098 60.5375L0.368847 61.76L5.1351 61.6812C7.29135 61.6475 8.5701 62.7087 8.6076 64.9925C8.64135 67.2762 7.4001 68.3937 5.24385 68.4275L0.477598 68.5062L0.496347 69.7175ZM6.9387 56.8399C8.6337 56.2736 9.5712 54.6724 9.9012 53.1124C10.2762 51.3424 9.89745 49.9211 8.89995 49.7074C7.8162 49.4786 7.46745 50.3186 6.6162 52.9399C5.8887 55.2236 5.19495 56.7686 3.4737 56.4086C1.9137 56.0786 1.11495 54.2449 1.61745 51.8749C2.0562 49.7936 3.22245 48.2786 4.55745 47.8174L5.0712 48.8374C3.94245 49.2499 3.0237 50.3974 2.65245 52.1449C2.2662 53.9674 2.76495 55.0736 3.6012 55.2499C4.54995 55.4486 4.9212 54.6161 5.6487 52.3474C6.5412 49.6024 7.20495 48.1286 9.0237 48.5111C10.7937 48.8861 11.4575 50.9411 10.9437 53.3599C10.4787 55.5686 9.14745 57.3724 7.52745 57.8786L6.9387 56.8436V56.8399ZM14.8325 41.4051L15.365 40.3026L7.12625 36.3088L6.59375 37.4113L14.8325 41.4051ZM22.1973 29.4912L21.5748 30.38L11.326 31.655L17.6035 36.05L16.9323 37.01L9.43604 31.76L10.1823 30.695L20.0973 29.45L14.0298 25.2012L14.701 24.2412L22.1973 29.4912ZM86.5964 13.7337L85.5651 13.3962L81.3651 3.96118L78.9839 11.2437L77.8701 10.8799L80.7126 2.17993L81.9501 2.58493L86.0226 11.7087L88.3214 4.66618L89.4351 5.02993L86.5926 13.7299L86.5964 13.7337ZM96.6316 17.3713C97.5241 17.9638 98.6679 17.7613 99.2904 16.8275L99.2866 16.8313C99.9166 15.8863 99.6616 14.75 98.7691 14.1575C97.8691 13.5575 96.7028 13.745 96.0728 14.69C95.4541 15.6238 95.7279 16.7713 96.6316 17.3713Z" fill="black" style="fill:black;fill:black;fill-opacity:1;">'),xU=(i={})=>(()=>{const e=dt(bU);return ln(e,i,!0,!0),Cn(),e})(),wU=wt('<svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M106.742 23.8399C106.16 25.5312 106.862 27.2487 107.9 28.4562C109.082 29.8287 110.439 30.3949 111.212 29.7274C112.052 29.0037 111.598 28.2199 110.034 25.9512C108.665 23.9862 107.855 22.4937 109.19 21.3499C110.398 20.3112 112.344 20.7949 113.923 22.6324C115.31 24.2487 115.802 26.0937 115.359 27.4324L114.238 27.2224C114.598 26.0749 114.242 24.6462 113.079 23.2924C111.864 21.8824 110.687 21.6012 110.038 22.1562C109.303 22.7862 109.742 23.5887 111.103 25.5462C112.742 27.9199 113.51 29.3449 112.097 30.5562C110.724 31.7374 108.692 31.0137 107.079 29.1349C105.609 27.4249 104.987 25.2687 105.568 23.6787L106.749 23.8399H106.742Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M123.073 36.3988C124.141 38.5288 123.864 40.595 122.548 41.9825L121.614 41.3113C122.701 40.1525 122.945 38.5925 122.101 36.905C121.033 34.775 118.948 33.8788 117.02 34.8463C115.093 35.81 114.56 38.0188 115.629 40.1488C116.473 41.8363 117.871 42.575 119.45 42.3988L119.428 43.55C117.53 43.775 115.708 42.7588 114.643 40.6288C113.278 37.9063 114.016 34.9663 116.469 33.74C118.921 32.5138 121.715 33.68 123.08 36.4025L123.073 36.3988Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M118.535 50.2962L118.276 49.1L127.224 47.1575L128.439 52.7525C128.844 54.6237 128.24 56.1087 126.534 56.48C125.101 56.7912 124.01 56.0375 123.47 54.6387L120.215 58.0475L119.919 56.675L123.125 53.3412L122.285 49.4787L118.535 50.2925V50.2962ZM124.261 53.5962C124.539 54.8675 125.27 55.5312 126.279 55.31C127.288 55.0925 127.666 54.185 127.389 52.9137L126.448 48.575L123.32 49.2537L124.261 53.5925V53.5962Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M124.73 72.8C121.993 72.6875 120.11 70.3513 120.234 67.295C120.358 64.2388 122.424 62.0638 125.165 62.1763C127.903 62.2888 129.785 64.625 129.661 67.6813C129.538 70.7375 127.471 72.9125 124.73 72.8ZM125.116 63.41C122.964 63.3238 121.43 64.9438 121.333 67.34C121.235 69.7325 122.63 71.4613 124.783 71.5513C126.935 71.6375 128.469 70.0288 128.566 67.6363C128.664 65.2438 127.269 63.5 125.116 63.4138V63.41Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M127.978 79.8312L127.629 81.005L119.882 78.7025L117.902 85.3625L116.874 85.0587L119.203 77.225L127.978 79.835V79.8312Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M122.9 93.8713L122.289 94.9325L115.28 90.905L111.819 96.9313L110.889 96.3988L114.961 89.3113L122.9 93.8713Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M109.033 112.456L105.508 115.299C103.115 117.226 100.408 117.118 98.6527 114.946C96.8977 112.775 97.3665 110.101 99.759 108.174L103.284 105.331L109.033 112.46V112.456ZM100.423 108.995C98.5777 110.484 98.2777 112.513 99.6127 114.17C100.959 115.839 102.995 115.966 104.851 114.47L107.431 112.389L103.014 106.91L100.423 108.999V108.995Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M84.2601 122.09C83.1576 119.581 84.4288 116.862 87.2301 115.629C90.0313 114.399 92.8926 115.299 93.9951 117.807C95.0976 120.316 93.8263 123.035 91.0251 124.265C88.2238 125.495 85.3626 124.595 84.2601 122.086V122.09ZM92.8663 118.31C92.0001 116.337 89.8663 115.674 87.6726 116.637C85.4788 117.601 84.5376 119.619 85.4076 121.591C86.2776 123.564 88.3926 124.235 90.5901 123.267C92.7838 122.304 93.7363 120.282 92.8663 118.31Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M72.5076 129.151L68.8664 121.618L67.0176 129.849L65.7651 130.006L67.9664 120.496L69.4326 120.309L73.0251 127.76L74.6601 119.649L76.1264 119.461L80.6151 128.124L79.3514 128.285L75.5076 120.778L73.8464 128.983L72.5039 129.151H72.5076Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M51.4103 118.944L52.479 119.12L58.0703 127.805L59.3115 120.241L60.4703 120.432L58.9853 129.466L57.7028 129.256L52.284 120.86L51.084 128.172L49.9253 127.981L51.4103 118.947V118.944Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M31.5354 118.985L35.7316 112.078L36.7779 112.711L32.5816 119.619L36.2754 121.861L35.7204 122.776L27.2866 117.654L27.8416 116.739L31.5354 118.981V118.985Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M18.8602 103.726C20.7952 101.784 23.7915 101.979 25.959 104.142C28.1265 106.302 28.329 109.299 26.3902 111.237C24.4552 113.18 21.459 112.985 19.2915 110.821C17.124 108.661 16.9215 105.665 18.8602 103.726ZM25.5165 110.364C27.039 108.837 26.8815 106.61 25.1865 104.919C23.4877 103.224 21.2715 103.085 19.749 104.611C18.2265 106.137 18.3727 108.354 20.0715 110.049C21.7702 111.744 23.9977 111.894 25.5202 110.367L25.5165 110.364Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M12.9127 91.9288C13.9702 90.485 13.8089 88.6363 13.1752 87.1738C12.4552 85.5125 11.3264 84.5713 10.3889 84.9763C9.37266 85.415 9.57142 86.3 10.3927 88.9325C11.1164 91.2163 11.4464 92.8813 9.83391 93.5788C8.37141 94.2125 6.65767 93.1738 5.69767 90.95C4.85017 88.9963 4.92892 87.0875 5.75017 85.94L6.75891 86.4763C6.07641 87.4663 5.99016 88.9363 6.69891 90.575C7.43766 92.285 8.48392 92.9 9.26767 92.5625C10.1564 92.1763 9.97642 91.2838 9.26017 89.0113C8.40142 86.2588 8.09017 84.6688 9.79642 83.93C11.4577 83.21 13.1864 84.5038 14.1689 86.7763C15.0652 88.8463 15.0202 91.0888 13.9927 92.4388L12.9127 91.9325V91.9288Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M0.590332 71.4838L1.64783 71.3038L2.87033 78.4925L5.64908 78.02L4.55033 71.5475L5.60783 71.3675L6.70658 77.84L9.78533 77.3188L8.56283 70.1263L9.62033 69.9463L11.0416 78.32L2.01533 79.8538L0.594082 71.48L0.590332 71.4838Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M0.893926 55.9625L1.96268 56.0375L1.45268 63.3125L4.26518 63.5113L4.72643 56.96L5.79518 57.035L5.33393 63.5863L8.45018 63.8038L8.96018 56.5288L10.0289 56.6038L9.43643 65.075L0.305176 64.4338L0.897676 55.9625H0.893926Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M13.6326 43.9362L13.1076 45.0425L4.83887 41.12L7.29137 35.9487C8.11262 34.22 9.49637 33.41 11.0751 34.16C12.3989 34.79 12.8039 36.05 12.3764 37.4862L17.0339 36.7737L16.4339 38.0412L11.8626 38.7237L10.1676 42.2937L13.6364 43.94L13.6326 43.9362ZM11.1126 37.8275C11.6714 36.6537 11.4951 35.6825 10.5614 35.24C9.62762 34.7975 8.77637 35.2812 8.22137 36.4587L6.32012 40.4675L9.21137 41.84L11.1126 37.8312V37.8275Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M17.8441 20.6562L18.6729 21.335L14.0529 26.9788L16.2316 28.7638L20.3941 23.6825L21.2229 24.3612L17.0604 29.4425L19.4791 31.4225L24.0991 25.7788L24.9279 26.4575L19.5466 33.0275L12.4629 27.2262L17.8441 20.6562Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M32.1954 12.4438L31.6929 13.4975C30.3654 12.6238 28.7754 12.6613 27.2566 13.7825C25.3179 15.215 24.8116 17.4013 26.0904 19.13C27.3804 20.8738 29.6154 21.0425 31.5204 19.6325C33.1704 18.4138 33.8941 16.4975 32.9716 15.1663L29.3641 17.8363L28.7266 16.9738L33.2041 13.6625L36.0316 17.4838L35.1091 18.1663L34.1604 16.8838C34.2841 17.9975 33.6054 19.4338 32.1691 20.5138C29.6979 22.34 26.7204 22.085 25.0816 19.8725C23.4429 17.66 24.1179 14.735 26.5966 12.8975C28.5016 11.4875 30.6054 11.39 32.1879 12.44L32.1954 12.4438Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M41.8777 14.6112L40.7714 15.1362L36.8564 6.85996L37.9627 6.33496L41.8777 14.6075V14.6112Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M55.5578 5.50253C56.2216 8.16128 54.5116 10.625 51.5416 11.3675C48.5716 12.11 45.9053 10.7375 45.2378 8.07878C44.5703 5.42003 46.2841 2.95253 49.2541 2.21378C52.2241 1.47128 54.8903 2.84378 55.5578 5.50253ZM46.4416 7.77878C46.9628 9.87128 48.9503 10.8838 51.2791 10.3025C53.6078 9.72128 54.8716 7.89503 54.3466 5.80253C53.8216 3.71003 51.8491 2.69378 49.5241 3.27503C47.1991 3.85628 45.9203 5.68628 46.4416 7.77878Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M70.4715 9.65751L69.3878 9.63876L62.589 1.86501L62.4653 9.52626L61.2915 9.50751L61.4378 0.35376L62.739 0.37626L69.324 7.89126L69.444 0.485009L70.6178 0.50376L70.4715 9.65751Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M76.3515 7.47495C76.824 9.19995 78.369 10.2237 79.9065 10.64C81.654 11.1125 83.094 10.8125 83.3602 9.82995C83.649 8.75745 82.8315 8.36745 80.259 7.36995C78.0202 6.51495 76.5127 5.7387 76.9702 4.03995C77.3865 2.50245 79.2615 1.80495 81.6015 2.43495C83.6565 2.98995 85.104 4.2387 85.4902 5.5962L84.444 6.0537C84.0952 4.90245 83.0002 3.91995 81.2752 3.45495C79.479 2.9712 78.3465 3.40245 78.1215 4.22745C77.8702 5.1612 78.6802 5.5812 80.9077 6.43245C83.5965 7.47495 85.0327 8.21745 84.549 10.0137C84.0765 11.7612 81.9915 12.3087 79.6027 11.6637C77.424 11.075 75.699 9.6462 75.2827 8.0037L76.3515 7.4712V7.47495Z" fill="black" style="fill:black;fill-opacity:1;"></path><path d="M99.5116 16.985C98.8853 17.915 97.7378 18.1138 96.8491 17.5175C95.9491 16.9138 95.6791 15.7625 96.3016 14.8325C96.9353 13.8913 98.1016 13.7075 99.0016 14.3113C99.8903 14.9075 100.142 16.0438 99.5078 16.9888L99.5116 16.985Z" fill="black" style="fill:black;fill-opacity:1;">'),SU=(i={})=>(()=>{const e=dt(wU);return ln(e,i,!0,!0),Cn(),e})();var sI=()=>{},tv=(i,e)=>e();function TU(i,e){const t=Vt(i),n=t?[t]:[],{onEnter:r=tv,onExit:s=tv}=e,[o,a]=tn(e.appear?[]:n),[l]=k9();let c,h=!1;function u(g,p){if(!g)return p&&p();h=!0,s(g,()=>{A2(()=>{h=!1,a(m=>m.filter(C=>C!==g)),p&&p()})})}function d(g){const p=c;if(!p)return g&&g();c=void 0,a(m=>[p,...m]),r(p,g??sI)}const f=e.mode==="out-in"?g=>h||u(g,d):e.mode==="in-out"?g=>d(()=>u(g)):g=>{u(g),d()};return I2(g=>{const p=i();return Vt(l)?(l(),g):(p!==g&&(c=p,A2(()=>Vt(()=>f(g)))),p)},e.appear?void 0:t),o}function EU(i,e){const t=Vt(i),{onChange:n}=e;let r=new Set(e.appear?void 0:t);const s=new WeakSet,[o,a]=tn([],{equals:!1}),[l]=k9(),c=e.exitMethod==="remove"?sI:u=>{a(d=>(d.push.apply(d,u),d));for(const d of u)s.delete(d)},h=e.exitMethod==="remove"?sI:e.exitMethod==="keep-index"?(u,d,f)=>u.splice(f,0,d):(u,d)=>u.push(d);return pe(u=>{const d=o(),f=i();if(f[q1],Vt(l))return l(),u;if(d.length){const g=u.filter(p=>!d.includes(p));return d.length=0,n({list:g,added:[],removed:[],unchanged:g,finishRemoved:c}),g}return Vt(()=>{const g=new Set(f),p=f.slice(),m=[],C=[],A=[];for(const y of f)(r.has(y)?A:m).push(y);let I=!m.length;for(let y=0;y<u.length;y++){const x=u[y];g.has(x)||(s.has(x)||(C.push(x),s.add(x)),h(p,x,y)),I&&x!==p[y]&&(I=!1)}return!C.length&&I?u:(n({list:p,added:m,removed:C,unchanged:A,finishRemoved:c}),r=g,p)})},e.appear?[]:t.slice())}function MU(i){return(...e)=>{for(const t of i)t&&t(...e)}}function LU(...i){return MU(i)}var Bp=i=>i instanceof Element;function oI(i,e){if(e(i))return i;if(typeof i=="function"&&!i.length)return oI(i(),e);if(Array.isArray(i)){const t=[];for(const n of i){const r=oI(n,e);r&&(Array.isArray(r)?t.push.apply(t,r):t.push(r))}return t.length?t:null}return null}function RU(i,e=Bp,t=Bp){const n=pe(i),r=pe(()=>oI(n(),e));return r.toArray=()=>{const s=r();return Array.isArray(s)?s:s?[s]:[]},r}function aI(i,e){if(e(i))return i;if(typeof i=="function"&&!i.length)return aI(i(),e);if(Array.isArray(i))for(const t of i){const n=aI(t,e);if(n)return n}return null}function BU(i,e=Bp,t=Bp){const n=pe(i);return pe(()=>aI(n(),e))}function v7(i){return pe(()=>{const e=i.name||"s";return{enterActive:(i.enterActiveClass||e+"-enter-active").split(" "),enter:(i.enterClass||e+"-enter").split(" "),enterTo:(i.enterToClass||e+"-enter-to").split(" "),exitActive:(i.exitActiveClass||e+"-exit-active").split(" "),exit:(i.exitClass||e+"-exit").split(" "),exitTo:(i.exitToClass||e+"-exit-to").split(" "),move:(i.moveClass||e+"-move").split(" ")}})}function b7(i){requestAnimationFrame(()=>requestAnimationFrame(i))}function x7(i,e,t,n){const{onBeforeEnter:r,onEnter:s,onAfterEnter:o}=e;r?.(t),t.classList.add(...i.enter),t.classList.add(...i.enterActive),queueMicrotask(()=>{if(!t.parentNode)return n?.();s?.(t,()=>a())}),b7(()=>{t.classList.remove(...i.enter),t.classList.add(...i.enterTo),(!s||s.length<2)&&(t.addEventListener("transitionend",a),t.addEventListener("animationend",a))});function a(l){(!l||l.target===t)&&(n?.(),t.removeEventListener("transitionend",a),t.removeEventListener("animationend",a),t.classList.remove(...i.enterActive),t.classList.remove(...i.enterTo),o?.(t))}}function w7(i,e,t,n){const{onBeforeExit:r,onExit:s,onAfterExit:o}=e;if(!t.parentNode)return n?.();r?.(t),t.classList.add(...i.exit),t.classList.add(...i.exitActive),s?.(t,()=>a()),b7(()=>{t.classList.remove(...i.exit),t.classList.add(...i.exitTo),(!s||s.length<2)&&(t.addEventListener("transitionend",a),t.addEventListener("animationend",a))});function a(l){(!l||l.target===t)&&(n?.(),t.removeEventListener("transitionend",a),t.removeEventListener("animationend",a),t.classList.remove(...i.exitActive),t.classList.remove(...i.exitTo),o?.(t))}}var PU={inout:"in-out",outin:"out-in"},GU=i=>{const e=v7(i);return TU(BU(()=>i.children),{mode:PU[i.mode],appear:i.appear,onEnter(t,n){x7(e(),i,t,n)},onExit(t,n){w7(e(),i,t,n)}})},Fre=i=>{const e=v7(i);return EU(RU(()=>i.children).toArray,{appear:i.appear,exitMethod:"keep-index",onChange({added:t,removed:n,finishRemoved:r,list:s}){const o=e();for(const l of t)x7(o,i,l);const a=[];for(const l of s)l.isConnected&&(l instanceof HTMLElement||l instanceof SVGElement)&&a.push({el:l,rect:l.getBoundingClientRect()});queueMicrotask(()=>{const l=[];for(const{el:c,rect:h}of a)if(c.isConnected){const u=c.getBoundingClientRect(),d=h.left-u.left,f=h.top-u.top;(d||f)&&(c.style.transform=`translate(${d}px, ${f}px)`,c.style.transitionDuration="0s",l.push(c))}document.body.offsetHeight;for(const c of l){let h=function(u){(u.target===c||/transform$/.test(u.propertyName))&&(c.removeEventListener("transitionend",h),c.classList.remove(...o.move))};c.classList.add(...o.move),c.style.transform=c.style.transitionDuration="",c.addEventListener("transitionend",h)}});for(const l of n)w7(o,i,l,()=>r([l]))}})};let fi=function(i){return i[i.Article=0]="Article",i[i.CaseStudy=1]="CaseStudy",i[i.ContactUs=2]="ContactUs",i[i.Showreel=3]="Showreel",i[i.ClickAndStick=4]="ClickAndStick",i[i.ComingSoon=5]="ComingSoon",i[i.MeetTheTeam=6]="MeetTheTeam",i[i.SeeUsInAction=7]="SeeUsInAction",i[i.ScrollDown=8]="ScrollDown",i[i.Project=9]="Project",i[i.Regions=10]="Regions",i}({});const DU={[fi.Article]:oU,[fi.CaseStudy]:lU,[fi.ContactUs]:hU,[fi.Showreel]:dU,[fi.ClickAndStick]:mU,[fi.ComingSoon]:gU,[fi.MeetTheTeam]:yU,[fi.SeeUsInAction]:xU,[fi.ScrollDown]:IU,[fi.Project]:vU,[fi.Regions]:SU},FU=()=>{const i=Sn([0,0]),e=Sn({type:fi.ContactUs,isDraggable:!1},(r,s)=>r.type===s.type&&r.isDraggable===s.isDraggable),t=pe(()=>Ql()!=null&&i()[0]!==0&&i()[1]!==0);let n;return mt(()=>{Ql()==null?an(()=>{clearTimeout(n)}):e(Ql())}),[F(Au,{onMouseMove:r=>{i([r.clientX,r.clientY])},onMouseEnter:r=>{i([r.clientX,r.clientY])}}),F(GU,{name:"fade",appear:!0,get children(){return F(Ac,{get when(){return t()},keyed:!0,get children(){return F($.Generic,{get style(){return{transform:`translate(calc(-50% + ${i()[0]}px), calc(-50% + ${i()[1]}px))`,...e().type!==fi.ContactUs&&{mixBlendMode:"difference"}}},css:[{pointerEvents:"none",position:"fixed",zIndex:"50",height:"144rem",width:"144rem"},{"svg:last-child":{position:"absolute",left:"7.5rem",top:"7.5rem",height:"auto",width:"129.44rem",animation:"cursor-spin 10s linear infinite"},"@keyframes cursor-spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},"&.fade-exit-to, &.fade-enter":{opacity:"0"},"&.fade-exit-active, &.fade-enter-active":{transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.68, 0, 0.1, 1.9)",transitionDuration:"1s"},"&.fade-exit-to .transformer, &.fade-enter .transformer":{"--tw-scale-x":"0","--tw-scale-y":"0",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},"&.fade-exit-active .transformer, &.fade-enter-active .transformer":{transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.68, 0, 0.1, 1.9)",transitionDuration:"1s"}}],as:"div",get children(){return F($.Generic,{class:"transformer",css:{display:"flex",alignItems:"center",justifyContent:"center"},as:"div",get children(){return[F($.Generic,{css:{height:"auto",width:"144rem"},as:rU}),F($.Generic,{get css(){return[{position:"absolute","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))",opacity:"0",mixBlendMode:"difference",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},ht.sohne.body3,{...e().isDraggable&&{opacity:"1"}}]},as:"div",children:" Drag "}),pe(()=>pe(()=>e()==null)()?null:(()=>{const r=DU[e().type];return F(r,{})})())]}})}})}})}})]},NU=[16,32,48,64,96,128,256,384,640,750,828,1080,1200,1920],kU=i=>{const[e,t]=Gr(i,["src","isEager","width","height","sizes","isHidden","quality","onLoad","ref","shouldDisableAutoplay","shouldOptimizeVercel","isInvisible"]);let{src:n}=e,r,s;if(e.sizes&&(s=Object.entries(e.sizes).map(([h,u])=>h==="-1"?u:`(max-width: ${h}px) ${u}`).join(", ")),n==null)return console.error("Image src is null"),null;n.startsWith("https://cdn.sanity.io/")&&(r=NU.map(h=>`${t5(n,h,100,e.shouldOptimizeVercel)} ${h}w`).join(", "));const o=pe(()=>t5(n,1080,100,e.shouldOptimizeVercel)),[a,l]=tn(!1);let c=null;return mt(()=>{c.complete&&l(!0)}),F($.Generic,$n({onLoad:()=>{e.onLoad?.(),l(!0)},ref:h=>{e.ref?.(h),c=h},css:{transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},as:"img",get style(){return{...e.isInvisible&&{visibility:"hidden"},opacity:a()&&!e.isHidden?1:0}},get loading(){return e.isEager?"eager":"lazy"},crossOrigin:"anonymous",get src(){return pe(()=>!!n.startsWith("/"))()?n:o()},get height(){return e.height},get width(){return e.width},sizes:s,srcSet:r},t))};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const t3="176",OU=0,nv=1,UU=2,S7=1,ZU=2,Ro=3,oo=0,Oi=1,Hs=2,Va=0,Th=1,lI=2,iv=3,rv=4,VU=5,zl=100,WU=101,HU=102,zU=103,YU=104,XU=200,KU=201,jU=202,$U=203,cI=204,hI=205,JU=206,QU=207,qU=208,eZ=209,tZ=210,nZ=211,iZ=212,rZ=213,sZ=214,uI=0,dI=1,fI=2,zh=3,gI=4,pI=5,mI=6,CI=7,T7=0,oZ=1,aZ=2,Wa=0,lZ=1,cZ=2,hZ=3,uZ=4,dZ=5,fZ=6,gZ=7,sv="attached",pZ="detached",E7=300,Yh=301,Xh=302,II=303,AI=304,k0=306,Kh=1e3,js=1001,Pp=1002,ri=1003,M7=1004,dd=1005,Sr=1006,B1=1007,Oo=1008,ao=1009,L7=1010,R7=1011,Jd=1012,n3=1013,gc=1014,Tr=1015,Ff=1016,i3=1017,r3=1018,Qd=1020,B7=35902,P7=1021,G7=1022,ar=1023,qd=1026,ef=1027,s3=1028,o3=1029,D7=1030,a3=1031,l3=1033,P1=33776,G1=33777,D1=33778,F1=33779,yI=35840,_I=35841,vI=35842,bI=35843,xI=36196,wI=37492,SI=37496,TI=37808,EI=37809,MI=37810,LI=37811,RI=37812,BI=37813,PI=37814,GI=37815,DI=37816,FI=37817,NI=37818,kI=37819,OI=37820,UI=37821,N1=36492,ZI=36494,VI=36495,F7=36283,WI=36284,HI=36285,zI=36286,YI=2200,mZ=2201,CZ=2202,tf=2300,nf=2301,km=2302,fh=2400,gh=2401,Gp=2402,c3=2500,IZ=2501,AZ=0,N7=1,XI=2,yZ=3200,_Z=3201,k7=0,vZ=1,Ma="",bi="srgb",er="srgb-linear",Dp="linear",hn="srgb",Bc=7680,ov=519,bZ=512,xZ=513,wZ=514,O7=515,SZ=516,TZ=517,EZ=518,MZ=519,KI=35044,av="300 es",Uo=2e3,Fp=2001;class vc{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ei=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lv=1234567;const Md=Math.PI/180,jh=180/Math.PI;function ys(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ei[i&255]+Ei[i>>8&255]+Ei[i>>16&255]+Ei[i>>24&255]+"-"+Ei[e&255]+Ei[e>>8&255]+"-"+Ei[e>>16&15|64]+Ei[e>>24&255]+"-"+Ei[t&63|128]+Ei[t>>8&255]+"-"+Ei[t>>16&255]+Ei[t>>24&255]+Ei[n&255]+Ei[n>>8&255]+Ei[n>>16&255]+Ei[n>>24&255]).toLowerCase()}function Ot(i,e,t){return Math.max(e,Math.min(t,i))}function h3(i,e){return(i%e+e)%e}function LZ(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function RZ(i,e,t){return i!==e?(t-i)/(e-i):0}function Ld(i,e,t){return(1-t)*i+t*e}function BZ(i,e,t,n){return Ld(i,e,1-Math.exp(-t*n))}function PZ(i,e=1){return e-Math.abs(h3(i,e*2)-e)}function GZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function DZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function FZ(i,e){return i+Math.floor(Math.random()*(e-i+1))}function NZ(i,e){return i+Math.random()*(e-i)}function kZ(i){return i*(.5-Math.random())}function OZ(i){i!==void 0&&(lv=i);let e=lv+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function UZ(i){return i*Md}function ZZ(i){return i*jh}function VZ(i){return(i&i-1)===0&&i!==0}function WZ(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function HZ(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function zZ(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+n)/2),h=o((e+n)/2),u=s((e-n)/2),d=o((e-n)/2),f=s((n-e)/2),g=o((n-e)/2);switch(r){case"XYX":i.set(a*h,l*u,l*d,a*c);break;case"YZY":i.set(l*d,a*h,l*u,a*c);break;case"ZXZ":i.set(l*u,l*d,a*h,a*c);break;case"XZX":i.set(a*h,l*g,l*f,a*c);break;case"YXY":i.set(l*f,a*h,l*g,a*c);break;case"ZYZ":i.set(l*g,l*f,a*h,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ps(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function on(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ql={DEG2RAD:Md,RAD2DEG:jh,generateUUID:ys,clamp:Ot,euclideanModulo:h3,mapLinear:LZ,inverseLerp:RZ,lerp:Ld,damp:BZ,pingpong:PZ,smoothstep:GZ,smootherstep:DZ,randInt:FZ,randFloat:NZ,randFloatSpread:kZ,seededRandom:OZ,degToRad:UZ,radToDeg:ZZ,isPowerOfTwo:VZ,ceilPowerOfTwo:WZ,floorPowerOfTwo:HZ,setQuaternionFromProperEuler:zZ,normalize:on,denormalize:ps};class Pt{constructor(e=0,t=0){Pt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ot(this.x,e.x,t.x),this.y=Ot(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ot(this.x,e,t),this.y=Ot(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ot(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ot(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Lt{constructor(e,t,n,r,s,o,a,l,c){Lt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c)}set(e,t,n,r,s,o,a,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=n,h[7]=o,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],h=n[4],u=n[7],d=n[2],f=n[5],g=n[8],p=r[0],m=r[3],C=r[6],A=r[1],I=r[4],y=r[7],x=r[2],T=r[5],S=r[8];return s[0]=o*p+a*A+l*x,s[3]=o*m+a*I+l*T,s[6]=o*C+a*y+l*S,s[1]=c*p+h*A+u*x,s[4]=c*m+h*I+u*T,s[7]=c*C+h*y+u*S,s[2]=d*p+f*A+g*x,s[5]=d*m+f*I+g*T,s[8]=d*C+f*y+g*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8];return t*o*h-t*a*c-n*s*h+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=h*o-a*c,d=a*l-h*s,f=c*s-o*l,g=t*u+n*d+r*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return e[0]=u*p,e[1]=(r*c-h*n)*p,e[2]=(a*n-r*o)*p,e[3]=d*p,e[4]=(h*t-r*l)*p,e[5]=(r*s-a*t)*p,e[6]=f*p,e[7]=(n*l-c*t)*p,e[8]=(o*t-n*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Om.makeScale(e,t)),this}rotate(e){return this.premultiply(Om.makeRotation(-e)),this}translate(e,t){return this.premultiply(Om.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Om=new Lt;function U7(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function rf(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function YZ(){const i=rf("canvas");return i.style.display="block",i}const cv={};function k1(i){i in cv||(cv[i]=!0,console.warn(i))}function XZ(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}function KZ(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function jZ(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const hv=new Lt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),uv=new Lt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function $Z(){const i={enabled:!0,workingColorSpace:er,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===hn&&(r.r=Ko(r.r),r.g=Ko(r.g),r.b=Ko(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===hn&&(r.r=Eh(r.r),r.g=Eh(r.g),r.b=Eh(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ma?Dp:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[er]:{primaries:e,whitePoint:n,transfer:Dp,toXYZ:hv,fromXYZ:uv,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:bi},outputColorSpaceConfig:{drawingBufferColorSpace:bi}},[bi]:{primaries:e,whitePoint:n,transfer:hn,toXYZ:hv,fromXYZ:uv,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:bi}}}),i}const zt=$Z();function Ko(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Eh(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Pc;class JZ{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Pc===void 0&&(Pc=rf("canvas")),Pc.width=e.width,Pc.height=e.height;const r=Pc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Pc}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rf("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ko(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ko(t[n]/255)*255):t[n]=Ko(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let QZ=0;class u3{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:QZ++}),this.uuid=ys(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Um(r[o].image)):s.push(Um(r[o]))}else s=Um(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function Um(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?JZ.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qZ=0,Si=class O1 extends vc{constructor(e=O1.DEFAULT_IMAGE,t=O1.DEFAULT_MAPPING,n=js,r=js,s=Sr,o=Oo,a=ar,l=ao,c=O1.DEFAULT_ANISOTROPY,h=Ma){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qZ++}),this.uuid=ys(),this.name="",this.source=new u3(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Pt(0,0),this.repeat=new Pt(1,1),this.center=new Pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Lt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==E7)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kh:e.x=e.x-Math.floor(e.x);break;case js:e.x=e.x<0?0:1;break;case Pp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kh:e.y=e.y-Math.floor(e.y);break;case js:e.y=e.y<0?0:1;break;case Pp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Si.DEFAULT_IMAGE=null;Si.DEFAULT_MAPPING=E7;Si.DEFAULT_ANISOTROPY=1;class nn{constructor(e=0,t=0,n=0,r=1){nn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],h=l[4],u=l[8],d=l[1],f=l[5],g=l[9],p=l[2],m=l[6],C=l[10];if(Math.abs(h-d)<.01&&Math.abs(u-p)<.01&&Math.abs(g-m)<.01){if(Math.abs(h+d)<.1&&Math.abs(u+p)<.1&&Math.abs(g+m)<.1&&Math.abs(c+f+C-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const I=(c+1)/2,y=(f+1)/2,x=(C+1)/2,T=(h+d)/4,S=(u+p)/4,M=(g+m)/4;return I>y&&I>x?I<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(I),r=T/n,s=S/n):y>x?y<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(y),n=T/r,s=M/r):x<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),n=S/s,r=M/s),this.set(n,r,s,t),this}let A=Math.sqrt((m-g)*(m-g)+(u-p)*(u-p)+(d-h)*(d-h));return Math.abs(A)<.001&&(A=1),this.x=(m-g)/A,this.y=(u-p)/A,this.z=(d-h)/A,this.w=Math.acos((c+f+C-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ot(this.x,e.x,t.x),this.y=Ot(this.y,e.y,t.y),this.z=Ot(this.z,e.z,t.z),this.w=Ot(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ot(this.x,e,t),this.y=Ot(this.y,e,t),this.z=Ot(this.z,e,t),this.w=Ot(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ot(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class eV extends vc{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth?n.depth:1,this.scissor=new nn(0,0,e,t),this.scissorTest=!1,this.viewport=new nn(0,0,e,t);const r={width:e,height:t,depth:this.depth};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},n);const s=new Si(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new u3(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class lo extends eV{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Z7 extends Si{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class tV extends Si{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ri,this.minFilter=ri,this.wrapR=js,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _s{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],h=n[r+2],u=n[r+3];const d=s[o+0],f=s[o+1],g=s[o+2],p=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=p;return}if(u!==p||l!==d||c!==f||h!==g){let m=1-a;const C=l*d+c*f+h*g+u*p,A=C>=0?1:-1,I=1-C*C;if(I>Number.EPSILON){const x=Math.sqrt(I),T=Math.atan2(x,C*A);m=Math.sin(m*T)/x,a=Math.sin(a*T)/x}const y=a*A;if(l=l*m+d*y,c=c*m+f*y,h=h*m+g*y,u=u*m+p*y,m===1-a){const x=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=x,c*=x,h*=x,u*=x}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],h=n[r+3],u=s[o],d=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+h*u+l*f-c*d,e[t+1]=l*g+h*d+c*u-a*f,e[t+2]=c*g+h*f+a*d-l*u,e[t+3]=h*g-a*u-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),h=a(r/2),u=a(s/2),d=l(n/2),f=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=d*h*u+c*f*g,this._y=c*f*u-d*h*g,this._z=c*h*g+d*f*u,this._w=c*h*u-d*f*g;break;case"YXZ":this._x=d*h*u+c*f*g,this._y=c*f*u-d*h*g,this._z=c*h*g-d*f*u,this._w=c*h*u+d*f*g;break;case"ZXY":this._x=d*h*u-c*f*g,this._y=c*f*u+d*h*g,this._z=c*h*g+d*f*u,this._w=c*h*u-d*f*g;break;case"ZYX":this._x=d*h*u-c*f*g,this._y=c*f*u+d*h*g,this._z=c*h*g-d*f*u,this._w=c*h*u+d*f*g;break;case"YZX":this._x=d*h*u+c*f*g,this._y=c*f*u+d*h*g,this._z=c*h*g-d*f*u,this._w=c*h*u-d*f*g;break;case"XZY":this._x=d*h*u-c*f*g,this._y=c*f*u-d*h*g,this._z=c*h*g+d*f*u,this._w=c*h*u+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],h=t[6],u=t[10],d=n+a+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(h-l)*f,this._y=(s-c)*f,this._z=(o-r)*f}else if(n>a&&n>u){const f=2*Math.sqrt(1+n-a-u);this._w=(h-l)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+c)/f}else if(a>u){const f=2*Math.sqrt(1+a-n-u);this._w=(s-c)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(l+h)/f}else{const f=2*Math.sqrt(1+u-n-a);this._w=(o-r)/f,this._x=(s+c)/f,this._y=(l+h)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ot(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,h=t._w;return this._x=n*h+o*a+r*c-s*l,this._y=r*h+o*l+s*a-n*c,this._z=s*h+o*c+n*l-r*a,this._w=o*h-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,a),u=Math.sin((1-t)*h)/c,d=Math.sin(t*h)/c;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,t=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(dv.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(dv.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*n),h=2*(a*t-s*r),u=2*(s*n-o*t);return this.x=t+l*c+o*u-a*h,this.y=n+l*h+a*c-s*u,this.z=r+l*u+s*h-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ot(this.x,e.x,t.x),this.y=Ot(this.y,e.y,t.y),this.z=Ot(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ot(this.x,e,t),this.y=Ot(this.y,e,t),this.z=Ot(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Ot(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Zm.copy(this).projectOnVector(e),this.sub(Zm)}reflect(e){return this.sub(Zm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ot(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zm=new Y,dv=new _s;class na{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(os.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(os.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=os.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,os):os.fromBufferAttribute(s,o),os.applyMatrix4(e.matrixWorld),this.expandByPoint(os);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),rg.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),rg.copy(n.boundingBox)),rg.applyMatrix4(e.matrixWorld),this.union(rg)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,os),os.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Uu),sg.subVectors(this.max,Uu),Gc.subVectors(e.a,Uu),Dc.subVectors(e.b,Uu),Fc.subVectors(e.c,Uu),ha.subVectors(Dc,Gc),ua.subVectors(Fc,Dc),dl.subVectors(Gc,Fc);let t=[0,-ha.z,ha.y,0,-ua.z,ua.y,0,-dl.z,dl.y,ha.z,0,-ha.x,ua.z,0,-ua.x,dl.z,0,-dl.x,-ha.y,ha.x,0,-ua.y,ua.x,0,-dl.y,dl.x,0];return!Vm(t,Gc,Dc,Fc,sg)||(t=[1,0,0,0,1,0,0,0,1],!Vm(t,Gc,Dc,Fc,sg))?!1:(og.crossVectors(ha,ua),t=[og.x,og.y,og.z],Vm(t,Gc,Dc,Fc,sg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,os).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(os).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vo=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],os=new Y,rg=new na,Gc=new Y,Dc=new Y,Fc=new Y,ha=new Y,ua=new Y,dl=new Y,Uu=new Y,sg=new Y,og=new Y,fl=new Y;function Vm(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){fl.fromArray(i,s);const a=r.x*Math.abs(fl.x)+r.y*Math.abs(fl.y)+r.z*Math.abs(fl.z),l=e.dot(fl),c=t.dot(fl),h=n.dot(fl);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>a)return!1}return!0}const nV=new na,Zu=new Y,Wm=new Y;class mo{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):nV.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Zu.subVectors(e,this.center);const t=Zu.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(Zu,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Wm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Zu.copy(e.center).add(Wm)),this.expandByPoint(Zu.copy(e.center).sub(Wm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const bo=new Y,Hm=new Y,ag=new Y,da=new Y,zm=new Y,lg=new Y,Ym=new Y;class Nf{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,bo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=bo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(bo.copy(this.origin).addScaledVector(this.direction,t),bo.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Hm.copy(e).add(t).multiplyScalar(.5),ag.copy(t).sub(e).normalize(),da.copy(this.origin).sub(Hm);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ag),a=da.dot(this.direction),l=-da.dot(ag),c=da.lengthSq(),h=Math.abs(1-o*o);let u,d,f,g;if(h>0)if(u=o*l-a,d=o*a-l,g=s*h,u>=0)if(d>=-g)if(d<=g){const p=1/h;u*=p,d*=p,f=u*(u+o*d+2*a)+d*(o*u+d+2*l)+c}else d=s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;else d<=-g?(u=Math.max(0,-(-o*s+a)),d=u>0?-s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c):d<=g?(u=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(u=Math.max(0,-(o*s+a)),d=u>0?s:Math.min(Math.max(-s,-l),s),f=-u*u+d*(d+2*l)+c);else d=o>0?-s:s,u=Math.max(0,-(o*d+a)),f=-u*u+d*(d+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Hm).addScaledVector(ag,d),f}intersectSphere(e,t){bo.subVectors(e.center,this.origin);const n=bo.dot(this.direction),r=bo.dot(bo)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(n=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(n=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,o=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,o=(e.min.y-d.y)*h),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(a=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,bo)!==null}intersectTriangle(e,t,n,r,s){zm.subVectors(t,e),lg.subVectors(n,e),Ym.crossVectors(zm,lg);let o=this.direction.dot(Ym),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;da.subVectors(this.origin,e);const l=a*this.direction.dot(lg.crossVectors(da,lg));if(l<0)return null;const c=a*this.direction.dot(zm.cross(da));if(c<0||l+c>o)return null;const h=-a*da.dot(Ym);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class xt{constructor(e,t,n,r,s,o,a,l,c,h,u,d,f,g,p,m){xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,c,h,u,d,f,g,p,m)}set(e,t,n,r,s,o,a,l,c,h,u,d,f,g,p,m){const C=this.elements;return C[0]=e,C[4]=t,C[8]=n,C[12]=r,C[1]=s,C[5]=o,C[9]=a,C[13]=l,C[2]=c,C[6]=h,C[10]=u,C[14]=d,C[3]=f,C[7]=g,C[11]=p,C[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new xt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Nc.setFromMatrixColumn(e,0).length(),s=1/Nc.setFromMatrixColumn(e,1).length(),o=1/Nc.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=o*h,f=o*u,g=a*h,p=a*u;t[0]=l*h,t[4]=-l*u,t[8]=c,t[1]=f+g*c,t[5]=d-p*c,t[9]=-a*l,t[2]=p-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*h,f=l*u,g=c*h,p=c*u;t[0]=d+p*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*u,t[5]=o*h,t[9]=-a,t[2]=f*a-g,t[6]=p+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*h,f=l*u,g=c*h,p=c*u;t[0]=d-p*a,t[4]=-o*u,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*h,t[9]=p-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*h,f=o*u,g=a*h,p=a*u;t[0]=l*h,t[4]=g*c-f,t[8]=d*c+p,t[1]=l*u,t[5]=p*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*h,t[4]=p-d*u,t[8]=g*u+f,t[1]=u,t[5]=o*h,t[9]=-a*h,t[2]=-c*h,t[6]=f*u+g,t[10]=d-p*u}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*h,t[4]=-u,t[8]=c*h,t[1]=d*u+p,t[5]=o*h,t[9]=f*u-g,t[2]=g*u-f,t[6]=a*h,t[10]=p*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(iV,e,rV)}lookAt(e,t,n){const r=this.elements;return Ir.subVectors(e,t),Ir.lengthSq()===0&&(Ir.z=1),Ir.normalize(),fa.crossVectors(n,Ir),fa.lengthSq()===0&&(Math.abs(n.z)===1?Ir.x+=1e-4:Ir.z+=1e-4,Ir.normalize(),fa.crossVectors(n,Ir)),fa.normalize(),cg.crossVectors(Ir,fa),r[0]=fa.x,r[4]=cg.x,r[8]=Ir.x,r[1]=fa.y,r[5]=cg.y,r[9]=Ir.y,r[2]=fa.z,r[6]=cg.z,r[10]=Ir.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],h=n[1],u=n[5],d=n[9],f=n[13],g=n[2],p=n[6],m=n[10],C=n[14],A=n[3],I=n[7],y=n[11],x=n[15],T=r[0],S=r[4],M=r[8],_=r[12],v=r[1],B=r[5],E=r[9],L=r[13],G=r[2],Z=r[6],U=r[10],V=r[14],z=r[3],le=r[7],j=r[11],re=r[15];return s[0]=o*T+a*v+l*G+c*z,s[4]=o*S+a*B+l*Z+c*le,s[8]=o*M+a*E+l*U+c*j,s[12]=o*_+a*L+l*V+c*re,s[1]=h*T+u*v+d*G+f*z,s[5]=h*S+u*B+d*Z+f*le,s[9]=h*M+u*E+d*U+f*j,s[13]=h*_+u*L+d*V+f*re,s[2]=g*T+p*v+m*G+C*z,s[6]=g*S+p*B+m*Z+C*le,s[10]=g*M+p*E+m*U+C*j,s[14]=g*_+p*L+m*V+C*re,s[3]=A*T+I*v+y*G+x*z,s[7]=A*S+I*B+y*Z+x*le,s[11]=A*M+I*E+y*U+x*j,s[15]=A*_+I*L+y*V+x*re,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],f=e[14],g=e[3],p=e[7],m=e[11],C=e[15];return g*(+s*l*u-r*c*u-s*a*d+n*c*d+r*a*f-n*l*f)+p*(+t*l*f-t*c*d+s*o*d-r*o*f+r*c*h-s*l*h)+m*(+t*c*u-t*a*f-s*o*u+n*o*f+s*a*h-n*c*h)+C*(-r*a*h-t*l*u+t*a*d+r*o*u-n*o*d+n*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],f=e[11],g=e[12],p=e[13],m=e[14],C=e[15],A=u*m*c-p*d*c+p*l*f-a*m*f-u*l*C+a*d*C,I=g*d*c-h*m*c-g*l*f+o*m*f+h*l*C-o*d*C,y=h*p*c-g*u*c+g*a*f-o*p*f-h*a*C+o*u*C,x=g*u*l-h*p*l-g*a*d+o*p*d+h*a*m-o*u*m,T=t*A+n*I+r*y+s*x;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/T;return e[0]=A*S,e[1]=(p*d*s-u*m*s-p*r*f+n*m*f+u*r*C-n*d*C)*S,e[2]=(a*m*s-p*l*s+p*r*c-n*m*c-a*r*C+n*l*C)*S,e[3]=(u*l*s-a*d*s-u*r*c+n*d*c+a*r*f-n*l*f)*S,e[4]=I*S,e[5]=(h*m*s-g*d*s+g*r*f-t*m*f-h*r*C+t*d*C)*S,e[6]=(g*l*s-o*m*s-g*r*c+t*m*c+o*r*C-t*l*C)*S,e[7]=(o*d*s-h*l*s+h*r*c-t*d*c-o*r*f+t*l*f)*S,e[8]=y*S,e[9]=(g*u*s-h*p*s-g*n*f+t*p*f+h*n*C-t*u*C)*S,e[10]=(o*p*s-g*a*s+g*n*c-t*p*c-o*n*C+t*a*C)*S,e[11]=(h*a*s-o*u*s-h*n*c+t*u*c+o*n*f-t*a*f)*S,e[12]=x*S,e[13]=(h*p*r-g*u*r+g*n*d-t*p*d-h*n*m+t*u*m)*S,e[14]=(g*a*r-o*p*r-g*n*l+t*p*l+o*n*m-t*a*m)*S,e[15]=(o*u*r-h*a*r+h*n*l-t*u*l-o*n*d+t*a*d)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,h=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,h*a+n,h*l-r*o,0,c*l-r*a,h*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,h=o+o,u=a+a,d=s*c,f=s*h,g=s*u,p=o*h,m=o*u,C=a*u,A=l*c,I=l*h,y=l*u,x=n.x,T=n.y,S=n.z;return r[0]=(1-(p+C))*x,r[1]=(f+y)*x,r[2]=(g-I)*x,r[3]=0,r[4]=(f-y)*T,r[5]=(1-(d+C))*T,r[6]=(m+A)*T,r[7]=0,r[8]=(g+I)*S,r[9]=(m-A)*S,r[10]=(1-(d+p))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=Nc.set(r[0],r[1],r[2]).length();const o=Nc.set(r[4],r[5],r[6]).length(),a=Nc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],as.copy(this);const c=1/s,h=1/o,u=1/a;return as.elements[0]*=c,as.elements[1]*=c,as.elements[2]*=c,as.elements[4]*=h,as.elements[5]*=h,as.elements[6]*=h,as.elements[8]*=u,as.elements[9]*=u,as.elements[10]*=u,t.setFromRotationMatrix(as),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=Uo){const l=this.elements,c=2*s/(t-e),h=2*s/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let f,g;if(a===Uo)f=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===Fp)f=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=h,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=Uo){const l=this.elements,c=1/(t-e),h=1/(n-r),u=1/(o-s),d=(t+e)*c,f=(n+r)*h;let g,p;if(a===Uo)g=(o+s)*u,p=-2*u;else if(a===Fp)g=s*u,p=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=p,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Nc=new Y,as=new xt,iV=new Y(0,0,0),rV=new Y(1,1,1),fa=new Y,cg=new Y,Ir=new Y,fv=new xt,gv=new _s;class co{constructor(e=0,t=0,n=0,r=co.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ot(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ot(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ot(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ot(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ot(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ot(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return fv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fv,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return gv.setFromEuler(this),this.setFromQuaternion(gv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}co.DEFAULT_ORDER="XYZ";class d3{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let sV=0;const pv=new Y,kc=new _s,xo=new xt,hg=new Y,Vu=new Y,oV=new Y,aV=new _s,mv=new Y(1,0,0),Cv=new Y(0,1,0),Iv=new Y(0,0,1),Av={type:"added"},lV={type:"removed"},Oc={type:"childadded",child:null},Xm={type:"childremoved",child:null};class Bn extends vc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sV++}),this.uuid=ys(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new Y,t=new co,n=new _s,r=new Y(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new xt},normalMatrix:{value:new Lt}}),this.matrix=new xt,this.matrixWorld=new xt,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new d3,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return kc.setFromAxisAngle(e,t),this.quaternion.multiply(kc),this}rotateOnWorldAxis(e,t){return kc.setFromAxisAngle(e,t),this.quaternion.premultiply(kc),this}rotateX(e){return this.rotateOnAxis(mv,e)}rotateY(e){return this.rotateOnAxis(Cv,e)}rotateZ(e){return this.rotateOnAxis(Iv,e)}translateOnAxis(e,t){return pv.copy(e).applyQuaternion(this.quaternion),this.position.add(pv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(mv,e)}translateY(e){return this.translateOnAxis(Cv,e)}translateZ(e){return this.translateOnAxis(Iv,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xo.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?hg.copy(e):hg.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Vu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xo.lookAt(Vu,hg,this.up):xo.lookAt(hg,Vu,this.up),this.quaternion.setFromRotationMatrix(xo),r&&(xo.extractRotation(r.matrixWorld),kc.setFromRotationMatrix(xo),this.quaternion.premultiply(kc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Av),Oc.child=e,this.dispatchEvent(Oc),Oc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lV),Xm.child=e,this.dispatchEvent(Xm),Xm.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),xo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xo.multiply(e.parent.matrixWorld)),e.applyMatrix4(xo),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Av),Oc.child=e,this.dispatchEvent(Oc),Oc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,e,oV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vu,aV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?{min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}:void 0,boundingSphere:a.boundingSphere?{radius:a.boundingSphere.radius,center:a.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),h=o(e.images),u=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),c.length>0&&(n.textures=c),h.length>0&&(n.images=h),u.length>0&&(n.shapes=u),d.length>0&&(n.skeletons=d),f.length>0&&(n.animations=f),g.length>0&&(n.nodes=g)}return n.object=r,n;function o(a){const l=[];for(const c in a){const h=a[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Bn.DEFAULT_UP=new Y(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ls=new Y,wo=new Y,Km=new Y,So=new Y,Uc=new Y,Zc=new Y,yv=new Y,jm=new Y,$m=new Y,Jm=new Y,Qm=new nn,qm=new nn,eC=new nn;class ms{constructor(e=new Y,t=new Y,n=new Y){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ls.subVectors(e,t),r.cross(ls);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){ls.subVectors(r,t),wo.subVectors(n,t),Km.subVectors(e,t);const o=ls.dot(ls),a=ls.dot(wo),l=ls.dot(Km),c=wo.dot(wo),h=wo.dot(Km),u=o*c-a*a;if(u===0)return s.set(0,0,0),null;const d=1/u,f=(c*l-a*h)*d,g=(o*h-a*l)*d;return s.set(1-f-g,g,f)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,So)===null?!1:So.x>=0&&So.y>=0&&So.x+So.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,So)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,So.x),l.addScaledVector(o,So.y),l.addScaledVector(a,So.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return Qm.setScalar(0),qm.setScalar(0),eC.setScalar(0),Qm.fromBufferAttribute(e,t),qm.fromBufferAttribute(e,n),eC.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Qm,s.x),o.addScaledVector(qm,s.y),o.addScaledVector(eC,s.z),o}static isFrontFacing(e,t,n,r){return ls.subVectors(n,t),wo.subVectors(e,t),ls.cross(wo).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ls.subVectors(this.c,this.b),wo.subVectors(this.a,this.b),ls.cross(wo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ms.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ms.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return ms.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return ms.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ms.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;Uc.subVectors(r,n),Zc.subVectors(s,n),jm.subVectors(e,n);const l=Uc.dot(jm),c=Zc.dot(jm);if(l<=0&&c<=0)return t.copy(n);$m.subVectors(e,r);const h=Uc.dot($m),u=Zc.dot($m);if(h>=0&&u<=h)return t.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(n).addScaledVector(Uc,o);Jm.subVectors(e,s);const f=Uc.dot(Jm),g=Zc.dot(Jm);if(g>=0&&f<=g)return t.copy(s);const p=f*c-l*g;if(p<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(n).addScaledVector(Zc,a);const m=h*g-f*u;if(m<=0&&u-h>=0&&f-g>=0)return yv.subVectors(s,r),a=(u-h)/(u-h+(f-g)),t.copy(r).addScaledVector(yv,a);const C=1/(m+p+d);return o=p*C,a=d*C,t.copy(n).addScaledVector(Uc,o).addScaledVector(Zc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const V7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ga={h:0,s:0,l:0},ug={h:0,s:0,l:0};function tC(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let _t=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=bi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,zt.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=zt.workingColorSpace){return this.r=e,this.g=t,this.b=n,zt.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=zt.workingColorSpace){if(e=h3(e,1),t=Ot(t,0,1),n=Ot(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=tC(o,s,e+1/3),this.g=tC(o,s,e),this.b=tC(o,s,e-1/3)}return zt.toWorkingColorSpace(this,r),this}setStyle(e,t=bi){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=bi){const n=V7[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ko(e.r),this.g=Ko(e.g),this.b=Ko(e.b),this}copyLinearToSRGB(e){return this.r=Eh(e.r),this.g=Eh(e.g),this.b=Eh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=bi){return zt.fromWorkingColorSpace(Mi.copy(this),e),Math.round(Ot(Mi.r*255,0,255))*65536+Math.round(Ot(Mi.g*255,0,255))*256+Math.round(Ot(Mi.b*255,0,255))}getHexString(e=bi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zt.workingColorSpace){zt.fromWorkingColorSpace(Mi.copy(this),t);const n=Mi.r,r=Mi.g,s=Mi.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const h=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=h<=.5?u/(o+a):u/(2-o-a),o){case n:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-n)/u+2;break;case s:l=(n-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=zt.workingColorSpace){return zt.fromWorkingColorSpace(Mi.copy(this),t),e.r=Mi.r,e.g=Mi.g,e.b=Mi.b,e}getStyle(e=bi){zt.fromWorkingColorSpace(Mi.copy(this),e);const t=Mi.r,n=Mi.g,r=Mi.b;return e!==bi?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(ga),this.setHSL(ga.h+e,ga.s+t,ga.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ga),e.getHSL(ug);const n=Ld(ga.h,ug.h,t),r=Ld(ga.s,ug.s,t),s=Ld(ga.l,ug.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Mi=new _t;_t.NAMES=V7;let cV=0;class eo extends vc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cV++}),this.uuid=ys(),this.name="",this.type="Material",this.blending=Th,this.side=oo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=cI,this.blendDst=hI,this.blendEquation=zl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new _t(0,0,0),this.blendAlpha=0,this.depthFunc=zh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ov,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bc,this.stencilZFail=Bc,this.stencilZPass=Bc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Th&&(n.blending=this.blending),this.side!==oo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==cI&&(n.blendSrc=this.blendSrc),this.blendDst!==hI&&(n.blendDst=this.blendDst),this.blendEquation!==zl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==zh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ov&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bc&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Bc&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Bc&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Zo extends eo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.combine=T7,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Hn=new Y,dg=new Pt;let hV=0;class yi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:hV++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=KI,this.updateRanges=[],this.gpuType=Tr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)dg.fromBufferAttribute(this,t),dg.applyMatrix3(e),this.setXY(t,dg.x,dg.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix3(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Hn.fromBufferAttribute(this,t),Hn.applyMatrix4(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Hn.fromBufferAttribute(this,t),Hn.applyNormalMatrix(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Hn.fromBufferAttribute(this,t),Hn.transformDirection(e),this.setXYZ(t,Hn.x,Hn.y,Hn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ps(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=on(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ps(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ps(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ps(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ps(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),n=on(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),n=on(n,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),n=on(n,this.array),r=on(r,this.array),s=on(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==KI&&(e.usage=this.usage),e}}class W7 extends yi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class H7 extends yi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ui extends yi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let uV=0;const Or=new xt,nC=new Bn,Vc=new Y,Ar=new na,Wu=new na,ci=new Y;class gr extends vc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:uV++}),this.uuid=ys(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(U7(e)?H7:W7)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Lt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Or.makeRotationFromQuaternion(e),this.applyMatrix4(Or),this}rotateX(e){return Or.makeRotationX(e),this.applyMatrix4(Or),this}rotateY(e){return Or.makeRotationY(e),this.applyMatrix4(Or),this}rotateZ(e){return Or.makeRotationZ(e),this.applyMatrix4(Or),this}translate(e,t,n){return Or.makeTranslation(e,t,n),this.applyMatrix4(Or),this}scale(e,t,n){return Or.makeScale(e,t,n),this.applyMatrix4(Or),this}lookAt(e){return nC.lookAt(e),nC.updateMatrix(),this.applyMatrix4(nC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vc).negate(),this.translate(Vc.x,Vc.y,Vc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ui(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new na);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];Ar.setFromBufferAttribute(s),this.morphTargetsRelative?(ci.addVectors(this.boundingBox.min,Ar.min),this.boundingBox.expandByPoint(ci),ci.addVectors(this.boundingBox.max,Ar.max),this.boundingBox.expandByPoint(ci)):(this.boundingBox.expandByPoint(Ar.min),this.boundingBox.expandByPoint(Ar.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new mo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(Ar.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Wu.setFromBufferAttribute(a),this.morphTargetsRelative?(ci.addVectors(Ar.min,Wu.min),Ar.expandByPoint(ci),ci.addVectors(Ar.max,Wu.max),Ar.expandByPoint(ci)):(Ar.expandByPoint(Wu.min),Ar.expandByPoint(Wu.max))}Ar.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ci.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ci));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,h=a.count;c<h;c++)ci.fromBufferAttribute(a,c),l&&(Vc.fromBufferAttribute(e,c),ci.add(Vc)),r=Math.max(r,n.distanceToSquared(ci))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<n.count;M++)a[M]=new Y,l[M]=new Y;const c=new Y,h=new Y,u=new Y,d=new Pt,f=new Pt,g=new Pt,p=new Y,m=new Y;function C(M,_,v){c.fromBufferAttribute(n,M),h.fromBufferAttribute(n,_),u.fromBufferAttribute(n,v),d.fromBufferAttribute(s,M),f.fromBufferAttribute(s,_),g.fromBufferAttribute(s,v),h.sub(c),u.sub(c),f.sub(d),g.sub(d);const B=1/(f.x*g.y-g.x*f.y);isFinite(B)&&(p.copy(h).multiplyScalar(g.y).addScaledVector(u,-f.y).multiplyScalar(B),m.copy(u).multiplyScalar(f.x).addScaledVector(h,-g.x).multiplyScalar(B),a[M].add(p),a[_].add(p),a[v].add(p),l[M].add(m),l[_].add(m),l[v].add(m))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let M=0,_=A.length;M<_;++M){const v=A[M],B=v.start,E=v.count;for(let L=B,G=B+E;L<G;L+=3)C(e.getX(L+0),e.getX(L+1),e.getX(L+2))}const I=new Y,y=new Y,x=new Y,T=new Y;function S(M){x.fromBufferAttribute(r,M),T.copy(x);const _=a[M];I.copy(_),I.sub(x.multiplyScalar(x.dot(_))).normalize(),y.crossVectors(T,_);const B=y.dot(l[M])<0?-1:1;o.setXYZW(M,I.x,I.y,I.z,B)}for(let M=0,_=A.length;M<_;++M){const v=A[M],B=v.start,E=v.count;for(let L=B,G=B+E;L<G;L+=3)S(e.getX(L+0)),S(e.getX(L+1)),S(e.getX(L+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new yi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const r=new Y,s=new Y,o=new Y,a=new Y,l=new Y,c=new Y,h=new Y,u=new Y;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),p=e.getX(d+1),m=e.getX(d+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,p),c.fromBufferAttribute(n,m),a.add(h),l.add(h),c.add(h),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),h.subVectors(o,s),u.subVectors(r,s),h.cross(u),n.setXYZ(d+0,h.x,h.y,h.z),n.setXYZ(d+1,h.x,h.y,h.z),n.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ci.fromBufferAttribute(e,t),ci.normalize(),e.setXYZ(t,ci.x,ci.y,ci.z)}toNonIndexed(){function e(a,l){const c=a.array,h=a.itemSize,u=a.normalized,d=new c.constructor(l.length*h);let f=0,g=0;for(let p=0,m=l.length;p<m;p++){a.isInterleavedBufferAttribute?f=l[p]*a.data.stride+a.offset:f=l[p]*h;for(let C=0;C<h;C++)d[g++]=c[f++]}return new yi(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gr,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let h=0,u=c.length;h<u;h++){const d=c[h],f=e(d,n);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const c=n[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){const f=c[u];h.push(f.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let d=0,f=u.length;d<f;d++)h.push(u[d].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,h=o.length;c<h;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _v=new xt,gl=new Nf,fg=new mo,vv=new Y,gg=new Y,pg=new Y,mg=new Y,iC=new Y,Cg=new Y,bv=new Y,Ig=new Y;let jn=class extends Bn{constructor(e=new gr,t=new Zo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Cg.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=a[l],u=s[l];h!==0&&(iC.fromBufferAttribute(u,e),o?Cg.addScaledVector(iC,h):Cg.addScaledVector(iC.sub(t),h))}t.add(Cg)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),fg.copy(n.boundingSphere),fg.applyMatrix4(s),gl.copy(e.ray).recast(e.near),!(fg.containsPoint(gl.origin)===!1&&(gl.intersectSphere(fg,vv)===null||gl.origin.distanceToSquared(vv)>(e.far-e.near)**2))&&(_v.copy(s).invert(),gl.copy(e.ray).applyMatrix4(_v),!(n.boundingBox!==null&&gl.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,gl)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,u=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,p=d.length;g<p;g++){const m=d[g],C=o[m.materialIndex],A=Math.max(m.start,f.start),I=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let y=A,x=I;y<x;y+=3){const T=a.getX(y),S=a.getX(y+1),M=a.getX(y+2);r=Ag(this,C,e,n,c,h,u,T,S,M),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,t.push(r))}}else{const g=Math.max(0,f.start),p=Math.min(a.count,f.start+f.count);for(let m=g,C=p;m<C;m+=3){const A=a.getX(m),I=a.getX(m+1),y=a.getX(m+2);r=Ag(this,o,e,n,c,h,u,A,I,y),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,p=d.length;g<p;g++){const m=d[g],C=o[m.materialIndex],A=Math.max(m.start,f.start),I=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));for(let y=A,x=I;y<x;y+=3){const T=y,S=y+1,M=y+2;r=Ag(this,C,e,n,c,h,u,T,S,M),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,t.push(r))}}else{const g=Math.max(0,f.start),p=Math.min(l.count,f.start+f.count);for(let m=g,C=p;m<C;m+=3){const A=m,I=m+1,y=m+2;r=Ag(this,o,e,n,c,h,u,A,I,y),r&&(r.faceIndex=Math.floor(m/3),t.push(r))}}}};function dV(i,e,t,n,r,s,o,a){let l;if(e.side===Oi?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===oo,a),l===null)return null;Ig.copy(a),Ig.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(Ig);return c<t.near||c>t.far?null:{distance:c,point:Ig.clone(),object:i}}function Ag(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,gg),i.getVertexPosition(l,pg),i.getVertexPosition(c,mg);const h=dV(i,e,t,n,gg,pg,mg,bv);if(h){const u=new Y;ms.getBarycoord(bv,gg,pg,mg,u),r&&(h.uv=ms.getInterpolatedAttribute(r,a,l,c,u,new Pt)),s&&(h.uv1=ms.getInterpolatedAttribute(s,a,l,c,u,new Pt)),o&&(h.normal=ms.getInterpolatedAttribute(o,a,l,c,u,new Y),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new Y,materialIndex:0};ms.getNormal(gg,pg,mg,d.normal),h.face=d,h.barycoord=u}return h}class kf extends gr{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],h=[],u=[];let d=0,f=0;g("z","y","x",-1,-1,n,t,e,o,s,0),g("z","y","x",1,-1,n,t,-e,o,s,1),g("x","z","y",1,1,e,n,t,r,o,2),g("x","z","y",1,-1,e,n,-t,r,o,3),g("x","y","z",1,-1,e,t,n,r,s,4),g("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ui(c,3)),this.setAttribute("normal",new Ui(h,3)),this.setAttribute("uv",new Ui(u,2));function g(p,m,C,A,I,y,x,T,S,M,_){const v=y/S,B=x/M,E=y/2,L=x/2,G=T/2,Z=S+1,U=M+1;let V=0,z=0;const le=new Y;for(let j=0;j<U;j++){const re=j*B-L;for(let Ae=0;Ae<Z;Ae++){const xe=Ae*v-E;le[p]=xe*A,le[m]=re*I,le[C]=G,c.push(le.x,le.y,le.z),le[p]=0,le[m]=0,le[C]=T>0?1:-1,h.push(le.x,le.y,le.z),u.push(Ae/S),u.push(1-j/M),V+=1}}for(let j=0;j<M;j++)for(let re=0;re<S;re++){const Ae=d+re+Z*j,xe=d+re+Z*(j+1),J=d+(re+1)+Z*(j+1),oe=d+(re+1)+Z*j;l.push(Ae,xe,oe),l.push(xe,J,oe),z+=6}a.addGroup(f,z,_),f+=z,d+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kf(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $h(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function Yi(i){const e={};for(let t=0;t<i.length;t++){const n=$h(i[t]);for(const r in n)e[r]=n[r]}return e}function fV(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function z7(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:zt.workingColorSpace}const gV={clone:$h,merge:Yi};var pV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,mV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ni extends eo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=pV,this.fragmentShader=mV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$h(e.uniforms),this.uniformsGroups=fV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Y7 extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new xt,this.projectionMatrix=new xt,this.projectionMatrixInverse=new xt,this.coordinateSystem=Uo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const pa=new Y,xv=new Pt,wv=new Pt;class Ai extends Y7{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=jh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Md*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jh*2*Math.atan(Math.tan(Md*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){pa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(pa.x,pa.y).multiplyScalar(-e/pa.z),pa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(pa.x,pa.y).multiplyScalar(-e/pa.z)}getViewSize(e,t){return this.getViewBounds(e,xv,wv),t.subVectors(wv,xv)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Md*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wc=-90,Hc=1;class CV extends Bn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ai(Wc,Hc,e,t);r.layers=this.layers,this.add(r);const s=new Ai(Wc,Hc,e,t);s.layers=this.layers,this.add(s);const o=new Ai(Wc,Hc,e,t);o.layers=this.layers,this.add(o);const a=new Ai(Wc,Hc,e,t);a.layers=this.layers,this.add(a);const l=new Ai(Wc,Hc,e,t);l.layers=this.layers,this.add(l);const c=new Ai(Wc,Hc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Uo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Fp)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,h]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(u,d,f),e.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class X7 extends Si{constructor(e=[],t=Yh,n,r,s,o,a,l,c,h){super(e,t,n,r,s,o,a,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class IV extends lo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new X7(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new kf(5,5,5),s=new Ni({name:"CubemapFromEquirect",uniforms:$h(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Oi,blending:Va});s.uniforms.tEquirect.value=t;const o=new jn(r,s),a=t.minFilter;return t.minFilter===Oo&&(t.minFilter=Sr),new CV(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}class Kr extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const AV={type:"move"};class rC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const p of e.hand.values()){const m=t.getJointPose(p,n),C=this._getHandJoint(c,p);m!==null&&(C.matrix.fromArray(m.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,C.jointRadius=m.radius),C.visible=m!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],d=h.position.distanceTo(u.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(AV)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Kr;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class f3 extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new co,this.environmentIntensity=1,this.environmentRotation=new co,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class yV{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=KI,this.updateRanges=[],this.version=0,this.uuid=ys()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ys()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zi=new Y;class g3{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ps(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=on(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ps(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ps(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ps(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ps(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),n=on(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),n=on(n,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),n=on(n,this.array),r=on(r,this.array),s=on(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new yi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new g3(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Sv=new Y,Tv=new nn,Ev=new nn,_V=new Y,Mv=new xt,yg=new Y,sC=new mo,Lv=new xt,oC=new Nf;class vV extends jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=sv,this.bindMatrix=new xt,this.bindMatrixInverse=new xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new na),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,yg),this.boundingBox.expandByPoint(yg)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new mo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,yg),this.boundingSphere.expandByPoint(yg)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sC.copy(this.boundingSphere),sC.applyMatrix4(r),e.ray.intersectsSphere(sC)!==!1&&(Lv.copy(r).invert(),oC.copy(e.ray).applyMatrix4(Lv),!(this.boundingBox!==null&&oC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,oC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new nn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===sv?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===pZ?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Tv.fromBufferAttribute(r.attributes.skinIndex,e),Ev.fromBufferAttribute(r.attributes.skinWeight,e),Sv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Ev.getComponent(s);if(o!==0){const a=Tv.getComponent(s);Mv.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(_V.copy(Sv).applyMatrix4(Mv),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class K7 extends Bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class p3 extends Si{constructor(e=null,t=1,n=1,r,s,o,a,l,c=ri,h=ri,u,d){super(null,o,a,l,c,h,r,s,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Rv=new xt,bV=new xt;class m3{constructor(e=[],t=[]){this.uuid=ys(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new xt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new xt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bV;Rv.multiplyMatrices(a,t[s]),Rv.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new m3(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new p3(t,e,e,ar,Tr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new K7),this.bones.push(o),this.boneInverses.push(new xt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class jI extends yi{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zc=new xt,Bv=new xt,_g=[],Pv=new na,xV=new xt,Hu=new jn,zu=new mo;class wV extends jn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new jI(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,xV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new na),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zc),Pv.copy(e.boundingBox).applyMatrix4(zc),this.boundingBox.union(Pv)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new mo),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,zc),zu.copy(e.boundingSphere).applyMatrix4(zc),this.boundingSphere.union(zu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Hu.geometry=this.geometry,Hu.material=this.material,Hu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zu.copy(this.boundingSphere),zu.applyMatrix4(n),e.ray.intersectsSphere(zu)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,zc),Bv.multiplyMatrices(n,zc),Hu.matrixWorld=Bv,Hu.raycast(e,_g);for(let o=0,a=_g.length;o<a;o++){const l=_g[o];l.instanceId=s,l.object=this,t.push(l)}_g.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new jI(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new p3(new Float32Array(r*this.count),r,this.count,s3,Tr));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const aC=new Y,SV=new Y,TV=new Lt;class Dl{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=aC.subVectors(n,t).cross(SV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(aC),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||TV.getNormalMatrix(e),r=this.coplanarPoint(aC).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const pl=new mo,vg=new Y;class C3{constructor(e=new Dl,t=new Dl,n=new Dl,r=new Dl,s=new Dl,o=new Dl){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Uo){const n=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],u=r[6],d=r[7],f=r[8],g=r[9],p=r[10],m=r[11],C=r[12],A=r[13],I=r[14],y=r[15];if(n[0].setComponents(l-s,d-c,m-f,y-C).normalize(),n[1].setComponents(l+s,d+c,m+f,y+C).normalize(),n[2].setComponents(l+o,d+h,m+g,y+A).normalize(),n[3].setComponents(l-o,d-h,m-g,y-A).normalize(),n[4].setComponents(l-a,d-u,m-p,y-I).normalize(),t===Uo)n[5].setComponents(l+a,d+u,m+p,y+I).normalize();else if(t===Fp)n[5].setComponents(a,u,p,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),pl.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),pl.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(pl)}intersectsSprite(e){return pl.center.set(0,0,0),pl.radius=.7071067811865476,pl.applyMatrix4(e.matrixWorld),this.intersectsSphere(pl)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(vg.x=r.normal.x>0?e.max.x:e.min.x,vg.y=r.normal.y>0?e.max.y:e.min.y,vg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(vg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class j7 extends eo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _t(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Np=new Y,kp=new Y,Gv=new xt,Yu=new Nf,bg=new mo,lC=new Y,Dv=new Y;class I3 extends Bn{constructor(e=new gr,t=new j7){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Np.fromBufferAttribute(t,r-1),kp.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Np.distanceTo(kp);e.setAttribute("lineDistance",new Ui(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),bg.copy(n.boundingSphere),bg.applyMatrix4(r),bg.radius+=s,e.ray.intersectsSphere(bg)===!1)return;Gv.copy(r).invert(),Yu.copy(e.ray).applyMatrix4(Gv);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,h=n.index,d=n.attributes.position;if(h!==null){const f=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let p=f,m=g-1;p<m;p+=c){const C=h.getX(p),A=h.getX(p+1),I=xg(this,e,Yu,l,C,A,p);I&&t.push(I)}if(this.isLineLoop){const p=h.getX(g-1),m=h.getX(f),C=xg(this,e,Yu,l,p,m,g-1);C&&t.push(C)}}else{const f=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let p=f,m=g-1;p<m;p+=c){const C=xg(this,e,Yu,l,p,p+1,p);C&&t.push(C)}if(this.isLineLoop){const p=xg(this,e,Yu,l,g-1,f,g-1);p&&t.push(p)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function xg(i,e,t,n,r,s,o){const a=i.geometry.attributes.position;if(Np.fromBufferAttribute(a,r),kp.fromBufferAttribute(a,s),t.distanceSqToSegment(Np,kp,lC,Dv)>n)return;lC.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(lC);if(!(c<e.near||c>e.far))return{distance:c,point:Dv.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const Fv=new Y,Nv=new Y;class EV extends I3{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Fv.fromBufferAttribute(t,r),Nv.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Fv.distanceTo(Nv);e.setAttribute("lineDistance",new Ui(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MV extends I3{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $7 extends eo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const kv=new xt,$I=new Nf,wg=new mo,Sg=new Y;class J7 extends Bn{constructor(e=new gr,t=new $7){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),wg.copy(n.boundingSphere),wg.applyMatrix4(r),wg.radius+=s,e.ray.intersectsSphere(wg)===!1)return;kv.copy(r).invert(),$I.copy(e.ray).applyMatrix4(kv);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,u=n.attributes.position;if(c!==null){const d=Math.max(0,o.start),f=Math.min(c.count,o.start+o.count);for(let g=d,p=f;g<p;g++){const m=c.getX(g);Sg.fromBufferAttribute(u,m),Ov(Sg,m,l,r,e,t,this)}}else{const d=Math.max(0,o.start),f=Math.min(u.count,o.start+o.count);for(let g=d,p=f;g<p;g++)Sg.fromBufferAttribute(u,g),Ov(Sg,g,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ov(i,e,t,n,r,s,o){const a=$I.distanceSqToPoint(i);if(a<t){const l=new Y;$I.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Q7 extends Si{constructor(e,t,n,r,s,o,a,l,c){super(e,t,n,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class q7 extends Si{constructor(e,t,n=gc,r,s,o,a=ri,l=ri,c,h=qd){if(h!==qd&&h!==ef)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,o,a,l,h,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new u3(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class yu extends gr{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,h=l+1,u=e/a,d=t/l,f=[],g=[],p=[],m=[];for(let C=0;C<h;C++){const A=C*d-o;for(let I=0;I<c;I++){const y=I*u-s;g.push(y,-A,0),p.push(0,0,1),m.push(I/a),m.push(1-C/l)}}for(let C=0;C<l;C++)for(let A=0;A<a;A++){const I=A+c*C,y=A+c*(C+1),x=A+1+c*(C+1),T=A+1+c*C;f.push(I,y,T),f.push(y,x,T)}this.setIndex(f),this.setAttribute("position",new Ui(g,3)),this.setAttribute("normal",new Ui(p,3)),this.setAttribute("uv",new Ui(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yu(e.width,e.height,e.widthSegments,e.heightSegments)}}class Rd extends gr{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const h=[],u=new Y,d=new Y,f=[],g=[],p=[],m=[];for(let C=0;C<=n;C++){const A=[],I=C/n;let y=0;C===0&&o===0?y=.5/t:C===n&&l===Math.PI&&(y=-.5/t);for(let x=0;x<=t;x++){const T=x/t;u.x=-e*Math.cos(r+T*s)*Math.sin(o+I*a),u.y=e*Math.cos(o+I*a),u.z=e*Math.sin(r+T*s)*Math.sin(o+I*a),g.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(T+y,1-I),A.push(c++)}h.push(A)}for(let C=0;C<n;C++)for(let A=0;A<t;A++){const I=h[C][A+1],y=h[C][A],x=h[C+1][A],T=h[C+1][A+1];(C!==0||o>0)&&f.push(I,y,T),(C!==n-1||l<Math.PI)&&f.push(y,x,T)}this.setIndex(f),this.setAttribute("position",new Ui(g,3)),this.setAttribute("normal",new Ui(p,3)),this.setAttribute("uv",new Ui(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class LV extends Ni{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class O0 extends eo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new _t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=k7,this.normalScale=new Pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new co,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Co extends O0{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ot(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _t(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class RV extends eo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yZ,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class BV extends eo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Tg(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function PV(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function GV(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function Uv(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function eS(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}class Of{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class DV extends Of{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fh,endingEnd:fh}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case gh:s=e,a=2*t-n;break;case Gp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case gh:o=e,l=2*n-t;break;case Gp:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=(n-t)*.5,h=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,g=(n-t)/(r-t),p=g*g,m=p*g,C=-d*m+2*d*p-d*g,A=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*g+1,I=(-1-f)*m+(1.5+f)*p+.5*g,y=f*m-f*p;for(let x=0;x!==a;++x)s[x]=C*o[h+x]+A*o[c+x]+I*o[l+x]+y*o[u+x];return s}}class tS extends Of{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,h=(n-t)/(r-t),u=1-h;for(let d=0;d!==a;++d)s[d]=o[c+d]*u+o[l+d]*h;return s}}class FV extends Of{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ls{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Tg(t,this.TimeBufferType),this.values=Tg(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Tg(e.times,Array),values:Tg(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new FV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new DV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tf:t=this.InterpolantFactoryMethodDiscrete;break;case nf:t=this.InterpolantFactoryMethodLinear;break;case km:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tf;case this.InterpolantFactoryMethodLinear:return nf;case this.InterpolantFactoryMethodSmooth:return km}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&PV(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===km,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],h=e[a+1];if(c!==h&&(a!==1||c!==e[0]))if(r)l=!0;else{const u=a*n,d=u-n,f=u+n;for(let g=0;g!==n;++g){const p=t[u+g];if(p!==t[d+g]||p!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[u+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ls.prototype.ValueTypeName="";Ls.prototype.TimeBufferType=Float32Array;Ls.prototype.ValueBufferType=Float32Array;Ls.prototype.DefaultInterpolation=nf;class _u extends Ls{constructor(e,t,n){super(e,t,n)}}_u.prototype.ValueTypeName="bool";_u.prototype.ValueBufferType=Array;_u.prototype.DefaultInterpolation=tf;_u.prototype.InterpolantFactoryMethodLinear=void 0;_u.prototype.InterpolantFactoryMethodSmooth=void 0;class nS extends Ls{constructor(e,t,n,r){super(e,t,n,r)}}nS.prototype.ValueTypeName="color";class Jh extends Ls{constructor(e,t,n,r){super(e,t,n,r)}}Jh.prototype.ValueTypeName="number";class NV extends Of{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let h=c+a;c!==h;c+=4)_s.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Qh extends Ls{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new NV(this.times,this.values,this.getValueSize(),e)}}Qh.prototype.ValueTypeName="quaternion";Qh.prototype.InterpolantFactoryMethodSmooth=void 0;class vu extends Ls{constructor(e,t,n){super(e,t,n)}}vu.prototype.ValueTypeName="string";vu.prototype.ValueBufferType=Array;vu.prototype.DefaultInterpolation=tf;vu.prototype.InterpolantFactoryMethodLinear=void 0;vu.prototype.InterpolantFactoryMethodSmooth=void 0;class qh extends Ls{constructor(e,t,n,r){super(e,t,n,r)}}qh.prototype.ValueTypeName="vector";class JI{constructor(e="",t=-1,n=[],r=c3){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=ys(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(OV(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Ls.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const h=GV(l);l=Uv(l,1,h),c=Uv(c,1,h),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Jh(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],h=c.name.match(s);if(h&&h.length>1){const u=h[1];let d=r[u];d||(r[u]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,d,f,g,p){if(f.length!==0){const m=[],C=[];eS(f,m,C,g),m.length!==0&&p.push(new u(d,m,C))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let g;for(g=0;g<d.length;g++)if(d[g].morphTargets)for(let p=0;p<d[g].morphTargets.length;p++)f[d[g].morphTargets[p]]=-1;for(const p in f){const m=[],C=[];for(let A=0;A!==d[g].morphTargets.length;++A){const I=d[g];m.push(I.time),C.push(I.morphTarget===p?1:0)}r.push(new Jh(".morphTargetInfluence["+p+"]",m,C))}l=f.length*o}else{const f=".bones["+t[u].name+"]";n(qh,f+".position",d,"pos",r),n(Qh,f+".quaternion",d,"rot",r),n(qh,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function kV(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jh;case"vector":case"vector2":case"vector3":case"vector4":return qh;case"color":return nS;case"quaternion":return Qh;case"bool":case"boolean":return _u;case"string":return vu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function OV(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=kV(i.type);if(i.times===void 0){const t=[],n=[];eS(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Ga={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class UV{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){const f=c[u],g=c[u+1];if(f.global&&(f.lastIndex=0),f.test(h))return g}return null}}}const ZV=new UV;let bu=class{constructor(e){this.manager=e!==void 0?e:ZV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};bu.DEFAULT_MATERIAL_NAME="__DEFAULT";const To={};class VV extends Error{constructor(e,t){super(e),this.response=t}}class iS extends bu{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ga.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(To[e]!==void 0){To[e].push({onLoad:t,onProgress:n,onError:r});return}To[e]=[],To[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=To[e],u=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),f=d?parseInt(d):0,g=f!==0;let p=0;const m=new ReadableStream({start(C){A();function A(){u.read().then(({done:I,value:y})=>{if(I)C.close();else{p+=y.byteLength;const x=new ProgressEvent("progress",{lengthComputable:g,loaded:p,total:f});for(let T=0,S=h.length;T<S;T++){const M=h[T];M.onProgress&&M.onProgress(x)}C.enqueue(y),A()}},I=>{C.error(I)})}}});return new Response(m)}else throw new VV(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return c.json();default:if(a==="")return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,f=new TextDecoder(d);return c.arrayBuffer().then(g=>f.decode(g))}}}).then(c=>{Ga.add(e,c);const h=To[e];delete To[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onLoad&&f.onLoad(c)}}).catch(c=>{const h=To[e];if(h===void 0)throw this.manager.itemError(e),c;delete To[e];for(let u=0,d=h.length;u<d;u++){const f=h[u];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class WV extends bu{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ga.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rf("img");function l(){h(),Ga.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){h(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class rS extends bu{constructor(e){super(e)}load(e,t,n,r){const s=new Si,o=new WV(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class U0 extends Bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new _t(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const cC=new xt,Zv=new Y,Vv=new Y;class A3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Pt(512,512),this.mapType=ao,this.map=null,this.mapPass=null,this.matrix=new xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new C3,this._frameExtents=new Pt(1,1),this._viewportCount=1,this._viewports=[new nn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Zv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Zv),Vv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Vv),t.updateMatrixWorld(),cC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cC),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(cC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class HV extends A3{constructor(){super(new Ai(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=jh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zV extends U0{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new HV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Wv=new xt,Xu=new Y,hC=new Y;class YV extends A3{constructor(){super(new Ai(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Pt(4,2),this._viewportCount=6,this._viewports=[new nn(2,1,1,1),new nn(0,1,1,1),new nn(3,1,1,1),new nn(1,1,1,1),new nn(3,0,1,1),new nn(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Xu.setFromMatrixPosition(e.matrixWorld),n.position.copy(Xu),hC.copy(n.position),hC.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(hC),n.updateMatrixWorld(),r.makeTranslation(-Xu.x,-Xu.y,-Xu.z),Wv.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Wv)}}class sS extends U0{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new YV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Z0 extends Y7{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class XV extends A3{constructor(){super(new Z0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class KV extends U0{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new XV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oS extends U0{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Bd{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jV extends bu{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ga.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ga.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ga.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ga.add(e,l),s.manager.itemStart(e)}}class $V extends Ai{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class aS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Hv(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Hv();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Hv(){return performance.now()}class JV{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){_s.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;_s.multiplyQuaternionsFlat(e,o,e,t,e,n),_s.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const y3="\\[\\]\\.:\\/",QV=new RegExp("["+y3+"]","g"),_3="[^"+y3+"]",qV="[^"+y3.replace("\\.","")+"]",eW=/((?:WC+[\/:])*)/.source.replace("WC",_3),tW=/(WCOD+)?/.source.replace("WCOD",qV),nW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_3),iW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_3),rW=new RegExp("^"+eW+tW+nW+iW+"$"),sW=["material","materials","bones","map"];class oW{constructor(e,t,n){const r=n||sn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class sn{constructor(e,t,n){this.path=t,this.parsedPath=n||sn.parseTrackName(t),this.node=sn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new sn.Composite(e,t,n):new sn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(QV,"")}static parseTrackName(e){const t=rW.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);sW.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=sn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let c=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sn.Composite=oW;sn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sn.prototype.GetterByBindingType=[sn.prototype._getValue_direct,sn.prototype._getValue_array,sn.prototype._getValue_arrayElement,sn.prototype._getValue_toArray];sn.prototype.SetterByBindingTypeAndVersioning=[[sn.prototype._setValue_direct,sn.prototype._setValue_direct_setNeedsUpdate,sn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_array,sn.prototype._setValue_array_setNeedsUpdate,sn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_arrayElement,sn.prototype._setValue_arrayElement_setNeedsUpdate,sn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sn.prototype._setValue_fromArray,sn.prototype._setValue_fromArray_setNeedsUpdate,sn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class aW{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:fh,endingEnd:fh};for(let c=0;c!==o;++c){const h=s[c].createInterpolant(null);a[c]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mZ,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case IZ:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulateAdditive(a);break;case c3:default:for(let h=0,u=l.length;h!==u;++h)l[h].evaluate(o),c[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===CZ;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===YI){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=gh,r.endingEnd=gh):(e?r.endingStart=this.zeroSlopeAtStart?gh:fh:r.endingStart=Gp,t?r.endingEnd=this.zeroSlopeAtEnd?gh:fh:r.endingEnd=Gp)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const lW=new Float32Array(1);class zv extends vc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,c=this._bindingsByRootAndName;let h=c[l];h===void 0&&(h={},c[l]=h);for(let u=0;u!==s;++u){const d=r[u],f=d.name;let g=h[f];if(g!==void 0)++g.referenceCount,o[u]=g;else{if(g=o[u],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,f));continue}const p=t&&t._propertyBindings[u].binding.parsedPath;g=new JV(sn.create(n,f,p),d.ValueTypeName,d.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,f),o[u]=g}a[u].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],h=e._byClipCacheIndex;c._byClipCacheIndex=h,l[h]=c,l.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new tS(new Float32Array(2),new Float32Array(2),1,lW),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?JI.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(n===void 0&&(o!==null?n=o.blendMode:n=c3),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const h=new aW(this,o,t,n);return this._bindAction(h,c),this._addInactiveAction(h,a,s),h}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?JI.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==n;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const h=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=h,t[h]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Xi{constructor(e){this.value=e}clone(){return new Xi(this.value.clone===void 0?this.value:this.value.clone())}}const Yv=new xt;class lS{constructor(e,t,n=0,r=1/0){this.ray=new Nf(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new d3,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Yv.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Yv),this}intersectObject(e,t=!0,n=[]){return QI(e,this,n,t),n.sort(Xv),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)QI(e[r],this,n,t);return n.sort(Xv),n}}function Xv(i,e){return i.distance-e.distance}function QI(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)QI(s[o],e,t,!0)}}function Kv(i,e,t,n){const r=cW(n);switch(t){case P7:return i*e;case s3:return i*e/r.components*r.byteLength;case o3:return i*e/r.components*r.byteLength;case D7:return i*e*2/r.components*r.byteLength;case a3:return i*e*2/r.components*r.byteLength;case G7:return i*e*3/r.components*r.byteLength;case ar:return i*e*4/r.components*r.byteLength;case l3:return i*e*4/r.components*r.byteLength;case P1:case G1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case D1:case F1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case _I:case bI:return Math.max(i,16)*Math.max(e,8)/4;case yI:case vI:return Math.max(i,8)*Math.max(e,8)/2;case xI:case wI:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case SI:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case TI:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case EI:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case MI:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case LI:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case RI:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case BI:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case PI:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case GI:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case DI:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case FI:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case NI:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case kI:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case OI:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case UI:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case N1:case ZI:case VI:return Math.ceil(i/4)*Math.ceil(e/4)*16;case F7:case WI:return Math.ceil(i/4)*Math.ceil(e/4)*8;case HI:case zI:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function cW(i){switch(i){case ao:case L7:return{byteLength:1,components:1};case Jd:case R7:case Ff:return{byteLength:2,components:1};case i3:case r3:return{byteLength:2,components:4};case gc:case n3:case Tr:return{byteLength:4,components:1};case B7:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:t3}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=t3);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function cS(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function hW(i){const e=new WeakMap;function t(a,l){const c=a.array,h=a.usage,u=c.byteLength,d=i.createBuffer();i.bindBuffer(l,d),i.bufferData(l,c,h),a.onUploadCallback();let f;if(c instanceof Float32Array)f=i.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=i.HALF_FLOAT:f=i.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=i.SHORT;else if(c instanceof Uint32Array)f=i.UNSIGNED_INT;else if(c instanceof Int32Array)f=i.INT;else if(c instanceof Int8Array)f=i.BYTE;else if(c instanceof Uint8Array)f=i.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}function n(a,l,c){const h=l.array,u=l.updateRanges;if(i.bindBuffer(c,a),u.length===0)i.bufferSubData(c,0,h);else{u.sort((f,g)=>f.start-g.start);let d=0;for(let f=1;f<u.length;f++){const g=u[d],p=u[f];p.start<=g.start+g.count+1?g.count=Math.max(g.count,p.start+p.count-g.start):(++d,u[d]=p)}u.length=d+1;for(let f=0,g=u.length;f<g;f++){const p=u[f];i.bufferSubData(c,p.start*h.BYTES_PER_ELEMENT,h,p.start,p.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var uW=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,dW=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fW=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,gW=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pW=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mW=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,CW=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,IW=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,AW=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,yW=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,_W=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vW=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bW=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xW=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wW=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,SW=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,TW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EW=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,MW=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,LW=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,BW=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,PW=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,GW=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,DW=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FW=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NW=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,kW=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,OW=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UW=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ZW="gl_FragColor = linearToOutputTexel( gl_FragColor );",VW=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,WW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HW=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zW=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,YW=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XW=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,KW=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jW=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$W=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,JW=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QW=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,qW=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,iH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,rH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,sH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,oH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,aH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,cH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,hH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,dH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,fH=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,gH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,CH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,yH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_H=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bH=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,SH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,TH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,MH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,LH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,PH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,DH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,FH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,NH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,kH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,OH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,UH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,VH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,WH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,HH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,YH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,XH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,KH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,jH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$H=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,JH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,QH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,qH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ez=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,iz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,oz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,az=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,cz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const hz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Cz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Iz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Az=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,yz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_z=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,bz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Sz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Tz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ez=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Mz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Rz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Bz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Dz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Oz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Vz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rt={alphahash_fragment:uW,alphahash_pars_fragment:dW,alphamap_fragment:fW,alphamap_pars_fragment:gW,alphatest_fragment:pW,alphatest_pars_fragment:mW,aomap_fragment:CW,aomap_pars_fragment:IW,batching_pars_vertex:AW,batching_vertex:yW,begin_vertex:_W,beginnormal_vertex:vW,bsdfs:bW,iridescence_fragment:xW,bumpmap_pars_fragment:wW,clipping_planes_fragment:SW,clipping_planes_pars_fragment:TW,clipping_planes_pars_vertex:EW,clipping_planes_vertex:MW,color_fragment:LW,color_pars_fragment:RW,color_pars_vertex:BW,color_vertex:PW,common:GW,cube_uv_reflection_fragment:DW,defaultnormal_vertex:FW,displacementmap_pars_vertex:NW,displacementmap_vertex:kW,emissivemap_fragment:OW,emissivemap_pars_fragment:UW,colorspace_fragment:ZW,colorspace_pars_fragment:VW,envmap_fragment:WW,envmap_common_pars_fragment:HW,envmap_pars_fragment:zW,envmap_pars_vertex:YW,envmap_physical_pars_fragment:iH,envmap_vertex:XW,fog_vertex:KW,fog_pars_vertex:jW,fog_fragment:$W,fog_pars_fragment:JW,gradientmap_pars_fragment:QW,lightmap_pars_fragment:qW,lights_lambert_fragment:eH,lights_lambert_pars_fragment:tH,lights_pars_begin:nH,lights_toon_fragment:rH,lights_toon_pars_fragment:sH,lights_phong_fragment:oH,lights_phong_pars_fragment:aH,lights_physical_fragment:lH,lights_physical_pars_fragment:cH,lights_fragment_begin:hH,lights_fragment_maps:uH,lights_fragment_end:dH,logdepthbuf_fragment:fH,logdepthbuf_pars_fragment:gH,logdepthbuf_pars_vertex:pH,logdepthbuf_vertex:mH,map_fragment:CH,map_pars_fragment:IH,map_particle_fragment:AH,map_particle_pars_fragment:yH,metalnessmap_fragment:_H,metalnessmap_pars_fragment:vH,morphinstance_vertex:bH,morphcolor_vertex:xH,morphnormal_vertex:wH,morphtarget_pars_vertex:SH,morphtarget_vertex:TH,normal_fragment_begin:EH,normal_fragment_maps:MH,normal_pars_fragment:LH,normal_pars_vertex:RH,normal_vertex:BH,normalmap_pars_fragment:PH,clearcoat_normal_fragment_begin:GH,clearcoat_normal_fragment_maps:DH,clearcoat_pars_fragment:FH,iridescence_pars_fragment:NH,opaque_fragment:kH,packing:OH,premultiplied_alpha_fragment:UH,project_vertex:ZH,dithering_fragment:VH,dithering_pars_fragment:WH,roughnessmap_fragment:HH,roughnessmap_pars_fragment:zH,shadowmap_pars_fragment:YH,shadowmap_pars_vertex:XH,shadowmap_vertex:KH,shadowmask_pars_fragment:jH,skinbase_vertex:$H,skinning_pars_vertex:JH,skinning_vertex:QH,skinnormal_vertex:qH,specularmap_fragment:ez,specularmap_pars_fragment:tz,tonemapping_fragment:nz,tonemapping_pars_fragment:iz,transmission_fragment:rz,transmission_pars_fragment:sz,uv_pars_fragment:oz,uv_pars_vertex:az,uv_vertex:lz,worldpos_vertex:cz,background_vert:hz,background_frag:uz,backgroundCube_vert:dz,backgroundCube_frag:fz,cube_vert:gz,cube_frag:pz,depth_vert:mz,depth_frag:Cz,distanceRGBA_vert:Iz,distanceRGBA_frag:Az,equirect_vert:yz,equirect_frag:_z,linedashed_vert:vz,linedashed_frag:bz,meshbasic_vert:xz,meshbasic_frag:wz,meshlambert_vert:Sz,meshlambert_frag:Tz,meshmatcap_vert:Ez,meshmatcap_frag:Mz,meshnormal_vert:Lz,meshnormal_frag:Rz,meshphong_vert:Bz,meshphong_frag:Pz,meshphysical_vert:Gz,meshphysical_frag:Dz,meshtoon_vert:Fz,meshtoon_frag:Nz,points_vert:kz,points_frag:Oz,shadow_vert:Uz,shadow_frag:Zz,sprite_vert:Vz,sprite_frag:Wz},Re={common:{diffuse:{value:new _t(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Lt}},envmap:{envMap:{value:null},envMapRotation:{value:new Lt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Lt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Lt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Lt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Lt},normalScale:{value:new Pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Lt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Lt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Lt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Lt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0},uvTransform:{value:new Lt}},sprite:{diffuse:{value:new _t(16777215)},opacity:{value:1},center:{value:new Pt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Lt},alphaMap:{value:null},alphaMapTransform:{value:new Lt},alphaTest:{value:0}}},Us={basic:{uniforms:Yi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.fog]),vertexShader:Rt.meshbasic_vert,fragmentShader:Rt.meshbasic_frag},lambert:{uniforms:Yi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new _t(0)}}]),vertexShader:Rt.meshlambert_vert,fragmentShader:Rt.meshlambert_frag},phong:{uniforms:Yi([Re.common,Re.specularmap,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,Re.lights,{emissive:{value:new _t(0)},specular:{value:new _t(1118481)},shininess:{value:30}}]),vertexShader:Rt.meshphong_vert,fragmentShader:Rt.meshphong_frag},standard:{uniforms:Yi([Re.common,Re.envmap,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.roughnessmap,Re.metalnessmap,Re.fog,Re.lights,{emissive:{value:new _t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag},toon:{uniforms:Yi([Re.common,Re.aomap,Re.lightmap,Re.emissivemap,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.gradientmap,Re.fog,Re.lights,{emissive:{value:new _t(0)}}]),vertexShader:Rt.meshtoon_vert,fragmentShader:Rt.meshtoon_frag},matcap:{uniforms:Yi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,Re.fog,{matcap:{value:null}}]),vertexShader:Rt.meshmatcap_vert,fragmentShader:Rt.meshmatcap_frag},points:{uniforms:Yi([Re.points,Re.fog]),vertexShader:Rt.points_vert,fragmentShader:Rt.points_frag},dashed:{uniforms:Yi([Re.common,Re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rt.linedashed_vert,fragmentShader:Rt.linedashed_frag},depth:{uniforms:Yi([Re.common,Re.displacementmap]),vertexShader:Rt.depth_vert,fragmentShader:Rt.depth_frag},normal:{uniforms:Yi([Re.common,Re.bumpmap,Re.normalmap,Re.displacementmap,{opacity:{value:1}}]),vertexShader:Rt.meshnormal_vert,fragmentShader:Rt.meshnormal_frag},sprite:{uniforms:Yi([Re.sprite,Re.fog]),vertexShader:Rt.sprite_vert,fragmentShader:Rt.sprite_frag},background:{uniforms:{uvTransform:{value:new Lt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Rt.background_vert,fragmentShader:Rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Lt}},vertexShader:Rt.backgroundCube_vert,fragmentShader:Rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rt.cube_vert,fragmentShader:Rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Rt.equirect_vert,fragmentShader:Rt.equirect_frag},distanceRGBA:{uniforms:Yi([Re.common,Re.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Rt.distanceRGBA_vert,fragmentShader:Rt.distanceRGBA_frag},shadow:{uniforms:Yi([Re.lights,Re.fog,{color:{value:new _t(0)},opacity:{value:1}}]),vertexShader:Rt.shadow_vert,fragmentShader:Rt.shadow_frag}};Us.physical={uniforms:Yi([Us.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Lt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Lt},clearcoatNormalScale:{value:new Pt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Lt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Lt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Lt},sheen:{value:0},sheenColor:{value:new _t(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Lt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Lt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Lt},transmissionSamplerSize:{value:new Pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Lt},attenuationDistance:{value:0},attenuationColor:{value:new _t(0)},specularColor:{value:new _t(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Lt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Lt},anisotropyVector:{value:new Pt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Lt}}]),vertexShader:Rt.meshphysical_vert,fragmentShader:Rt.meshphysical_frag};const Eg={r:0,b:0,g:0},ml=new co,Hz=new xt;function zz(i,e,t,n,r,s,o){const a=new _t(0);let l=s===!0?0:1,c,h,u=null,d=0,f=null;function g(I){let y=I.isScene===!0?I.background:null;return y&&y.isTexture&&(y=(I.backgroundBlurriness>0?t:e).get(y)),y}function p(I){let y=!1;const x=g(I);x===null?C(a,l):x&&x.isColor&&(C(x,1),y=!0);const T=i.xr.getEnvironmentBlendMode();T==="additive"?n.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||y)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function m(I,y){const x=g(y);x&&(x.isCubeTexture||x.mapping===k0)?(h===void 0&&(h=new jn(new kf(1,1,1),new Ni({name:"BackgroundCubeMaterial",uniforms:$h(Us.backgroundCube.uniforms),vertexShader:Us.backgroundCube.vertexShader,fragmentShader:Us.backgroundCube.fragmentShader,side:Oi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(T,S,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),ml.copy(y.backgroundRotation),ml.x*=-1,ml.y*=-1,ml.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(ml.y*=-1,ml.z*=-1),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(Hz.makeRotationFromEuler(ml)),h.material.toneMapped=zt.getTransfer(x.colorSpace)!==hn,(u!==x||d!==x.version||f!==i.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,f=i.toneMapping),h.layers.enableAll(),I.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new jn(new yu(2,2),new Ni({name:"BackgroundMaterial",uniforms:$h(Us.background.uniforms),vertexShader:Us.background.vertexShader,fragmentShader:Us.background.fragmentShader,side:oo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=zt.getTransfer(x.colorSpace)!==hn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,f=i.toneMapping),c.layers.enableAll(),I.unshift(c,c.geometry,c.material,0,0,null))}function C(I,y){I.getRGB(Eg,z7(i)),n.buffers.color.setClear(Eg.r,Eg.g,Eg.b,y,o)}function A(){h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(I,y=1){a.set(I),l=y,C(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(I){l=I,C(a,l)},render:p,addToRenderList:m,dispose:A}}function Yz(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=d(null);let s=r,o=!1;function a(v,B,E,L,G){let Z=!1;const U=u(L,E,B);s!==U&&(s=U,c(s.object)),Z=f(v,L,E,G),Z&&g(v,L,E,G),G!==null&&e.update(G,i.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,y(v,B,E,L),G!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(G).buffer))}function l(){return i.createVertexArray()}function c(v){return i.bindVertexArray(v)}function h(v){return i.deleteVertexArray(v)}function u(v,B,E){const L=E.wireframe===!0;let G=n[v.id];G===void 0&&(G={},n[v.id]=G);let Z=G[B.id];Z===void 0&&(Z={},G[B.id]=Z);let U=Z[L];return U===void 0&&(U=d(l()),Z[L]=U),U}function d(v){const B=[],E=[],L=[];for(let G=0;G<t;G++)B[G]=0,E[G]=0,L[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:B,enabledAttributes:E,attributeDivisors:L,object:v,attributes:{},index:null}}function f(v,B,E,L){const G=s.attributes,Z=B.attributes;let U=0;const V=E.getAttributes();for(const z in V)if(V[z].location>=0){const j=G[z];let re=Z[z];if(re===void 0&&(z==="instanceMatrix"&&v.instanceMatrix&&(re=v.instanceMatrix),z==="instanceColor"&&v.instanceColor&&(re=v.instanceColor)),j===void 0||j.attribute!==re||re&&j.data!==re.data)return!0;U++}return s.attributesNum!==U||s.index!==L}function g(v,B,E,L){const G={},Z=B.attributes;let U=0;const V=E.getAttributes();for(const z in V)if(V[z].location>=0){let j=Z[z];j===void 0&&(z==="instanceMatrix"&&v.instanceMatrix&&(j=v.instanceMatrix),z==="instanceColor"&&v.instanceColor&&(j=v.instanceColor));const re={};re.attribute=j,j&&j.data&&(re.data=j.data),G[z]=re,U++}s.attributes=G,s.attributesNum=U,s.index=L}function p(){const v=s.newAttributes;for(let B=0,E=v.length;B<E;B++)v[B]=0}function m(v){C(v,0)}function C(v,B){const E=s.newAttributes,L=s.enabledAttributes,G=s.attributeDivisors;E[v]=1,L[v]===0&&(i.enableVertexAttribArray(v),L[v]=1),G[v]!==B&&(i.vertexAttribDivisor(v,B),G[v]=B)}function A(){const v=s.newAttributes,B=s.enabledAttributes;for(let E=0,L=B.length;E<L;E++)B[E]!==v[E]&&(i.disableVertexAttribArray(E),B[E]=0)}function I(v,B,E,L,G,Z,U){U===!0?i.vertexAttribIPointer(v,B,E,G,Z):i.vertexAttribPointer(v,B,E,L,G,Z)}function y(v,B,E,L){p();const G=L.attributes,Z=E.getAttributes(),U=B.defaultAttributeValues;for(const V in Z){const z=Z[V];if(z.location>=0){let le=G[V];if(le===void 0&&(V==="instanceMatrix"&&v.instanceMatrix&&(le=v.instanceMatrix),V==="instanceColor"&&v.instanceColor&&(le=v.instanceColor)),le!==void 0){const j=le.normalized,re=le.itemSize,Ae=e.get(le);if(Ae===void 0)continue;const xe=Ae.buffer,J=Ae.type,oe=Ae.bytesPerElement,fe=J===i.INT||J===i.UNSIGNED_INT||le.gpuType===n3;if(le.isInterleavedBufferAttribute){const ae=le.data,Ce=ae.stride,Je=le.offset;if(ae.isInstancedInterleavedBuffer){for(let Se=0;Se<z.locationSize;Se++)C(z.location+Se,ae.meshPerAttribute);v.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Se=0;Se<z.locationSize;Se++)m(z.location+Se);i.bindBuffer(i.ARRAY_BUFFER,xe);for(let Se=0;Se<z.locationSize;Se++)I(z.location+Se,re/z.locationSize,J,j,Ce*oe,(Je+re/z.locationSize*Se)*oe,fe)}else{if(le.isInstancedBufferAttribute){for(let ae=0;ae<z.locationSize;ae++)C(z.location+ae,le.meshPerAttribute);v.isInstancedMesh!==!0&&L._maxInstanceCount===void 0&&(L._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ae=0;ae<z.locationSize;ae++)m(z.location+ae);i.bindBuffer(i.ARRAY_BUFFER,xe);for(let ae=0;ae<z.locationSize;ae++)I(z.location+ae,re/z.locationSize,J,j,re*oe,re/z.locationSize*ae*oe,fe)}}else if(U!==void 0){const j=U[V];if(j!==void 0)switch(j.length){case 2:i.vertexAttrib2fv(z.location,j);break;case 3:i.vertexAttrib3fv(z.location,j);break;case 4:i.vertexAttrib4fv(z.location,j);break;default:i.vertexAttrib1fv(z.location,j)}}}}A()}function x(){M();for(const v in n){const B=n[v];for(const E in B){const L=B[E];for(const G in L)h(L[G].object),delete L[G];delete B[E]}delete n[v]}}function T(v){if(n[v.id]===void 0)return;const B=n[v.id];for(const E in B){const L=B[E];for(const G in L)h(L[G].object),delete L[G];delete B[E]}delete n[v.id]}function S(v){for(const B in n){const E=n[B];if(E[v.id]===void 0)continue;const L=E[v.id];for(const G in L)h(L[G].object),delete L[G];delete E[v.id]}}function M(){_(),o=!0,s!==r&&(s=r,c(s.object))}function _(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:M,resetDefaultState:_,dispose:x,releaseStatesOfGeometry:T,releaseStatesOfProgram:S,initAttributes:p,enableAttribute:m,disableUnusedAttributes:A}}function Xz(i,e,t){let n;function r(c){n=c}function s(c,h){i.drawArrays(n,c,h),t.update(h,n,1)}function o(c,h,u){u!==0&&(i.drawArraysInstanced(n,c,h,u),t.update(h,n,u))}function a(c,h,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,h,0,u);let f=0;for(let g=0;g<u;g++)f+=h[g];t.update(f,n,1)}function l(c,h,u,d){if(u===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let g=0;g<c.length;g++)o(c[g],h[g],d[g]);else{f.multiDrawArraysInstancedWEBGL(n,c,0,h,0,d,0,u);let g=0;for(let p=0;p<u;p++)g+=h[p]*d[p];t.update(g,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Kz(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const S=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(S){return!(S!==ar&&n.convert(S)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(S){const M=S===Ff&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(S!==ao&&n.convert(S)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&S!==Tr&&!M)}function l(S){if(S==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";S="mediump"}return S==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const u=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),f=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),g=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_TEXTURE_SIZE),m=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),C=i.getParameter(i.MAX_VERTEX_ATTRIBS),A=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),I=i.getParameter(i.MAX_VARYING_VECTORS),y=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),x=g>0,T=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:u,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:g,maxTextureSize:p,maxCubemapSize:m,maxAttributes:C,maxVertexUniforms:A,maxVaryings:I,maxFragmentUniforms:y,vertexTextures:x,maxSamples:T}}function jz(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new Dl,a=new Lt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){const f=u.length!==0||d||n!==0||r;return r=d,n=u.length,f},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){t=h(u,d,0)},this.setState=function(u,d,f){const g=u.clippingPlanes,p=u.clipIntersection,m=u.clipShadows,C=i.get(u);if(!r||g===null||g.length===0||s&&!m)s?h(null):c();else{const A=s?0:n,I=A*4;let y=C.clippingState||null;l.value=y,y=h(g,d,I,f);for(let x=0;x!==I;++x)y[x]=t[x];C.clippingState=y,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(u,d,f,g){const p=u!==null?u.length:0;let m=null;if(p!==0){if(m=l.value,g!==!0||m===null){const C=f+p*4,A=d.matrixWorldInverse;a.getNormalMatrix(A),(m===null||m.length<C)&&(m=new Float32Array(C));for(let I=0,y=f;I!==p;++I,y+=4)o.copy(u[I]).applyMatrix4(A,a),o.normal.toArray(m,y),m[y+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,m}}function $z(i){let e=new WeakMap;function t(o,a){return a===II?o.mapping=Yh:a===AI&&(o.mapping=Xh),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===II||a===AI)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new IV(l.height);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const ph=4,jv=[.125,.215,.35,.446,.526,.582],Yl=20,uC=new Z0,$v=new _t;let dC=null,fC=0,gC=0,pC=!1;const Fl=(1+Math.sqrt(5))/2,Yc=1/Fl,Jv=[new Y(-Fl,Yc,0),new Y(Fl,Yc,0),new Y(-Yc,0,Fl),new Y(Yc,0,Fl),new Y(0,Fl,-Yc),new Y(0,Fl,Yc),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)],Jz=new Y;class Qv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:a=Jz}=s;dC=this._renderer.getRenderTarget(),fC=this._renderer.getActiveCubeFace(),gC=this._renderer.getActiveMipmapLevel(),pC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=tb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=eb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(dC,fC,gC),this._renderer.xr.enabled=pC,e.scissorTest=!1,Mg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yh||e.mapping===Xh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),dC=this._renderer.getRenderTarget(),fC=this._renderer.getActiveCubeFace(),gC=this._renderer.getActiveMipmapLevel(),pC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Sr,minFilter:Sr,generateMipmaps:!1,type:Ff,format:ar,colorSpace:er,depthBuffer:!1},r=qv(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qv(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Qz(s)),this._blurMaterial=qz(s,e,t)}return r}_compileMaterial(e){const t=new jn(this._lodPlanes[0],e);this._renderer.compile(t,uC)}_sceneToCubeUV(e,t,n,r,s){const l=new Ai(90,1,t,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor($v),u.toneMapping=Wa,u.autoClear=!1;const g=new Zo({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1}),p=new jn(new kf,g);let m=!1;const C=e.background;C?C.isColor&&(g.color.copy(C),e.background=null,m=!0):(g.color.copy($v),m=!0);for(let A=0;A<6;A++){const I=A%3;I===0?(l.up.set(0,c[A],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+h[A],s.y,s.z)):I===1?(l.up.set(0,0,c[A]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+h[A],s.z)):(l.up.set(0,c[A],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+h[A]));const y=this._cubeSize;Mg(r,I*y,A>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,l),u.render(e,l)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Yh||e.mapping===Xh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=tb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=eb());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new jn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Mg(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,uC)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Jv[(r-s-1)%Jv.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new jn(this._lodPlanes[r],c),d=c.uniforms,f=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Yl-1),p=s/g,m=isFinite(s)?1+Math.floor(h*p):Yl;m>Yl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Yl}`);const C=[];let A=0;for(let S=0;S<Yl;++S){const M=S/p,_=Math.exp(-M*M/2);C.push(_),S===0?A+=_:S<m&&(A+=2*_)}for(let S=0;S<C.length;S++)C[S]=C[S]/A;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=C,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:I}=this;d.dTheta.value=g,d.mipInt.value=I-n;const y=this._sizeLods[r],x=3*y*(r>I-ph?r-I+ph:0),T=4*(this._cubeSize-y);Mg(t,x,T,3*y,2*y),l.setRenderTarget(t),l.render(u,uC)}}function Qz(i){const e=[],t=[],n=[];let r=i;const s=i-ph+1+jv.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-ph?l=jv[o-i+ph-1]:o===0&&(l=0),n.push(l);const c=1/(a-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],f=6,g=6,p=3,m=2,C=1,A=new Float32Array(p*g*f),I=new Float32Array(m*g*f),y=new Float32Array(C*g*f);for(let T=0;T<f;T++){const S=T%3*2/3-1,M=T>2?0:-1,_=[S,M,0,S+2/3,M,0,S+2/3,M+1,0,S,M,0,S+2/3,M+1,0,S,M+1,0];A.set(_,p*g*T),I.set(d,m*g*T);const v=[T,T,T,T,T,T];y.set(v,C*g*T)}const x=new gr;x.setAttribute("position",new yi(A,p)),x.setAttribute("uv",new yi(I,m)),x.setAttribute("faceIndex",new yi(y,C)),e.push(x),r>ph&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function qv(i,e,t){const n=new lo(i,e,t);return n.texture.mapping=k0,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Mg(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function qz(i,e,t){const n=new Float32Array(Yl),r=new Y(0,1,0);return new Ni({name:"SphericalGaussianBlur",defines:{n:Yl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Va,depthTest:!1,depthWrite:!1})}function eb(){return new Ni({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Va,depthTest:!1,depthWrite:!1})}function tb(){return new Ni({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:v3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Va,depthTest:!1,depthWrite:!1})}function v3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function eY(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===II||l===AI,h=l===Yh||l===Xh;if(c||h){let u=e.get(a);const d=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new Qv(i)),u=c?t.fromEquirectangular(a,u):t.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{const f=a.image;return c&&f&&f.height>0||h&&f&&r(f)?(t===null&&(t=new Qv(i)),u=c?t.fromEquirectangular(a):t.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",s),u.texture):null}}}return a}function r(a){let l=0;const c=6;for(let h=0;h<c;h++)a[h]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function tY(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&k1("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function nY(i,e,t,n){const r={},s=new WeakMap;function o(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),n.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(u,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(u){const d=u.attributes;for(const f in d)e.update(d[f],i.ARRAY_BUFFER)}function c(u){const d=[],f=u.index,g=u.attributes.position;let p=0;if(f!==null){const A=f.array;p=f.version;for(let I=0,y=A.length;I<y;I+=3){const x=A[I+0],T=A[I+1],S=A[I+2];d.push(x,T,T,S,S,x)}}else if(g!==void 0){const A=g.array;p=g.version;for(let I=0,y=A.length/3-1;I<y;I+=3){const x=I+0,T=I+1,S=I+2;d.push(x,T,T,S,S,x)}}else return;const m=new(U7(d)?H7:W7)(d,1);m.version=p;const C=s.get(u);C&&e.remove(C),s.set(u,m)}function h(u){const d=s.get(u);if(d){const f=u.index;f!==null&&d.version<f.version&&c(u)}else c(u);return s.get(u)}return{get:a,update:l,getWireframeAttribute:h}}function iY(i,e,t){let n;function r(d){n=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,f){i.drawElements(n,f,s,d*o),t.update(f,n,1)}function c(d,f,g){g!==0&&(i.drawElementsInstanced(n,f,s,d*o,g),t.update(f,n,g))}function h(d,f,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,f,0,s,d,0,g);let m=0;for(let C=0;C<g;C++)m+=f[C];t.update(m,n,1)}function u(d,f,g,p){if(g===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let C=0;C<d.length;C++)c(d[C]/o,f[C],p[C]);else{m.multiDrawElementsInstancedWEBGL(n,f,0,s,d,0,p,0,g);let C=0;for(let A=0;A<g;A++)C+=f[A]*p[A];t.update(C,n,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=u}function rY(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function sY(i,e,t){const n=new WeakMap,r=new nn;function s(o,a,l){const c=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=h!==void 0?h.length:0;let d=n.get(a);if(d===void 0||d.count!==u){let _=function(){S.dispose(),n.delete(a),a.removeEventListener("dispose",_)};d!==void 0&&d.texture.dispose();const f=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,p=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let I=0;f===!0&&(I=1),g===!0&&(I=2),p===!0&&(I=3);let y=a.attributes.position.count*I,x=1;y>e.maxTextureSize&&(x=Math.ceil(y/e.maxTextureSize),y=e.maxTextureSize);const T=new Float32Array(y*x*4*u),S=new Z7(T,y,x,u);S.type=Tr,S.needsUpdate=!0;const M=I*4;for(let v=0;v<u;v++){const B=m[v],E=C[v],L=A[v],G=y*x*4*v;for(let Z=0;Z<B.count;Z++){const U=Z*M;f===!0&&(r.fromBufferAttribute(B,Z),T[G+U+0]=r.x,T[G+U+1]=r.y,T[G+U+2]=r.z,T[G+U+3]=0),g===!0&&(r.fromBufferAttribute(E,Z),T[G+U+4]=r.x,T[G+U+5]=r.y,T[G+U+6]=r.z,T[G+U+7]=0),p===!0&&(r.fromBufferAttribute(L,Z),T[G+U+8]=r.x,T[G+U+9]=r.y,T[G+U+10]=r.z,T[G+U+11]=L.itemSize===4?r.w:1)}}d={count:u,texture:S,size:new Pt(y,x)},n.set(a,d),a.addEventListener("dispose",_)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let f=0;for(let p=0;p<c.length;p++)f+=c[p];const g=a.morphTargetsRelative?1:1-f;l.getUniforms().setValue(i,"morphTargetBaseInfluence",g),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",d.size)}return{update:s}}function oY(i,e,t,n){let r=new WeakMap;function s(l){const c=n.render.frame,h=l.geometry,u=e.get(l,h);if(r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return u}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const hS=new Si,nb=new q7(1,1),uS=new Z7,dS=new tV,fS=new X7,ib=[],rb=[],sb=new Float32Array(16),ob=new Float32Array(9),ab=new Float32Array(4);function xu(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=ib[r];if(s===void 0&&(s=new Float32Array(r),ib[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function si(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function oi(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function V0(i,e){let t=rb[e];t===void 0&&(t=new Int32Array(e),rb[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function aY(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function lY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;i.uniform2fv(this.addr,e),oi(t,e)}}function cY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(si(t,e))return;i.uniform3fv(this.addr,e),oi(t,e)}}function hY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;i.uniform4fv(this.addr,e),oi(t,e)}}function uY(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),oi(t,e)}else{if(si(t,n))return;ab.set(n),i.uniformMatrix2fv(this.addr,!1,ab),oi(t,n)}}function dY(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),oi(t,e)}else{if(si(t,n))return;ob.set(n),i.uniformMatrix3fv(this.addr,!1,ob),oi(t,n)}}function fY(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(si(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),oi(t,e)}else{if(si(t,n))return;sb.set(n),i.uniformMatrix4fv(this.addr,!1,sb),oi(t,n)}}function gY(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function pY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;i.uniform2iv(this.addr,e),oi(t,e)}}function mY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;i.uniform3iv(this.addr,e),oi(t,e)}}function CY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;i.uniform4iv(this.addr,e),oi(t,e)}}function IY(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function AY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(si(t,e))return;i.uniform2uiv(this.addr,e),oi(t,e)}}function yY(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(si(t,e))return;i.uniform3uiv(this.addr,e),oi(t,e)}}function _Y(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(si(t,e))return;i.uniform4uiv(this.addr,e),oi(t,e)}}function vY(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(nb.compareFunction=O7,s=nb):s=hS,t.setTexture2D(e||s,r)}function bY(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||dS,r)}function xY(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||fS,r)}function wY(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||uS,r)}function SY(i){switch(i){case 5126:return aY;case 35664:return lY;case 35665:return cY;case 35666:return hY;case 35674:return uY;case 35675:return dY;case 35676:return fY;case 5124:case 35670:return gY;case 35667:case 35671:return pY;case 35668:case 35672:return mY;case 35669:case 35673:return CY;case 5125:return IY;case 36294:return AY;case 36295:return yY;case 36296:return _Y;case 35678:case 36198:case 36298:case 36306:case 35682:return vY;case 35679:case 36299:case 36307:return bY;case 35680:case 36300:case 36308:case 36293:return xY;case 36289:case 36303:case 36311:case 36292:return wY}}function TY(i,e){i.uniform1fv(this.addr,e)}function EY(i,e){const t=xu(e,this.size,2);i.uniform2fv(this.addr,t)}function MY(i,e){const t=xu(e,this.size,3);i.uniform3fv(this.addr,t)}function LY(i,e){const t=xu(e,this.size,4);i.uniform4fv(this.addr,t)}function RY(i,e){const t=xu(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function BY(i,e){const t=xu(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function PY(i,e){const t=xu(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function GY(i,e){i.uniform1iv(this.addr,e)}function DY(i,e){i.uniform2iv(this.addr,e)}function FY(i,e){i.uniform3iv(this.addr,e)}function NY(i,e){i.uniform4iv(this.addr,e)}function kY(i,e){i.uniform1uiv(this.addr,e)}function OY(i,e){i.uniform2uiv(this.addr,e)}function UY(i,e){i.uniform3uiv(this.addr,e)}function ZY(i,e){i.uniform4uiv(this.addr,e)}function VY(i,e,t){const n=this.cache,r=e.length,s=V0(t,r);si(n,s)||(i.uniform1iv(this.addr,s),oi(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||hS,s[o])}function WY(i,e,t){const n=this.cache,r=e.length,s=V0(t,r);si(n,s)||(i.uniform1iv(this.addr,s),oi(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||dS,s[o])}function HY(i,e,t){const n=this.cache,r=e.length,s=V0(t,r);si(n,s)||(i.uniform1iv(this.addr,s),oi(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||fS,s[o])}function zY(i,e,t){const n=this.cache,r=e.length,s=V0(t,r);si(n,s)||(i.uniform1iv(this.addr,s),oi(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||uS,s[o])}function YY(i){switch(i){case 5126:return TY;case 35664:return EY;case 35665:return MY;case 35666:return LY;case 35674:return RY;case 35675:return BY;case 35676:return PY;case 5124:case 35670:return GY;case 35667:case 35671:return DY;case 35668:case 35672:return FY;case 35669:case 35673:return NY;case 5125:return kY;case 36294:return OY;case 36295:return UY;case 36296:return ZY;case 35678:case 36198:case 36298:case 36306:case 35682:return VY;case 35679:case 36299:case 36307:return WY;case 35680:case 36300:case 36308:case 36293:return HY;case 36289:case 36303:case 36311:case 36292:return zY}}class XY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=SY(t.type)}}class KY{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=YY(t.type)}}class jY{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const mC=/(\w+)(\])?(\[|\.)?/g;function lb(i,e){i.seq.push(e),i.map[e.id]=e}function $Y(i,e,t){const n=i.name,r=n.length;for(mC.lastIndex=0;;){const s=mC.exec(n),o=mC.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){lb(t,c===void 0?new XY(a,i,e):new KY(a,i,e));break}else{let u=t.map[a];u===void 0&&(u=new jY(a),lb(t,u)),t=u}}}class U1{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);$Y(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function cb(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const JY=37297;let QY=0;function qY(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}const hb=new Lt;function eX(i){zt._getMatrix(hb,zt.workingColorSpace,i);const e=`mat3( ${hb.elements.map(t=>t.toFixed(4))} )`;switch(zt.getTransfer(i)){case Dp:return[e,"LinearTransferOETF"];case hn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function ub(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+qY(i.getShaderSource(e),o)}else return r}function tX(i,e){const t=eX(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function nX(i,e){let t;switch(e){case lZ:t="Linear";break;case cZ:t="Reinhard";break;case hZ:t="Cineon";break;case uZ:t="ACESFilmic";break;case fZ:t="AgX";break;case gZ:t="Neutral";break;case dZ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Lg=new Y;function iX(){zt.getLuminanceCoefficients(Lg);const i=Lg.x.toFixed(4),e=Lg.y.toFixed(4),t=Lg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function rX(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(fd).join(`
`)}function sX(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function oX(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function fd(i){return i!==""}function db(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function fb(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aX=/^[ \t]*#include +<([\w\d./]+)>/gm;function qI(i){return i.replace(aX,cX)}const lX=new Map;function cX(i,e){let t=Rt[e];if(t===void 0){const n=lX.get(e);if(n!==void 0)t=Rt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return qI(t)}const hX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gb(i){return i.replace(hX,uX)}function uX(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pb(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function dX(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===S7?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===ZU?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ro&&(e="SHADOWMAP_TYPE_VSM"),e}function fX(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Yh:case Xh:e="ENVMAP_TYPE_CUBE";break;case k0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function gX(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Xh:e="ENVMAP_MODE_REFRACTION";break}return e}function pX(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case T7:e="ENVMAP_BLENDING_MULTIPLY";break;case oZ:e="ENVMAP_BLENDING_MIX";break;case aZ:e="ENVMAP_BLENDING_ADD";break}return e}function mX(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function CX(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=dX(t),c=fX(t),h=gX(t),u=pX(t),d=mX(t),f=rX(t),g=sX(s),p=r.createProgram();let m,C,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(fd).join(`
`),m.length>0&&(m+=`
`),C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(fd).join(`
`),C.length>0&&(C+=`
`)):(m=[pb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(fd).join(`
`),C=[pb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Wa?"#define TONE_MAPPING":"",t.toneMapping!==Wa?Rt.tonemapping_pars_fragment:"",t.toneMapping!==Wa?nX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Rt.colorspace_pars_fragment,tX("linearToOutputTexel",t.outputColorSpace),iX(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(fd).join(`
`)),o=qI(o),o=db(o,t),o=fb(o,t),a=qI(a),a=db(a,t),a=fb(a,t),o=gb(o),a=gb(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,C=["#define varying in",t.glslVersion===av?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===av?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const I=A+m+o,y=A+C+a,x=cb(r,r.VERTEX_SHADER,I),T=cb(r,r.FRAGMENT_SHADER,y);r.attachShader(p,x),r.attachShader(p,T),t.index0AttributeName!==void 0?r.bindAttribLocation(p,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(p,0,"position"),r.linkProgram(p);function S(B){if(i.debug.checkShaderErrors){const E=r.getProgramInfoLog(p).trim(),L=r.getShaderInfoLog(x).trim(),G=r.getShaderInfoLog(T).trim();let Z=!0,U=!0;if(r.getProgramParameter(p,r.LINK_STATUS)===!1)if(Z=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,p,x,T);else{const V=ub(r,x,"vertex"),z=ub(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(p,r.VALIDATE_STATUS)+`

Material Name: `+B.name+`
Material Type: `+B.type+`

Program Info Log: `+E+`
`+V+`
`+z)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(L===""||G==="")&&(U=!1);U&&(B.diagnostics={runnable:Z,programLog:E,vertexShader:{log:L,prefix:m},fragmentShader:{log:G,prefix:C}})}r.deleteShader(x),r.deleteShader(T),M=new U1(r,p),_=oX(r,p)}let M;this.getUniforms=function(){return M===void 0&&S(this),M};let _;this.getAttributes=function(){return _===void 0&&S(this),_};let v=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return v===!1&&(v=r.getProgramParameter(p,JY)),v},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(p),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=QY++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=x,this.fragmentShader=T,this}let IX=0;class AX{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new yX(e),t.set(e,n)),n}}class yX{constructor(e){this.id=IX++,this.code=e,this.usedTimes=0}}function _X(i,e,t,n,r,s,o){const a=new d3,l=new AX,c=new Set,h=[],u=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function p(_){return c.add(_),_===0?"uv":`uv${_}`}function m(_,v,B,E,L){const G=E.fog,Z=L.geometry,U=_.isMeshStandardMaterial?E.environment:null,V=(_.isMeshStandardMaterial?t:e).get(_.envMap||U),z=V&&V.mapping===k0?V.image.height:null,le=g[_.type];_.precision!==null&&(f=r.getMaxPrecision(_.precision),f!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",f,"instead."));const j=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,re=j!==void 0?j.length:0;let Ae=0;Z.morphAttributes.position!==void 0&&(Ae=1),Z.morphAttributes.normal!==void 0&&(Ae=2),Z.morphAttributes.color!==void 0&&(Ae=3);let xe,J,oe,fe;if(le){const It=Us[le];xe=It.vertexShader,J=It.fragmentShader}else xe=_.vertexShader,J=_.fragmentShader,l.update(_),oe=l.getVertexShaderID(_),fe=l.getFragmentShaderID(_);const ae=i.getRenderTarget(),Ce=i.state.buffers.depth.getReversed(),Je=L.isInstancedMesh===!0,Se=L.isBatchedMesh===!0,qe=!!_.map,ot=!!_.matcap,$e=!!V,O=!!_.aoMap,$t=!!_.lightMap,St=!!_.bumpMap,nt=!!_.normalMap,Ie=!!_.displacementMap,fn=!!_.emissiveMap,We=!!_.metalnessMap,k=!!_.roughnessMap,R=_.anisotropy>0,q=_.clearcoat>0,de=_.dispersion>0,me=_.iridescence>0,se=_.sheen>0,Ye=_.transmission>0,Te=R&&!!_.anisotropyMap,et=q&&!!_.clearcoatMap,ft=q&&!!_.clearcoatNormalMap,ye=q&&!!_.clearcoatRoughnessMap,Oe=me&&!!_.iridescenceMap,at=me&&!!_.iridescenceThicknessMap,lt=se&&!!_.sheenColorMap,He=se&&!!_.sheenRoughnessMap,Gt=!!_.specularMap,Tt=!!_.specularColorMap,cn=!!_.specularIntensityMap,H=Ye&&!!_.transmissionMap,Fe=Ye&&!!_.thicknessMap,ie=!!_.gradientMap,ge=!!_.alphaMap,Le=_.alphaTest>0,De=!!_.alphaHash,it=!!_.extensions;let bn=Wa;_.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(bn=i.toneMapping);const ai={shaderID:le,shaderType:_.type,shaderName:_.name,vertexShader:xe,fragmentShader:J,defines:_.defines,customVertexShaderID:oe,customFragmentShaderID:fe,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:f,batching:Se,batchingColor:Se&&L._colorsTexture!==null,instancing:Je,instancingColor:Je&&L.instanceColor!==null,instancingMorph:Je&&L.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:ae===null?i.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:er,alphaToCoverage:!!_.alphaToCoverage,map:qe,matcap:ot,envMap:$e,envMapMode:$e&&V.mapping,envMapCubeUVHeight:z,aoMap:O,lightMap:$t,bumpMap:St,normalMap:nt,displacementMap:d&&Ie,emissiveMap:fn,normalMapObjectSpace:nt&&_.normalMapType===vZ,normalMapTangentSpace:nt&&_.normalMapType===k7,metalnessMap:We,roughnessMap:k,anisotropy:R,anisotropyMap:Te,clearcoat:q,clearcoatMap:et,clearcoatNormalMap:ft,clearcoatRoughnessMap:ye,dispersion:de,iridescence:me,iridescenceMap:Oe,iridescenceThicknessMap:at,sheen:se,sheenColorMap:lt,sheenRoughnessMap:He,specularMap:Gt,specularColorMap:Tt,specularIntensityMap:cn,transmission:Ye,transmissionMap:H,thicknessMap:Fe,gradientMap:ie,opaque:_.transparent===!1&&_.blending===Th&&_.alphaToCoverage===!1,alphaMap:ge,alphaTest:Le,alphaHash:De,combine:_.combine,mapUv:qe&&p(_.map.channel),aoMapUv:O&&p(_.aoMap.channel),lightMapUv:$t&&p(_.lightMap.channel),bumpMapUv:St&&p(_.bumpMap.channel),normalMapUv:nt&&p(_.normalMap.channel),displacementMapUv:Ie&&p(_.displacementMap.channel),emissiveMapUv:fn&&p(_.emissiveMap.channel),metalnessMapUv:We&&p(_.metalnessMap.channel),roughnessMapUv:k&&p(_.roughnessMap.channel),anisotropyMapUv:Te&&p(_.anisotropyMap.channel),clearcoatMapUv:et&&p(_.clearcoatMap.channel),clearcoatNormalMapUv:ft&&p(_.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ye&&p(_.clearcoatRoughnessMap.channel),iridescenceMapUv:Oe&&p(_.iridescenceMap.channel),iridescenceThicknessMapUv:at&&p(_.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&p(_.sheenColorMap.channel),sheenRoughnessMapUv:He&&p(_.sheenRoughnessMap.channel),specularMapUv:Gt&&p(_.specularMap.channel),specularColorMapUv:Tt&&p(_.specularColorMap.channel),specularIntensityMapUv:cn&&p(_.specularIntensityMap.channel),transmissionMapUv:H&&p(_.transmissionMap.channel),thicknessMapUv:Fe&&p(_.thicknessMap.channel),alphaMapUv:ge&&p(_.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(nt||R),vertexColors:_.vertexColors,vertexAlphas:_.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:L.isPoints===!0&&!!Z.attributes.uv&&(qe||ge),fog:!!G,useFog:_.fog===!0,fogExp2:!!G&&G.isFogExp2,flatShading:_.flatShading===!0,sizeAttenuation:_.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:Ce,skinning:L.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:Ae,numDirLights:v.directional.length,numPointLights:v.point.length,numSpotLights:v.spot.length,numSpotLightMaps:v.spotLightMap.length,numRectAreaLights:v.rectArea.length,numHemiLights:v.hemi.length,numDirLightShadows:v.directionalShadowMap.length,numPointLightShadows:v.pointShadowMap.length,numSpotLightShadows:v.spotShadowMap.length,numSpotLightShadowsWithMaps:v.numSpotLightShadowsWithMaps,numLightProbes:v.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:_.dithering,shadowMapEnabled:i.shadowMap.enabled&&B.length>0,shadowMapType:i.shadowMap.type,toneMapping:bn,decodeVideoTexture:qe&&_.map.isVideoTexture===!0&&zt.getTransfer(_.map.colorSpace)===hn,decodeVideoTextureEmissive:fn&&_.emissiveMap.isVideoTexture===!0&&zt.getTransfer(_.emissiveMap.colorSpace)===hn,premultipliedAlpha:_.premultipliedAlpha,doubleSided:_.side===Hs,flipSided:_.side===Oi,useDepthPacking:_.depthPacking>=0,depthPacking:_.depthPacking||0,index0AttributeName:_.index0AttributeName,extensionClipCullDistance:it&&_.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(it&&_.extensions.multiDraw===!0||Se)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:_.customProgramCacheKey()};return ai.vertexUv1s=c.has(1),ai.vertexUv2s=c.has(2),ai.vertexUv3s=c.has(3),c.clear(),ai}function C(_){const v=[];if(_.shaderID?v.push(_.shaderID):(v.push(_.customVertexShaderID),v.push(_.customFragmentShaderID)),_.defines!==void 0)for(const B in _.defines)v.push(B),v.push(_.defines[B]);return _.isRawShaderMaterial===!1&&(A(v,_),I(v,_),v.push(i.outputColorSpace)),v.push(_.customProgramCacheKey),v.join()}function A(_,v){_.push(v.precision),_.push(v.outputColorSpace),_.push(v.envMapMode),_.push(v.envMapCubeUVHeight),_.push(v.mapUv),_.push(v.alphaMapUv),_.push(v.lightMapUv),_.push(v.aoMapUv),_.push(v.bumpMapUv),_.push(v.normalMapUv),_.push(v.displacementMapUv),_.push(v.emissiveMapUv),_.push(v.metalnessMapUv),_.push(v.roughnessMapUv),_.push(v.anisotropyMapUv),_.push(v.clearcoatMapUv),_.push(v.clearcoatNormalMapUv),_.push(v.clearcoatRoughnessMapUv),_.push(v.iridescenceMapUv),_.push(v.iridescenceThicknessMapUv),_.push(v.sheenColorMapUv),_.push(v.sheenRoughnessMapUv),_.push(v.specularMapUv),_.push(v.specularColorMapUv),_.push(v.specularIntensityMapUv),_.push(v.transmissionMapUv),_.push(v.thicknessMapUv),_.push(v.combine),_.push(v.fogExp2),_.push(v.sizeAttenuation),_.push(v.morphTargetsCount),_.push(v.morphAttributeCount),_.push(v.numDirLights),_.push(v.numPointLights),_.push(v.numSpotLights),_.push(v.numSpotLightMaps),_.push(v.numHemiLights),_.push(v.numRectAreaLights),_.push(v.numDirLightShadows),_.push(v.numPointLightShadows),_.push(v.numSpotLightShadows),_.push(v.numSpotLightShadowsWithMaps),_.push(v.numLightProbes),_.push(v.shadowMapType),_.push(v.toneMapping),_.push(v.numClippingPlanes),_.push(v.numClipIntersection),_.push(v.depthPacking)}function I(_,v){a.disableAll(),v.supportsVertexTextures&&a.enable(0),v.instancing&&a.enable(1),v.instancingColor&&a.enable(2),v.instancingMorph&&a.enable(3),v.matcap&&a.enable(4),v.envMap&&a.enable(5),v.normalMapObjectSpace&&a.enable(6),v.normalMapTangentSpace&&a.enable(7),v.clearcoat&&a.enable(8),v.iridescence&&a.enable(9),v.alphaTest&&a.enable(10),v.vertexColors&&a.enable(11),v.vertexAlphas&&a.enable(12),v.vertexUv1s&&a.enable(13),v.vertexUv2s&&a.enable(14),v.vertexUv3s&&a.enable(15),v.vertexTangents&&a.enable(16),v.anisotropy&&a.enable(17),v.alphaHash&&a.enable(18),v.batching&&a.enable(19),v.dispersion&&a.enable(20),v.batchingColor&&a.enable(21),_.push(a.mask),a.disableAll(),v.fog&&a.enable(0),v.useFog&&a.enable(1),v.flatShading&&a.enable(2),v.logarithmicDepthBuffer&&a.enable(3),v.reverseDepthBuffer&&a.enable(4),v.skinning&&a.enable(5),v.morphTargets&&a.enable(6),v.morphNormals&&a.enable(7),v.morphColors&&a.enable(8),v.premultipliedAlpha&&a.enable(9),v.shadowMapEnabled&&a.enable(10),v.doubleSided&&a.enable(11),v.flipSided&&a.enable(12),v.useDepthPacking&&a.enable(13),v.dithering&&a.enable(14),v.transmission&&a.enable(15),v.sheen&&a.enable(16),v.opaque&&a.enable(17),v.pointsUvs&&a.enable(18),v.decodeVideoTexture&&a.enable(19),v.decodeVideoTextureEmissive&&a.enable(20),v.alphaToCoverage&&a.enable(21),_.push(a.mask)}function y(_){const v=g[_.type];let B;if(v){const E=Us[v];B=gV.clone(E.uniforms)}else B=_.uniforms;return B}function x(_,v){let B;for(let E=0,L=h.length;E<L;E++){const G=h[E];if(G.cacheKey===v){B=G,++B.usedTimes;break}}return B===void 0&&(B=new CX(i,v,_,s),h.push(B)),B}function T(_){if(--_.usedTimes===0){const v=h.indexOf(_);h[v]=h[h.length-1],h.pop(),_.destroy()}}function S(_){l.remove(_)}function M(){l.dispose()}return{getParameters:m,getProgramCacheKey:C,getUniforms:y,acquireProgram:x,releaseProgram:T,releaseShaderCache:S,programs:h,dispose:M}}function vX(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function bX(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function mb(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Cb(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(u,d,f,g,p,m){let C=i[e];return C===void 0?(C={id:u.id,object:u,geometry:d,material:f,groupOrder:g,renderOrder:u.renderOrder,z:p,group:m},i[e]=C):(C.id=u.id,C.object=u,C.geometry=d,C.material=f,C.groupOrder=g,C.renderOrder=u.renderOrder,C.z=p,C.group=m),e++,C}function a(u,d,f,g,p,m){const C=o(u,d,f,g,p,m);f.transmission>0?n.push(C):f.transparent===!0?r.push(C):t.push(C)}function l(u,d,f,g,p,m){const C=o(u,d,f,g,p,m);f.transmission>0?n.unshift(C):f.transparent===!0?r.unshift(C):t.unshift(C)}function c(u,d){t.length>1&&t.sort(u||bX),n.length>1&&n.sort(d||mb),r.length>1&&r.sort(d||mb)}function h(){for(let u=e,d=i.length;u<d;u++){const f=i[u];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:h,sort:c}}function xX(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new Cb,i.set(n,[o])):r>=s.length?(o=new Cb,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function wX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new _t};break;case"SpotLight":t={position:new Y,direction:new Y,color:new _t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new _t,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new _t,groundColor:new _t};break;case"RectAreaLight":t={color:new _t,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return i[e.id]=t,t}}}function SX(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let TX=0;function EX(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function MX(i){const e=new wX,t=SX(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new Y);const r=new Y,s=new xt,o=new xt;function a(c){let h=0,u=0,d=0;for(let _=0;_<9;_++)n.probe[_].set(0,0,0);let f=0,g=0,p=0,m=0,C=0,A=0,I=0,y=0,x=0,T=0,S=0;c.sort(EX);for(let _=0,v=c.length;_<v;_++){const B=c[_],E=B.color,L=B.intensity,G=B.distance,Z=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)h+=E.r*L,u+=E.g*L,d+=E.b*L;else if(B.isLightProbe){for(let U=0;U<9;U++)n.probe[U].addScaledVector(B.sh.coefficients[U],L);S++}else if(B.isDirectionalLight){const U=e.get(B);if(U.color.copy(B.color).multiplyScalar(B.intensity),B.castShadow){const V=B.shadow,z=t.get(B);z.shadowIntensity=V.intensity,z.shadowBias=V.bias,z.shadowNormalBias=V.normalBias,z.shadowRadius=V.radius,z.shadowMapSize=V.mapSize,n.directionalShadow[f]=z,n.directionalShadowMap[f]=Z,n.directionalShadowMatrix[f]=B.shadow.matrix,A++}n.directional[f]=U,f++}else if(B.isSpotLight){const U=e.get(B);U.position.setFromMatrixPosition(B.matrixWorld),U.color.copy(E).multiplyScalar(L),U.distance=G,U.coneCos=Math.cos(B.angle),U.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),U.decay=B.decay,n.spot[p]=U;const V=B.shadow;if(B.map&&(n.spotLightMap[x]=B.map,x++,V.updateMatrices(B),B.castShadow&&T++),n.spotLightMatrix[p]=V.matrix,B.castShadow){const z=t.get(B);z.shadowIntensity=V.intensity,z.shadowBias=V.bias,z.shadowNormalBias=V.normalBias,z.shadowRadius=V.radius,z.shadowMapSize=V.mapSize,n.spotShadow[p]=z,n.spotShadowMap[p]=Z,y++}p++}else if(B.isRectAreaLight){const U=e.get(B);U.color.copy(E).multiplyScalar(L),U.halfWidth.set(B.width*.5,0,0),U.halfHeight.set(0,B.height*.5,0),n.rectArea[m]=U,m++}else if(B.isPointLight){const U=e.get(B);if(U.color.copy(B.color).multiplyScalar(B.intensity),U.distance=B.distance,U.decay=B.decay,B.castShadow){const V=B.shadow,z=t.get(B);z.shadowIntensity=V.intensity,z.shadowBias=V.bias,z.shadowNormalBias=V.normalBias,z.shadowRadius=V.radius,z.shadowMapSize=V.mapSize,z.shadowCameraNear=V.camera.near,z.shadowCameraFar=V.camera.far,n.pointShadow[g]=z,n.pointShadowMap[g]=Z,n.pointShadowMatrix[g]=B.shadow.matrix,I++}n.point[g]=U,g++}else if(B.isHemisphereLight){const U=e.get(B);U.skyColor.copy(B.color).multiplyScalar(L),U.groundColor.copy(B.groundColor).multiplyScalar(L),n.hemi[C]=U,C++}}m>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Re.LTC_FLOAT_1,n.rectAreaLTC2=Re.LTC_FLOAT_2):(n.rectAreaLTC1=Re.LTC_HALF_1,n.rectAreaLTC2=Re.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=u,n.ambient[2]=d;const M=n.hash;(M.directionalLength!==f||M.pointLength!==g||M.spotLength!==p||M.rectAreaLength!==m||M.hemiLength!==C||M.numDirectionalShadows!==A||M.numPointShadows!==I||M.numSpotShadows!==y||M.numSpotMaps!==x||M.numLightProbes!==S)&&(n.directional.length=f,n.spot.length=p,n.rectArea.length=m,n.point.length=g,n.hemi.length=C,n.directionalShadow.length=A,n.directionalShadowMap.length=A,n.pointShadow.length=I,n.pointShadowMap.length=I,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=A,n.pointShadowMatrix.length=I,n.spotLightMatrix.length=y+x-T,n.spotLightMap.length=x,n.numSpotLightShadowsWithMaps=T,n.numLightProbes=S,M.directionalLength=f,M.pointLength=g,M.spotLength=p,M.rectAreaLength=m,M.hemiLength=C,M.numDirectionalShadows=A,M.numPointShadows=I,M.numSpotShadows=y,M.numSpotMaps=x,M.numLightProbes=S,n.version=TX++)}function l(c,h){let u=0,d=0,f=0,g=0,p=0;const m=h.matrixWorldInverse;for(let C=0,A=c.length;C<A;C++){const I=c[C];if(I.isDirectionalLight){const y=n.directional[u];y.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),u++}else if(I.isSpotLight){const y=n.spot[f];y.position.setFromMatrixPosition(I.matrixWorld),y.position.applyMatrix4(m),y.direction.setFromMatrixPosition(I.matrixWorld),r.setFromMatrixPosition(I.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),f++}else if(I.isRectAreaLight){const y=n.rectArea[g];y.position.setFromMatrixPosition(I.matrixWorld),y.position.applyMatrix4(m),o.identity(),s.copy(I.matrixWorld),s.premultiply(m),o.extractRotation(s),y.halfWidth.set(I.width*.5,0,0),y.halfHeight.set(0,I.height*.5,0),y.halfWidth.applyMatrix4(o),y.halfHeight.applyMatrix4(o),g++}else if(I.isPointLight){const y=n.point[d];y.position.setFromMatrixPosition(I.matrixWorld),y.position.applyMatrix4(m),d++}else if(I.isHemisphereLight){const y=n.hemi[p];y.direction.setFromMatrixPosition(I.matrixWorld),y.direction.transformDirection(m),p++}}}return{setup:a,setupView:l,state:n}}function Ib(i){const e=new MX(i),t=[],n=[];function r(h){c.camera=h,t.length=0,n.length=0}function s(h){t.push(h)}function o(h){n.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function LX(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new Ib(i),e.set(r,[a])):s>=o.length?(a=new Ib(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}const RX=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,BX=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function PX(i,e,t){let n=new C3;const r=new Pt,s=new Pt,o=new nn,a=new RV({depthPacking:_Z}),l=new BV,c={},h=t.maxTextureSize,u={[oo]:Oi,[Oi]:oo,[Hs]:Hs},d=new Ni({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Pt},radius:{value:4}},vertexShader:RX,fragmentShader:BX}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new gr;g.setAttribute("position",new yi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new jn(g,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S7;let C=this.type;this.render=function(T,S,M){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||T.length===0)return;const _=i.getRenderTarget(),v=i.getActiveCubeFace(),B=i.getActiveMipmapLevel(),E=i.state;E.setBlending(Va),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);const L=C!==Ro&&this.type===Ro,G=C===Ro&&this.type!==Ro;for(let Z=0,U=T.length;Z<U;Z++){const V=T[Z],z=V.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);const le=z.getFrameExtents();if(r.multiply(le),s.copy(z.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/le.x),r.x=s.x*le.x,z.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/le.y),r.y=s.y*le.y,z.mapSize.y=s.y)),z.map===null||L===!0||G===!0){const re=this.type!==Ro?{minFilter:ri,magFilter:ri}:{};z.map!==null&&z.map.dispose(),z.map=new lo(r.x,r.y,re),z.map.texture.name=V.name+".shadowMap",z.camera.updateProjectionMatrix()}i.setRenderTarget(z.map),i.clear();const j=z.getViewportCount();for(let re=0;re<j;re++){const Ae=z.getViewport(re);o.set(s.x*Ae.x,s.y*Ae.y,s.x*Ae.z,s.y*Ae.w),E.viewport(o),z.updateMatrices(V,re),n=z.getFrustum(),y(S,M,z.camera,V,this.type)}z.isPointLightShadow!==!0&&this.type===Ro&&A(z,M),z.needsUpdate=!1}C=this.type,m.needsUpdate=!1,i.setRenderTarget(_,v,B)};function A(T,S){const M=e.update(p);d.defines.VSM_SAMPLES!==T.blurSamples&&(d.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new lo(r.x,r.y)),d.uniforms.shadow_pass.value=T.map.texture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,i.setRenderTarget(T.mapPass),i.clear(),i.renderBufferDirect(S,null,M,d,p,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,i.setRenderTarget(T.map),i.clear(),i.renderBufferDirect(S,null,M,f,p,null)}function I(T,S,M,_){let v=null;const B=M.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(B!==void 0)v=B;else if(v=M.isPointLight===!0?l:a,i.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0||S.alphaToCoverage===!0){const E=v.uuid,L=S.uuid;let G=c[E];G===void 0&&(G={},c[E]=G);let Z=G[L];Z===void 0&&(Z=v.clone(),G[L]=Z,S.addEventListener("dispose",x)),v=Z}if(v.visible=S.visible,v.wireframe=S.wireframe,_===Ro?v.side=S.shadowSide!==null?S.shadowSide:S.side:v.side=S.shadowSide!==null?S.shadowSide:u[S.side],v.alphaMap=S.alphaMap,v.alphaTest=S.alphaToCoverage===!0?.5:S.alphaTest,v.map=S.map,v.clipShadows=S.clipShadows,v.clippingPlanes=S.clippingPlanes,v.clipIntersection=S.clipIntersection,v.displacementMap=S.displacementMap,v.displacementScale=S.displacementScale,v.displacementBias=S.displacementBias,v.wireframeLinewidth=S.wireframeLinewidth,v.linewidth=S.linewidth,M.isPointLight===!0&&v.isMeshDistanceMaterial===!0){const E=i.properties.get(v);E.light=M}return v}function y(T,S,M,_,v){if(T.visible===!1)return;if(T.layers.test(S.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&v===Ro)&&(!T.frustumCulled||n.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,T.matrixWorld);const L=e.update(T),G=T.material;if(Array.isArray(G)){const Z=L.groups;for(let U=0,V=Z.length;U<V;U++){const z=Z[U],le=G[z.materialIndex];if(le&&le.visible){const j=I(T,le,_,v);T.onBeforeShadow(i,T,S,M,L,j,z),i.renderBufferDirect(M,null,L,j,T,z),T.onAfterShadow(i,T,S,M,L,j,z)}}}else if(G.visible){const Z=I(T,G,_,v);T.onBeforeShadow(i,T,S,M,L,Z,null),i.renderBufferDirect(M,null,L,Z,T,null),T.onAfterShadow(i,T,S,M,L,Z,null)}}const E=T.children;for(let L=0,G=E.length;L<G;L++)y(E[L],S,M,_,v)}function x(T){T.target.removeEventListener("dispose",x);for(const M in c){const _=c[M],v=T.target.uuid;v in _&&(_[v].dispose(),delete _[v])}}}const GX={[uI]:dI,[fI]:mI,[gI]:CI,[zh]:pI,[dI]:uI,[mI]:fI,[CI]:gI,[pI]:zh};function DX(i,e){function t(){let H=!1;const Fe=new nn;let ie=null;const ge=new nn(0,0,0,0);return{setMask:function(Le){ie!==Le&&!H&&(i.colorMask(Le,Le,Le,Le),ie=Le)},setLocked:function(Le){H=Le},setClear:function(Le,De,it,bn,ai){ai===!0&&(Le*=bn,De*=bn,it*=bn),Fe.set(Le,De,it,bn),ge.equals(Fe)===!1&&(i.clearColor(Le,De,it,bn),ge.copy(Fe))},reset:function(){H=!1,ie=null,ge.set(-1,0,0,0)}}}function n(){let H=!1,Fe=!1,ie=null,ge=null,Le=null;return{setReversed:function(De){if(Fe!==De){const it=e.get("EXT_clip_control");De?it.clipControlEXT(it.LOWER_LEFT_EXT,it.ZERO_TO_ONE_EXT):it.clipControlEXT(it.LOWER_LEFT_EXT,it.NEGATIVE_ONE_TO_ONE_EXT),Fe=De;const bn=Le;Le=null,this.setClear(bn)}},getReversed:function(){return Fe},setTest:function(De){De?ae(i.DEPTH_TEST):Ce(i.DEPTH_TEST)},setMask:function(De){ie!==De&&!H&&(i.depthMask(De),ie=De)},setFunc:function(De){if(Fe&&(De=GX[De]),ge!==De){switch(De){case uI:i.depthFunc(i.NEVER);break;case dI:i.depthFunc(i.ALWAYS);break;case fI:i.depthFunc(i.LESS);break;case zh:i.depthFunc(i.LEQUAL);break;case gI:i.depthFunc(i.EQUAL);break;case pI:i.depthFunc(i.GEQUAL);break;case mI:i.depthFunc(i.GREATER);break;case CI:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ge=De}},setLocked:function(De){H=De},setClear:function(De){Le!==De&&(Fe&&(De=1-De),i.clearDepth(De),Le=De)},reset:function(){H=!1,ie=null,ge=null,Le=null,Fe=!1}}}function r(){let H=!1,Fe=null,ie=null,ge=null,Le=null,De=null,it=null,bn=null,ai=null;return{setTest:function(It){H||(It?ae(i.STENCIL_TEST):Ce(i.STENCIL_TEST))},setMask:function(It){Fe!==It&&!H&&(i.stencilMask(It),Fe=It)},setFunc:function(It,nr,Dr){(ie!==It||ge!==nr||Le!==Dr)&&(i.stencilFunc(It,nr,Dr),ie=It,ge=nr,Le=Dr)},setOp:function(It,nr,Dr){(De!==It||it!==nr||bn!==Dr)&&(i.stencilOp(It,nr,Dr),De=It,it=nr,bn=Dr)},setLocked:function(It){H=It},setClear:function(It){ai!==It&&(i.clearStencil(It),ai=It)},reset:function(){H=!1,Fe=null,ie=null,ge=null,Le=null,De=null,it=null,bn=null,ai=null}}}const s=new t,o=new n,a=new r,l=new WeakMap,c=new WeakMap;let h={},u={},d=new WeakMap,f=[],g=null,p=!1,m=null,C=null,A=null,I=null,y=null,x=null,T=null,S=new _t(0,0,0),M=0,_=!1,v=null,B=null,E=null,L=null,G=null;const Z=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let U=!1,V=0;const z=i.getParameter(i.VERSION);z.indexOf("WebGL")!==-1?(V=parseFloat(/^WebGL (\d)/.exec(z)[1]),U=V>=1):z.indexOf("OpenGL ES")!==-1&&(V=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),U=V>=2);let le=null,j={};const re=i.getParameter(i.SCISSOR_BOX),Ae=i.getParameter(i.VIEWPORT),xe=new nn().fromArray(re),J=new nn().fromArray(Ae);function oe(H,Fe,ie,ge){const Le=new Uint8Array(4),De=i.createTexture();i.bindTexture(H,De),i.texParameteri(H,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(H,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let it=0;it<ie;it++)H===i.TEXTURE_3D||H===i.TEXTURE_2D_ARRAY?i.texImage3D(Fe,0,i.RGBA,1,1,ge,0,i.RGBA,i.UNSIGNED_BYTE,Le):i.texImage2D(Fe+it,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Le);return De}const fe={};fe[i.TEXTURE_2D]=oe(i.TEXTURE_2D,i.TEXTURE_2D,1),fe[i.TEXTURE_CUBE_MAP]=oe(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),fe[i.TEXTURE_2D_ARRAY]=oe(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),fe[i.TEXTURE_3D]=oe(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ae(i.DEPTH_TEST),o.setFunc(zh),St(!1),nt(nv),ae(i.CULL_FACE),O(Va);function ae(H){h[H]!==!0&&(i.enable(H),h[H]=!0)}function Ce(H){h[H]!==!1&&(i.disable(H),h[H]=!1)}function Je(H,Fe){return u[H]!==Fe?(i.bindFramebuffer(H,Fe),u[H]=Fe,H===i.DRAW_FRAMEBUFFER&&(u[i.FRAMEBUFFER]=Fe),H===i.FRAMEBUFFER&&(u[i.DRAW_FRAMEBUFFER]=Fe),!0):!1}function Se(H,Fe){let ie=f,ge=!1;if(H){ie=d.get(Fe),ie===void 0&&(ie=[],d.set(Fe,ie));const Le=H.textures;if(ie.length!==Le.length||ie[0]!==i.COLOR_ATTACHMENT0){for(let De=0,it=Le.length;De<it;De++)ie[De]=i.COLOR_ATTACHMENT0+De;ie.length=Le.length,ge=!0}}else ie[0]!==i.BACK&&(ie[0]=i.BACK,ge=!0);ge&&i.drawBuffers(ie)}function qe(H){return g!==H?(i.useProgram(H),g=H,!0):!1}const ot={[zl]:i.FUNC_ADD,[WU]:i.FUNC_SUBTRACT,[HU]:i.FUNC_REVERSE_SUBTRACT};ot[zU]=i.MIN,ot[YU]=i.MAX;const $e={[XU]:i.ZERO,[KU]:i.ONE,[jU]:i.SRC_COLOR,[cI]:i.SRC_ALPHA,[tZ]:i.SRC_ALPHA_SATURATE,[qU]:i.DST_COLOR,[JU]:i.DST_ALPHA,[$U]:i.ONE_MINUS_SRC_COLOR,[hI]:i.ONE_MINUS_SRC_ALPHA,[eZ]:i.ONE_MINUS_DST_COLOR,[QU]:i.ONE_MINUS_DST_ALPHA,[nZ]:i.CONSTANT_COLOR,[iZ]:i.ONE_MINUS_CONSTANT_COLOR,[rZ]:i.CONSTANT_ALPHA,[sZ]:i.ONE_MINUS_CONSTANT_ALPHA};function O(H,Fe,ie,ge,Le,De,it,bn,ai,It){if(H===Va){p===!0&&(Ce(i.BLEND),p=!1);return}if(p===!1&&(ae(i.BLEND),p=!0),H!==VU){if(H!==m||It!==_){if((C!==zl||y!==zl)&&(i.blendEquation(i.FUNC_ADD),C=zl,y=zl),It)switch(H){case Th:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case lI:i.blendFunc(i.ONE,i.ONE);break;case iv:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case rv:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Th:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case lI:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case iv:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case rv:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}A=null,I=null,x=null,T=null,S.set(0,0,0),M=0,m=H,_=It}return}Le=Le||Fe,De=De||ie,it=it||ge,(Fe!==C||Le!==y)&&(i.blendEquationSeparate(ot[Fe],ot[Le]),C=Fe,y=Le),(ie!==A||ge!==I||De!==x||it!==T)&&(i.blendFuncSeparate($e[ie],$e[ge],$e[De],$e[it]),A=ie,I=ge,x=De,T=it),(bn.equals(S)===!1||ai!==M)&&(i.blendColor(bn.r,bn.g,bn.b,ai),S.copy(bn),M=ai),m=H,_=!1}function $t(H,Fe){H.side===Hs?Ce(i.CULL_FACE):ae(i.CULL_FACE);let ie=H.side===Oi;Fe&&(ie=!ie),St(ie),H.blending===Th&&H.transparent===!1?O(Va):O(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.blendColor,H.blendAlpha,H.premultipliedAlpha),o.setFunc(H.depthFunc),o.setTest(H.depthTest),o.setMask(H.depthWrite),s.setMask(H.colorWrite);const ge=H.stencilWrite;a.setTest(ge),ge&&(a.setMask(H.stencilWriteMask),a.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),a.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),fn(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?ae(i.SAMPLE_ALPHA_TO_COVERAGE):Ce(i.SAMPLE_ALPHA_TO_COVERAGE)}function St(H){v!==H&&(H?i.frontFace(i.CW):i.frontFace(i.CCW),v=H)}function nt(H){H!==OU?(ae(i.CULL_FACE),H!==B&&(H===nv?i.cullFace(i.BACK):H===UU?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ce(i.CULL_FACE),B=H}function Ie(H){H!==E&&(U&&i.lineWidth(H),E=H)}function fn(H,Fe,ie){H?(ae(i.POLYGON_OFFSET_FILL),(L!==Fe||G!==ie)&&(i.polygonOffset(Fe,ie),L=Fe,G=ie)):Ce(i.POLYGON_OFFSET_FILL)}function We(H){H?ae(i.SCISSOR_TEST):Ce(i.SCISSOR_TEST)}function k(H){H===void 0&&(H=i.TEXTURE0+Z-1),le!==H&&(i.activeTexture(H),le=H)}function R(H,Fe,ie){ie===void 0&&(le===null?ie=i.TEXTURE0+Z-1:ie=le);let ge=j[ie];ge===void 0&&(ge={type:void 0,texture:void 0},j[ie]=ge),(ge.type!==H||ge.texture!==Fe)&&(le!==ie&&(i.activeTexture(ie),le=ie),i.bindTexture(H,Fe||fe[H]),ge.type=H,ge.texture=Fe)}function q(){const H=j[le];H!==void 0&&H.type!==void 0&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function de(){try{i.compressedTexImage2D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function me(){try{i.compressedTexImage3D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function se(){try{i.texSubImage2D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ye(){try{i.texSubImage3D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Te(){try{i.compressedTexSubImage2D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function et(){try{i.compressedTexSubImage3D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ft(){try{i.texStorage2D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ye(){try{i.texStorage3D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Oe(){try{i.texImage2D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function at(){try{i.texImage3D(...arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function lt(H){xe.equals(H)===!1&&(i.scissor(H.x,H.y,H.z,H.w),xe.copy(H))}function He(H){J.equals(H)===!1&&(i.viewport(H.x,H.y,H.z,H.w),J.copy(H))}function Gt(H,Fe){let ie=c.get(Fe);ie===void 0&&(ie=new WeakMap,c.set(Fe,ie));let ge=ie.get(H);ge===void 0&&(ge=i.getUniformBlockIndex(Fe,H.name),ie.set(H,ge))}function Tt(H,Fe){const ge=c.get(Fe).get(H);l.get(Fe)!==ge&&(i.uniformBlockBinding(Fe,ge,H.__bindingPointIndex),l.set(Fe,ge))}function cn(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),h={},le=null,j={},u={},d=new WeakMap,f=[],g=null,p=!1,m=null,C=null,A=null,I=null,y=null,x=null,T=null,S=new _t(0,0,0),M=0,_=!1,v=null,B=null,E=null,L=null,G=null,xe.set(0,0,i.canvas.width,i.canvas.height),J.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ae,disable:Ce,bindFramebuffer:Je,drawBuffers:Se,useProgram:qe,setBlending:O,setMaterial:$t,setFlipSided:St,setCullFace:nt,setLineWidth:Ie,setPolygonOffset:fn,setScissorTest:We,activeTexture:k,bindTexture:R,unbindTexture:q,compressedTexImage2D:de,compressedTexImage3D:me,texImage2D:Oe,texImage3D:at,updateUBOMapping:Gt,uniformBlockBinding:Tt,texStorage2D:ft,texStorage3D:ye,texSubImage2D:se,texSubImage3D:Ye,compressedTexSubImage2D:Te,compressedTexSubImage3D:et,scissor:lt,viewport:He,reset:cn}}function FX(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Pt,h=new WeakMap;let u;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(k,R){return f?new OffscreenCanvas(k,R):rf("canvas")}function p(k,R,q){let de=1;const me=We(k);if((me.width>q||me.height>q)&&(de=q/Math.max(me.width,me.height)),de<1)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap||typeof VideoFrame<"u"&&k instanceof VideoFrame){const se=Math.floor(de*me.width),Ye=Math.floor(de*me.height);u===void 0&&(u=g(se,Ye));const Te=R?g(se,Ye):u;return Te.width=se,Te.height=Ye,Te.getContext("2d").drawImage(k,0,0,se,Ye),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+me.width+"x"+me.height+") to ("+se+"x"+Ye+")."),Te}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+me.width+"x"+me.height+")."),k;return k}function m(k){return k.generateMipmaps}function C(k){i.generateMipmap(k)}function A(k){return k.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:k.isWebGL3DRenderTarget?i.TEXTURE_3D:k.isWebGLArrayRenderTarget||k.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function I(k,R,q,de,me=!1){if(k!==null){if(i[k]!==void 0)return i[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let se=R;if(R===i.RED&&(q===i.FLOAT&&(se=i.R32F),q===i.HALF_FLOAT&&(se=i.R16F),q===i.UNSIGNED_BYTE&&(se=i.R8)),R===i.RED_INTEGER&&(q===i.UNSIGNED_BYTE&&(se=i.R8UI),q===i.UNSIGNED_SHORT&&(se=i.R16UI),q===i.UNSIGNED_INT&&(se=i.R32UI),q===i.BYTE&&(se=i.R8I),q===i.SHORT&&(se=i.R16I),q===i.INT&&(se=i.R32I)),R===i.RG&&(q===i.FLOAT&&(se=i.RG32F),q===i.HALF_FLOAT&&(se=i.RG16F),q===i.UNSIGNED_BYTE&&(se=i.RG8)),R===i.RG_INTEGER&&(q===i.UNSIGNED_BYTE&&(se=i.RG8UI),q===i.UNSIGNED_SHORT&&(se=i.RG16UI),q===i.UNSIGNED_INT&&(se=i.RG32UI),q===i.BYTE&&(se=i.RG8I),q===i.SHORT&&(se=i.RG16I),q===i.INT&&(se=i.RG32I)),R===i.RGB_INTEGER&&(q===i.UNSIGNED_BYTE&&(se=i.RGB8UI),q===i.UNSIGNED_SHORT&&(se=i.RGB16UI),q===i.UNSIGNED_INT&&(se=i.RGB32UI),q===i.BYTE&&(se=i.RGB8I),q===i.SHORT&&(se=i.RGB16I),q===i.INT&&(se=i.RGB32I)),R===i.RGBA_INTEGER&&(q===i.UNSIGNED_BYTE&&(se=i.RGBA8UI),q===i.UNSIGNED_SHORT&&(se=i.RGBA16UI),q===i.UNSIGNED_INT&&(se=i.RGBA32UI),q===i.BYTE&&(se=i.RGBA8I),q===i.SHORT&&(se=i.RGBA16I),q===i.INT&&(se=i.RGBA32I)),R===i.RGB&&q===i.UNSIGNED_INT_5_9_9_9_REV&&(se=i.RGB9_E5),R===i.RGBA){const Ye=me?Dp:zt.getTransfer(de);q===i.FLOAT&&(se=i.RGBA32F),q===i.HALF_FLOAT&&(se=i.RGBA16F),q===i.UNSIGNED_BYTE&&(se=Ye===hn?i.SRGB8_ALPHA8:i.RGBA8),q===i.UNSIGNED_SHORT_4_4_4_4&&(se=i.RGBA4),q===i.UNSIGNED_SHORT_5_5_5_1&&(se=i.RGB5_A1)}return(se===i.R16F||se===i.R32F||se===i.RG16F||se===i.RG32F||se===i.RGBA16F||se===i.RGBA32F)&&e.get("EXT_color_buffer_float"),se}function y(k,R){let q;return k?R===null||R===gc||R===Qd?q=i.DEPTH24_STENCIL8:R===Tr?q=i.DEPTH32F_STENCIL8:R===Jd&&(q=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):R===null||R===gc||R===Qd?q=i.DEPTH_COMPONENT24:R===Tr?q=i.DEPTH_COMPONENT32F:R===Jd&&(q=i.DEPTH_COMPONENT16),q}function x(k,R){return m(k)===!0||k.isFramebufferTexture&&k.minFilter!==ri&&k.minFilter!==Sr?Math.log2(Math.max(R.width,R.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?R.mipmaps.length:1}function T(k){const R=k.target;R.removeEventListener("dispose",T),M(R),R.isVideoTexture&&h.delete(R)}function S(k){const R=k.target;R.removeEventListener("dispose",S),v(R)}function M(k){const R=n.get(k);if(R.__webglInit===void 0)return;const q=k.source,de=d.get(q);if(de){const me=de[R.__cacheKey];me.usedTimes--,me.usedTimes===0&&_(k),Object.keys(de).length===0&&d.delete(q)}n.remove(k)}function _(k){const R=n.get(k);i.deleteTexture(R.__webglTexture);const q=k.source,de=d.get(q);delete de[R.__cacheKey],o.memory.textures--}function v(k){const R=n.get(k);if(k.depthTexture&&(k.depthTexture.dispose(),n.remove(k.depthTexture)),k.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(R.__webglFramebuffer[de]))for(let me=0;me<R.__webglFramebuffer[de].length;me++)i.deleteFramebuffer(R.__webglFramebuffer[de][me]);else i.deleteFramebuffer(R.__webglFramebuffer[de]);R.__webglDepthbuffer&&i.deleteRenderbuffer(R.__webglDepthbuffer[de])}else{if(Array.isArray(R.__webglFramebuffer))for(let de=0;de<R.__webglFramebuffer.length;de++)i.deleteFramebuffer(R.__webglFramebuffer[de]);else i.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&i.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&i.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let de=0;de<R.__webglColorRenderbuffer.length;de++)R.__webglColorRenderbuffer[de]&&i.deleteRenderbuffer(R.__webglColorRenderbuffer[de]);R.__webglDepthRenderbuffer&&i.deleteRenderbuffer(R.__webglDepthRenderbuffer)}const q=k.textures;for(let de=0,me=q.length;de<me;de++){const se=n.get(q[de]);se.__webglTexture&&(i.deleteTexture(se.__webglTexture),o.memory.textures--),n.remove(q[de])}n.remove(k)}let B=0;function E(){B=0}function L(){const k=B;return k>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+r.maxTextures),B+=1,k}function G(k){const R=[];return R.push(k.wrapS),R.push(k.wrapT),R.push(k.wrapR||0),R.push(k.magFilter),R.push(k.minFilter),R.push(k.anisotropy),R.push(k.internalFormat),R.push(k.format),R.push(k.type),R.push(k.generateMipmaps),R.push(k.premultiplyAlpha),R.push(k.flipY),R.push(k.unpackAlignment),R.push(k.colorSpace),R.join()}function Z(k,R){const q=n.get(k);if(k.isVideoTexture&&Ie(k),k.isRenderTargetTexture===!1&&k.version>0&&q.__version!==k.version){const de=k.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{J(q,k,R);return}}t.bindTexture(i.TEXTURE_2D,q.__webglTexture,i.TEXTURE0+R)}function U(k,R){const q=n.get(k);if(k.version>0&&q.__version!==k.version){J(q,k,R);return}t.bindTexture(i.TEXTURE_2D_ARRAY,q.__webglTexture,i.TEXTURE0+R)}function V(k,R){const q=n.get(k);if(k.version>0&&q.__version!==k.version){J(q,k,R);return}t.bindTexture(i.TEXTURE_3D,q.__webglTexture,i.TEXTURE0+R)}function z(k,R){const q=n.get(k);if(k.version>0&&q.__version!==k.version){oe(q,k,R);return}t.bindTexture(i.TEXTURE_CUBE_MAP,q.__webglTexture,i.TEXTURE0+R)}const le={[Kh]:i.REPEAT,[js]:i.CLAMP_TO_EDGE,[Pp]:i.MIRRORED_REPEAT},j={[ri]:i.NEAREST,[M7]:i.NEAREST_MIPMAP_NEAREST,[dd]:i.NEAREST_MIPMAP_LINEAR,[Sr]:i.LINEAR,[B1]:i.LINEAR_MIPMAP_NEAREST,[Oo]:i.LINEAR_MIPMAP_LINEAR},re={[bZ]:i.NEVER,[MZ]:i.ALWAYS,[xZ]:i.LESS,[O7]:i.LEQUAL,[wZ]:i.EQUAL,[EZ]:i.GEQUAL,[SZ]:i.GREATER,[TZ]:i.NOTEQUAL};function Ae(k,R){if(R.type===Tr&&e.has("OES_texture_float_linear")===!1&&(R.magFilter===Sr||R.magFilter===B1||R.magFilter===dd||R.magFilter===Oo||R.minFilter===Sr||R.minFilter===B1||R.minFilter===dd||R.minFilter===Oo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(k,i.TEXTURE_WRAP_S,le[R.wrapS]),i.texParameteri(k,i.TEXTURE_WRAP_T,le[R.wrapT]),(k===i.TEXTURE_3D||k===i.TEXTURE_2D_ARRAY)&&i.texParameteri(k,i.TEXTURE_WRAP_R,le[R.wrapR]),i.texParameteri(k,i.TEXTURE_MAG_FILTER,j[R.magFilter]),i.texParameteri(k,i.TEXTURE_MIN_FILTER,j[R.minFilter]),R.compareFunction&&(i.texParameteri(k,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(k,i.TEXTURE_COMPARE_FUNC,re[R.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(R.magFilter===ri||R.minFilter!==dd&&R.minFilter!==Oo||R.type===Tr&&e.has("OES_texture_float_linear")===!1)return;if(R.anisotropy>1||n.get(R).__currentAnisotropy){const q=e.get("EXT_texture_filter_anisotropic");i.texParameterf(k,q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),n.get(R).__currentAnisotropy=R.anisotropy}}}function xe(k,R){let q=!1;k.__webglInit===void 0&&(k.__webglInit=!0,R.addEventListener("dispose",T));const de=R.source;let me=d.get(de);me===void 0&&(me={},d.set(de,me));const se=G(R);if(se!==k.__cacheKey){me[se]===void 0&&(me[se]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,q=!0),me[se].usedTimes++;const Ye=me[k.__cacheKey];Ye!==void 0&&(me[k.__cacheKey].usedTimes--,Ye.usedTimes===0&&_(R)),k.__cacheKey=se,k.__webglTexture=me[se].texture}return q}function J(k,R,q){let de=i.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(de=i.TEXTURE_2D_ARRAY),R.isData3DTexture&&(de=i.TEXTURE_3D);const me=xe(k,R),se=R.source;t.bindTexture(de,k.__webglTexture,i.TEXTURE0+q);const Ye=n.get(se);if(se.version!==Ye.__version||me===!0){t.activeTexture(i.TEXTURE0+q);const Te=zt.getPrimaries(zt.workingColorSpace),et=R.colorSpace===Ma?null:zt.getPrimaries(R.colorSpace),ft=R.colorSpace===Ma||Te===et?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,R.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,R.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);let ye=p(R.image,!1,r.maxTextureSize);ye=fn(R,ye);const Oe=s.convert(R.format,R.colorSpace),at=s.convert(R.type);let lt=I(R.internalFormat,Oe,at,R.colorSpace,R.isVideoTexture);Ae(de,R);let He;const Gt=R.mipmaps,Tt=R.isVideoTexture!==!0,cn=Ye.__version===void 0||me===!0,H=se.dataReady,Fe=x(R,ye);if(R.isDepthTexture)lt=y(R.format===ef,R.type),cn&&(Tt?t.texStorage2D(i.TEXTURE_2D,1,lt,ye.width,ye.height):t.texImage2D(i.TEXTURE_2D,0,lt,ye.width,ye.height,0,Oe,at,null));else if(R.isDataTexture)if(Gt.length>0){Tt&&cn&&t.texStorage2D(i.TEXTURE_2D,Fe,lt,Gt[0].width,Gt[0].height);for(let ie=0,ge=Gt.length;ie<ge;ie++)He=Gt[ie],Tt?H&&t.texSubImage2D(i.TEXTURE_2D,ie,0,0,He.width,He.height,Oe,at,He.data):t.texImage2D(i.TEXTURE_2D,ie,lt,He.width,He.height,0,Oe,at,He.data);R.generateMipmaps=!1}else Tt?(cn&&t.texStorage2D(i.TEXTURE_2D,Fe,lt,ye.width,ye.height),H&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,ye.width,ye.height,Oe,at,ye.data)):t.texImage2D(i.TEXTURE_2D,0,lt,ye.width,ye.height,0,Oe,at,ye.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){Tt&&cn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Fe,lt,Gt[0].width,Gt[0].height,ye.depth);for(let ie=0,ge=Gt.length;ie<ge;ie++)if(He=Gt[ie],R.format!==ar)if(Oe!==null)if(Tt){if(H)if(R.layerUpdates.size>0){const Le=Kv(He.width,He.height,R.format,R.type);for(const De of R.layerUpdates){const it=He.data.subarray(De*Le/He.data.BYTES_PER_ELEMENT,(De+1)*Le/He.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ie,0,0,De,He.width,He.height,1,Oe,it)}R.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ie,0,0,0,He.width,He.height,ye.depth,Oe,He.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ie,lt,He.width,He.height,ye.depth,0,He.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Tt?H&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,ie,0,0,0,He.width,He.height,ye.depth,Oe,at,He.data):t.texImage3D(i.TEXTURE_2D_ARRAY,ie,lt,He.width,He.height,ye.depth,0,Oe,at,He.data)}else{Tt&&cn&&t.texStorage2D(i.TEXTURE_2D,Fe,lt,Gt[0].width,Gt[0].height);for(let ie=0,ge=Gt.length;ie<ge;ie++)He=Gt[ie],R.format!==ar?Oe!==null?Tt?H&&t.compressedTexSubImage2D(i.TEXTURE_2D,ie,0,0,He.width,He.height,Oe,He.data):t.compressedTexImage2D(i.TEXTURE_2D,ie,lt,He.width,He.height,0,He.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tt?H&&t.texSubImage2D(i.TEXTURE_2D,ie,0,0,He.width,He.height,Oe,at,He.data):t.texImage2D(i.TEXTURE_2D,ie,lt,He.width,He.height,0,Oe,at,He.data)}else if(R.isDataArrayTexture)if(Tt){if(cn&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Fe,lt,ye.width,ye.height,ye.depth),H)if(R.layerUpdates.size>0){const ie=Kv(ye.width,ye.height,R.format,R.type);for(const ge of R.layerUpdates){const Le=ye.data.subarray(ge*ie/ye.data.BYTES_PER_ELEMENT,(ge+1)*ie/ye.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,ge,ye.width,ye.height,1,Oe,at,Le)}R.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,ye.width,ye.height,ye.depth,Oe,at,ye.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,lt,ye.width,ye.height,ye.depth,0,Oe,at,ye.data);else if(R.isData3DTexture)Tt?(cn&&t.texStorage3D(i.TEXTURE_3D,Fe,lt,ye.width,ye.height,ye.depth),H&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,ye.width,ye.height,ye.depth,Oe,at,ye.data)):t.texImage3D(i.TEXTURE_3D,0,lt,ye.width,ye.height,ye.depth,0,Oe,at,ye.data);else if(R.isFramebufferTexture){if(cn)if(Tt)t.texStorage2D(i.TEXTURE_2D,Fe,lt,ye.width,ye.height);else{let ie=ye.width,ge=ye.height;for(let Le=0;Le<Fe;Le++)t.texImage2D(i.TEXTURE_2D,Le,lt,ie,ge,0,Oe,at,null),ie>>=1,ge>>=1}}else if(Gt.length>0){if(Tt&&cn){const ie=We(Gt[0]);t.texStorage2D(i.TEXTURE_2D,Fe,lt,ie.width,ie.height)}for(let ie=0,ge=Gt.length;ie<ge;ie++)He=Gt[ie],Tt?H&&t.texSubImage2D(i.TEXTURE_2D,ie,0,0,Oe,at,He):t.texImage2D(i.TEXTURE_2D,ie,lt,Oe,at,He);R.generateMipmaps=!1}else if(Tt){if(cn){const ie=We(ye);t.texStorage2D(i.TEXTURE_2D,Fe,lt,ie.width,ie.height)}H&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Oe,at,ye)}else t.texImage2D(i.TEXTURE_2D,0,lt,Oe,at,ye);m(R)&&C(de),Ye.__version=se.version,R.onUpdate&&R.onUpdate(R)}k.__version=R.version}function oe(k,R,q){if(R.image.length!==6)return;const de=xe(k,R),me=R.source;t.bindTexture(i.TEXTURE_CUBE_MAP,k.__webglTexture,i.TEXTURE0+q);const se=n.get(me);if(me.version!==se.__version||de===!0){t.activeTexture(i.TEXTURE0+q);const Ye=zt.getPrimaries(zt.workingColorSpace),Te=R.colorSpace===Ma?null:zt.getPrimaries(R.colorSpace),et=R.colorSpace===Ma||Ye===Te?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,R.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,R.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,et);const ft=R.isCompressedTexture||R.image[0].isCompressedTexture,ye=R.image[0]&&R.image[0].isDataTexture,Oe=[];for(let ge=0;ge<6;ge++)!ft&&!ye?Oe[ge]=p(R.image[ge],!0,r.maxCubemapSize):Oe[ge]=ye?R.image[ge].image:R.image[ge],Oe[ge]=fn(R,Oe[ge]);const at=Oe[0],lt=s.convert(R.format,R.colorSpace),He=s.convert(R.type),Gt=I(R.internalFormat,lt,He,R.colorSpace),Tt=R.isVideoTexture!==!0,cn=se.__version===void 0||de===!0,H=me.dataReady;let Fe=x(R,at);Ae(i.TEXTURE_CUBE_MAP,R);let ie;if(ft){Tt&&cn&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Fe,Gt,at.width,at.height);for(let ge=0;ge<6;ge++){ie=Oe[ge].mipmaps;for(let Le=0;Le<ie.length;Le++){const De=ie[Le];R.format!==ar?lt!==null?Tt?H&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le,0,0,De.width,De.height,lt,De.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le,Gt,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Tt?H&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le,0,0,De.width,De.height,lt,He,De.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le,Gt,De.width,De.height,0,lt,He,De.data)}}}else{if(ie=R.mipmaps,Tt&&cn){ie.length>0&&Fe++;const ge=We(Oe[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Fe,Gt,ge.width,ge.height)}for(let ge=0;ge<6;ge++)if(ye){Tt?H&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,Oe[ge].width,Oe[ge].height,lt,He,Oe[ge].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Gt,Oe[ge].width,Oe[ge].height,0,lt,He,Oe[ge].data);for(let Le=0;Le<ie.length;Le++){const it=ie[Le].image[ge].image;Tt?H&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le+1,0,0,it.width,it.height,lt,He,it.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le+1,Gt,it.width,it.height,0,lt,He,it.data)}}else{Tt?H&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,lt,He,Oe[ge]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Gt,lt,He,Oe[ge]);for(let Le=0;Le<ie.length;Le++){const De=ie[Le];Tt?H&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le+1,0,0,lt,He,De.image[ge]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Le+1,Gt,lt,He,De.image[ge])}}}m(R)&&C(i.TEXTURE_CUBE_MAP),se.__version=me.version,R.onUpdate&&R.onUpdate(R)}k.__version=R.version}function fe(k,R,q,de,me,se){const Ye=s.convert(q.format,q.colorSpace),Te=s.convert(q.type),et=I(q.internalFormat,Ye,Te,q.colorSpace),ft=n.get(R),ye=n.get(q);if(ye.__renderTarget=R,!ft.__hasExternalTextures){const Oe=Math.max(1,R.width>>se),at=Math.max(1,R.height>>se);me===i.TEXTURE_3D||me===i.TEXTURE_2D_ARRAY?t.texImage3D(me,se,et,Oe,at,R.depth,0,Ye,Te,null):t.texImage2D(me,se,et,Oe,at,0,Ye,Te,null)}t.bindFramebuffer(i.FRAMEBUFFER,k),nt(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,de,me,ye.__webglTexture,0,St(R)):(me===i.TEXTURE_2D||me>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&me<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,de,me,ye.__webglTexture,se),t.bindFramebuffer(i.FRAMEBUFFER,null)}function ae(k,R,q){if(i.bindRenderbuffer(i.RENDERBUFFER,k),R.depthBuffer){const de=R.depthTexture,me=de&&de.isDepthTexture?de.type:null,se=y(R.stencilBuffer,me),Ye=R.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Te=St(R);nt(R)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Te,se,R.width,R.height):q?i.renderbufferStorageMultisample(i.RENDERBUFFER,Te,se,R.width,R.height):i.renderbufferStorage(i.RENDERBUFFER,se,R.width,R.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ye,i.RENDERBUFFER,k)}else{const de=R.textures;for(let me=0;me<de.length;me++){const se=de[me],Ye=s.convert(se.format,se.colorSpace),Te=s.convert(se.type),et=I(se.internalFormat,Ye,Te,se.colorSpace),ft=St(R);q&&nt(R)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,ft,et,R.width,R.height):nt(R)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ft,et,R.width,R.height):i.renderbufferStorage(i.RENDERBUFFER,et,R.width,R.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Ce(k,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,k),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=n.get(R.depthTexture);de.__renderTarget=R,(!de.__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),Z(R.depthTexture,0);const me=de.__webglTexture,se=St(R);if(R.depthTexture.format===qd)nt(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,me,0,se):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,me,0);else if(R.depthTexture.format===ef)nt(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,me,0,se):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,me,0);else throw new Error("Unknown depthTexture format")}function Je(k){const R=n.get(k),q=k.isWebGLCubeRenderTarget===!0;if(R.__boundDepthTexture!==k.depthTexture){const de=k.depthTexture;if(R.__depthDisposeCallback&&R.__depthDisposeCallback(),de){const me=()=>{delete R.__boundDepthTexture,delete R.__depthDisposeCallback,de.removeEventListener("dispose",me)};de.addEventListener("dispose",me),R.__depthDisposeCallback=me}R.__boundDepthTexture=de}if(k.depthTexture&&!R.__autoAllocateDepthBuffer){if(q)throw new Error("target.depthTexture not supported in Cube render targets");const de=k.texture.mipmaps;de&&de.length>0?Ce(R.__webglFramebuffer[0],k):Ce(R.__webglFramebuffer,k)}else if(q){R.__webglDepthbuffer=[];for(let de=0;de<6;de++)if(t.bindFramebuffer(i.FRAMEBUFFER,R.__webglFramebuffer[de]),R.__webglDepthbuffer[de]===void 0)R.__webglDepthbuffer[de]=i.createRenderbuffer(),ae(R.__webglDepthbuffer[de],k,!1);else{const me=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,se=R.__webglDepthbuffer[de];i.bindRenderbuffer(i.RENDERBUFFER,se),i.framebufferRenderbuffer(i.FRAMEBUFFER,me,i.RENDERBUFFER,se)}}else{const de=k.texture.mipmaps;if(de&&de.length>0?t.bindFramebuffer(i.FRAMEBUFFER,R.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer===void 0)R.__webglDepthbuffer=i.createRenderbuffer(),ae(R.__webglDepthbuffer,k,!1);else{const me=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,se=R.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,se),i.framebufferRenderbuffer(i.FRAMEBUFFER,me,i.RENDERBUFFER,se)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Se(k,R,q){const de=n.get(k);R!==void 0&&fe(de.__webglFramebuffer,k,k.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),q!==void 0&&Je(k)}function qe(k){const R=k.texture,q=n.get(k),de=n.get(R);k.addEventListener("dispose",S);const me=k.textures,se=k.isWebGLCubeRenderTarget===!0,Ye=me.length>1;if(Ye||(de.__webglTexture===void 0&&(de.__webglTexture=i.createTexture()),de.__version=R.version,o.memory.textures++),se){q.__webglFramebuffer=[];for(let Te=0;Te<6;Te++)if(R.mipmaps&&R.mipmaps.length>0){q.__webglFramebuffer[Te]=[];for(let et=0;et<R.mipmaps.length;et++)q.__webglFramebuffer[Te][et]=i.createFramebuffer()}else q.__webglFramebuffer[Te]=i.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){q.__webglFramebuffer=[];for(let Te=0;Te<R.mipmaps.length;Te++)q.__webglFramebuffer[Te]=i.createFramebuffer()}else q.__webglFramebuffer=i.createFramebuffer();if(Ye)for(let Te=0,et=me.length;Te<et;Te++){const ft=n.get(me[Te]);ft.__webglTexture===void 0&&(ft.__webglTexture=i.createTexture(),o.memory.textures++)}if(k.samples>0&&nt(k)===!1){q.__webglMultisampledFramebuffer=i.createFramebuffer(),q.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,q.__webglMultisampledFramebuffer);for(let Te=0;Te<me.length;Te++){const et=me[Te];q.__webglColorRenderbuffer[Te]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,q.__webglColorRenderbuffer[Te]);const ft=s.convert(et.format,et.colorSpace),ye=s.convert(et.type),Oe=I(et.internalFormat,ft,ye,et.colorSpace,k.isXRRenderTarget===!0),at=St(k);i.renderbufferStorageMultisample(i.RENDERBUFFER,at,Oe,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Te,i.RENDERBUFFER,q.__webglColorRenderbuffer[Te])}i.bindRenderbuffer(i.RENDERBUFFER,null),k.depthBuffer&&(q.__webglDepthRenderbuffer=i.createRenderbuffer(),ae(q.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(se){t.bindTexture(i.TEXTURE_CUBE_MAP,de.__webglTexture),Ae(i.TEXTURE_CUBE_MAP,R);for(let Te=0;Te<6;Te++)if(R.mipmaps&&R.mipmaps.length>0)for(let et=0;et<R.mipmaps.length;et++)fe(q.__webglFramebuffer[Te][et],k,R,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Te,et);else fe(q.__webglFramebuffer[Te],k,R,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0);m(R)&&C(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ye){for(let Te=0,et=me.length;Te<et;Te++){const ft=me[Te],ye=n.get(ft);t.bindTexture(i.TEXTURE_2D,ye.__webglTexture),Ae(i.TEXTURE_2D,ft),fe(q.__webglFramebuffer,k,ft,i.COLOR_ATTACHMENT0+Te,i.TEXTURE_2D,0),m(ft)&&C(i.TEXTURE_2D)}t.unbindTexture()}else{let Te=i.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(Te=k.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Te,de.__webglTexture),Ae(Te,R),R.mipmaps&&R.mipmaps.length>0)for(let et=0;et<R.mipmaps.length;et++)fe(q.__webglFramebuffer[et],k,R,i.COLOR_ATTACHMENT0,Te,et);else fe(q.__webglFramebuffer,k,R,i.COLOR_ATTACHMENT0,Te,0);m(R)&&C(Te),t.unbindTexture()}k.depthBuffer&&Je(k)}function ot(k){const R=k.textures;for(let q=0,de=R.length;q<de;q++){const me=R[q];if(m(me)){const se=A(k),Ye=n.get(me).__webglTexture;t.bindTexture(se,Ye),C(se),t.unbindTexture()}}}const $e=[],O=[];function $t(k){if(k.samples>0){if(nt(k)===!1){const R=k.textures,q=k.width,de=k.height;let me=i.COLOR_BUFFER_BIT;const se=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ye=n.get(k),Te=R.length>1;if(Te)for(let ft=0;ft<R.length;ft++)t.bindFramebuffer(i.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ft,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Ye.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ft,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer);const et=k.texture.mipmaps;et&&et.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ye.__webglFramebuffer);for(let ft=0;ft<R.length;ft++){if(k.resolveDepthBuffer&&(k.depthBuffer&&(me|=i.DEPTH_BUFFER_BIT),k.stencilBuffer&&k.resolveStencilBuffer&&(me|=i.STENCIL_BUFFER_BIT)),Te){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Ye.__webglColorRenderbuffer[ft]);const ye=n.get(R[ft]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ye,0)}i.blitFramebuffer(0,0,q,de,0,0,q,de,me,i.NEAREST),l===!0&&($e.length=0,O.length=0,$e.push(i.COLOR_ATTACHMENT0+ft),k.depthBuffer&&k.resolveDepthBuffer===!1&&($e.push(se),O.push(se),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,O)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,$e))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Te)for(let ft=0;ft<R.length;ft++){t.bindFramebuffer(i.FRAMEBUFFER,Ye.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ft,i.RENDERBUFFER,Ye.__webglColorRenderbuffer[ft]);const ye=n.get(R[ft]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Ye.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ft,i.TEXTURE_2D,ye,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Ye.__webglMultisampledFramebuffer)}else if(k.depthBuffer&&k.resolveDepthBuffer===!1&&l){const R=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[R])}}}function St(k){return Math.min(r.maxSamples,k.samples)}function nt(k){const R=n.get(k);return k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function Ie(k){const R=o.render.frame;h.get(k)!==R&&(h.set(k,R),k.update())}function fn(k,R){const q=k.colorSpace,de=k.format,me=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||q!==er&&q!==Ma&&(zt.getTransfer(q)===hn?(de!==ar||me!==ao)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",q)),R}function We(k){return typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement?(c.width=k.naturalWidth||k.width,c.height=k.naturalHeight||k.height):typeof VideoFrame<"u"&&k instanceof VideoFrame?(c.width=k.displayWidth,c.height=k.displayHeight):(c.width=k.width,c.height=k.height),c}this.allocateTextureUnit=L,this.resetTextureUnits=E,this.setTexture2D=Z,this.setTexture2DArray=U,this.setTexture3D=V,this.setTextureCube=z,this.rebindTextures=Se,this.setupRenderTarget=qe,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=$t,this.setupDepthRenderbuffer=Je,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=nt}function NX(i,e){function t(n,r=Ma){let s;const o=zt.getTransfer(r);if(n===ao)return i.UNSIGNED_BYTE;if(n===i3)return i.UNSIGNED_SHORT_4_4_4_4;if(n===r3)return i.UNSIGNED_SHORT_5_5_5_1;if(n===B7)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===L7)return i.BYTE;if(n===R7)return i.SHORT;if(n===Jd)return i.UNSIGNED_SHORT;if(n===n3)return i.INT;if(n===gc)return i.UNSIGNED_INT;if(n===Tr)return i.FLOAT;if(n===Ff)return i.HALF_FLOAT;if(n===P7)return i.ALPHA;if(n===G7)return i.RGB;if(n===ar)return i.RGBA;if(n===qd)return i.DEPTH_COMPONENT;if(n===ef)return i.DEPTH_STENCIL;if(n===s3)return i.RED;if(n===o3)return i.RED_INTEGER;if(n===D7)return i.RG;if(n===a3)return i.RG_INTEGER;if(n===l3)return i.RGBA_INTEGER;if(n===P1||n===G1||n===D1||n===F1)if(o===hn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===P1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===G1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===D1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===F1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===P1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===G1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===D1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===F1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===yI||n===_I||n===vI||n===bI)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===yI)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===_I)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===vI)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===bI)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===xI||n===wI||n===SI)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===xI||n===wI)return o===hn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===SI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===TI||n===EI||n===MI||n===LI||n===RI||n===BI||n===PI||n===GI||n===DI||n===FI||n===NI||n===kI||n===OI||n===UI)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===TI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===EI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===MI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===LI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===RI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===BI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===PI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===GI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===DI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===FI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===NI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===kI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===OI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===UI)return o===hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===N1||n===ZI||n===VI)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===N1)return o===hn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ZI)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===VI)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===F7||n===WI||n===HI||n===zI)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===N1)return s.COMPRESSED_RED_RGTC1_EXT;if(n===WI)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===HI)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===zI)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Qd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const kX=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,OX=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class UX{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const r=new Si,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Ni({vertexShader:kX,fragmentShader:OX,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new jn(new yu(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ZX extends vc{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,h=null,u=null,d=null,f=null,g=null;const p=new UX,m=t.getContextAttributes();let C=null,A=null;const I=[],y=[],x=new Pt;let T=null;const S=new Ai;S.viewport=new nn;const M=new Ai;M.viewport=new nn;const _=[S,M],v=new $V;let B=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let oe=I[J];return oe===void 0&&(oe=new rC,I[J]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(J){let oe=I[J];return oe===void 0&&(oe=new rC,I[J]=oe),oe.getGripSpace()},this.getHand=function(J){let oe=I[J];return oe===void 0&&(oe=new rC,I[J]=oe),oe.getHandSpace()};function L(J){const oe=y.indexOf(J.inputSource);if(oe===-1)return;const fe=I[oe];fe!==void 0&&(fe.update(J.inputSource,J.frame,c||o),fe.dispatchEvent({type:J.type,data:J.inputSource}))}function G(){r.removeEventListener("select",L),r.removeEventListener("selectstart",L),r.removeEventListener("selectend",L),r.removeEventListener("squeeze",L),r.removeEventListener("squeezestart",L),r.removeEventListener("squeezeend",L),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",Z);for(let J=0;J<I.length;J++){const oe=y[J];oe!==null&&(y[J]=null,I[J].disconnect(oe))}B=null,E=null,p.reset(),e.setRenderTarget(C),f=null,d=null,u=null,r=null,A=null,xe.stop(),n.isPresenting=!1,e.setPixelRatio(T),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){s=J,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){a=J,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(J){c=J},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return u},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=async function(J){if(r=J,r!==null){if(C=e.getRenderTarget(),r.addEventListener("select",L),r.addEventListener("selectstart",L),r.addEventListener("selectend",L),r.addEventListener("squeeze",L),r.addEventListener("squeezestart",L),r.addEventListener("squeezeend",L),r.addEventListener("end",G),r.addEventListener("inputsourceschange",Z),m.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(x),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let fe=null,ae=null,Ce=null;m.depth&&(Ce=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=m.stencil?ef:qd,ae=m.stencil?Qd:gc);const Je={colorFormat:t.RGBA8,depthFormat:Ce,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(Je),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),A=new lo(d.textureWidth,d.textureHeight,{format:ar,type:ao,depthTexture:new q7(d.textureWidth,d.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}else{const fe={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,fe),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),A=new lo(f.framebufferWidth,f.framebufferHeight,{format:ar,type:ao,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}A.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),xe.setContext(r),xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};function Z(J){for(let oe=0;oe<J.removed.length;oe++){const fe=J.removed[oe],ae=y.indexOf(fe);ae>=0&&(y[ae]=null,I[ae].disconnect(fe))}for(let oe=0;oe<J.added.length;oe++){const fe=J.added[oe];let ae=y.indexOf(fe);if(ae===-1){for(let Je=0;Je<I.length;Je++)if(Je>=y.length){y.push(fe),ae=Je;break}else if(y[Je]===null){y[Je]=fe,ae=Je;break}if(ae===-1)break}const Ce=I[ae];Ce&&Ce.connect(fe)}}const U=new Y,V=new Y;function z(J,oe,fe){U.setFromMatrixPosition(oe.matrixWorld),V.setFromMatrixPosition(fe.matrixWorld);const ae=U.distanceTo(V),Ce=oe.projectionMatrix.elements,Je=fe.projectionMatrix.elements,Se=Ce[14]/(Ce[10]-1),qe=Ce[14]/(Ce[10]+1),ot=(Ce[9]+1)/Ce[5],$e=(Ce[9]-1)/Ce[5],O=(Ce[8]-1)/Ce[0],$t=(Je[8]+1)/Je[0],St=Se*O,nt=Se*$t,Ie=ae/(-O+$t),fn=Ie*-O;if(oe.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(fn),J.translateZ(Ie),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert(),Ce[10]===-1)J.projectionMatrix.copy(oe.projectionMatrix),J.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const We=Se+Ie,k=qe+Ie,R=St-fn,q=nt+(ae-fn),de=ot*qe/k*We,me=$e*qe/k*We;J.projectionMatrix.makePerspective(R,q,de,me,We,k),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}}function le(J,oe){oe===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(oe.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(r===null)return;let oe=J.near,fe=J.far;p.texture!==null&&(p.depthNear>0&&(oe=p.depthNear),p.depthFar>0&&(fe=p.depthFar)),v.near=M.near=S.near=oe,v.far=M.far=S.far=fe,(B!==v.near||E!==v.far)&&(r.updateRenderState({depthNear:v.near,depthFar:v.far}),B=v.near,E=v.far),S.layers.mask=J.layers.mask|2,M.layers.mask=J.layers.mask|4,v.layers.mask=S.layers.mask|M.layers.mask;const ae=J.parent,Ce=v.cameras;le(v,ae);for(let Je=0;Je<Ce.length;Je++)le(Ce[Je],ae);Ce.length===2?z(v,S,M):v.projectionMatrix.copy(S.projectionMatrix),j(J,v,ae)};function j(J,oe,fe){fe===null?J.matrix.copy(oe.matrixWorld):(J.matrix.copy(fe.matrixWorld),J.matrix.invert(),J.matrix.multiply(oe.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(oe.projectionMatrix),J.projectionMatrixInverse.copy(oe.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=jh*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return v},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(J){l=J,d!==null&&(d.fixedFoveation=J),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=J)},this.hasDepthSensing=function(){return p.texture!==null},this.getDepthSensingMesh=function(){return p.getMesh(v)};let re=null;function Ae(J,oe){if(h=oe.getViewerPose(c||o),g=oe,h!==null){const fe=h.views;f!==null&&(e.setRenderTargetFramebuffer(A,f.framebuffer),e.setRenderTarget(A));let ae=!1;fe.length!==v.cameras.length&&(v.cameras.length=0,ae=!0);for(let Se=0;Se<fe.length;Se++){const qe=fe[Se];let ot=null;if(f!==null)ot=f.getViewport(qe);else{const O=u.getViewSubImage(d,qe);ot=O.viewport,Se===0&&(e.setRenderTargetTextures(A,O.colorTexture,O.depthStencilTexture),e.setRenderTarget(A))}let $e=_[Se];$e===void 0&&($e=new Ai,$e.layers.enable(Se),$e.viewport=new nn,_[Se]=$e),$e.matrix.fromArray(qe.transform.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.projectionMatrix.fromArray(qe.projectionMatrix),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert(),$e.viewport.set(ot.x,ot.y,ot.width,ot.height),Se===0&&(v.matrix.copy($e.matrix),v.matrix.decompose(v.position,v.quaternion,v.scale)),ae===!0&&v.cameras.push($e)}const Ce=r.enabledFeatures;if(Ce&&Ce.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&u){const Se=u.getDepthInformation(fe[0]);Se&&Se.isValid&&Se.texture&&p.init(e,Se,r.renderState)}}for(let fe=0;fe<I.length;fe++){const ae=y[fe],Ce=I[fe];ae!==null&&Ce!==void 0&&Ce.update(ae,oe,c||o)}re&&re(J,oe),oe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:oe}),g=null}const xe=new cS;xe.setAnimationLoop(Ae),this.setAnimationLoop=function(J){re=J},this.dispose=function(){}}}const Cl=new co,VX=new xt;function WX(i,e){function t(m,C){m.matrixAutoUpdate===!0&&m.updateMatrix(),C.value.copy(m.matrix)}function n(m,C){C.color.getRGB(m.fogColor.value,z7(i)),C.isFog?(m.fogNear.value=C.near,m.fogFar.value=C.far):C.isFogExp2&&(m.fogDensity.value=C.density)}function r(m,C,A,I,y){C.isMeshBasicMaterial||C.isMeshLambertMaterial?s(m,C):C.isMeshToonMaterial?(s(m,C),u(m,C)):C.isMeshPhongMaterial?(s(m,C),h(m,C)):C.isMeshStandardMaterial?(s(m,C),d(m,C),C.isMeshPhysicalMaterial&&f(m,C,y)):C.isMeshMatcapMaterial?(s(m,C),g(m,C)):C.isMeshDepthMaterial?s(m,C):C.isMeshDistanceMaterial?(s(m,C),p(m,C)):C.isMeshNormalMaterial?s(m,C):C.isLineBasicMaterial?(o(m,C),C.isLineDashedMaterial&&a(m,C)):C.isPointsMaterial?l(m,C,A,I):C.isSpriteMaterial?c(m,C):C.isShadowMaterial?(m.color.value.copy(C.color),m.opacity.value=C.opacity):C.isShaderMaterial&&(C.uniformsNeedUpdate=!1)}function s(m,C){m.opacity.value=C.opacity,C.color&&m.diffuse.value.copy(C.color),C.emissive&&m.emissive.value.copy(C.emissive).multiplyScalar(C.emissiveIntensity),C.map&&(m.map.value=C.map,t(C.map,m.mapTransform)),C.alphaMap&&(m.alphaMap.value=C.alphaMap,t(C.alphaMap,m.alphaMapTransform)),C.bumpMap&&(m.bumpMap.value=C.bumpMap,t(C.bumpMap,m.bumpMapTransform),m.bumpScale.value=C.bumpScale,C.side===Oi&&(m.bumpScale.value*=-1)),C.normalMap&&(m.normalMap.value=C.normalMap,t(C.normalMap,m.normalMapTransform),m.normalScale.value.copy(C.normalScale),C.side===Oi&&m.normalScale.value.negate()),C.displacementMap&&(m.displacementMap.value=C.displacementMap,t(C.displacementMap,m.displacementMapTransform),m.displacementScale.value=C.displacementScale,m.displacementBias.value=C.displacementBias),C.emissiveMap&&(m.emissiveMap.value=C.emissiveMap,t(C.emissiveMap,m.emissiveMapTransform)),C.specularMap&&(m.specularMap.value=C.specularMap,t(C.specularMap,m.specularMapTransform)),C.alphaTest>0&&(m.alphaTest.value=C.alphaTest);const A=e.get(C),I=A.envMap,y=A.envMapRotation;I&&(m.envMap.value=I,Cl.copy(y),Cl.x*=-1,Cl.y*=-1,Cl.z*=-1,I.isCubeTexture&&I.isRenderTargetTexture===!1&&(Cl.y*=-1,Cl.z*=-1),m.envMapRotation.value.setFromMatrix4(VX.makeRotationFromEuler(Cl)),m.flipEnvMap.value=I.isCubeTexture&&I.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=C.reflectivity,m.ior.value=C.ior,m.refractionRatio.value=C.refractionRatio),C.lightMap&&(m.lightMap.value=C.lightMap,m.lightMapIntensity.value=C.lightMapIntensity,t(C.lightMap,m.lightMapTransform)),C.aoMap&&(m.aoMap.value=C.aoMap,m.aoMapIntensity.value=C.aoMapIntensity,t(C.aoMap,m.aoMapTransform))}function o(m,C){m.diffuse.value.copy(C.color),m.opacity.value=C.opacity,C.map&&(m.map.value=C.map,t(C.map,m.mapTransform))}function a(m,C){m.dashSize.value=C.dashSize,m.totalSize.value=C.dashSize+C.gapSize,m.scale.value=C.scale}function l(m,C,A,I){m.diffuse.value.copy(C.color),m.opacity.value=C.opacity,m.size.value=C.size*A,m.scale.value=I*.5,C.map&&(m.map.value=C.map,t(C.map,m.uvTransform)),C.alphaMap&&(m.alphaMap.value=C.alphaMap,t(C.alphaMap,m.alphaMapTransform)),C.alphaTest>0&&(m.alphaTest.value=C.alphaTest)}function c(m,C){m.diffuse.value.copy(C.color),m.opacity.value=C.opacity,m.rotation.value=C.rotation,C.map&&(m.map.value=C.map,t(C.map,m.mapTransform)),C.alphaMap&&(m.alphaMap.value=C.alphaMap,t(C.alphaMap,m.alphaMapTransform)),C.alphaTest>0&&(m.alphaTest.value=C.alphaTest)}function h(m,C){m.specular.value.copy(C.specular),m.shininess.value=Math.max(C.shininess,1e-4)}function u(m,C){C.gradientMap&&(m.gradientMap.value=C.gradientMap)}function d(m,C){m.metalness.value=C.metalness,C.metalnessMap&&(m.metalnessMap.value=C.metalnessMap,t(C.metalnessMap,m.metalnessMapTransform)),m.roughness.value=C.roughness,C.roughnessMap&&(m.roughnessMap.value=C.roughnessMap,t(C.roughnessMap,m.roughnessMapTransform)),C.envMap&&(m.envMapIntensity.value=C.envMapIntensity)}function f(m,C,A){m.ior.value=C.ior,C.sheen>0&&(m.sheenColor.value.copy(C.sheenColor).multiplyScalar(C.sheen),m.sheenRoughness.value=C.sheenRoughness,C.sheenColorMap&&(m.sheenColorMap.value=C.sheenColorMap,t(C.sheenColorMap,m.sheenColorMapTransform)),C.sheenRoughnessMap&&(m.sheenRoughnessMap.value=C.sheenRoughnessMap,t(C.sheenRoughnessMap,m.sheenRoughnessMapTransform))),C.clearcoat>0&&(m.clearcoat.value=C.clearcoat,m.clearcoatRoughness.value=C.clearcoatRoughness,C.clearcoatMap&&(m.clearcoatMap.value=C.clearcoatMap,t(C.clearcoatMap,m.clearcoatMapTransform)),C.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=C.clearcoatRoughnessMap,t(C.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),C.clearcoatNormalMap&&(m.clearcoatNormalMap.value=C.clearcoatNormalMap,t(C.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(C.clearcoatNormalScale),C.side===Oi&&m.clearcoatNormalScale.value.negate())),C.dispersion>0&&(m.dispersion.value=C.dispersion),C.iridescence>0&&(m.iridescence.value=C.iridescence,m.iridescenceIOR.value=C.iridescenceIOR,m.iridescenceThicknessMinimum.value=C.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=C.iridescenceThicknessRange[1],C.iridescenceMap&&(m.iridescenceMap.value=C.iridescenceMap,t(C.iridescenceMap,m.iridescenceMapTransform)),C.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=C.iridescenceThicknessMap,t(C.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),C.transmission>0&&(m.transmission.value=C.transmission,m.transmissionSamplerMap.value=A.texture,m.transmissionSamplerSize.value.set(A.width,A.height),C.transmissionMap&&(m.transmissionMap.value=C.transmissionMap,t(C.transmissionMap,m.transmissionMapTransform)),m.thickness.value=C.thickness,C.thicknessMap&&(m.thicknessMap.value=C.thicknessMap,t(C.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=C.attenuationDistance,m.attenuationColor.value.copy(C.attenuationColor)),C.anisotropy>0&&(m.anisotropyVector.value.set(C.anisotropy*Math.cos(C.anisotropyRotation),C.anisotropy*Math.sin(C.anisotropyRotation)),C.anisotropyMap&&(m.anisotropyMap.value=C.anisotropyMap,t(C.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=C.specularIntensity,m.specularColor.value.copy(C.specularColor),C.specularColorMap&&(m.specularColorMap.value=C.specularColorMap,t(C.specularColorMap,m.specularColorMapTransform)),C.specularIntensityMap&&(m.specularIntensityMap.value=C.specularIntensityMap,t(C.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,C){C.matcap&&(m.matcap.value=C.matcap)}function p(m,C){const A=e.get(C).light;m.referencePosition.value.setFromMatrixPosition(A.matrixWorld),m.nearDistance.value=A.shadow.camera.near,m.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function HX(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,I){const y=I.program;n.uniformBlockBinding(A,y)}function c(A,I){let y=r[A.id];y===void 0&&(g(A),y=h(A),r[A.id]=y,A.addEventListener("dispose",m));const x=I.program;n.updateUBOMapping(A,x);const T=e.render.frame;s[A.id]!==T&&(d(A),s[A.id]=T)}function h(A){const I=u();A.__bindingPointIndex=I;const y=i.createBuffer(),x=A.__size,T=A.usage;return i.bindBuffer(i.UNIFORM_BUFFER,y),i.bufferData(i.UNIFORM_BUFFER,x,T),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,I,y),y}function u(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(A){const I=r[A.id],y=A.uniforms,x=A.__cache;i.bindBuffer(i.UNIFORM_BUFFER,I);for(let T=0,S=y.length;T<S;T++){const M=Array.isArray(y[T])?y[T]:[y[T]];for(let _=0,v=M.length;_<v;_++){const B=M[_];if(f(B,T,_,x)===!0){const E=B.__offset,L=Array.isArray(B.value)?B.value:[B.value];let G=0;for(let Z=0;Z<L.length;Z++){const U=L[Z],V=p(U);typeof U=="number"||typeof U=="boolean"?(B.__data[0]=U,i.bufferSubData(i.UNIFORM_BUFFER,E+G,B.__data)):U.isMatrix3?(B.__data[0]=U.elements[0],B.__data[1]=U.elements[1],B.__data[2]=U.elements[2],B.__data[3]=0,B.__data[4]=U.elements[3],B.__data[5]=U.elements[4],B.__data[6]=U.elements[5],B.__data[7]=0,B.__data[8]=U.elements[6],B.__data[9]=U.elements[7],B.__data[10]=U.elements[8],B.__data[11]=0):(U.toArray(B.__data,G),G+=V.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,E,B.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function f(A,I,y,x){const T=A.value,S=I+"_"+y;if(x[S]===void 0)return typeof T=="number"||typeof T=="boolean"?x[S]=T:x[S]=T.clone(),!0;{const M=x[S];if(typeof T=="number"||typeof T=="boolean"){if(M!==T)return x[S]=T,!0}else if(M.equals(T)===!1)return M.copy(T),!0}return!1}function g(A){const I=A.uniforms;let y=0;const x=16;for(let S=0,M=I.length;S<M;S++){const _=Array.isArray(I[S])?I[S]:[I[S]];for(let v=0,B=_.length;v<B;v++){const E=_[v],L=Array.isArray(E.value)?E.value:[E.value];for(let G=0,Z=L.length;G<Z;G++){const U=L[G],V=p(U),z=y%x,le=z%V.boundary,j=z+le;y+=le,j!==0&&x-j<V.storage&&(y+=x-j),E.__data=new Float32Array(V.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=y,y+=V.storage}}}const T=y%x;return T>0&&(y+=x-T),A.__size=y,A.__cache={},this}function p(A){const I={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(I.boundary=4,I.storage=4):A.isVector2?(I.boundary=8,I.storage=8):A.isVector3||A.isColor?(I.boundary=16,I.storage=12):A.isVector4?(I.boundary=16,I.storage=16):A.isMatrix3?(I.boundary=48,I.storage=48):A.isMatrix4?(I.boundary=64,I.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),I}function m(A){const I=A.target;I.removeEventListener("dispose",m);const y=o.indexOf(I.__bindingPointIndex);o.splice(y,1),i.deleteBuffer(r[I.id]),delete r[I.id],delete s[I.id]}function C(){for(const A in r)i.deleteBuffer(r[A]);o=[],r={},s={}}return{bind:l,update:c,dispose:C}}class b3{constructor(e={}){const{canvas:t=YZ(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let f;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=n.getContextAttributes().alpha}else f=o;const g=new Uint32Array(4),p=new Int32Array(4);let m=null,C=null;const A=[],I=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Wa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let x=!1;this._outputColorSpace=bi;let T=0,S=0,M=null,_=-1,v=null;const B=new nn,E=new nn;let L=null;const G=new _t(0);let Z=0,U=t.width,V=t.height,z=1,le=null,j=null;const re=new nn(0,0,U,V),Ae=new nn(0,0,U,V);let xe=!1;const J=new C3;let oe=!1,fe=!1;const ae=new xt,Ce=new xt,Je=new Y,Se=new nn,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ot=!1;function $e(){return M===null?z:1}let O=n;function $t(P,X){return t.getContext(P,X)}try{const P={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${t3}`),t.addEventListener("webglcontextlost",ge,!1),t.addEventListener("webglcontextrestored",Le,!1),t.addEventListener("webglcontextcreationerror",De,!1),O===null){const X="webgl2";if(O=$t(X,P),O===null)throw $t(X)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}let St,nt,Ie,fn,We,k,R,q,de,me,se,Ye,Te,et,ft,ye,Oe,at,lt,He,Gt,Tt,cn,H;function Fe(){St=new tY(O),St.init(),Tt=new NX(O,St),nt=new Kz(O,St,e,Tt),Ie=new DX(O,St),nt.reverseDepthBuffer&&d&&Ie.buffers.depth.setReversed(!0),fn=new rY(O),We=new vX,k=new FX(O,St,Ie,We,nt,Tt,fn),R=new $z(y),q=new eY(y),de=new hW(O),cn=new Yz(O,de),me=new nY(O,de,fn,cn),se=new oY(O,me,de,fn),lt=new sY(O,nt,k),ye=new jz(We),Ye=new _X(y,R,q,St,nt,cn,ye),Te=new WX(y,We),et=new xX,ft=new LX(St),at=new zz(y,R,q,Ie,se,f,l),Oe=new PX(y,se,nt),H=new HX(O,fn,nt,Ie),He=new Xz(O,St,fn),Gt=new iY(O,St,fn),fn.programs=Ye.programs,y.capabilities=nt,y.extensions=St,y.properties=We,y.renderLists=et,y.shadowMap=Oe,y.state=Ie,y.info=fn}Fe();const ie=new ZX(y,O);this.xr=ie,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){const P=St.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=St.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(P){P!==void 0&&(z=P,this.setSize(U,V,!1))},this.getSize=function(P){return P.set(U,V)},this.setSize=function(P,X,ee=!0){if(ie.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=P,V=X,t.width=Math.floor(P*z),t.height=Math.floor(X*z),ee===!0&&(t.style.width=P+"px",t.style.height=X+"px"),this.setViewport(0,0,P,X)},this.getDrawingBufferSize=function(P){return P.set(U*z,V*z).floor()},this.setDrawingBufferSize=function(P,X,ee){U=P,V=X,z=ee,t.width=Math.floor(P*ee),t.height=Math.floor(X*ee),this.setViewport(0,0,P,X)},this.getCurrentViewport=function(P){return P.copy(B)},this.getViewport=function(P){return P.copy(re)},this.setViewport=function(P,X,ee,te){P.isVector4?re.set(P.x,P.y,P.z,P.w):re.set(P,X,ee,te),Ie.viewport(B.copy(re).multiplyScalar(z).round())},this.getScissor=function(P){return P.copy(Ae)},this.setScissor=function(P,X,ee,te){P.isVector4?Ae.set(P.x,P.y,P.z,P.w):Ae.set(P,X,ee,te),Ie.scissor(E.copy(Ae).multiplyScalar(z).round())},this.getScissorTest=function(){return xe},this.setScissorTest=function(P){Ie.setScissorTest(xe=P)},this.setOpaqueSort=function(P){le=P},this.setTransparentSort=function(P){j=P},this.getClearColor=function(P){return P.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor(...arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha(...arguments)},this.clear=function(P=!0,X=!0,ee=!0){let te=0;if(P){let K=!1;if(M!==null){const _e=M.texture.format;K=_e===l3||_e===a3||_e===o3}if(K){const _e=M.texture.type,Me=_e===ao||_e===gc||_e===Jd||_e===Qd||_e===i3||_e===r3,Ue=at.getClearColor(),ze=at.getClearAlpha(),pt=Ue.r,ut=Ue.g,tt=Ue.b;Me?(g[0]=pt,g[1]=ut,g[2]=tt,g[3]=ze,O.clearBufferuiv(O.COLOR,0,g)):(p[0]=pt,p[1]=ut,p[2]=tt,p[3]=ze,O.clearBufferiv(O.COLOR,0,p))}else te|=O.COLOR_BUFFER_BIT}X&&(te|=O.DEPTH_BUFFER_BIT),ee&&(te|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ge,!1),t.removeEventListener("webglcontextrestored",Le,!1),t.removeEventListener("webglcontextcreationerror",De,!1),at.dispose(),et.dispose(),ft.dispose(),We.dispose(),R.dispose(),q.dispose(),se.dispose(),cn.dispose(),H.dispose(),Ye.dispose(),ie.dispose(),ie.removeEventListener("sessionstart",rl),ie.removeEventListener("sessionend",Sc),Ao.stop()};function ge(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const P=fn.autoReset,X=Oe.enabled,ee=Oe.autoUpdate,te=Oe.needsUpdate,K=Oe.type;Fe(),fn.autoReset=P,Oe.enabled=X,Oe.autoUpdate=ee,Oe.needsUpdate=te,Oe.type=K}function De(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function it(P){const X=P.target;X.removeEventListener("dispose",it),bn(X)}function bn(P){ai(P),We.remove(P)}function ai(P){const X=We.get(P).programs;X!==void 0&&(X.forEach(function(ee){Ye.releaseProgram(ee)}),P.isShaderMaterial&&Ye.releaseShaderCache(P))}this.renderBufferDirect=function(P,X,ee,te,K,_e){X===null&&(X=qe);const Me=K.isMesh&&K.matrixWorld.determinant()<0,Ue=nm(P,X,ee,te,K);Ie.setMaterial(te,Me);let ze=ee.index,pt=1;if(te.wireframe===!0){if(ze=me.getWireframeAttribute(ee),ze===void 0)return;pt=2}const ut=ee.drawRange,tt=ee.attributes.position;let Ft=ut.start*pt,Jt=(ut.start+ut.count)*pt;_e!==null&&(Ft=Math.max(Ft,_e.start*pt),Jt=Math.min(Jt,(_e.start+_e.count)*pt)),ze!==null?(Ft=Math.max(Ft,0),Jt=Math.min(Jt,ze.count)):tt!=null&&(Ft=Math.max(Ft,0),Jt=Math.min(Jt,tt.count));const Gn=Jt-Ft;if(Gn<0||Gn===1/0)return;cn.setup(K,te,Ue,ee,ze);let An,Nt=He;if(ze!==null&&(An=de.get(ze),Nt=Gt,Nt.setIndex(An)),K.isMesh)te.wireframe===!0?(Ie.setLineWidth(te.wireframeLinewidth*$e()),Nt.setMode(O.LINES)):Nt.setMode(O.TRIANGLES);else if(K.isLine){let rt=te.linewidth;rt===void 0&&(rt=1),Ie.setLineWidth(rt*$e()),K.isLineSegments?Nt.setMode(O.LINES):K.isLineLoop?Nt.setMode(O.LINE_LOOP):Nt.setMode(O.LINE_STRIP)}else K.isPoints?Nt.setMode(O.POINTS):K.isSprite&&Nt.setMode(O.TRIANGLES);if(K.isBatchedMesh)if(K._multiDrawInstances!==null)k1("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Nt.renderMultiDrawInstances(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount,K._multiDrawInstances);else if(St.get("WEBGL_multi_draw"))Nt.renderMultiDraw(K._multiDrawStarts,K._multiDrawCounts,K._multiDrawCount);else{const rt=K._multiDrawStarts,Wn=K._multiDrawCounts,Qt=K._multiDrawCount,mr=ze?de.get(ze).bytesPerElement:1,yo=We.get(te).currentProgram.getUniforms();for(let li=0;li<Qt;li++)yo.setValue(O,"_gl_DrawID",li),Nt.render(rt[li]/mr,Wn[li])}else if(K.isInstancedMesh)Nt.renderInstances(Ft,Gn,K.count);else if(ee.isInstancedBufferGeometry){const rt=ee._maxInstanceCount!==void 0?ee._maxInstanceCount:1/0,Wn=Math.min(ee.instanceCount,rt);Nt.renderInstances(Ft,Gn,Wn)}else Nt.render(Ft,Gn)};function It(P,X,ee){P.transparent===!0&&P.side===Hs&&P.forceSinglePass===!1?(P.side=Oi,P.needsUpdate=!0,ia(P,X,ee),P.side=oo,P.needsUpdate=!0,ia(P,X,ee),P.side=Hs):ia(P,X,ee)}this.compile=function(P,X,ee=null){ee===null&&(ee=P),C=ft.get(ee),C.init(X),I.push(C),ee.traverseVisible(function(K){K.isLight&&K.layers.test(X.layers)&&(C.pushLight(K),K.castShadow&&C.pushShadow(K))}),P!==ee&&P.traverseVisible(function(K){K.isLight&&K.layers.test(X.layers)&&(C.pushLight(K),K.castShadow&&C.pushShadow(K))}),C.setupLights();const te=new Set;return P.traverse(function(K){if(!(K.isMesh||K.isPoints||K.isLine||K.isSprite))return;const _e=K.material;if(_e)if(Array.isArray(_e))for(let Me=0;Me<_e.length;Me++){const Ue=_e[Me];It(Ue,ee,K),te.add(Ue)}else It(_e,ee,K),te.add(_e)}),C=I.pop(),te},this.compileAsync=function(P,X,ee=null){const te=this.compile(P,X,ee);return new Promise(K=>{function _e(){if(te.forEach(function(Me){We.get(Me).currentProgram.isReady()&&te.delete(Me)}),te.size===0){K(P);return}setTimeout(_e,10)}St.get("KHR_parallel_shader_compile")!==null?_e():setTimeout(_e,10)})};let nr=null;function Dr(P){nr&&nr(P)}function rl(){Ao.stop()}function Sc(){Ao.start()}const Ao=new cS;Ao.setAnimationLoop(Dr),typeof self<"u"&&Ao.setContext(self),this.setAnimationLoop=function(P){nr=P,ie.setAnimationLoop(P),P===null?Ao.stop():Ao.start()},ie.addEventListener("sessionstart",rl),ie.addEventListener("sessionend",Sc),this.render=function(P,X){if(X!==void 0&&X.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(P.matrixWorldAutoUpdate===!0&&P.updateMatrixWorld(),X.parent===null&&X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),ie.enabled===!0&&ie.isPresenting===!0&&(ie.cameraAutoUpdate===!0&&ie.updateCamera(X),X=ie.getCamera()),P.isScene===!0&&P.onBeforeRender(y,P,X,M),C=ft.get(P,I.length),C.init(X),I.push(C),Ce.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),J.setFromProjectionMatrix(Ce),fe=this.localClippingEnabled,oe=ye.init(this.clippingPlanes,fe),m=et.get(P,A.length),m.init(),A.push(m),ie.enabled===!0&&ie.isPresenting===!0){const _e=y.xr.getDepthSensingMesh();_e!==null&&sl(_e,X,-1/0,y.sortObjects)}sl(P,X,0,y.sortObjects),m.finish(),y.sortObjects===!0&&m.sort(le,j),ot=ie.enabled===!1||ie.isPresenting===!1||ie.hasDepthSensing()===!1,ot&&at.addToRenderList(m,P),this.info.render.frame++,oe===!0&&ye.beginShadows();const ee=C.state.shadowsArray;Oe.render(ee,P,X),oe===!0&&ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const te=m.opaque,K=m.transmissive;if(C.setupLights(),X.isArrayCamera){const _e=X.cameras;if(K.length>0)for(let Me=0,Ue=_e.length;Me<Ue;Me++){const ze=_e[Me];Tc(te,K,P,ze)}ot&&at.render(P);for(let Me=0,Ue=_e.length;Me<Ue;Me++){const ze=_e[Me];Mu(m,P,ze,ze.viewport)}}else K.length>0&&Tc(te,K,P,X),ot&&at.render(P),Mu(m,P,X);M!==null&&S===0&&(k.updateMultisampleRenderTarget(M),k.updateRenderTargetMipmap(M)),P.isScene===!0&&P.onAfterRender(y,P,X),cn.resetDefaultState(),_=-1,v=null,I.pop(),I.length>0?(C=I[I.length-1],oe===!0&&ye.setGlobalState(y.clippingPlanes,C.state.camera)):C=null,A.pop(),A.length>0?m=A[A.length-1]:m=null};function sl(P,X,ee,te){if(P.visible===!1)return;if(P.layers.test(X.layers)){if(P.isGroup)ee=P.renderOrder;else if(P.isLOD)P.autoUpdate===!0&&P.update(X);else if(P.isLight)C.pushLight(P),P.castShadow&&C.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||J.intersectsSprite(P)){te&&Se.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Ce);const Me=se.update(P),Ue=P.material;Ue.visible&&m.push(P,Me,Ue,ee,Se.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||J.intersectsObject(P))){const Me=se.update(P),Ue=P.material;if(te&&(P.boundingSphere!==void 0?(P.boundingSphere===null&&P.computeBoundingSphere(),Se.copy(P.boundingSphere.center)):(Me.boundingSphere===null&&Me.computeBoundingSphere(),Se.copy(Me.boundingSphere.center)),Se.applyMatrix4(P.matrixWorld).applyMatrix4(Ce)),Array.isArray(Ue)){const ze=Me.groups;for(let pt=0,ut=ze.length;pt<ut;pt++){const tt=ze[pt],Ft=Ue[tt.materialIndex];Ft&&Ft.visible&&m.push(P,Me,Ft,ee,Se.z,tt)}}else Ue.visible&&m.push(P,Me,Ue,ee,Se.z,null)}}const _e=P.children;for(let Me=0,Ue=_e.length;Me<Ue;Me++)sl(_e[Me],X,ee,te)}function Mu(P,X,ee,te){const K=P.opaque,_e=P.transmissive,Me=P.transparent;C.setupLightsView(ee),oe===!0&&ye.setGlobalState(y.clippingPlanes,ee),te&&Ie.viewport(B.copy(te)),K.length>0&&ir(K,X,ee),_e.length>0&&ir(_e,X,ee),Me.length>0&&ir(Me,X,ee),Ie.buffers.depth.setTest(!0),Ie.buffers.depth.setMask(!0),Ie.buffers.color.setMask(!0),Ie.setPolygonOffset(!1)}function Tc(P,X,ee,te){if((ee.isScene===!0?ee.overrideMaterial:null)!==null)return;C.state.transmissionRenderTarget[te.id]===void 0&&(C.state.transmissionRenderTarget[te.id]=new lo(1,1,{generateMipmaps:!0,type:St.has("EXT_color_buffer_half_float")||St.has("EXT_color_buffer_float")?Ff:ao,minFilter:Oo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:zt.workingColorSpace}));const _e=C.state.transmissionRenderTarget[te.id],Me=te.viewport||B;_e.setSize(Me.z*y.transmissionResolutionScale,Me.w*y.transmissionResolutionScale);const Ue=y.getRenderTarget();y.setRenderTarget(_e),y.getClearColor(G),Z=y.getClearAlpha(),Z<1&&y.setClearColor(16777215,.5),y.clear(),ot&&at.render(ee);const ze=y.toneMapping;y.toneMapping=Wa;const pt=te.viewport;if(te.viewport!==void 0&&(te.viewport=void 0),C.setupLightsView(te),oe===!0&&ye.setGlobalState(y.clippingPlanes,te),ir(P,ee,te),k.updateMultisampleRenderTarget(_e),k.updateRenderTargetMipmap(_e),St.has("WEBGL_multisampled_render_to_texture")===!1){let ut=!1;for(let tt=0,Ft=X.length;tt<Ft;tt++){const Jt=X[tt],Gn=Jt.object,An=Jt.geometry,Nt=Jt.material,rt=Jt.group;if(Nt.side===Hs&&Gn.layers.test(te.layers)){const Wn=Nt.side;Nt.side=Oi,Nt.needsUpdate=!0,Ec(Gn,ee,te,An,Nt,rt),Nt.side=Wn,Nt.needsUpdate=!0,ut=!0}}ut===!0&&(k.updateMultisampleRenderTarget(_e),k.updateRenderTargetMipmap(_e))}y.setRenderTarget(Ue),y.setClearColor(G,Z),pt!==void 0&&(te.viewport=pt),y.toneMapping=ze}function ir(P,X,ee){const te=X.isScene===!0?X.overrideMaterial:null;for(let K=0,_e=P.length;K<_e;K++){const Me=P[K],Ue=Me.object,ze=Me.geometry,pt=Me.group;let ut=Me.material;ut.allowOverride===!0&&te!==null&&(ut=te),Ue.layers.test(ee.layers)&&Ec(Ue,X,ee,ze,ut,pt)}}function Ec(P,X,ee,te,K,_e){P.onBeforeRender(y,X,ee,te,K,_e),P.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),K.onBeforeRender(y,X,ee,te,P,_e),K.transparent===!0&&K.side===Hs&&K.forceSinglePass===!1?(K.side=Oi,K.needsUpdate=!0,y.renderBufferDirect(ee,X,te,K,P,_e),K.side=oo,K.needsUpdate=!0,y.renderBufferDirect(ee,X,te,K,P,_e),K.side=Hs):y.renderBufferDirect(ee,X,te,K,P,_e),P.onAfterRender(y,X,ee,te,K,_e)}function ia(P,X,ee){X.isScene!==!0&&(X=qe);const te=We.get(P),K=C.state.lights,_e=C.state.shadowsArray,Me=K.state.version,Ue=Ye.getParameters(P,K.state,_e,X,ee),ze=Ye.getProgramCacheKey(Ue);let pt=te.programs;te.environment=P.isMeshStandardMaterial?X.environment:null,te.fog=X.fog,te.envMap=(P.isMeshStandardMaterial?q:R).get(P.envMap||te.environment),te.envMapRotation=te.environment!==null&&P.envMap===null?X.environmentRotation:P.envMapRotation,pt===void 0&&(P.addEventListener("dispose",it),pt=new Map,te.programs=pt);let ut=pt.get(ze);if(ut!==void 0){if(te.currentProgram===ut&&te.lightsStateVersion===Me)return Lu(P,Ue),ut}else Ue.uniforms=Ye.getUniforms(P),P.onBeforeCompile(Ue,y),ut=Ye.acquireProgram(Ue,ze),pt.set(ze,ut),te.uniforms=Ue.uniforms;const tt=te.uniforms;return(!P.isShaderMaterial&&!P.isRawShaderMaterial||P.clipping===!0)&&(tt.clippingPlanes=ye.uniform),Lu(P,Ue),te.needsLights=Bu(P),te.lightsStateVersion=Me,te.needsLights&&(tt.ambientLightColor.value=K.state.ambient,tt.lightProbe.value=K.state.probe,tt.directionalLights.value=K.state.directional,tt.directionalLightShadows.value=K.state.directionalShadow,tt.spotLights.value=K.state.spot,tt.spotLightShadows.value=K.state.spotShadow,tt.rectAreaLights.value=K.state.rectArea,tt.ltc_1.value=K.state.rectAreaLTC1,tt.ltc_2.value=K.state.rectAreaLTC2,tt.pointLights.value=K.state.point,tt.pointLightShadows.value=K.state.pointShadow,tt.hemisphereLights.value=K.state.hemi,tt.directionalShadowMap.value=K.state.directionalShadowMap,tt.directionalShadowMatrix.value=K.state.directionalShadowMatrix,tt.spotShadowMap.value=K.state.spotShadowMap,tt.spotLightMatrix.value=K.state.spotLightMatrix,tt.spotLightMap.value=K.state.spotLightMap,tt.pointShadowMap.value=K.state.pointShadowMap,tt.pointShadowMatrix.value=K.state.pointShadowMatrix),te.currentProgram=ut,te.uniformsList=null,ut}function ol(P){if(P.uniformsList===null){const X=P.currentProgram.getUniforms();P.uniformsList=U1.seqWithValue(X.seq,P.uniforms)}return P.uniformsList}function Lu(P,X){const ee=We.get(P);ee.outputColorSpace=X.outputColorSpace,ee.batching=X.batching,ee.batchingColor=X.batchingColor,ee.instancing=X.instancing,ee.instancingColor=X.instancingColor,ee.instancingMorph=X.instancingMorph,ee.skinning=X.skinning,ee.morphTargets=X.morphTargets,ee.morphNormals=X.morphNormals,ee.morphColors=X.morphColors,ee.morphTargetsCount=X.morphTargetsCount,ee.numClippingPlanes=X.numClippingPlanes,ee.numIntersection=X.numClipIntersection,ee.vertexAlphas=X.vertexAlphas,ee.vertexTangents=X.vertexTangents,ee.toneMapping=X.toneMapping}function nm(P,X,ee,te,K){X.isScene!==!0&&(X=qe),k.resetTextureUnits();const _e=X.fog,Me=te.isMeshStandardMaterial?X.environment:null,Ue=M===null?y.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:er,ze=(te.isMeshStandardMaterial?q:R).get(te.envMap||Me),pt=te.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,ut=!!ee.attributes.tangent&&(!!te.normalMap||te.anisotropy>0),tt=!!ee.morphAttributes.position,Ft=!!ee.morphAttributes.normal,Jt=!!ee.morphAttributes.color;let Gn=Wa;te.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Gn=y.toneMapping);const An=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Nt=An!==void 0?An.length:0,rt=We.get(te),Wn=C.state.lights;if(oe===!0&&(fe===!0||P!==v)){const yn=P===v&&te.id===_;ye.setState(te,P,yn)}let Qt=!1;te.version===rt.__version?(rt.needsLights&&rt.lightsStateVersion!==Wn.state.version||rt.outputColorSpace!==Ue||K.isBatchedMesh&&rt.batching===!1||!K.isBatchedMesh&&rt.batching===!0||K.isBatchedMesh&&rt.batchingColor===!0&&K.colorTexture===null||K.isBatchedMesh&&rt.batchingColor===!1&&K.colorTexture!==null||K.isInstancedMesh&&rt.instancing===!1||!K.isInstancedMesh&&rt.instancing===!0||K.isSkinnedMesh&&rt.skinning===!1||!K.isSkinnedMesh&&rt.skinning===!0||K.isInstancedMesh&&rt.instancingColor===!0&&K.instanceColor===null||K.isInstancedMesh&&rt.instancingColor===!1&&K.instanceColor!==null||K.isInstancedMesh&&rt.instancingMorph===!0&&K.morphTexture===null||K.isInstancedMesh&&rt.instancingMorph===!1&&K.morphTexture!==null||rt.envMap!==ze||te.fog===!0&&rt.fog!==_e||rt.numClippingPlanes!==void 0&&(rt.numClippingPlanes!==ye.numPlanes||rt.numIntersection!==ye.numIntersection)||rt.vertexAlphas!==pt||rt.vertexTangents!==ut||rt.morphTargets!==tt||rt.morphNormals!==Ft||rt.morphColors!==Jt||rt.toneMapping!==Gn||rt.morphTargetsCount!==Nt)&&(Qt=!0):(Qt=!0,rt.__version=te.version);let mr=rt.currentProgram;Qt===!0&&(mr=ia(te,X,K));let yo=!1,li=!1,al=!1;const Ct=mr.getUniforms(),Ti=rt.uniforms;if(Ie.useProgram(mr.program)&&(yo=!0,li=!0,al=!0),te.id!==_&&(_=te.id,li=!0),yo||v!==P){Ie.buffers.depth.getReversed()?(ae.copy(P.projectionMatrix),KZ(ae),jZ(ae),Ct.setValue(O,"projectionMatrix",ae)):Ct.setValue(O,"projectionMatrix",P.projectionMatrix),Ct.setValue(O,"viewMatrix",P.matrixWorldInverse);const In=Ct.map.cameraPosition;In!==void 0&&In.setValue(O,Je.setFromMatrixPosition(P.matrixWorld)),nt.logarithmicDepthBuffer&&Ct.setValue(O,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),(te.isMeshPhongMaterial||te.isMeshToonMaterial||te.isMeshLambertMaterial||te.isMeshBasicMaterial||te.isMeshStandardMaterial||te.isShaderMaterial)&&Ct.setValue(O,"isOrthographic",P.isOrthographicCamera===!0),v!==P&&(v=P,li=!0,al=!0)}if(K.isSkinnedMesh){Ct.setOptional(O,K,"bindMatrix"),Ct.setOptional(O,K,"bindMatrixInverse");const yn=K.skeleton;yn&&(yn.boneTexture===null&&yn.computeBoneTexture(),Ct.setValue(O,"boneTexture",yn.boneTexture,k))}K.isBatchedMesh&&(Ct.setOptional(O,K,"batchingTexture"),Ct.setValue(O,"batchingTexture",K._matricesTexture,k),Ct.setOptional(O,K,"batchingIdTexture"),Ct.setValue(O,"batchingIdTexture",K._indirectTexture,k),Ct.setOptional(O,K,"batchingColorTexture"),K._colorsTexture!==null&&Ct.setValue(O,"batchingColorTexture",K._colorsTexture,k));const Wi=ee.morphAttributes;if((Wi.position!==void 0||Wi.normal!==void 0||Wi.color!==void 0)&&lt.update(K,ee,mr),(li||rt.receiveShadow!==K.receiveShadow)&&(rt.receiveShadow=K.receiveShadow,Ct.setValue(O,"receiveShadow",K.receiveShadow)),te.isMeshGouraudMaterial&&te.envMap!==null&&(Ti.envMap.value=ze,Ti.flipEnvMap.value=ze.isCubeTexture&&ze.isRenderTargetTexture===!1?-1:1),te.isMeshStandardMaterial&&te.envMap===null&&X.environment!==null&&(Ti.envMapIntensity.value=X.environmentIntensity),li&&(Ct.setValue(O,"toneMappingExposure",y.toneMappingExposure),rt.needsLights&&Ru(Ti,al),_e&&te.fog===!0&&Te.refreshFogUniforms(Ti,_e),Te.refreshMaterialUniforms(Ti,te,z,V,C.state.transmissionRenderTarget[P.id]),U1.upload(O,ol(rt),Ti,k)),te.isShaderMaterial&&te.uniformsNeedUpdate===!0&&(U1.upload(O,ol(rt),Ti,k),te.uniformsNeedUpdate=!1),te.isSpriteMaterial&&Ct.setValue(O,"center",K.center),Ct.setValue(O,"modelViewMatrix",K.modelViewMatrix),Ct.setValue(O,"normalMatrix",K.normalMatrix),Ct.setValue(O,"modelMatrix",K.matrixWorld),te.isShaderMaterial||te.isRawShaderMaterial){const yn=te.uniformsGroups;for(let In=0,Hi=yn.length;In<Hi;In++){const qn=yn[In];H.update(qn,mr),H.bind(qn,mr)}}return mr}function Ru(P,X){P.ambientLightColor.needsUpdate=X,P.lightProbe.needsUpdate=X,P.directionalLights.needsUpdate=X,P.directionalLightShadows.needsUpdate=X,P.pointLights.needsUpdate=X,P.pointLightShadows.needsUpdate=X,P.spotLights.needsUpdate=X,P.spotLightShadows.needsUpdate=X,P.rectAreaLights.needsUpdate=X,P.hemisphereLights.needsUpdate=X}function Bu(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&P.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(P,X,ee){const te=We.get(P);te.__autoAllocateDepthBuffer=P.resolveDepthBuffer===!1,te.__autoAllocateDepthBuffer===!1&&(te.__useRenderToTexture=!1),We.get(P.texture).__webglTexture=X,We.get(P.depthTexture).__webglTexture=te.__autoAllocateDepthBuffer?void 0:ee,te.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(P,X){const ee=We.get(P);ee.__webglFramebuffer=X,ee.__useDefaultFramebuffer=X===void 0};const im=O.createFramebuffer();this.setRenderTarget=function(P,X=0,ee=0){M=P,T=X,S=ee;let te=!0,K=null,_e=!1,Me=!1;if(P){const ze=We.get(P);if(ze.__useDefaultFramebuffer!==void 0)Ie.bindFramebuffer(O.FRAMEBUFFER,null),te=!1;else if(ze.__webglFramebuffer===void 0)k.setupRenderTarget(P);else if(ze.__hasExternalTextures)k.rebindTextures(P,We.get(P.texture).__webglTexture,We.get(P.depthTexture).__webglTexture);else if(P.depthBuffer){const tt=P.depthTexture;if(ze.__boundDepthTexture!==tt){if(tt!==null&&We.has(tt)&&(P.width!==tt.image.width||P.height!==tt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");k.setupDepthRenderbuffer(P)}}const pt=P.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(Me=!0);const ut=We.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(Array.isArray(ut[X])?K=ut[X][ee]:K=ut[X],_e=!0):P.samples>0&&k.useMultisampledRTT(P)===!1?K=We.get(P).__webglMultisampledFramebuffer:Array.isArray(ut)?K=ut[ee]:K=ut,B.copy(P.viewport),E.copy(P.scissor),L=P.scissorTest}else B.copy(re).multiplyScalar(z).floor(),E.copy(Ae).multiplyScalar(z).floor(),L=xe;if(ee!==0&&(K=im),Ie.bindFramebuffer(O.FRAMEBUFFER,K)&&te&&Ie.drawBuffers(P,K),Ie.viewport(B),Ie.scissor(E),Ie.setScissorTest(L),_e){const ze=We.get(P.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+X,ze.__webglTexture,ee)}else if(Me){const ze=We.get(P.texture),pt=X;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,ze.__webglTexture,ee,pt)}else if(P!==null&&ee!==0){const ze=We.get(P.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,ze.__webglTexture,ee)}_=-1},this.readRenderTargetPixels=function(P,X,ee,te,K,_e,Me){if(!(P&&P.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ue=We.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&Me!==void 0&&(Ue=Ue[Me]),Ue){Ie.bindFramebuffer(O.FRAMEBUFFER,Ue);try{const ze=P.texture,pt=ze.format,ut=ze.type;if(!nt.textureFormatReadable(pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!nt.textureTypeReadable(ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}X>=0&&X<=P.width-te&&ee>=0&&ee<=P.height-K&&O.readPixels(X,ee,te,K,Tt.convert(pt),Tt.convert(ut),_e)}finally{const ze=M!==null?We.get(M).__webglFramebuffer:null;Ie.bindFramebuffer(O.FRAMEBUFFER,ze)}}},this.readRenderTargetPixelsAsync=async function(P,X,ee,te,K,_e,Me){if(!(P&&P.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ue=We.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&Me!==void 0&&(Ue=Ue[Me]),Ue)if(X>=0&&X<=P.width-te&&ee>=0&&ee<=P.height-K){Ie.bindFramebuffer(O.FRAMEBUFFER,Ue);const ze=P.texture,pt=ze.format,ut=ze.type;if(!nt.textureFormatReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!nt.textureTypeReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const tt=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,tt),O.bufferData(O.PIXEL_PACK_BUFFER,_e.byteLength,O.STREAM_READ),O.readPixels(X,ee,te,K,Tt.convert(pt),Tt.convert(ut),0);const Ft=M!==null?We.get(M).__webglFramebuffer:null;Ie.bindFramebuffer(O.FRAMEBUFFER,Ft);const Jt=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);return O.flush(),await XZ(O,Jt,4),O.bindBuffer(O.PIXEL_PACK_BUFFER,tt),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,_e),O.deleteBuffer(tt),O.deleteSync(Jt),_e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(P,X=null,ee=0){const te=Math.pow(2,-ee),K=Math.floor(P.image.width*te),_e=Math.floor(P.image.height*te),Me=X!==null?X.x:0,Ue=X!==null?X.y:0;k.setTexture2D(P,0),O.copyTexSubImage2D(O.TEXTURE_2D,ee,0,0,Me,Ue,K,_e),Ie.unbindTexture()};const rm=O.createFramebuffer(),zf=O.createFramebuffer();this.copyTextureToTexture=function(P,X,ee=null,te=null,K=0,_e=null){_e===null&&(K!==0?(k1("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_e=K,K=0):_e=0);let Me,Ue,ze,pt,ut,tt,Ft,Jt,Gn;const An=P.isCompressedTexture?P.mipmaps[_e]:P.image;if(ee!==null)Me=ee.max.x-ee.min.x,Ue=ee.max.y-ee.min.y,ze=ee.isBox3?ee.max.z-ee.min.z:1,pt=ee.min.x,ut=ee.min.y,tt=ee.isBox3?ee.min.z:0;else{const Wi=Math.pow(2,-K);Me=Math.floor(An.width*Wi),Ue=Math.floor(An.height*Wi),P.isDataArrayTexture?ze=An.depth:P.isData3DTexture?ze=Math.floor(An.depth*Wi):ze=1,pt=0,ut=0,tt=0}te!==null?(Ft=te.x,Jt=te.y,Gn=te.z):(Ft=0,Jt=0,Gn=0);const Nt=Tt.convert(X.format),rt=Tt.convert(X.type);let Wn;X.isData3DTexture?(k.setTexture3D(X,0),Wn=O.TEXTURE_3D):X.isDataArrayTexture||X.isCompressedArrayTexture?(k.setTexture2DArray(X,0),Wn=O.TEXTURE_2D_ARRAY):(k.setTexture2D(X,0),Wn=O.TEXTURE_2D),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,X.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,X.unpackAlignment);const Qt=O.getParameter(O.UNPACK_ROW_LENGTH),mr=O.getParameter(O.UNPACK_IMAGE_HEIGHT),yo=O.getParameter(O.UNPACK_SKIP_PIXELS),li=O.getParameter(O.UNPACK_SKIP_ROWS),al=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,An.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,An.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,pt),O.pixelStorei(O.UNPACK_SKIP_ROWS,ut),O.pixelStorei(O.UNPACK_SKIP_IMAGES,tt);const Ct=P.isDataArrayTexture||P.isData3DTexture,Ti=X.isDataArrayTexture||X.isData3DTexture;if(P.isDepthTexture){const Wi=We.get(P),yn=We.get(X),In=We.get(Wi.__renderTarget),Hi=We.get(yn.__renderTarget);Ie.bindFramebuffer(O.READ_FRAMEBUFFER,In.__webglFramebuffer),Ie.bindFramebuffer(O.DRAW_FRAMEBUFFER,Hi.__webglFramebuffer);for(let qn=0;qn<ze;qn++)Ct&&(O.framebufferTextureLayer(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,We.get(P).__webglTexture,K,tt+qn),O.framebufferTextureLayer(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,We.get(X).__webglTexture,_e,Gn+qn)),O.blitFramebuffer(pt,ut,Me,Ue,Ft,Jt,Me,Ue,O.DEPTH_BUFFER_BIT,O.NEAREST);Ie.bindFramebuffer(O.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(O.DRAW_FRAMEBUFFER,null)}else if(K!==0||P.isRenderTargetTexture||We.has(P)){const Wi=We.get(P),yn=We.get(X);Ie.bindFramebuffer(O.READ_FRAMEBUFFER,rm),Ie.bindFramebuffer(O.DRAW_FRAMEBUFFER,zf);for(let In=0;In<ze;In++)Ct?O.framebufferTextureLayer(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,Wi.__webglTexture,K,tt+In):O.framebufferTexture2D(O.READ_FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,Wi.__webglTexture,K),Ti?O.framebufferTextureLayer(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,yn.__webglTexture,_e,Gn+In):O.framebufferTexture2D(O.DRAW_FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_2D,yn.__webglTexture,_e),K!==0?O.blitFramebuffer(pt,ut,Me,Ue,Ft,Jt,Me,Ue,O.COLOR_BUFFER_BIT,O.NEAREST):Ti?O.copyTexSubImage3D(Wn,_e,Ft,Jt,Gn+In,pt,ut,Me,Ue):O.copyTexSubImage2D(Wn,_e,Ft,Jt,pt,ut,Me,Ue);Ie.bindFramebuffer(O.READ_FRAMEBUFFER,null),Ie.bindFramebuffer(O.DRAW_FRAMEBUFFER,null)}else Ti?P.isDataTexture||P.isData3DTexture?O.texSubImage3D(Wn,_e,Ft,Jt,Gn,Me,Ue,ze,Nt,rt,An.data):X.isCompressedArrayTexture?O.compressedTexSubImage3D(Wn,_e,Ft,Jt,Gn,Me,Ue,ze,Nt,An.data):O.texSubImage3D(Wn,_e,Ft,Jt,Gn,Me,Ue,ze,Nt,rt,An):P.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,_e,Ft,Jt,Me,Ue,Nt,rt,An.data):P.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,_e,Ft,Jt,An.width,An.height,Nt,An.data):O.texSubImage2D(O.TEXTURE_2D,_e,Ft,Jt,Me,Ue,Nt,rt,An);O.pixelStorei(O.UNPACK_ROW_LENGTH,Qt),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,mr),O.pixelStorei(O.UNPACK_SKIP_PIXELS,yo),O.pixelStorei(O.UNPACK_SKIP_ROWS,li),O.pixelStorei(O.UNPACK_SKIP_IMAGES,al),_e===0&&X.generateMipmaps&&O.generateMipmap(Wn),Ie.unbindTexture()},this.copyTextureToTexture3D=function(P,X,ee=null,te=null,K=0){return k1('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(P,X,ee,te,K)},this.initRenderTarget=function(P){We.get(P).__webglFramebuffer===void 0&&k.setupRenderTarget(P)},this.initTexture=function(P){P.isCubeTexture?k.setTextureCube(P,0):P.isData3DTexture?k.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?k.setTexture2DArray(P,0):k.setTexture2D(P,0),Ie.unbindTexture()},this.resetState=function(){T=0,S=0,M=null,Ie.reset(),cn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Uo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=zt._getDrawingBufferColorSpace(e),t.unpackColorSpace=zt._getUnpackColorSpace()}}const zX=new Z0(-1,1,1,-1,0,1);class YX extends gr{constructor(){super(),this.setAttribute("position",new Ui([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ui([0,2,0,0,2,0],2))}}const XX=new YX;class KX{constructor(e){this._mesh=new jn(XX,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zX)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}function Ab(i,e){if(e===AZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===XI||e===N7){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===XI)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class jX extends bu{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new eK(t)}),this.register(function(t){return new tK(t)}),this.register(function(t){return new hK(t)}),this.register(function(t){return new uK(t)}),this.register(function(t){return new dK(t)}),this.register(function(t){return new iK(t)}),this.register(function(t){return new rK(t)}),this.register(function(t){return new sK(t)}),this.register(function(t){return new oK(t)}),this.register(function(t){return new qX(t)}),this.register(function(t){return new aK(t)}),this.register(function(t){return new nK(t)}),this.register(function(t){return new cK(t)}),this.register(function(t){return new lK(t)}),this.register(function(t){return new JX(t)}),this.register(function(t){return new fK(t)}),this.register(function(t){return new gK(t)})}load(e,t,n,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=Bd.extractUrlBase(e);o=Bd.resolveURL(c,this.path)}else o=Bd.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new iS(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===gS){try{o[Ut.KHR_BINARY_GLTF]=new pK(e)}catch(u){r&&r(u);return}s=JSON.parse(o[Ut.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new EK(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const u=this.pluginCallbacks[h](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const u=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(u){case Ut.KHR_MATERIALS_UNLIT:o[u]=new QX;break;case Ut.KHR_DRACO_MESH_COMPRESSION:o[u]=new mK(s,this.dracoLoader);break;case Ut.KHR_TEXTURE_TRANSFORM:o[u]=new CK;break;case Ut.KHR_MESH_QUANTIZATION:o[u]=new IK;break;default:d.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function $X(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Ut={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class JX{constructor(e){this.parser=e,this.name=Ut.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const h=new _t(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],er);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new KV(h),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new sS(h),c.distance=u;break;case"spot":c=new zV(h),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),Go(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(n,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return n._getNodeRef(t.cache,a,l)})}}class QX{constructor(){this.name=Ut.KHR_MATERIALS_UNLIT}getMaterialType(){return Zo}extendParams(e,t,n){const r=[];e.color=new _t(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],er),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",s.baseColorTexture,bi))}return Promise.all(r)}}class qX{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class eK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Pt(a,a)}return Promise.all(s)}}class tK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class nK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class iK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new _t(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],er)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,bi)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class rK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class sK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new _t().setRGB(a[0],a[1],a[2],er),Promise.all(s)}}class oK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class aK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new _t().setRGB(a[0],a[1],a[2],er),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,bi)),Promise.all(s)}}class lK{constructor(e){this.parser=e,this.name=Ut.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class cK{constructor(e){this.parser=e,this.name=Ut.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Co}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hK{constructor(e){this.parser=e,this.name=Ut.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class uK{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return n.loadTextureImage(e,o.source,l)}}class dK{constructor(e){this.parser=e,this.name=Ut.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);c!==null&&(l=c)}return n.loadTextureImage(e,o.source,l)}}class fK{constructor(e){this.name=Ut.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,c=r.byteLength||0,h=r.count,u=r.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,u,d,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(h*u);return o.decodeGltfBuffer(new Uint8Array(f),h,u,d,r.mode,r.filter),f})})}else return null}}class gK{constructor(e){this.name=Ut.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=t.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Wr.TRIANGLES&&c.mode!==Wr.TRIANGLE_STRIP&&c.mode!==Wr.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(h=>(l[c]=h,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const h=c.pop(),u=h.isGroup?h.children:[h],d=c[0].count,f=[];for(const g of u){const p=new xt,m=new Y,C=new _s,A=new Y(1,1,1),I=new wV(g.geometry,g.material,d);for(let y=0;y<d;y++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&C.fromBufferAttribute(l.ROTATION,y),l.SCALE&&A.fromBufferAttribute(l.SCALE,y),I.setMatrixAt(y,p.compose(m,C,A));for(const y in l)if(y==="_COLOR_0"){const x=l[y];I.instanceColor=new jI(x.array,x.itemSize,x.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&g.geometry.setAttribute(y,l[y]);Bn.prototype.copy.call(I,g),this.parser.assignFinalMaterial(I),f.push(I)}return h.isGroup?(h.clear(),h.add(...f),h):f[0]}))}}const gS="glTF",Ku=12,yb={JSON:1313821514,BIN:5130562};class pK{constructor(e){this.name=Ut.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ku),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==gS)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ku,s=new DataView(e,Ku);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===yb.JSON){const c=new Uint8Array(e,Ku+o,a);this.content=n.decode(c)}else if(l===yb.BIN){const c=Ku+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class mK{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ut.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const h in o){const u=eA[h]||h.toLowerCase();a[u]=o[h]}for(const h in e.attributes){const u=eA[h]||h.toLowerCase();if(o[h]!==void 0){const d=n.accessors[e.attributes[h]],f=Mh[d.componentType];c[u]=f.name,l[u]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(u,d){r.decodeDracoFile(h,function(f){for(const g in f.attributes){const p=f.attributes[g],m=l[g];m!==void 0&&(p.normalized=m)}u(f)},a,c,er,d)})})}}class CK{constructor(){this.name=Ut.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class IK{constructor(){this.name=Ut.KHR_MESH_QUANTIZATION}}class pS extends Of{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,h=r-t,u=(n-t)/h,d=u*u,f=d*u,g=e*c,p=g-c,m=-2*f+3*d,C=f-d,A=1-m,I=C-d+u;for(let y=0;y!==a;y++){const x=o[p+y+a],T=o[p+y+l]*h,S=o[g+y+a],M=o[g+y]*h;s[y]=A*x+I*T+m*S+C*M}return s}}const AK=new _s;class yK extends pS{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return AK.fromArray(s).normalize().toArray(s),s}}const Wr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Mh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_b={9728:ri,9729:Sr,9984:M7,9985:B1,9986:dd,9987:Oo},vb={33071:js,33648:Pp,10497:Kh},CC={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ma={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},_K={CUBICSPLINE:void 0,LINEAR:nf,STEP:tf},IC={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function vK(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new O0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:oo})),i.DefaultMaterial}function Il(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Go(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function bK(i,e,t){let n=!1,r=!1,s=!1;for(let c=0,h=e.length;c<h;c++){const u=e[c];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(r=!0),u.COLOR_0!==void 0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,h=e.length;c<h;c++){const u=e[c];if(n){const d=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):i.attributes.position;o.push(d)}if(r){const d=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):i.attributes.normal;a.push(d)}if(s){const d=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[0],u=c[1],d=c[2];return n&&(i.morphAttributes.position=h),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function xK(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function wK(i){let e;const t=i.extensions&&i.extensions[Ut.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+AC(t.attributes):e=i.indices+":"+AC(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,r=i.targets.length;n<r;n++)e+=":"+AC(i.targets[n]);return e}function AC(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function tA(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function SK(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":i.search(/\.ktx2($|\?)/i)>0||i.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const TK=new xt;class EK{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new $X,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);r=n&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&r<17||s&&o<98?this.textureLoader=new rS(this.options.manager):this.textureLoader=new jV(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new iS(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Il(s,a,r),Go(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,h]of o.children.entries())s(h,a.children[c])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ut.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Bd.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const r=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+r)})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=CC[r.type],a=Mh[r.componentType],l=r.normalized===!0,c=new a(r.count*o);return Promise.resolve(new yi(c,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=CC[r.type],c=Mh[r.componentType],h=c.BYTES_PER_ELEMENT,u=h*l,d=r.byteOffset||0,f=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let p,m;if(f&&f!==u){const C=Math.floor(d/f),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+C+":"+r.count;let I=t.cache.get(A);I||(p=new c(a,C*f,r.count*f/h),I=new yV(p,f/h),t.cache.add(A,I)),m=new g3(I,l,d%f/h,g)}else a===null?p=new c(r.count*l):p=new c(a,d,r.count*l),m=new yi(p,l,g);if(r.sparse!==void 0){const C=CC.SCALAR,A=Mh[r.sparse.indices.componentType],I=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,x=new A(o[1],I,r.sparse.count*C),T=new c(o[2],y,r.sparse.count*l);a!==null&&(m=new yi(m.array.slice(),m.itemSize,m.normalized)),m.normalized=!1;for(let S=0,M=x.length;S<M;S++){const _=x[S];if(m.setX(_,T[S*l]),l>=2&&m.setY(_,T[S*l+1]),l>=3&&m.setZ(_,T[S*l+2]),l>=4&&m.setW(_,T[S*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}m.normalized=g}return m})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=n.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,n){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return h.magFilter=_b[d.magFilter]||Sr,h.minFilter=_b[d.minFilter]||Oo,h.wrapS=vb[d.wrapS]||Kh,h.wrapT=vb[d.wrapT]||Kh,h.generateMipmaps=!h.isCompressedTexture&&h.minFilter!==ri&&h.minFilter!==Sr,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=n.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const d=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(u){return new Promise(function(d,f){let g=d;t.isImageBitmapLoader===!0&&(g=function(p){const m=new Si(p);m.needsUpdate=!0,d(m)}),t.load(Bd.resolveURL(u,s.path),g,void 0,f)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),Go(u,o),u.userData.mimeType=o.mimeType||SK(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=h,h}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[Ut.KHR_TEXTURE_TRANSFORM]){const a=n.extensions!==void 0?n.extensions[Ut.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ut.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new $7,eo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(e.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new j7,eo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return O0}loadMaterial(e){const t=this,n=this.json,r=this.extensions,s=n.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ut.KHR_MATERIALS_UNLIT]){const u=r[Ut.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,t))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new _t(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const d=u.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],er),a.opacity=d[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture,bi)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Hs);const h=s.alphaMode||IC.OPAQUE;if(h===IC.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===IC.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Zo&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Pt(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}if(s.occlusionTexture!==void 0&&o!==Zo&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Zo){const u=s.emissiveFactor;a.emissive=new _t().setRGB(u[0],u[1],u[2],er)}return s.emissiveTexture!==void 0&&o!==Zo&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,bi)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),Go(u,s),t.associations.set(u,{materials:e}),s.extensions&&Il(r,u,s),u})}createUniqueName(e){const t=sn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Ut.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return bb(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],h=wK(c),u=r[h];if(u)o.push(u.promise);else{let d;c.extensions&&c.extensions[Ut.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=bb(new gr,c,t),r[h]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,s=n.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const h=o[l].material===void 0?vK(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),h=l[l.length-1],u=[];for(let f=0,g=h.length;f<g;f++){const p=h[f],m=o[f];let C;const A=c[f];if(m.mode===Wr.TRIANGLES||m.mode===Wr.TRIANGLE_STRIP||m.mode===Wr.TRIANGLE_FAN||m.mode===void 0)C=s.isSkinnedMesh===!0?new vV(p,A):new jn(p,A),C.isSkinnedMesh===!0&&C.normalizeSkinWeights(),m.mode===Wr.TRIANGLE_STRIP?C.geometry=Ab(C.geometry,N7):m.mode===Wr.TRIANGLE_FAN&&(C.geometry=Ab(C.geometry,XI));else if(m.mode===Wr.LINES)C=new EV(p,A);else if(m.mode===Wr.LINE_STRIP)C=new I3(p,A);else if(m.mode===Wr.LINE_LOOP)C=new MV(p,A);else if(m.mode===Wr.POINTS)C=new J7(p,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(C.geometry.morphAttributes).length>0&&xK(C,s),C.name=t.createUniqueName(s.name||"mesh_"+e),Go(C,s),m.extensions&&Il(r,C,m),t.assignFinalMaterial(C),u.push(C)}for(let f=0,g=u.length;f<g;f++)t.associations.set(u[f],{meshes:e,primitives:f});if(u.length===1)return s.extensions&&Il(r,u[0],s),u[0];const d=new Kr;s.extensions&&Il(r,d,s),t.associations.set(d,{meshes:e});for(let f=0,g=u.length;f<g;f++)d.add(u[f]);return d})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ai(ql.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(t=new Z0(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Go(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,h=o.length;c<h;c++){const u=o[c];if(u){a.push(u);const d=new xt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new m3(a,l)})}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],h=[];for(let u=0,d=r.channels.length;u<d;u++){const f=r.channels[u],g=r.samplers[f.sampler],p=f.target,m=p.node,C=r.parameters!==void 0?r.parameters[g.input]:g.input,A=r.parameters!==void 0?r.parameters[g.output]:g.output;p.node!==void 0&&(o.push(this.getDependency("node",m)),a.push(this.getDependency("accessor",C)),l.push(this.getDependency("accessor",A)),c.push(g),h.push(p))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(h)]).then(function(u){const d=u[0],f=u[1],g=u[2],p=u[3],m=u[4],C=[];for(let A=0,I=d.length;A<I;A++){const y=d[A],x=f[A],T=g[A],S=p[A],M=m[A];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();const _=n._createAnimationTracks(y,x,T,S,M);if(_)for(let v=0;v<_.length;v++)C.push(_[v])}return new JI(s,void 0,C)})}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,n=this,r=t.nodes[e],s=n._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,h=a.length;c<h;c++)o.push(n.getDependency("node",a[c]));const l=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const h=c[0],u=c[1],d=c[2];d!==null&&h.traverse(function(f){f.isSkinnedMesh&&f.bind(d,TK)});for(let f=0,g=u.length;f<g;f++)h.add(u[f]);return h})}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let h;if(s.isBone===!0?h=new K7:c.length>1?h=new Kr:c.length===1?h=c[0]:h=new Bn,h!==c[0])for(let u=0,d=c.length;u<d;u++)h.add(c[u]);if(s.name&&(h.userData.name=s.name,h.name=o),Go(h,s),s.extensions&&Il(n,h,s),s.matrix!==void 0){const u=new xt;u.fromArray(s.matrix),h.applyMatrix4(u)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Kr;n.name&&(s.name=r.createUniqueName(n.name)),Go(s,n),n.extensions&&Il(t,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,u=l.length;h<u;h++)s.add(l[h]);const c=h=>{const u=new Map;for(const[d,f]of r.associations)(d instanceof eo||d instanceof Si)&&u.set(d,f);return h.traverse(d=>{const f=r.associations.get(d);f!=null&&u.set(d,f)}),u};return r.associations=c(s),s})}_createAnimationTracks(e,t,n,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];ma[s.path]===ma.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let c;switch(ma[s.path]){case ma.weights:c=Jh;break;case ma.rotation:c=Qh;break;case ma.translation:case ma.scale:c=qh;break;default:switch(n.itemSize){case 1:c=Jh;break;case 2:case 3:default:c=qh;break}break}const h=r.interpolation!==void 0?_K[r.interpolation]:nf,u=this._getArrayFromAccessor(n);for(let d=0,f=l.length;d<f;d++){const g=new c(l[d]+"."+ma[s.path],t.array,u,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=tA(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*n;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof Qh?yK:pS;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function MK(i,e,t){const n=e.attributes,r=new na;if(n.POSITION!==void 0){const a=t.json.accessors[n.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(r.set(new Y(l[0],l[1],l[2]),new Y(c[0],c[1],c[2])),a.normalized){const h=tA(Mh[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new Y,l=new Y;for(let c=0,h=s.length;c<h;c++){const u=s[c];if(u.POSITION!==void 0){const d=t.json.accessors[u.POSITION],f=d.min,g=d.max;if(f!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),d.normalized){const p=tA(Mh[d.componentType]);l.multiplyScalar(p)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new mo;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}function bb(i,e,t){const n=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=eA[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});r.push(o)}return zt.workingColorSpace!==er&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${zt.workingColorSpace}" not supported.`),Go(i,e),MK(i,e,t),Promise.all(r).then(function(){return e.targets!==void 0?bK(i,e.targets,t):i})}class LK{constructor(e,t,n){this.variables=[],this.currentTextureIndex=0;let r=Tr;const s={passThruTexture:{value:null}},o=c(u(),s),a=new KX(o);this.setDataType=function(d){return r=d,this},this.addVariable=function(d,f,g){const p=this.createShaderMaterial(f),m={name:d,initialValueTexture:g,material:p,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:ri,magFilter:ri};return this.variables.push(m),m},this.setVariableDependencies=function(d,f){d.dependencies=f},this.init=function(){if(n.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let d=0;d<this.variables.length;d++){const f=this.variables[d];f.renderTargets[0]=this.createRenderTarget(e,t,f.wrapS,f.wrapT,f.minFilter,f.magFilter),f.renderTargets[1]=this.createRenderTarget(e,t,f.wrapS,f.wrapT,f.minFilter,f.magFilter),this.renderTexture(f.initialValueTexture,f.renderTargets[0]),this.renderTexture(f.initialValueTexture,f.renderTargets[1]);const g=f.material,p=g.uniforms;if(f.dependencies!==null)for(let m=0;m<f.dependencies.length;m++){const C=f.dependencies[m];if(C.name!==f.name){let A=!1;for(let I=0;I<this.variables.length;I++)if(C.name===this.variables[I].name){A=!0;break}if(!A)return"Variable dependency not found. Variable="+f.name+", dependency="+C.name}p[C.name]={value:null},g.fragmentShader=`
uniform sampler2D `+C.name+`;
`+g.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const d=this.currentTextureIndex,f=this.currentTextureIndex===0?1:0;for(let g=0,p=this.variables.length;g<p;g++){const m=this.variables[g];if(m.dependencies!==null){const C=m.material.uniforms;for(let A=0,I=m.dependencies.length;A<I;A++){const y=m.dependencies[A];C[y.name].value=y.renderTargets[d].texture}}this.doRenderTarget(m.material,m.renderTargets[f])}this.currentTextureIndex=f},this.getCurrentRenderTarget=function(d){return d.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(d){return d.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){a.dispose();const d=this.variables;for(let f=0;f<d.length;f++){const g=d[f];g.initialValueTexture&&g.initialValueTexture.dispose();const p=g.renderTargets;for(let m=0;m<p.length;m++)p[m].dispose()}};function l(d){d.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=l;function c(d,f){f=f||{};const g=new Ni({name:"GPUComputationShader",uniforms:f,vertexShader:h(),fragmentShader:d});return l(g),g}this.createShaderMaterial=c,this.createRenderTarget=function(d,f,g,p,m,C){return d=d||e,f=f||t,g=g||js,p=p||js,m=m||ri,C=C||ri,new lo(d,f,{wrapS:g,wrapT:p,minFilter:m,magFilter:C,format:ar,type:r,depthBuffer:!1})},this.createTexture=function(){const d=new Float32Array(e*t*4),f=new p3(d,e,t,ar,Tr);return f.needsUpdate=!0,f},this.renderTexture=function(d,f){s.passThruTexture.value=d,this.doRenderTarget(o,f),s.passThruTexture.value=null},this.doRenderTarget=function(d,f){const g=n.getRenderTarget(),p=n.xr.enabled,m=n.shadowMap.autoUpdate;n.xr.enabled=!1,n.shadowMap.autoUpdate=!1,a.material=d,n.setRenderTarget(f),a.render(n),a.material=o,n.xr.enabled=p,n.shadowMap.autoUpdate=m,n.setRenderTarget(g)};function h(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function u(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}}var RK=`uniform vec2 uResolution;
uniform float uSize;
uniform sampler2D uParticlesTexture;

attribute vec2 aParticlesUv;
attribute float aSize;
attribute vec3 aColor;
attribute vec3 aColorv;

varying vec3 vColor;

void main()
{
    
    vec4 particle = texture(uParticlesTexture, aParticlesUv);
    
    
    vec4 modelPosition = modelMatrix * vec4(particle.xyz, 1.0);
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectedPosition = projectionMatrix * viewPosition;
    gl_Position = projectedPosition;

    
    float sizeIn = smoothstep(0.0, 1.0, particle.a);
    float sizeOut = 1.0 - smoothstep(0.7, 1.0, particle.a);
    float size = min(sizeIn, sizeOut);
    gl_PointSize = aSize * size * uSize * uResolution.y;
    gl_PointSize *= (1.0 / -viewPosition.z); 

    vColor = aColorv; 
}`,BK=`varying vec3 vColor;

vec3 rgb2hsl(vec3 color) {
  float r = color.r, g = color.g, b = color.b;
  float max = max(max(r, g), b);
  float min = min(min(r, g), b);
  float h, s, l = (max + min) * 0.5;

  if (max == min) {
    h = s = 0.0;
  } else {
    float d = max - min;
    s = l > 0.5 ? d / (2.0 - max - min) : d / (max + min);
    if (max == r) {
      h = (g - b) / d + (g < b ? 6.0 : 0.0);
    } else if (max == g) {
      h = (b - r) / d + 2.0;
    } else {
      h = (r - g) / d + 4.0;
    }
    h /= 6.0;
  }

  return vec3(h, s, l);
}

float hue2rgb(float p, float q, float t) {
  if (t < 0.0) t += 1.0;
  if (t > 1.0) t -= 1.0;
  if (t < 1.0/6.0) return p + (q - p) * 6.0 * t;
  if (t < 1.0/2.0) return q;
  if (t < 2.0/3.0) return p + (q - p) * (2.0/3.0 - t) * 6.0;
  return p;
}

vec3 hsl2rgb(vec3 hsl) {
  float h = hsl.x, s = hsl.y, l = hsl.z;

  float r, g, b;

  if (s == 0.0) {
    r = g = b = l;
  } else {
    float q = l < 0.5 ? l * (1.0 + s) : l + s - l * s;
    float p = 2.0 * l - q;

    r = hue2rgb(p, q, h + 1.0/3.0);
    g = hue2rgb(p, q, h);
    b = hue2rgb(p, q, h - 1.0/3.0);
  }

  return vec3(r, g, b);
}

void main()
{
    float distanceToCenter = length(gl_PointCoord - 0.5);
    if(distanceToCenter > 0.4)
        discard;
    vec3 hsl = rgb2hsl(vColor);
    hsl.y *= 1.5; 
    vec3 saturatedColor = hsl2rgb(hsl);
    gl_FragColor = vec4(saturatedColor, 1.0);

    #include <tonemapping_fragment>
    #include <colorspace_fragment>
}`,PK=`varying vec3 vNormal;
varying vec3 vPosition;

void main()
{
    
    vec4 modelPosition = modelMatrix * vec4(position, 1.0);
    gl_Position = projectionMatrix * viewMatrix * modelPosition;

    
    vec3 modelNormal = (modelMatrix * vec4(normal, 0.0)).xyz;

    
    vNormal = modelNormal;
    vPosition = modelPosition.xyz;
}`,GK=`uniform vec3 uAtmosphereColor; 
varying vec3 vNormal;
varying vec3 vPosition;

void main()
{
    
    vec3 viewDirection = normalize(vPosition - cameraPosition);
    
    vec3 normal = normalize(vNormal);

    
    float fresnel = -abs(dot(viewDirection, normal)) + 1.0;
    
    

    
    float alpha = smoothstep(0.0, 1.0, fresnel);  
    alpha -= 0.7;
    gl_FragColor = vec4(uAtmosphereColor, alpha);

    #include <tonemapping_fragment>
    #include <colorspace_fragment>
}`,DK=`vec4 mod289(vec4 x)
{
  return x - floor(x * (1.0 / 289.0)) * 289.0;
}

vec4 permute(vec4 x)
{
  return mod289(((x*34.0)+10.0)*x);
}

vec4 taylorInvSqrt(vec4 r)
{
  return 1.79284291400159 - 0.85373472095314 * r;
}

vec4 fade(vec4 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

float cnoise(vec4 P)
{
  vec4 Pi0 = floor(P); 
  vec4 Pi1 = Pi0 + 1.0; 
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec4 Pf0 = fract(P); 
  vec4 Pf1 = Pf0 - 1.0; 
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = vec4(Pi0.zzzz);
  vec4 iz1 = vec4(Pi1.zzzz);
  vec4 iw0 = vec4(Pi0.wwww);
  vec4 iw1 = vec4(Pi1.wwww);

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);
  vec4 ixy00 = permute(ixy0 + iw0);
  vec4 ixy01 = permute(ixy0 + iw1);
  vec4 ixy10 = permute(ixy1 + iw0);
  vec4 ixy11 = permute(ixy1 + iw1);

  vec4 gx00 = ixy00 * (1.0 / 7.0);
  vec4 gy00 = floor(gx00) * (1.0 / 7.0);
  vec4 gz00 = floor(gy00) * (1.0 / 6.0);
  gx00 = fract(gx00) - 0.5;
  gy00 = fract(gy00) - 0.5;
  gz00 = fract(gz00) - 0.5;
  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
  vec4 sw00 = step(gw00, vec4(0.0));
  gx00 -= sw00 * (step(0.0, gx00) - 0.5);
  gy00 -= sw00 * (step(0.0, gy00) - 0.5);

  vec4 gx01 = ixy01 * (1.0 / 7.0);
  vec4 gy01 = floor(gx01) * (1.0 / 7.0);
  vec4 gz01 = floor(gy01) * (1.0 / 6.0);
  gx01 = fract(gx01) - 0.5;
  gy01 = fract(gy01) - 0.5;
  gz01 = fract(gz01) - 0.5;
  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
  vec4 sw01 = step(gw01, vec4(0.0));
  gx01 -= sw01 * (step(0.0, gx01) - 0.5);
  gy01 -= sw01 * (step(0.0, gy01) - 0.5);

  vec4 gx10 = ixy10 * (1.0 / 7.0);
  vec4 gy10 = floor(gx10) * (1.0 / 7.0);
  vec4 gz10 = floor(gy10) * (1.0 / 6.0);
  gx10 = fract(gx10) - 0.5;
  gy10 = fract(gy10) - 0.5;
  gz10 = fract(gz10) - 0.5;
  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
  vec4 sw10 = step(gw10, vec4(0.0));
  gx10 -= sw10 * (step(0.0, gx10) - 0.5);
  gy10 -= sw10 * (step(0.0, gy10) - 0.5);

  vec4 gx11 = ixy11 * (1.0 / 7.0);
  vec4 gy11 = floor(gx11) * (1.0 / 7.0);
  vec4 gz11 = floor(gy11) * (1.0 / 6.0);
  gx11 = fract(gx11) - 0.5;
  gy11 = fract(gy11) - 0.5;
  gz11 = fract(gz11) - 0.5;
  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
  vec4 sw11 = step(gw11, vec4(0.0));
  gx11 -= sw11 * (step(0.0, gx11) - 0.5);
  gy11 -= sw11 * (step(0.0, gy11) - 0.5);

  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));

  float n0000 = norm00.x * dot(g0000, Pf0);
  float n0100 = norm00.y * dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
  float n1000 = norm00.z * dot(g1000, vec4(Pf1.x, Pf0.yzw));
  float n1100 = norm00.w * dot(g1100, vec4(Pf1.xy, Pf0.zw));
  float n0010 = norm10.x * dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
  float n0110 = norm10.y * dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
  float n1010 = norm10.z * dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
  float n1110 = norm10.w * dot(g1110, vec4(Pf1.xyz, Pf0.w));
  float n0001 = norm01.x * dot(g0001, vec4(Pf0.xyz, Pf1.w));
  float n0101 = norm01.y * dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
  float n1001 = norm01.z * dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
  float n1101 = norm01.w * dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
  float n0011 = norm11.x * dot(g0011, vec4(Pf0.xy, Pf1.zw));
  float n0111 = norm11.y * dot(g0111, vec4(Pf0.x, Pf1.yzw));
  float n1011 = norm11.z * dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
  float n1111 = norm11.w * dot(g1111, Pf1);

  vec4 fade_xyzw = fade(Pf0);
  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
  return 2.2 * n_xyzw;
}

float pnoise(vec4 P, vec4 rep)
{
  vec4 Pi0 = mod(floor(P), rep); 
  vec4 Pi1 = mod(Pi0 + 1.0, rep); 
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec4 Pf0 = fract(P); 
  vec4 Pf1 = Pf0 - 1.0; 
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = vec4(Pi0.zzzz);
  vec4 iz1 = vec4(Pi1.zzzz);
  vec4 iw0 = vec4(Pi0.wwww);
  vec4 iw1 = vec4(Pi1.wwww);

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);
  vec4 ixy00 = permute(ixy0 + iw0);
  vec4 ixy01 = permute(ixy0 + iw1);
  vec4 ixy10 = permute(ixy1 + iw0);
  vec4 ixy11 = permute(ixy1 + iw1);

  vec4 gx00 = ixy00 * (1.0 / 7.0);
  vec4 gy00 = floor(gx00) * (1.0 / 7.0);
  vec4 gz00 = floor(gy00) * (1.0 / 6.0);
  gx00 = fract(gx00) - 0.5;
  gy00 = fract(gy00) - 0.5;
  gz00 = fract(gz00) - 0.5;
  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);
  vec4 sw00 = step(gw00, vec4(0.0));
  gx00 -= sw00 * (step(0.0, gx00) - 0.5);
  gy00 -= sw00 * (step(0.0, gy00) - 0.5);

  vec4 gx01 = ixy01 * (1.0 / 7.0);
  vec4 gy01 = floor(gx01) * (1.0 / 7.0);
  vec4 gz01 = floor(gy01) * (1.0 / 6.0);
  gx01 = fract(gx01) - 0.5;
  gy01 = fract(gy01) - 0.5;
  gz01 = fract(gz01) - 0.5;
  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);
  vec4 sw01 = step(gw01, vec4(0.0));
  gx01 -= sw01 * (step(0.0, gx01) - 0.5);
  gy01 -= sw01 * (step(0.0, gy01) - 0.5);

  vec4 gx10 = ixy10 * (1.0 / 7.0);
  vec4 gy10 = floor(gx10) * (1.0 / 7.0);
  vec4 gz10 = floor(gy10) * (1.0 / 6.0);
  gx10 = fract(gx10) - 0.5;
  gy10 = fract(gy10) - 0.5;
  gz10 = fract(gz10) - 0.5;
  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);
  vec4 sw10 = step(gw10, vec4(0.0));
  gx10 -= sw10 * (step(0.0, gx10) - 0.5);
  gy10 -= sw10 * (step(0.0, gy10) - 0.5);

  vec4 gx11 = ixy11 * (1.0 / 7.0);
  vec4 gy11 = floor(gx11) * (1.0 / 7.0);
  vec4 gz11 = floor(gy11) * (1.0 / 6.0);
  gx11 = fract(gx11) - 0.5;
  gy11 = fract(gy11) - 0.5;
  gz11 = fract(gz11) - 0.5;
  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);
  vec4 sw11 = step(gw11, vec4(0.0));
  gx11 -= sw11 * (step(0.0, gx11) - 0.5);
  gy11 -= sw11 * (step(0.0, gy11) - 0.5);

  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);
  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);
  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);
  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);
  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);
  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);
  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);
  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);
  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);
  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);
  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);
  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);
  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);
  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);
  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);
  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);

  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));
  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));
  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));
  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));

  float n0000 = norm00.x * dot(g0000, Pf0);
  float n0100 = norm00.y * dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));
  float n1000 = norm00.z * dot(g1000, vec4(Pf1.x, Pf0.yzw));
  float n1100 = norm00.w * dot(g1100, vec4(Pf1.xy, Pf0.zw));
  float n0010 = norm10.x * dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));
  float n0110 = norm10.y * dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));
  float n1010 = norm10.z * dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));
  float n1110 = norm10.w * dot(g1110, vec4(Pf1.xyz, Pf0.w));
  float n0001 = norm01.x * dot(g0001, vec4(Pf0.xyz, Pf1.w));
  float n0101 = norm01.y * dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));
  float n1001 = norm01.z * dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));
  float n1101 = norm01.w * dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));
  float n0011 = norm11.x * dot(g0011, vec4(Pf0.xy, Pf1.zw));
  float n0111 = norm11.y * dot(g0111, vec4(Pf0.x, Pf1.yzw));
  float n1011 = norm11.z * dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));
  float n1111 = norm11.w * dot(g1111, Pf1);

  vec4 fade_xyzw = fade(Pf0);
  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);
  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);
  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);
  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);
  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);
  return 2.2 * n_xyzw;
}

uniform sampler2D uDisplacementTexture;
uniform mat4 uRotationMatrix;
uniform vec3 uCoord;
uniform float uTime;
uniform float uDeltaTime;
uniform sampler2D uBase;
uniform float uRadius;

void main()
{
  vec2 uv = gl_FragCoord.xy / resolution.xy;
  vec4 particle = texture(uParticles, uv);
  vec4 base = texture(uBase, uv);
  float time = uTime * 0.01;
  float displacementIntensity = texture(uDisplacementTexture, uv).r;

  
  if (particle.a >= 1.0) {
    particle.a = mod(particle.a, 1.0);
    particle.xyz = base.xyz;
  } else {
    float strength = cnoise(vec4(base.xyz, time + 1.0));
    
    vec3 localCoord = (inverse(uRotationMatrix) * vec4(uCoord, 1.0)).xyz;
    float distanceFromHovered = distance(base.xyz, localCoord);

    
    float falloffFactor = uRadius; 
    strength = smoothstep(falloffFactor, 0.0, abs(distanceFromHovered));
    

    
    vec3 flowField = vec3(
      cnoise(vec4(particle.xyz + 0.0, time)),
      cnoise(vec4(particle.xyz + 1.0, time)),
      cnoise(vec4(particle.xyz + 2.0, time))
    );
    
    
    flowField = normalize(flowField);
    particle.xyz += flowField * uDeltaTime * strength * 2.0; 
    
    particle.a += uDeltaTime * (0.8 + strength * 0.01); 
  }
  
  vec3 displacement = vec3(0.0, 0.0, 1.0) * displacementIntensity;
  
  gl_FragColor = particle;
}`;function Do(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function mS(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Rr={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},eu={duration:.5,overwrite:!1,delay:0},x3,wi,wn,jr=1e8,mn=1/jr,nA=Math.PI*2,FK=nA/4,NK=0,CS=Math.sqrt,kK=Math.cos,OK=Math.sin,_i=function(e){return typeof e=="string"},kn=function(e){return typeof e=="function"},Qo=function(e){return typeof e=="number"},w3=function(e){return typeof e>"u"},ho=function(e){return typeof e=="object"},hr=function(e){return e!==!1},S3=function(){return typeof window<"u"},Rg=function(e){return kn(e)||_i(e)},IS=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Zi=Array.isArray,iA=/(?:-?\.?\d|\.)+/gi,AS=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,mh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,yC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,yS=/[+-]=-?[.\d]+/,_S=/[^,'"\[\]\s]+/gi,UK=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Mn,Os,rA,T3,Br={},Op={},vS,bS=function(e){return(Op=tu(e,Br))&&pr},E3=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},sf=function(e,t){return!t&&console.warn(e)},xS=function(e,t){return e&&(Br[e]=t)&&Op&&(Op[e]=t)||Br},of=function(){return 0},ZK={suppressEvents:!0,isStart:!0,kill:!1},Z1={suppressEvents:!0,kill:!1},VK={suppressEvents:!0},M3={},Ha=[],sA={},wS,br={},_C={},xb=30,V1=[],L3="",R3=function(e){var t=e[0],n,r;if(ho(t)||kn(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=V1.length;r--&&!V1[r].targetTest(t););n=V1[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new jS(e[r],n)))||e.splice(r,1);return e},ic=function(e){return e._gsap||R3($r(e))[0]._gsap},SS=function(e,t,n){return(n=e[t])&&kn(n)?e[t]():w3(n)&&e.getAttribute&&e.getAttribute(t)||n},ur=function(e,t){return(e=e.split(",")).forEach(t)||e},Zn=function(e){return Math.round(e*1e5)/1e5||0},Xn=function(e){return Math.round(e*1e7)/1e7||0},Lh=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+r:n==="-"?e-r:n==="*"?e*r:e/r},WK=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Up=function(){var e=Ha.length,t=Ha.slice(0),n,r;for(sA={},Ha.length=0,n=0;n<e;n++)r=t[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},TS=function(e,t,n,r){Ha.length&&!wi&&Up(),e.render(t,n,r||wi&&t<0&&(e._initted||e._startAt)),Ha.length&&!wi&&Up()},ES=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(_S).length<2?t:_i(e)?e.trim():e},MS=function(e){return e},Pr=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},HK=function(e){return function(t,n){for(var r in n)r in t||r==="duration"&&e||r==="ease"||(t[r]=n[r])}},tu=function(e,t){for(var n in t)e[n]=t[n];return e},wb=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=ho(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},Zp=function(e,t){var n={},r;for(r in e)r in t||(n[r]=e[r]);return n},Pd=function(e){var t=e.parent||Mn,n=e.keyframes?HK(Zi(e.keyframes)):Pr;if(hr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},zK=function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0},LS=function(e,t,n,r,s){n===void 0&&(n="_first"),r===void 0&&(r="_last");var o=e[r],a;if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},W0=function(e,t,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=t._prev,o=t._next;s?s._next=o:e[n]===t&&(e[n]=o),o?o._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},$a=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},rc=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},YK=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},oA=function(e,t,n,r){return e._startAt&&(wi?e._startAt.revert(Z1):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},XK=function i(e){return!e||e._ts&&i(e.parent)},Sb=function(e){return e._repeat?nu(e._tTime,e=e.duration()+e._rDelay)*e:0},nu=function(e,t){var n=Math.floor(e=Xn(e/t));return e&&n===e?n-1:n},Vp=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},H0=function(e){return e._end=Xn(e._start+(e._tDur/Math.abs(e._ts||e._rts||mn)||0))},z0=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Xn(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),H0(e),n._dirty||rc(n,e)),e},RS=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Vp(e.rawTime(),t),(!t._dur||Uf(0,t.totalDuration(),n)-t._tTime>mn)&&t.render(n,!0)),rc(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-mn}},zs=function(e,t,n,r){return t.parent&&$a(t),t._start=Xn((Qo(n)?n:n||e!==Mn?Vr(e,n,t):e._time)+t._delay),t._end=Xn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),LS(e,t,"_first","_last",e._sort?"_start":0),aA(t)||(e._recent=t),r||RS(e,t),e._ts<0&&z0(e,e._tTime),e},BS=function(e,t){return(Br.ScrollTrigger||E3("scrollTrigger",t))&&Br.ScrollTrigger.create(t,e)},PS=function(e,t,n,r,s){if(P3(e,t,s),!e._initted)return 1;if(!n&&e._pt&&!wi&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&wS!==xr.frame)return Ha.push(e),e._lazy=[s,r],1},KK=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},aA=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},jK=function(e,t,n,r){var s=e.ratio,o=t<0||!t&&(!e._start&&KK(e)&&!(!e._initted&&aA(e))||(e._ts<0||e._dp._ts<0)&&!aA(e))?0:1,a=e._rDelay,l=0,c,h,u;if(a&&e._repeat&&(l=Uf(0,e._tDur,t),h=nu(l,a),e._yoyo&&h&1&&(o=1-o),h!==nu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||wi||r||e._zTime===mn||!t&&e._zTime){if(!e._initted&&PS(e,t,r,n,l))return;for(u=e._zTime,e._zTime=t||(n?mn:0),n||(n=t&&!u),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&oA(e,t,n,!0),e._onUpdate&&!n&&Er(e,"onUpdate"),l&&e._repeat&&!n&&e.parent&&Er(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&$a(e,1),!n&&!wi&&(Er(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},$K=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<t)return r;r=r._prev}},iu=function(e,t,n,r){var s=e._repeat,o=Xn(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:Xn(o*(s+1)+e._rDelay*s):o,a>0&&!r&&z0(e,e._tTime=e._tDur*a),e.parent&&H0(e),n||rc(e.parent,e),e},Tb=function(e){return e instanceof Ki?rc(e):iu(e,e._dur)},JK={_start:0,endTime:of,totalDuration:of},Vr=function i(e,t,n){var r=e.labels,s=e._recent||JK,o=e.duration()>=jr?s.endTime(!1):e._dur,a,l,c;return _i(t)&&(isNaN(t)||t in r)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:n).totalDuration()/100:1)):a<0?(t in r||(r[t]=o),r[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&n&&(l=l/100*(Zi(n)?n[0]:n).totalDuration()),a>1?i(e,t.substr(0,a-1),n)+l:o+l)):t==null?o:+t},Gd=function(e,t,n){var r=Qo(t[1]),s=(r?2:1)+(e<2?0:1),o=t[s],a,l;if(r&&(o.duration=t[1]),o.parent=n,e){for(a=o,l=n;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=hr(l.vars.inherit)&&l.parent;o.immediateRender=hr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Yn(t[0],o,t[s+1])},tl=function(e,t){return e||e===0?t(e):t},Uf=function(e,t,n){return n<e?e:n>t?t:n},Di=function(e,t){return!_i(e)||!(t=UK.exec(e))?"":t[1]},QK=function(e,t,n){return tl(n,function(r){return Uf(e,t,r)})},lA=[].slice,GS=function(e,t){return e&&ho(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ho(e[0]))&&!e.nodeType&&e!==Os},qK=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(r){var s;return _i(r)&&!t||GS(r,1)?(s=n).push.apply(s,$r(r)):n.push(r)})||n},$r=function(e,t,n){return wn&&!t&&wn.selector?wn.selector(e):_i(e)&&!n&&(rA||!ru())?lA.call((t||T3).querySelectorAll(e),0):Zi(e)?qK(e,n):GS(e)?lA.call(e,0):e?[e]:[]},cA=function(e){return e=$r(e)[0]||sf("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return $r(t,n.querySelectorAll?n:n===e?sf("Invalid scope")||T3.createElement("div"):e)}},DS=function(e){return e.sort(function(){return .5-Math.random()})},FS=function(e){if(kn(e))return e;var t=ho(e)?e:{each:e},n=sc(t.ease),r=t.from||0,s=parseFloat(t.base)||0,o={},a=r>0&&r<1,l=isNaN(r)||a,c=t.axis,h=r,u=r;return _i(r)?h=u={center:.5,edges:.5,end:1}[r]||0:!a&&l&&(h=r[0],u=r[1]),function(d,f,g){var p=(g||t).length,m=o[p],C,A,I,y,x,T,S,M,_;if(!m){if(_=t.grid==="auto"?0:(t.grid||[1,jr])[1],!_){for(S=-jr;S<(S=g[_++].getBoundingClientRect().left)&&_<p;);_<p&&_--}for(m=o[p]=[],C=l?Math.min(_,p)*h-.5:r%_,A=_===jr?0:l?p*u/_-.5:r/_|0,S=0,M=jr,T=0;T<p;T++)I=T%_-C,y=A-(T/_|0),m[T]=x=c?Math.abs(c==="y"?y:I):CS(I*I+y*y),x>S&&(S=x),x<M&&(M=x);r==="random"&&DS(m),m.max=S-M,m.min=M,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(_>p?p-1:c?c==="y"?p/_:_:Math.max(_,p/_))||0)*(r==="edges"?-1:1),m.b=p<0?s-p:s,m.u=Di(t.amount||t.each)||0,n=n&&p<0?YS(n):n}return p=(m[d]-m.min)/m.max||0,Xn(m.b+(n?n(p):p)*m.v)+m.u}},hA=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Xn(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Qo(n)?0:Di(n))}},NS=function(e,t){var n=Zi(e),r,s;return!n&&ho(e)&&(r=n=e.radius||jr,e.values?(e=$r(e.values),(s=!Qo(e[0]))&&(r*=r)):e=hA(e.increment)),tl(t,n?kn(e)?function(o){return s=e(o),Math.abs(s-o)<=r?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=jr,h=0,u=e.length,d,f;u--;)s?(d=e[u].x-a,f=e[u].y-l,d=d*d+f*f):d=Math.abs(e[u]-a),d<c&&(c=d,h=u);return h=!r||c<=r?e[h]:o,s||h===o||Qo(o)?h:h+Di(o)}:hA(e))},kS=function(e,t,n,r){return tl(Zi(e)?!t:n===!0?!!(n=0):!r,function(){return Zi(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*r)/r})},ej=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(s,o){return o(s)},r)}},tj=function(e,t){return function(n){return e(parseFloat(n))+(t||Di(n))}},nj=function(e,t,n){return US(e,t,0,1,n)},OS=function(e,t,n){return tl(n,function(r){return e[~~t(r)]})},ij=function i(e,t,n){var r=t-e;return Zi(e)?OS(e,i(0,e.length),t):tl(n,function(s){return(r+(s-e)%r)%r+e})},rj=function i(e,t,n){var r=t-e,s=r*2;return Zi(e)?OS(e,i(0,e.length-1),t):tl(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>r?s-o:o)})},af=function(e){for(var t=0,n="",r,s,o,a;~(r=e.indexOf("random(",t));)o=e.indexOf(")",r),a=e.charAt(r+7)==="[",s=e.substr(r+7,o-r-7).match(a?_S:iA),n+=e.substr(t,r-t)+kS(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return n+e.substr(t,e.length-t)},US=function(e,t,n,r,s){var o=t-e,a=r-n;return tl(s,function(l){return n+((l-e)/o*a||0)})},sj=function i(e,t,n,r){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var o=_i(e),a={},l,c,h,u,d;if(n===!0&&(r=1)&&(n=null),o)e={p:e},t={p:t};else if(Zi(e)&&!Zi(t)){for(h=[],u=e.length,d=u-2,c=1;c<u;c++)h.push(i(e[c-1],e[c]));u--,s=function(g){g*=u;var p=Math.min(d,~~g);return h[p](g-p)},n=t}else r||(e=tu(Zi(e)?[]:{},e));if(!h){for(l in t)B3.call(a,e,l,"get",t[l]);s=function(g){return F3(g,a)||(o?e.p:e)}}}return tl(n,s)},Eb=function(e,t,n){var r=e.labels,s=jr,o,a,l;for(o in r)a=r[o]-t,a<0==!!n&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Er=function(e,t,n){var r=e.vars,s=r[t],o=wn,a=e._ctx,l,c,h;if(s)return l=r[t+"Params"],c=r.callbackScope||e,n&&Ha.length&&Up(),a&&(wn=a),h=l?s.apply(c,l):s.call(c),wn=o,h},gd=function(e){return $a(e),e.scrollTrigger&&e.scrollTrigger.kill(!!wi),e.progress()<1&&Er(e,"onInterrupt"),e},Ch,ZS=[],VS=function(e){if(e)if(e=!e.name&&e.default||e,S3()||e.headless){var t=e.name,n=kn(e),r=t&&!n&&e.init?function(){this._props=[]}:e,s={init:of,render:F3,add:B3,kill:_j,modifier:yj,rawVars:0},o={targetTest:0,get:0,getSetter:D3,aliases:{},register:0};if(ru(),e!==r){if(br[t])return;Pr(r,Pr(Zp(e,s),o)),tu(r.prototype,tu(s,Zp(e,o))),br[r.prop=t]=r,e.targetTest&&(V1.push(r),M3[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}xS(t,r),e.register&&e.register(pr,r,dr)}else ZS.push(e)},pn=255,pd={aqua:[0,pn,pn],lime:[0,pn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,pn],navy:[0,0,128],white:[pn,pn,pn],olive:[128,128,0],yellow:[pn,pn,0],orange:[pn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[pn,0,0],pink:[pn,192,203],cyan:[0,pn,pn],transparent:[pn,pn,pn,0]},vC=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*pn+.5|0},WS=function(e,t,n){var r=e?Qo(e)?[e>>16,e>>8&pn,e&pn]:0:pd.black,s,o,a,l,c,h,u,d,f,g;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),pd[e])r=pd[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&pn,r&pn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&pn,e&pn]}else if(e.substr(0,3)==="hsl"){if(r=g=e.match(iA),!t)l=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=vC(l+1/3,s,o),r[1]=vC(l,s,o),r[2]=vC(l-1/3,s,o);else if(~e.indexOf("="))return r=e.match(AS),n&&r.length<4&&(r[3]=1),r}else r=e.match(iA)||pd.transparent;r=r.map(Number)}return t&&!g&&(s=r[0]/pn,o=r[1]/pn,a=r[2]/pn,u=Math.max(s,o,a),d=Math.min(s,o,a),h=(u+d)/2,u===d?l=c=0:(f=u-d,c=h>.5?f/(2-u-d):f/(u+d),l=u===s?(o-a)/f+(o<a?6:0):u===o?(a-s)/f+2:(s-o)/f+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},HS=function(e){var t=[],n=[],r=-1;return e.split(za).forEach(function(s){var o=s.match(mh)||[];t.push.apply(t,o),n.push(r+=o.length+1)}),t.c=n,t},Mb=function(e,t,n){var r="",s=(e+r).match(za),o=t?"hsla(":"rgba(",a=0,l,c,h,u;if(!s)return e;if(s=s.map(function(d){return(d=WS(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(h=HS(e),l=n.c,l.join(r)!==h.c.join(r)))for(c=e.replace(za,"1").split(mh),u=c.length-1;a<u;a++)r+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=e.split(za),u=c.length-1;a<u;a++)r+=c[a]+s[a];return r+c[u]},za=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in pd)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),oj=/hsl[a]?\(/,zS=function(e){var t=e.join(" "),n;if(za.lastIndex=0,za.test(t))return n=oj.test(t),e[1]=Mb(e[1],n),e[0]=Mb(e[0],n,HS(e[1])),!0},lf,xr=function(){var i=Date.now,e=500,t=33,n=i(),r=n,s=1e3/240,o=s,a=[],l,c,h,u,d,f,g=function p(m){var C=i()-r,A=m===!0,I,y,x,T;if((C>e||C<0)&&(n+=C-t),r+=C,x=r-n,I=x-o,(I>0||A)&&(T=++u.frame,d=x-u.time*1e3,u.time=x=x/1e3,o+=I+(I>=s?4:s-I),y=1),A||(l=c(p)),y)for(f=0;f<a.length;f++)a[f](x,d,T,m)};return u={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return d/(1e3/(m||60))},wake:function(){vS&&(!rA&&S3()&&(Os=rA=window,T3=Os.document||{},Br.gsap=pr,(Os.gsapVersions||(Os.gsapVersions=[])).push(pr.version),bS(Op||Os.GreenSockGlobals||!Os.gsap&&Os||{}),ZS.forEach(VS)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),c=h||function(m){return setTimeout(m,o-u.time*1e3+1|0)},lf=1,g(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(l),lf=0,c=of},lagSmoothing:function(m,C){e=m||1/0,t=Math.min(C||33,e)},fps:function(m){s=1e3/(m||240),o=u.time*1e3+s},add:function(m,C,A){var I=C?function(y,x,T,S){m(y,x,T,S),u.remove(I)}:m;return u.remove(m),a[A?"unshift":"push"](I),ru(),I},remove:function(m,C){~(C=a.indexOf(m))&&a.splice(C,1)&&f>=C&&f--},_listeners:a},u}(),ru=function(){return!lf&&xr.wake()},Ht={},aj=/^[\d.\-M][\d.\-,\s]/,lj=/["']/g,cj=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),r=n[0],s=1,o=n.length,a,l,c;s<o;s++)l=n[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[r]=isNaN(c)?c.replace(lj,"").trim():+c,r=l.substr(a+1).trim();return t},hj=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)},uj=function(e){var t=(e+"").split("("),n=Ht[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[cj(t[1])]:hj(e).split(",").map(ES)):Ht._CE&&aj.test(e)?Ht._CE("",e):n},YS=function(e){return function(t){return 1-e(1-t)}},XS=function i(e,t){for(var n=e._first,r;n;)n instanceof Ki?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},sc=function(e,t){return e&&(kn(e)?e:Ht[e]||uj(e))||t},bc=function(e,t,n,r){n===void 0&&(n=function(l){return 1-t(1-l)}),r===void 0&&(r=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var s={easeIn:t,easeOut:n,easeInOut:r},o;return ur(e,function(a){Ht[a]=Br[a]=s,Ht[o=a.toLowerCase()]=n;for(var l in s)Ht[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ht[a+"."+l]=s[l]}),s},KS=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},bC=function i(e,t,n){var r=t>=1?t:1,s=(n||(e?.3:.45))/(t<1?t:1),o=s/nA*(Math.asin(1/r)||0),a=function(h){return h===1?1:r*Math.pow(2,-10*h)*OK((h-o)*s)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:KS(a);return s=nA/s,l.config=function(c,h){return i(e,c,h)},l},xC=function i(e,t){t===void 0&&(t=1.70158);var n=function(o){return o?--o*o*((t+1)*o+t)+1:0},r=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:KS(n);return r.config=function(s){return i(e,s)},r};ur("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;bc(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Ht.Linear.easeNone=Ht.none=Ht.Linear.easeIn;bc("Elastic",bC("in"),bC("out"),bC());(function(i,e){var t=1/e,n=2*t,r=2.5*t,s=function(a){return a<t?i*a*a:a<n?i*Math.pow(a-1.5/e,2)+.75:a<r?i*(a-=2.25/e)*a+.9375:i*Math.pow(a-2.625/e,2)+.984375};bc("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);bc("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});bc("Circ",function(i){return-(CS(1-i*i)-1)});bc("Sine",function(i){return i===1?1:-kK(i*FK)+1});bc("Back",xC("in"),xC("out"),xC());Ht.SteppedEase=Ht.steps=Br.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,r=e+(t?0:1),s=t?1:0,o=1-mn;return function(a){return((r*Uf(0,o,a)|0)+s)*n}}};eu.ease=Ht["quad.out"];ur("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return L3+=i+","+i+"Params,"});var jS=function(e,t){this.id=NK++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:SS,this.set=t?t.getSetter:D3},cf=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,iu(this,+t.duration,1,1),this.data=t.data,wn&&(this._ctx=wn,wn.data.push(this)),lf||xr.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,iu(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(ru(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(z0(this,n),!s._dp||s.parent||RS(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&zs(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===mn||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),TS(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Sb(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Sb(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?nu(this._tTime,s)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-mn?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Vp(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-mn?0:this._rts,this.totalTime(Uf(-Math.abs(this._delay),this._tDur,s),r!==!1),H0(this),YK(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ru(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==mn&&(this._tTime-=mn)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&zs(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(hr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Vp(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=VK);var r=wi;return wi=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),wi=r,this},e.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Tb(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Tb(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(Vr(this,n),hr(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,hr(r)),this._dur||(this._zTime=-mn),this},e.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-mn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-mn,this},e.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-mn)},e.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},e.then=function(n){var r=this;return new Promise(function(s){var o=kn(n)?n:MS,a=function(){var c=r.then;r.then=null,kn(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?a():r._prom=a})},e.kill=function(){gd(this)},i}();Pr(cf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-mn,_prom:0,_ps:!1,_rts:1});var Ki=function(i){mS(e,i);function e(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=hr(n.sortChildren),Mn&&zs(n.parent||Mn,Do(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&BS(Do(s),n.scrollTrigger),s}var t=e.prototype;return t.to=function(r,s,o){return Gd(0,arguments,this),this},t.from=function(r,s,o){return Gd(1,arguments,this),this},t.fromTo=function(r,s,o,a){return Gd(2,arguments,this),this},t.set=function(r,s,o){return s.duration=0,s.parent=this,Pd(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Yn(r,s,Vr(this,o),1),this},t.call=function(r,s,o){return zs(this,Yn.delayedCall(0,r,s),o)},t.staggerTo=function(r,s,o,a,l,c,h){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Yn(r,o,Vr(this,l)),this},t.staggerFrom=function(r,s,o,a,l,c,h){return o.runBackwards=1,Pd(o).immediateRender=hr(o.immediateRender),this.staggerTo(r,s,o,a,l,c,h)},t.staggerFromTo=function(r,s,o,a,l,c,h,u){return a.startAt=o,Pd(a).immediateRender=hr(a.immediateRender),this.staggerTo(r,s,a,l,c,h,u)},t.render=function(r,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:Xn(r),u=this._zTime<0!=r<0&&(this._initted||!c),d,f,g,p,m,C,A,I,y,x,T,S;if(this!==Mn&&h>l&&r>=0&&(h=l),h!==this._tTime||o||u){if(a!==this._time&&c&&(h+=this._time-a,r+=this._time-a),d=h,y=this._start,I=this._ts,C=!I,u&&(c||(a=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(T=this._yoyo,m=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(m*100+r,s,o);if(d=Xn(h%m),h===l?(p=this._repeat,d=c):(x=Xn(h/m),p=~~x,p&&p===x&&(d=c,p--),d>c&&(d=c)),x=nu(this._tTime,m),!a&&this._tTime&&x!==p&&this._tTime-x*m-this._dur<=0&&(x=p),T&&p&1&&(d=c-d,S=1),p!==x&&!this._lock){var M=T&&x&1,_=M===(T&&p&1);if(p<x&&(M=!M),a=M?0:h%c?c:h,this._lock=1,this.render(a||(S?0:Xn(p*m)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Er(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,_&&(this._lock=2,a=M?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;XS(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=$K(this,Xn(a),Xn(d)),A&&(h-=d-(d=A._start))),this._tTime=h,this._time=d,this._act=!I,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,a=0),!a&&d&&!s&&!p&&(Er(this,"onStart"),this._tTime!==h))return this;if(d>=a&&r>=0)for(f=this._first;f;){if(g=f._next,(f._act||d>=f._start)&&f._ts&&A!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(d-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(d-f._start)*f._ts,s,o),d!==this._time||!this._ts&&!C){A=0,g&&(h+=this._zTime=-mn);break}}f=g}else{f=this._last;for(var v=r<0?r:d;f;){if(g=f._prev,(f._act||v<=f._end)&&f._ts&&A!==f){if(f.parent!==this)return this.render(r,s,o);if(f.render(f._ts>0?(v-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(v-f._start)*f._ts,s,o||wi&&(f._initted||f._startAt)),d!==this._time||!this._ts&&!C){A=0,g&&(h+=this._zTime=v?-mn:mn);break}}f=g}}if(A&&!s&&(this.pause(),A.render(d>=a?0:-mn)._zTime=d>=a?1:-1,this._ts))return this._start=y,H0(this),this.render(r,s,o);this._onUpdate&&!s&&Er(this,"onUpdate",!0),(h===l&&this._tTime>=this.totalDuration()||!h&&a)&&(y===this._start||Math.abs(I)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===l&&this._ts>0||!h&&this._ts<0)&&$a(this,1),!s&&!(r<0&&!a)&&(h||a||!l)&&(Er(this,h===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var o=this;if(Qo(s)||(s=Vr(this,s,r)),!(r instanceof cf)){if(Zi(r))return r.forEach(function(a){return o.add(a,s)}),this;if(_i(r))return this.addLabel(r,s);if(kn(r))r=Yn.delayedCall(0,r);else return this}return this!==r?zs(this,r,s):this},t.getChildren=function(r,s,o,a){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-jr);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Yn?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},t.remove=function(r){return _i(r)?this.removeLabel(r):kn(r)?this.killTweensOf(r):(r.parent===this&&W0(this,r),r===this._recent&&(this._recent=this._last),rc(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Xn(xr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=Vr(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,o){var a=Yn.delayedCall(0,s||of,o);return a.data="isPause",this._hasPause=1,zs(this,a,Vr(this,r))},t.removePause=function(r){var s=this._first;for(r=Vr(this,r);s;)s._start===r&&s.data==="isPause"&&$a(s),s=s._next},t.killTweensOf=function(r,s,o){for(var a=this.getTweensOf(r,o),l=a.length;l--;)Da!==a[l]&&a[l].kill(r,s);return this},t.getTweensOf=function(r,s){for(var o=[],a=$r(r),l=this._first,c=Qo(s),h;l;)l instanceof Yn?WK(l._targets,a)&&(c?(!Da||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(h=l.getTweensOf(a,s)).length&&o.push.apply(o,h),l=l._next;return o},t.tweenTo=function(r,s){s=s||{};var o=this,a=Vr(o,r),l=s,c=l.startAt,h=l.onStart,u=l.onStartParams,d=l.immediateRender,f,g=Yn.to(o,Pr({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||mn,onStart:function(){if(o.pause(),!f){var m=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==m&&iu(g,m,0,1).render(g._time,!0,!0),f=1}h&&h.apply(g,u||[])}},s));return d?g.render(0):g},t.tweenFromTo=function(r,s,o){return this.tweenTo(s,Pr({startAt:{time:Vr(this,r)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(r){return r===void 0&&(r=this._time),Eb(this,Vr(this,r))},t.previousLabel=function(r){return r===void 0&&(r=this._time),Eb(this,Vr(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+mn)},t.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=r,a._end+=r),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return rc(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},t.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),rc(this)},t.totalDuration=function(r){var s=0,o=this,a=o._last,l=jr,c,h,u;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(u=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),h=a._start,h>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,zs(o,a,h-a._delay,1)._lock=0):l=h,h<0&&a._ts&&(s-=h,(!u&&!o._dp||u&&u.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;iu(o,o===Mn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(r){if(Mn._ts&&(TS(Mn,Vp(r,Mn)),wS=xr.frame),xr.frame>=xb){xb+=Rr.autoSleep||120;var s=Mn._first;if((!s||!s._ts)&&Rr.autoSleep&&xr._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||xr.sleep()}}},e}(cf);Pr(Ki.prototype,{_lock:0,_hasPause:0,_forcing:0});var dj=function(e,t,n,r,s,o,a){var l=new dr(this._pt,e,t,0,1,t8,null,s),c=0,h=0,u,d,f,g,p,m,C,A;for(l.b=n,l.e=r,n+="",r+="",(C=~r.indexOf("random("))&&(r=af(r)),o&&(A=[n,r],o(A,e,t),n=A[0],r=A[1]),d=n.match(yC)||[];u=yC.exec(r);)g=u[0],p=r.substring(c,u.index),f?f=(f+1)%5:p.substr(-5)==="rgba("&&(f=1),g!==d[h++]&&(m=parseFloat(d[h-1])||0,l._pt={_next:l._pt,p:p||h===1?p:",",s:m,c:g.charAt(1)==="="?Lh(m,g)-m:parseFloat(g)-m,m:f&&f<4?Math.round:0},c=yC.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=a,(yS.test(r)||C)&&(l.e=0),this._pt=l,l},B3=function(e,t,n,r,s,o,a,l,c,h){kn(r)&&(r=r(s||0,e,o));var u=e[t],d=n!=="get"?n:kn(u)?c?e[t.indexOf("set")||!kn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():u,f=kn(u)?c?Cj:qS:G3,g;if(_i(r)&&(~r.indexOf("random(")&&(r=af(r)),r.charAt(1)==="="&&(g=Lh(d,r)+(Di(d)||0),(g||g===0)&&(r=g))),!h||d!==r||uA)return!isNaN(d*r)&&r!==""?(g=new dr(this._pt,e,t,+d||0,r-(d||0),typeof u=="boolean"?Aj:e8,0,f),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g):(!u&&!(t in e)&&E3(t,r),dj.call(this,e,t,d,r,f,l||Rr.stringFilter,c))},fj=function(e,t,n,r,s){if(kn(e)&&(e=Dd(e,s,t,n,r)),!ho(e)||e.style&&e.nodeType||Zi(e)||IS(e))return _i(e)?Dd(e,s,t,n,r):e;var o={},a;for(a in e)o[a]=Dd(e[a],s,t,n,r);return o},$S=function(e,t,n,r,s,o){var a,l,c,h;if(br[e]&&(a=new br[e]).init(s,a.rawVars?t[e]:fj(t[e],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new dr(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Ch))for(c=n._ptLookup[n._targets.indexOf(s)],h=a._props.length;h--;)c[a._props[h]]=l;return a},Da,uA,P3=function i(e,t,n){var r=e.vars,s=r.ease,o=r.startAt,a=r.immediateRender,l=r.lazy,c=r.onUpdate,h=r.runBackwards,u=r.yoyoEase,d=r.keyframes,f=r.autoRevert,g=e._dur,p=e._startAt,m=e._targets,C=e.parent,A=C&&C.data==="nested"?C.vars.targets:m,I=e._overwrite==="auto"&&!x3,y=e.timeline,x,T,S,M,_,v,B,E,L,G,Z,U,V;if(y&&(!d||!s)&&(s="none"),e._ease=sc(s,eu.ease),e._yEase=u?YS(sc(u===!0?s:u,eu.ease)):0,u&&e._yoyo&&!e._repeat&&(u=e._yEase,e._yEase=e._ease,e._ease=u),e._from=!y&&!!r.runBackwards,!y||d&&!r.stagger){if(E=m[0]?ic(m[0]).harness:0,U=E&&r[E.prop],x=Zp(r,M3),p&&(p._zTime<0&&p.progress(1),t<0&&h&&a&&!f?p.render(-1,!0):p.revert(h&&g?Z1:ZK),p._lazy=0),o){if($a(e._startAt=Yn.set(m,Pr({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!p&&hr(l),startAt:null,delay:0,onUpdate:c&&function(){return Er(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(wi||!a&&!f)&&e._startAt.revert(Z1),a&&g&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(h&&g&&!p){if(t&&(a=!1),S=Pr({overwrite:!1,data:"isFromStart",lazy:a&&!p&&hr(l),immediateRender:a,stagger:0,parent:C},x),U&&(S[E.prop]=U),$a(e._startAt=Yn.set(m,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(wi?e._startAt.revert(Z1):e._startAt.render(-1,!0)),e._zTime=t,!a)i(e._startAt,mn,mn);else if(!t)return}for(e._pt=e._ptCache=0,l=g&&hr(l)||l&&!g,T=0;T<m.length;T++){if(_=m[T],B=_._gsap||R3(m)[T]._gsap,e._ptLookup[T]=G={},sA[B.id]&&Ha.length&&Up(),Z=A===m?T:A.indexOf(_),E&&(L=new E).init(_,U||x,e,Z,A)!==!1&&(e._pt=M=new dr(e._pt,_,L.name,0,1,L.render,L,0,L.priority),L._props.forEach(function(z){G[z]=M}),L.priority&&(v=1)),!E||U)for(S in x)br[S]&&(L=$S(S,x,e,Z,_,A))?L.priority&&(v=1):G[S]=M=B3.call(e,_,S,"get",x[S],Z,A,0,r.stringFilter);e._op&&e._op[T]&&e.kill(_,e._op[T]),I&&e._pt&&(Da=e,Mn.killTweensOf(_,G,e.globalTime(t)),V=!e.parent,Da=0),e._pt&&l&&(sA[B.id]=1)}v&&n8(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!V,d&&t<=0&&y.render(jr,!0,!0)},gj=function(e,t,n,r,s,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],h,u,d,f;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,f=e._targets.length;f--;){if(h=d[f][t],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==t&&h.fp!==t;)h=h._next;if(!h)return uA=1,e.vars[t]="+=0",P3(e,a),uA=0,l?sf(t+" not eligible for reset"):1;c.push(h)}for(f=c.length;f--;)u=c[f],h=u._pt||u,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,u.e&&(u.e=Zn(n)+Di(u.e)),u.b&&(u.b=h.s+Di(u.b))},pj=function(e,t){var n=e[0]?ic(e[0]).harness:0,r=n&&n.aliases,s,o,a,l;if(!r)return t;s=tu({},t);for(o in r)if(o in s)for(l=r[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},mj=function(e,t,n,r){var s=t.ease||r||"power1.inOut",o,a;if(Zi(t))a=n[e]||(n[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:s})},Dd=function(e,t,n,r,s){return kn(e)?e.call(t,n,r,s):_i(e)&&~e.indexOf("random(")?af(e):e},JS=L3+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",QS={};ur(JS+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return QS[i]=1});var Yn=function(i){mS(e,i);function e(n,r,s,o){var a;typeof r=="number"&&(s.duration=r,r=s,s=null),a=i.call(this,o?r:Pd(r))||this;var l=a.vars,c=l.duration,h=l.delay,u=l.immediateRender,d=l.stagger,f=l.overwrite,g=l.keyframes,p=l.defaults,m=l.scrollTrigger,C=l.yoyoEase,A=r.parent||Mn,I=(Zi(n)||IS(n)?Qo(n[0]):"length"in r)?[n]:$r(n),y,x,T,S,M,_,v,B;if(a._targets=I.length?R3(I):sf("GSAP target "+n+" not found. https://gsap.com",!Rr.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||d||Rg(c)||Rg(h)){if(r=a.vars,y=a.timeline=new Ki({data:"nested",defaults:p||{},targets:A&&A.data==="nested"?A.vars.targets:I}),y.kill(),y.parent=y._dp=Do(a),y._start=0,d||Rg(c)||Rg(h)){if(S=I.length,v=d&&FS(d),ho(d))for(M in d)~JS.indexOf(M)&&(B||(B={}),B[M]=d[M]);for(x=0;x<S;x++)T=Zp(r,QS),T.stagger=0,C&&(T.yoyoEase=C),B&&tu(T,B),_=I[x],T.duration=+Dd(c,Do(a),x,_,I),T.delay=(+Dd(h,Do(a),x,_,I)||0)-a._delay,!d&&S===1&&T.delay&&(a._delay=h=T.delay,a._start+=h,T.delay=0),y.to(_,T,v?v(x,_,I):0),y._ease=Ht.none;y.duration()?c=h=0:a.timeline=0}else if(g){Pd(Pr(y.vars.defaults,{ease:"none"})),y._ease=sc(g.ease||r.ease||"none");var E=0,L,G,Z;if(Zi(g))g.forEach(function(U){return y.to(I,U,">")}),y.duration();else{T={};for(M in g)M==="ease"||M==="easeEach"||mj(M,g[M],T,g.easeEach);for(M in T)for(L=T[M].sort(function(U,V){return U.t-V.t}),E=0,x=0;x<L.length;x++)G=L[x],Z={ease:G.e,duration:(G.t-(x?L[x-1].t:0))/100*c},Z[M]=G.v,y.to(I,Z,E),E+=Z.duration;y.duration()<c&&y.to({},{duration:c-y.duration()})}}c||a.duration(c=y.duration())}else a.timeline=0;return f===!0&&!x3&&(Da=Do(a),Mn.killTweensOf(I),Da=0),zs(A,Do(a),s),r.reversed&&a.reverse(),r.paused&&a.paused(!0),(u||!c&&!g&&a._start===Xn(A._time)&&hr(u)&&XK(Do(a))&&A.data!=="nested")&&(a._tTime=-mn,a.render(Math.max(0,-h)||0)),m&&BS(Do(a),m),a}var t=e.prototype;return t.render=function(r,s,o){var a=this._time,l=this._tDur,c=this._dur,h=r<0,u=r>l-mn&&!h?l:r<mn?0:r,d,f,g,p,m,C,A,I,y;if(!c)jK(this,r,s,o);else if(u!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h||this._lazy){if(d=u,I=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+r,s,o);if(d=Xn(u%p),u===l?(g=this._repeat,d=c):(m=Xn(u/p),g=~~m,g&&g===m?(d=c,g--):d>c&&(d=c)),C=this._yoyo&&g&1,C&&(y=this._yEase,d=c-d),m=nu(this._tTime,p),d===a&&!o&&this._initted&&g===m)return this._tTime=u,this;g!==m&&(I&&this._yEase&&XS(I,C),this.vars.repeatRefresh&&!C&&!this._lock&&d!==p&&this._initted&&(this._lock=o=1,this.render(Xn(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(PS(this,h?r:d,o,s,u))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&g!==m))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(y||this._ease)(d/c),this._from&&(this.ratio=A=1-A),d&&!a&&!s&&!g&&(Er(this,"onStart"),this._tTime!==u))return this;for(f=this._pt;f;)f.r(A,f.d),f=f._next;I&&I.render(r<0?r:I._dur*I._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&oA(this,r,s,o),Er(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!s&&this.parent&&Er(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(h&&!this._onUpdate&&oA(this,r,!0,!0),(r||!c)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&$a(this,1),!s&&!(h&&!a)&&(u||a||C)&&(Er(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,o,a,l){lf||xr.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||P3(this,c),h=this._ease(c/this._dur),gj(this,r,s,o,a,h,c,l)?this.resetTo(r,s,o,a,1):(z0(this,0),this.parent||LS(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?gd(this):this.scrollTrigger&&this.scrollTrigger.kill(!!wi),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Da&&Da.vars.overwrite!==!0)._first||gd(this),this.parent&&o!==this.timeline.totalDuration()&&iu(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=r?$r(r):a,c=this._ptLookup,h=this._pt,u,d,f,g,p,m,C;if((!s||s==="all")&&zK(a,l))return s==="all"&&(this._pt=0),gd(this);for(u=this._op=this._op||[],s!=="all"&&(_i(s)&&(p={},ur(s,function(A){return p[A]=1}),s=p),s=pj(a,s)),C=a.length;C--;)if(~l.indexOf(a[C])){d=c[C],s==="all"?(u[C]=s,g=d,f={}):(f=u[C]=u[C]||{},g=s);for(p in g)m=d&&d[p],m&&((!("kill"in m.d)||m.d.kill(p)===!0)&&W0(this,m,"_pt"),delete d[p]),f!=="all"&&(f[p]=1)}return this._initted&&!this._pt&&h&&gd(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Gd(1,arguments)},e.delayedCall=function(r,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(r,s,o){return Gd(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,o){return Mn.killTweensOf(r,s,o)},e}(cf);Pr(Yn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ur("staggerTo,staggerFrom,staggerFromTo",function(i){Yn[i]=function(){var e=new Ki,t=lA.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var G3=function(e,t,n){return e[t]=n},qS=function(e,t,n){return e[t](n)},Cj=function(e,t,n,r){return e[t](r.fp,n)},Ij=function(e,t,n){return e.setAttribute(t,n)},D3=function(e,t){return kn(e[t])?qS:w3(e[t])&&e.setAttribute?Ij:G3},e8=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},Aj=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},t8=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(e===1&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},F3=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},yj=function(e,t,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(e,t,n),s=o},_j=function(e){for(var t=this._pt,n,r;t;)r=t._next,t.p===e&&!t.op||t.op===e?W0(this,t,"_pt"):t.dep||(n=1),t=r;return!n},vj=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},n8=function(e){for(var t=e._pt,n,r,s,o;t;){for(n=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:o)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:o=t,t=n}e._pt=s},dr=function(){function i(t,n,r,s,o,a,l,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=a||e8,this.d=l||this,this.set=c||G3,this.pr=h||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=vj,this.m=n,this.mt=s,this.tween=r},i}();ur(L3+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return M3[i]=1});Br.TweenMax=Br.TweenLite=Yn;Br.TimelineLite=Br.TimelineMax=Ki;Mn=new Ki({sortChildren:!1,defaults:eu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Rr.stringFilter=zS;var oc=[],W1={},bj=[],Lb=0,xj=0,wC=function(e){return(W1[e]||bj).map(function(t){return t()})},dA=function(){var e=Date.now(),t=[];e-Lb>2&&(wC("matchMediaInit"),oc.forEach(function(n){var r=n.queries,s=n.conditions,o,a,l,c;for(a in r)o=Os.matchMedia(r[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(n.revert(),l&&t.push(n))}),wC("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),Lb=e,wC("matchMedia"))},i8=function(){function i(t,n){this.selector=n&&cA(n),this.data=[],this._r=[],this.isReverted=!1,this.id=xj++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,r,s){kn(n)&&(s=r,r=n,n=kn);var o=this,a=function(){var c=wn,h=o.selector,u;return c&&c!==o&&c.data.push(o),s&&(o.selector=cA(s)),wn=o,u=r.apply(o,arguments),kn(u)&&o._r.push(u),wn=c,o.selector=h,o.isReverted=!1,u};return o.last=a,n===kn?a(o,function(l){return o.add(null,l)}):n?o[n]=a:a},e.ignore=function(n){var r=wn;wn=null,n(this),wn=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Yn&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var s=this;if(n?function(){for(var a=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}));for(a.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,u){return u.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),l=s.data.length;l--;)c=s.data[l],c instanceof Ki?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Yn)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),r)for(var o=oc.length;o--;)oc[o].id===this.id&&oc.splice(o,1)},e.revert=function(n){this.kill(n||{})},i}(),wj=function(){function i(t){this.contexts=[],this.scope=t,wn&&wn.data.push(this)}var e=i.prototype;return e.add=function(n,r,s){ho(n)||(n={matches:n});var o=new i8(0,s||this.scope),a=o.conditions={},l,c,h;wn&&!o.selector&&(o.selector=wn.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(l=Os.matchMedia(n[c]),l&&(oc.indexOf(o)<0&&oc.push(o),(a[c]=l.matches)&&(h=1),l.addListener?l.addListener(dA):l.addEventListener("change",dA)));return h&&r(o,function(u){return o.add(null,u)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Wp={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return VS(r)})},timeline:function(e){return new Ki(e)},getTweensOf:function(e,t){return Mn.getTweensOf(e,t)},getProperty:function(e,t,n,r){_i(e)&&(e=$r(e)[0]);var s=ic(e||{}).get,o=n?MS:ES;return n==="native"&&(n=""),e&&(t?o((br[t]&&br[t].get||s)(e,t,n,r)):function(a,l,c){return o((br[a]&&br[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,n){if(e=$r(e),e.length>1){var r=e.map(function(h){return pr.quickSetter(h,t,n)}),s=r.length;return function(h){for(var u=s;u--;)r[u](h)}}e=e[0]||{};var o=br[t],a=ic(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(h){var u=new o;Ch._pt=0,u.init(e,n?h+n:h,Ch,0,[e]),u.render(1,u),Ch._pt&&F3(1,Ch)}:a.set(e,l);return o?c:function(h){return c(e,l,n?h+n:h,a,1)}},quickTo:function(e,t,n){var r,s=pr.to(e,Pr((r={},r[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),o=function(l,c,h){return s.resetTo(t,l,c,h)};return o.tween=s,o},isTweening:function(e){return Mn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=sc(e.ease,eu.ease)),wb(eu,e||{})},config:function(e){return wb(Rr,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,s=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach(function(a){return a&&!br[a]&&!Br[a]&&sf(t+" effect requires "+a+" plugin.")}),_C[t]=function(a,l,c){return n($r(a),Pr(l||{},s),c)},o&&(Ki.prototype[t]=function(a,l,c){return this.add(_C[t](a,ho(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){Ht[e]=sc(t)},parseEase:function(e,t){return arguments.length?sc(e,t):Ht},getById:function(e){return Mn.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ki(e),r,s;for(n.smoothChildTiming=hr(e.smoothChildTiming),Mn.remove(n),n._dp=0,n._time=n._tTime=Mn._time,r=Mn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof Yn&&r.vars.onComplete===r._targets[0]))&&zs(n,r,r._start-r._delay),r=s;return zs(Mn,n,0),n},context:function(e,t){return e?new i8(e,t):wn},matchMedia:function(e){return new wj(e)},matchMediaRefresh:function(){return oc.forEach(function(e){var t=e.conditions,n,r;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||dA()},addEventListener:function(e,t){var n=W1[e]||(W1[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=W1[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:ij,wrapYoyo:rj,distribute:FS,random:kS,snap:NS,normalize:nj,getUnit:Di,clamp:QK,splitColor:WS,toArray:$r,selector:cA,mapRange:US,pipe:ej,unitize:tj,interpolate:sj,shuffle:DS},install:bS,effects:_C,ticker:xr,updateRoot:Ki.updateRoot,plugins:br,globalTimeline:Mn,core:{PropTween:dr,globals:xS,Tween:Yn,Timeline:Ki,Animation:cf,getCache:ic,_removeLinkedListItem:W0,reverting:function(){return wi},context:function(e){return e&&wn&&(wn.data.push(e),e._ctx=wn),wn},suppressOverwrites:function(e){return x3=e}}};ur("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Wp[i]=Yn[i]});xr.add(Ki.updateRoot);Ch=Wp.to({},{duration:0});var Sj=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Tj=function(e,t){var n=e._targets,r,s,o;for(r in t)for(s=n.length;s--;)o=e._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Sj(o,r)),o&&o.modifier&&o.modifier(t[r],e,n[s],r))},SC=function(e,t){return{name:e,rawVars:1,init:function(r,s,o){o._onInit=function(a){var l,c;if(_i(s)&&(l={},ur(s,function(h){return l[h]=1}),s=l),t){l={};for(c in s)l[c]=t(s[c]);s=l}Tj(a,s)}}}},pr=Wp.registerPlugin({name:"attr",init:function(e,t,n,r,s){var o,a,l;this.tween=n;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],r,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)wi?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},SC("roundProps",hA),SC("modifiers"),SC("snap",NS))||Wp;Yn.version=Ki.version=pr.version="3.12.7";vS=1;S3()&&ru();Ht.Power0;Ht.Power1;Ht.Power2;Ht.Power3;Ht.Power4;Ht.Linear;Ht.Quad;Ht.Cubic;Ht.Quart;Ht.Quint;Ht.Strong;Ht.Elastic;Ht.Back;Ht.SteppedEase;Ht.Bounce;Ht.Sine;Ht.Expo;Ht.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Rb,Fa,Rh,N3,ec,Bb,k3,Ej=function(){return typeof window<"u"},qo={},Nl=180/Math.PI,Bh=Math.PI/180,Xc=Math.atan2,Pb=1e8,O3=/([A-Z])/g,Mj=/(left|right|width|margin|padding|x)/i,Lj=/[\s,\(]\S/,$s={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},fA=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Rj=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Bj=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},Pj=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},r8=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},s8=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Gj=function(e,t,n){return e.style[t]=n},Dj=function(e,t,n){return e.style.setProperty(t,n)},Fj=function(e,t,n){return e._gsap[t]=n},Nj=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},kj=function(e,t,n,r,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Oj=function(e,t,n,r,s){var o=e._gsap;o[t]=n,o.renderTransform(s,o)},Ln="transform",fr=Ln+"Origin",Uj=function i(e,t){var n=this,r=this.target,s=r.style,o=r._gsap;if(e in qo&&s){if(this.tfm=this.tfm||{},e!=="transform")e=$s[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=No(r,a)}):this.tfm[e]=o.x?o[e]:No(r,e),e===fr&&(this.tfm.zOrigin=o.zOrigin);else return $s.transform.split(",").forEach(function(a){return i.call(n,a,t)});if(this.props.indexOf(Ln)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(fr,t,"")),e=Ln}(s||t)&&this.props.push(e,t,s[e])},o8=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Zj=function(){var e=this.props,t=this.target,n=t.style,r=t._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(O3,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),s=k3(),(!s||!s.isStart)&&!n[Ln]&&(o8(n),r.zOrigin&&n[fr]&&(n[fr]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},a8=function(e,t){var n={target:e,props:[],revert:Zj,save:Uj};return e._gsap||pr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return n.save(r)}),n},l8,gA=function(e,t){var n=Fa.createElementNS?Fa.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Fa.createElement(e);return n&&n.style?n:Fa.createElement(e)},to=function i(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(O3,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&i(e,su(t)||t,1)||""},Gb="O,Moz,ms,Ms,Webkit".split(","),su=function(e,t,n){var r=t||ec,s=r.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Gb[o]+e in s););return o<0?null:(o===3?"ms":o>=0?Gb[o]:"")+e},pA=function(){Ej()&&window.document&&(Rb=window,Fa=Rb.document,Rh=Fa.documentElement,ec=gA("div")||{style:{}},gA("div"),Ln=su(Ln),fr=Ln+"Origin",ec.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",l8=!!su("perspective"),k3=pr.core.reverting,N3=1)},Db=function(e){var t=e.ownerSVGElement,n=gA("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),s;r.style.display="block",n.appendChild(r),Rh.appendChild(n);try{s=r.getBBox()}catch{}return n.removeChild(r),Rh.removeChild(n),s},Fb=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},c8=function(e){var t,n;try{t=e.getBBox()}catch{t=Db(e),n=1}return t&&(t.width||t.height)||n||(t=Db(e)),t&&!t.width&&!t.x&&!t.y?{x:+Fb(e,["x","cx","x1"])||0,y:+Fb(e,["y","cy","y1"])||0,width:0,height:0}:t},h8=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&c8(e))},pc=function(e,t){if(t){var n=e.style,r;t in qo&&t!==fr&&(t=Ln),n.removeProperty?(r=t.substr(0,2),(r==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(r==="--"?t:t.replace(O3,"-$1").toLowerCase())):n.removeAttribute(t)}},Na=function(e,t,n,r,s,o){var a=new dr(e._pt,t,n,0,1,o?s8:r8);return e._pt=a,a.b=r,a.e=s,e._props.push(n),a},Nb={deg:1,rad:1,turn:1},Vj={grid:1,flex:1},Ja=function i(e,t,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=ec.style,l=Mj.test(t),c=e.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(l?"Width":"Height"),u=100,d=r==="px",f=r==="%",g,p,m,C;if(r===o||!s||Nb[r]||Nb[o])return s;if(o!=="px"&&!d&&(s=i(e,t,n,"px")),C=e.getCTM&&h8(e),(f||o==="%")&&(qo[t]||~t.indexOf("adius")))return g=C?e.getBBox()[l?"width":"height"]:e[h],Zn(f?s/g*u:s/100*g);if(a[l?"width":"height"]=u+(d?o:r),p=r!=="rem"&&~t.indexOf("adius")||r==="em"&&e.appendChild&&!c?e:e.parentNode,C&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===Fa||!p.appendChild)&&(p=Fa.body),m=p._gsap,m&&f&&m.width&&l&&m.time===xr.time&&!m.uncache)return Zn(s/m.width*u);if(f&&(t==="height"||t==="width")){var A=e.style[t];e.style[t]=u+r,g=e[h],A?e.style[t]=A:pc(e,t)}else(f||o==="%")&&!Vj[to(p,"display")]&&(a.position=to(e,"position")),p===e&&(a.position="static"),p.appendChild(ec),g=ec[h],p.removeChild(ec),a.position="absolute";return l&&f&&(m=ic(p),m.time=xr.time,m.width=p[h]),Zn(d?g*s/u:g&&s?u/g*s:0)},No=function(e,t,n,r){var s;return N3||pA(),t in $s&&t!=="transform"&&(t=$s[t],~t.indexOf(",")&&(t=t.split(",")[0])),qo[t]&&t!=="transform"?(s=uf(e,r),s=t!=="transformOrigin"?s[t]:s.svg?s.origin:zp(to(e,fr))+" "+s.zOrigin+"px"):(s=e.style[t],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Hp[t]&&Hp[t](e,t,n)||to(e,t)||SS(e,t)||(t==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Ja(e,t,s,n)+n:s},Wj=function(e,t,n,r){if(!n||n==="none"){var s=su(t,e,1),o=s&&to(e,s,1);o&&o!==n?(t=s,n=o):t==="borderColor"&&(n=to(e,"borderTopColor"))}var a=new dr(this._pt,e.style,t,0,1,t8),l=0,c=0,h,u,d,f,g,p,m,C,A,I,y,x;if(a.b=n,a.e=r,n+="",r+="",r==="auto"&&(p=e.style[t],e.style[t]=r,r=to(e,t)||r,p?e.style[t]=p:pc(e,t)),h=[n,r],zS(h),n=h[0],r=h[1],d=n.match(mh)||[],x=r.match(mh)||[],x.length){for(;u=mh.exec(r);)m=u[0],A=r.substring(l,u.index),g?g=(g+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(g=1),m!==(p=d[c++]||"")&&(f=parseFloat(p)||0,y=p.substr((f+"").length),m.charAt(1)==="="&&(m=Lh(f,m)+y),C=parseFloat(m),I=m.substr((C+"").length),l=mh.lastIndex-I.length,I||(I=I||Rr.units[t]||y,l===r.length&&(r+=I,a.e+=I)),y!==I&&(f=Ja(e,t,p,I)||0),a._pt={_next:a._pt,p:A||c===1?A:",",s:f,c:C-f,m:g&&g<4||t==="zIndex"?Math.round:0});a.c=l<r.length?r.substring(l,r.length):""}else a.r=t==="display"&&r==="none"?s8:r8;return yS.test(r)&&(a.e=0),this._pt=a,a},kb={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Hj=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(e=n,n=r,r=e),t[0]=kb[n]||n,t[1]=kb[r]||r,t.join(" ")},zj=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,r=n.style,s=t.u,o=n._gsap,a,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)a=s[c],qo[a]&&(l=1,a=a==="transformOrigin"?fr:Ln),pc(n,a);l&&(pc(n,Ln),o&&(o.svg&&n.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",uf(n,1),o.uncache=1,o8(r)))}},Hp={clearProps:function(e,t,n,r,s){if(s.data!=="isFromStart"){var o=e._pt=new dr(e._pt,t,n,0,0,zj);return o.u=r,o.pr=-10,o.tween=s,e._props.push(n),1}}},hf=[1,0,0,1,0,0],u8={},d8=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Ob=function(e){var t=to(e,Ln);return d8(t)?hf:t.substr(7).match(AS).map(Zn)},U3=function(e,t){var n=e._gsap||ic(e),r=e.style,s=Ob(e),o,a,l,c;return n.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?hf:s):(s===hf&&!e.offsetParent&&e!==Rh&&!n.svg&&(l=r.display,r.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,Rh.appendChild(e)),s=Ob(e),l?r.display=l:pc(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):Rh.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},mA=function(e,t,n,r,s,o){var a=e._gsap,l=s||U3(e,!0),c=a.xOrigin||0,h=a.yOrigin||0,u=a.xOffset||0,d=a.yOffset||0,f=l[0],g=l[1],p=l[2],m=l[3],C=l[4],A=l[5],I=t.split(" "),y=parseFloat(I[0])||0,x=parseFloat(I[1])||0,T,S,M,_;n?l!==hf&&(S=f*m-g*p)&&(M=y*(m/S)+x*(-p/S)+(p*A-m*C)/S,_=y*(-g/S)+x*(f/S)-(f*A-g*C)/S,y=M,x=_):(T=c8(e),y=T.x+(~I[0].indexOf("%")?y/100*T.width:y),x=T.y+(~(I[1]||I[0]).indexOf("%")?x/100*T.height:x)),r||r!==!1&&a.smooth?(C=y-c,A=x-h,a.xOffset=u+(C*f+A*p)-C,a.yOffset=d+(C*g+A*m)-A):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=x,a.smooth=!!r,a.origin=t,a.originIsAbsolute=!!n,e.style[fr]="0px 0px",o&&(Na(o,a,"xOrigin",c,y),Na(o,a,"yOrigin",h,x),Na(o,a,"xOffset",u,a.xOffset),Na(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",y+" "+x)},uf=function(e,t){var n=e._gsap||new jS(e);if("x"in n&&!t&&!n.uncache)return n;var r=e.style,s=n.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=to(e,fr)||"0",h,u,d,f,g,p,m,C,A,I,y,x,T,S,M,_,v,B,E,L,G,Z,U,V,z,le,j,re,Ae,xe,J,oe;return h=u=d=p=m=C=A=I=y=0,f=g=1,n.svg=!!(e.getCTM&&h8(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[Ln]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Ln]!=="none"?l[Ln]:"")),r.scale=r.rotate=r.translate="none"),S=U3(e,n.svg),n.svg&&(n.uncache?(z=e.getBBox(),c=n.xOrigin-z.x+"px "+(n.yOrigin-z.y)+"px",V=""):V=!t&&e.getAttribute("data-svg-origin"),mA(e,V||c,!!V||n.originIsAbsolute,n.smooth!==!1,S)),x=n.xOrigin||0,T=n.yOrigin||0,S!==hf&&(B=S[0],E=S[1],L=S[2],G=S[3],h=Z=S[4],u=U=S[5],S.length===6?(f=Math.sqrt(B*B+E*E),g=Math.sqrt(G*G+L*L),p=B||E?Xc(E,B)*Nl:0,A=L||G?Xc(L,G)*Nl+p:0,A&&(g*=Math.abs(Math.cos(A*Bh))),n.svg&&(h-=x-(x*B+T*L),u-=T-(x*E+T*G))):(oe=S[6],xe=S[7],j=S[8],re=S[9],Ae=S[10],J=S[11],h=S[12],u=S[13],d=S[14],M=Xc(oe,Ae),m=M*Nl,M&&(_=Math.cos(-M),v=Math.sin(-M),V=Z*_+j*v,z=U*_+re*v,le=oe*_+Ae*v,j=Z*-v+j*_,re=U*-v+re*_,Ae=oe*-v+Ae*_,J=xe*-v+J*_,Z=V,U=z,oe=le),M=Xc(-L,Ae),C=M*Nl,M&&(_=Math.cos(-M),v=Math.sin(-M),V=B*_-j*v,z=E*_-re*v,le=L*_-Ae*v,J=G*v+J*_,B=V,E=z,L=le),M=Xc(E,B),p=M*Nl,M&&(_=Math.cos(M),v=Math.sin(M),V=B*_+E*v,z=Z*_+U*v,E=E*_-B*v,U=U*_-Z*v,B=V,Z=z),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,C=180-C),f=Zn(Math.sqrt(B*B+E*E+L*L)),g=Zn(Math.sqrt(U*U+oe*oe)),M=Xc(Z,U),A=Math.abs(M)>2e-4?M*Nl:0,y=J?1/(J<0?-J:J):0),n.svg&&(V=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!d8(to(e,Ln)),V&&e.setAttribute("transform",V))),Math.abs(A)>90&&Math.abs(A)<270&&(s?(f*=-1,A+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,A+=A<=0?180:-180)),t=t||n.uncache,n.x=h-((n.xPercent=h&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-h)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=u-((n.yPercent=u&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-u)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=Zn(f),n.scaleY=Zn(g),n.rotation=Zn(p)+a,n.rotationX=Zn(m)+a,n.rotationY=Zn(C)+a,n.skewX=A+a,n.skewY=I+a,n.transformPerspective=y+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!t&&n.zOrigin||0)&&(r[fr]=zp(c)),n.xOffset=n.yOffset=0,n.force3D=Rr.force3D,n.renderTransform=n.svg?Xj:l8?f8:Yj,n.uncache=0,n},zp=function(e){return(e=e.split(" "))[0]+" "+e[1]},TC=function(e,t,n){var r=Di(t);return Zn(parseFloat(t)+parseFloat(Ja(e,"x",n+"px",r)))+r},Yj=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,f8(e,t)},Al="0deg",ju="0px",yl=") ",f8=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.z,c=n.rotation,h=n.rotationY,u=n.rotationX,d=n.skewX,f=n.skewY,g=n.scaleX,p=n.scaleY,m=n.transformPerspective,C=n.force3D,A=n.target,I=n.zOrigin,y="",x=C==="auto"&&e&&e!==1||C===!0;if(I&&(u!==Al||h!==Al)){var T=parseFloat(h)*Bh,S=Math.sin(T),M=Math.cos(T),_;T=parseFloat(u)*Bh,_=Math.cos(T),o=TC(A,o,S*_*-I),a=TC(A,a,-Math.sin(T)*-I),l=TC(A,l,M*_*-I+I)}m!==ju&&(y+="perspective("+m+yl),(r||s)&&(y+="translate("+r+"%, "+s+"%) "),(x||o!==ju||a!==ju||l!==ju)&&(y+=l!==ju||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+yl),c!==Al&&(y+="rotate("+c+yl),h!==Al&&(y+="rotateY("+h+yl),u!==Al&&(y+="rotateX("+u+yl),(d!==Al||f!==Al)&&(y+="skew("+d+", "+f+yl),(g!==1||p!==1)&&(y+="scale("+g+", "+p+yl),A.style[Ln]=y||"translate(0, 0)"},Xj=function(e,t){var n=t||this,r=n.xPercent,s=n.yPercent,o=n.x,a=n.y,l=n.rotation,c=n.skewX,h=n.skewY,u=n.scaleX,d=n.scaleY,f=n.target,g=n.xOrigin,p=n.yOrigin,m=n.xOffset,C=n.yOffset,A=n.forceCSS,I=parseFloat(o),y=parseFloat(a),x,T,S,M,_;l=parseFloat(l),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,l+=h),l||c?(l*=Bh,c*=Bh,x=Math.cos(l)*u,T=Math.sin(l)*u,S=Math.sin(l-c)*-d,M=Math.cos(l-c)*d,c&&(h*=Bh,_=Math.tan(c-h),_=Math.sqrt(1+_*_),S*=_,M*=_,h&&(_=Math.tan(h),_=Math.sqrt(1+_*_),x*=_,T*=_)),x=Zn(x),T=Zn(T),S=Zn(S),M=Zn(M)):(x=u,M=d,T=S=0),(I&&!~(o+"").indexOf("px")||y&&!~(a+"").indexOf("px"))&&(I=Ja(f,"x",o,"px"),y=Ja(f,"y",a,"px")),(g||p||m||C)&&(I=Zn(I+g-(g*x+p*S)+m),y=Zn(y+p-(g*T+p*M)+C)),(r||s)&&(_=f.getBBox(),I=Zn(I+r/100*_.width),y=Zn(y+s/100*_.height)),_="matrix("+x+","+T+","+S+","+M+","+I+","+y+")",f.setAttribute("transform",_),A&&(f.style[Ln]=_)},Kj=function(e,t,n,r,s){var o=360,a=_i(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Nl:1),c=l-r,h=r+c+"deg",u,d;return a&&(u=s.split("_")[1],u==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),u==="cw"&&c<0?c=(c+o*Pb)%o-~~(c/o)*o:u==="ccw"&&c>0&&(c=(c-o*Pb)%o-~~(c/o)*o)),e._pt=d=new dr(e._pt,t,n,r,c,Rj),d.e=h,d.u="deg",e._props.push(n),d},Ub=function(e,t){for(var n in t)e[n]=t[n];return e},jj=function(e,t,n){var r=Ub({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,l,c,h,u,d,f,g;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Ln]=t,a=uf(n,1),pc(n,Ln),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Ln],o[Ln]=t,a=uf(n,1),o[Ln]=c);for(l in qo)c=r[l],h=a[l],c!==h&&s.indexOf(l)<0&&(f=Di(c),g=Di(h),u=f!==g?Ja(n,l,c,g):parseFloat(c),d=parseFloat(h),e._pt=new dr(e._pt,a,l,u,d-u,fA),e._pt.u=g||0,e._props.push(l));Ub(a,r)};ur("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",r="Bottom",s="Left",o=(e<3?[t,n,r,s]:[t+s,t+n,r+n,r+s]).map(function(a){return e<2?i+a:"border"+a+i});Hp[e>1?"border"+i:i]=function(a,l,c,h,u){var d,f;if(arguments.length<4)return d=o.map(function(g){return No(a,g,c)}),f=d.join(" "),f.split(d[0]).length===5?d[0]:f;d=(h+"").split(" "),f={},o.forEach(function(g,p){return f[g]=d[p]=d[p]||d[(p-1)/2|0]}),a.init(l,f,u)}});var g8={name:"css",register:pA,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,s){var o=this._props,a=e.style,l=n.vars.startAt,c,h,u,d,f,g,p,m,C,A,I,y,x,T,S,M;N3||pA(),this.styles=this.styles||a8(e),M=this.styles.props,this.tween=n;for(p in t)if(p!=="autoRound"&&(h=t[p],!(br[p]&&$S(p,t,n,r,e,s)))){if(f=typeof h,g=Hp[p],f==="function"&&(h=h.call(n,r,e,s),f=typeof h),f==="string"&&~h.indexOf("random(")&&(h=af(h)),g)g(this,e,p,h,n)&&(S=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),h+="",za.lastIndex=0,za.test(c)||(m=Di(c),C=Di(h)),C?m!==C&&(c=Ja(e,p,c,C)+C):m&&(h+=m),this.add(a,"setProperty",c,h,r,s,0,0,p),o.push(p),M.push(p,0,a[p]);else if(f!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(n,r,e,s):l[p],_i(c)&&~c.indexOf("random(")&&(c=af(c)),Di(c+"")||c==="auto"||(c+=Rr.units[p]||Di(No(e,p))||""),(c+"").charAt(1)==="="&&(c=No(e,p))):c=No(e,p),d=parseFloat(c),A=f==="string"&&h.charAt(1)==="="&&h.substr(0,2),A&&(h=h.substr(2)),u=parseFloat(h),p in $s&&(p==="autoAlpha"&&(d===1&&No(e,"visibility")==="hidden"&&u&&(d=0),M.push("visibility",0,a.visibility),Na(this,a,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),p!=="scale"&&p!=="transform"&&(p=$s[p],~p.indexOf(",")&&(p=p.split(",")[0]))),I=p in qo,I){if(this.styles.save(p),y||(x=e._gsap,x.renderTransform&&!t.parseTransform||uf(e,t.parseTransform),T=t.smoothOrigin!==!1&&x.smooth,y=this._pt=new dr(this._pt,a,Ln,0,1,x.renderTransform,x,0,-1),y.dep=1),p==="scale")this._pt=new dr(this._pt,x,"scaleY",x.scaleY,(A?Lh(x.scaleY,A+u):u)-x.scaleY||0,fA),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){M.push(fr,0,a[fr]),h=Hj(h),x.svg?mA(e,h,0,T,0,this):(C=parseFloat(h.split(" ")[2])||0,C!==x.zOrigin&&Na(this,x,"zOrigin",x.zOrigin,C),Na(this,a,p,zp(c),zp(h)));continue}else if(p==="svgOrigin"){mA(e,h,1,T,0,this);continue}else if(p in u8){Kj(this,x,p,d,A?Lh(d,A+h):h);continue}else if(p==="smoothOrigin"){Na(this,x,"smooth",x.smooth,h);continue}else if(p==="force3D"){x[p]=h;continue}else if(p==="transform"){jj(this,h,e);continue}}else p in a||(p=su(p)||p);if(I||(u||u===0)&&(d||d===0)&&!Lj.test(h)&&p in a)m=(c+"").substr((d+"").length),u||(u=0),C=Di(h)||(p in Rr.units?Rr.units[p]:m),m!==C&&(d=Ja(e,p,c,C)),this._pt=new dr(this._pt,I?x:a,p,d,(A?Lh(d,A+u):u)-d,!I&&(C==="px"||p==="zIndex")&&t.autoRound!==!1?Pj:fA),this._pt.u=C||0,m!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=Bj);else if(p in a)Wj.call(this,e,p,c,A?A+h:h);else if(p in e)this.add(e,p,c||e[p],A?A+h:h,r,s);else if(p!=="parseTransform"){E3(p,h);continue}I||(p in a?M.push(p,0,a[p]):typeof e[p]=="function"?M.push(p,2,e[p]()):M.push(p,1,c||e[p])),o.push(p)}}S&&n8(this)},render:function(e,t){if(t.tween._time||!k3())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:No,aliases:$s,getSetter:function(e,t,n){var r=$s[t];return r&&r.indexOf(",")<0&&(t=r),t in qo&&t!==fr&&(e._gsap.x||No(e,"x"))?n&&Bb===n?t==="scale"?Nj:Fj:(Bb=n||{})&&(t==="scale"?kj:Oj):e.style&&!w3(e.style[t])?Gj:~t.indexOf("-")?Dj:D3(e,t)},core:{_removeProperty:pc,_getMatrix:U3}};pr.utils.checkPrefix=su;pr.core.getStyleSaver=a8;(function(i,e,t,n){var r=ur(i+","+e+","+t,function(s){qo[s]=1});ur(e,function(s){Rr.units[s]="deg",u8[s]=1}),$s[r[13]]=i+","+e,ur(n,function(s){var o=s.split(":");$s[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ur("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Rr.units[i]="px"});pr.registerPlugin(g8);var Fd=pr.registerPlugin(g8)||pr;Fd.core.Tween;const Tn={width:0,height:0,pixelRatio:0};let Ur=null;const Zr={},_l=new f3;let cs=new Ai(75,Tn.width/Tn.height,.1,1e3),Eo,rr={x:void 0,y:void 0},Zb=0,Vb=0;const $j=new aS,sr=new Kr,EC=new Kr,Jj=new Kr;let $u=[],MC=[];const Bg=[],Pg=[],Qj=i=>{let e,t=null;function n(){return i.coords?MC.filter(({lat:f,lon:g})=>f>=i.coords.minLat&&f<=i.coords.maxLat&&g>=i.coords.minLon&&g<=i.coords.maxLon):[]}function r(f){if(!i.coords)return null;const g=(i.coords.minLat+i.coords.maxLat)/2,p=(i.coords.minLon+i.coords.maxLon)/2;return f.filter(({lat:C,lon:A})=>C>=i.coords.minLat&&C<=i.coords.maxLat&&A>=i.coords.minLon&&A<=i.coords.maxLon).reduce((C,A)=>{const I=Math.hypot(A.lat-g,A.lon-p);return!C||I<C.distance?{...A,distance:I}:C},null)}function s(){const f=n();if(f.length===0)return;const g=r(f),p=l(Array.of(g),10.1);o(p)}function o(f){if(!f||f.length!==3)return;const g=new Y(...f).normalize();let p=-Math.asin(g.y),m=-Math.atan2(-g.x,g.z),C=Math.PI;const A=(I,y)=>{for(;I-y>Math.PI;)I-=2*Math.PI;for(;I-y<-Math.PI;)I+=2*Math.PI;return I};p=A(p,sr.rotation.x),m=A(m,sr.rotation.y),C=A(C,sr.rotation.z),Fd.to(sr.rotation,{x:p,y:m,z:C,duration:2,ease:"power2.inOut"})}function a(){sr.position.set(i.groupPosition.x,i.groupPosition.y,i.groupPosition.z),cs=new Ai(75,Tn.width/Tn.height,.1,1e3),cs.position.set(0,0,18),_l.add(cs),Eo=new b3({canvas:e}),h(),Eo.setSize(Tn.width,Tn.height),Eo.setPixelRatio(Math.min(window.devicePixelRatio,2));const f={};f.interactivePlane=new jn(new Rd(10,64,64),new Zo({color:"red"})),f.interactivePlane.position.set(0,0,0),f.interactivePlane.visible=!1,f.raycaster=new lS,f.canvasCursor=[],f.texture=new Q7(f.canvas),sr.add(f.interactivePlane),(!$u||$u.length%3!==0)&&console.error("Invalid positions array. Must be a multiple of 3.");const g=new Float32Array($u.length/3).fill(6),p=new gr;p.setAttribute("position",new Ui($u,3)),p.setAttribute("size",new yi(g,1));const m={};m.instance=p,m.count=m.instance.attributes.position.count;const C={};C.size=Math.ceil(Math.sqrt(m.count)),C.computation=new LK(C.size,C.size,Eo);const A=C.computation.createTexture();for(let fe=0;fe<m.count;fe++){const ae=fe*3,Ce=fe*4;A.image.data[Ce+0]=m.instance.attributes.position.array[ae+0],A.image.data[Ce+1]=m.instance.attributes.position.array[ae+1],A.image.data[Ce+2]=m.instance.attributes.position.array[ae+2],A.image.data[Ce+3]=Math.random()}C.particlesVariable=C.computation.addVariable("uParticles",DK,A),C.computation.setVariableDependencies(C.particlesVariable,[C.particlesVariable]),C.particlesVariable.material.uniforms.uDisplacementTexture=new Xi(f.texture),C.particlesVariable.material.uniforms.uCoord=new Xi(new Y(-1,-1,-1)),C.particlesVariable.material.uniforms.uTime=new Xi(0),C.particlesVariable.material.uniforms.uDeltaTime=new Xi(0),C.particlesVariable.material.uniforms.uBase=new Xi(A),C.particlesVariable.material.uniforms.uRotationMatrix=new Xi(new xt),C.particlesVariable.material.uniforms.isHovered=new Xi(0),C.particlesVariable.material.uniforms.uRadius=new Xi(0),C.computation.init(),C.debug=new jn(new yu(6,6),new Zo({map:C.computation.getCurrentRenderTarget(C.particlesVariable).texture})),C.debug.position.x+=5;const I=new Float32Array(m.count*2),y=new Float32Array(m.count*1);for(let fe=0;fe<C.size;fe++)for(let ae=0;ae<C.size;ae++){const Ce=fe*C.size+ae,Je=Ce*2,Se=(ae+.5)/C.size,qe=(fe+.5)/C.size;I[Je+0]=Se,I[Je+1]=qe,y[Ce]=Math.random(),Pg[Ce*3+0]=Bg[Ce*3+0],Pg[Ce*3+1]=Bg[Ce*3+1],Pg[Ce*3+2]=Bg[Ce*3+2]}Zr.geometry=new gr,Zr.geometry.setDrawRange(0,m.count),Zr.geometry.setAttribute("aParticlesUv",new yi(I,2)),Zr.geometry.setAttribute("aSize",new yi(y,1)),Zr.geometry.setAttribute("aColorv",new Ui(Pg,3)),Zr.material=new Ni({vertexShader:RK,fragmentShader:BK,uniforms:{uSize:new Xi(.03),uResolution:new Xi(new Pt(Tn.width*Tn.pixelRatio,Tn.height*Tn.pixelRatio)),uParticlesTexture:new Xi,highlightedUvs:new Xi}}),Zr.points=new J7(Zr.geometry,Zr.material),sr.add(Zr.points);const x=new Rd(9.99,64,64),T=new O0({color:0}),S=new jn(x,T);sr.add(S);const M=new oS;_l.add(M);const _=new Rd(10.05,64,64),v=new Ni({vertexShader:PK,fragmentShader:GK,uniforms:{uAtmosphereColor:new Xi(new _t(10066162))},transparent:!0,depthWrite:!1,blending:lI,side:oo}),B=new jn(_,v);sr.add(B),Fd.to(sr.rotation,{x:.5590292412159591,y:1.3959225169759335,z:3.14159265358979,duration:2,ease:"power2.inOut"}),EC.add(sr),_l.add(EC),Eo.render(_l,cs);const E=()=>{if(!f.raycaster||!cs||!f.interactivePlane||rr.x===void 0||rr.y===void 0||ro())return;f.raycaster.setFromCamera(new Pt(rr.x,rr.y),cs);const fe=f.raycaster.intersectObject(f.interactivePlane);if(fe&&fe.length&&i.globeInView){const{point:ae}=fe[0],Ce=sr.worldToLocal(ae.clone());C.particlesVariable.material.uniforms.uCoord.value=Ce,C.particlesVariable.material.uniforms.isHovered.value=1}else C.particlesVariable.material.uniforms.uCoord.value=new Y(-1,-1,-1),C.particlesVariable.material.uniforms.isHovered.value=0},L=()=>{t=requestAnimationFrame(L);const fe=$j.getElapsedTime(),ae=fe-Vb;Vb=fe,E(),C.particlesVariable.material.uniforms.uDisplacementTexture.value=f.texture,C.particlesVariable.material.uniforms.uTime.value=fe,C.particlesVariable.material.uniforms.uDeltaTime.value=ae,C.particlesVariable.material.needsUpdate=!0,C.computation.compute(),Zr.material.uniforms.uParticlesTexture.value=C.computation.getCurrentRenderTarget(C.particlesVariable).texture,Zr.material.needsUpdate=!0,J(),Eo.render(_l,cs)};let G={x:0,y:0},Z=0,U=1;const V=1.5,z=6,le=.5,j=3;let re=Date.now();const Ae=200,xe=fe=>{rr.x=fe.clientX/Tn.width*2-1,rr.y=-(fe.clientY/Tn.height)*2+1,fe.clientX/Tn.width-.5,fe.clientY/Tn.height-.5;const ae=rr.x-G.x,Ce=rr.y-G.y,Je=Math.sqrt(ae*ae+Ce*Ce);Z=Math.max(Je*j,Z*.95);const Se=Math.min(V+(z-V)*Z,z);U=ql.lerp(U,Se,le),G={x:rr.x,y:rr.y},re=Date.now(),C.particlesVariable.material.uniforms.uDisplacementTexture.value=f.texture,C.particlesVariable.material.uniforms.uRadius.value=U,!(ro()||!i.globeInView)&&EC.lookAt(new Y(rr.x*4,rr.y*4,18))};function J(){Date.now()-re>Ae&&(U=ql.lerp(U,V,le),C.particlesVariable.material.uniforms.uRadius.value=U)}const oe=()=>{C.particlesVariable.material.uniforms.uRadius.value=0,rr.x=-1,rr.y=-1};e.addEventListener("pointermove",xe),e.addEventListener("pointerleave",oe),L()}function l(f,g){const p=[];return f.forEach(({x:m,y:C})=>{const A=m/Ur.width,I=C/Ur.height,y=A*360-180,T=(90-(I*180-90))*(Math.PI/180),S=y*(Math.PI/180),M=g*Math.sin(T)*Math.cos(S),_=g*Math.cos(T),v=g*Math.sin(T)*Math.sin(S);p.push(M,_,v)}),p}function c(){$u=l(MC,10),a()}const h=()=>{window.innerWidth!==Zb&&(Zb=window.innerWidth,Tn.width=e.parentElement.getBoundingClientRect().width,Tn.height=e.parentElement.getBoundingClientRect().height,Tn.pixelRatio=window.devicePixelRatio,cs.aspect=Tn.width/Tn.height,window.innerWidth<769?cs.position.set(0,0,19):cs.position.set(0,0,18),s(),Eo.setPixelRatio(Math.min(window.devicePixelRatio,2)),Eo.setSize(Tn.width,Tn.height),cs.updateProjectionMatrix())};function u(){_l?.traverse(f=>{f.isMesh&&(f.geometry&&f.geometry.dispose(),f.material&&(Array.isArray(f.material)?f.material.forEach(g=>{g.dispose(),g.map&&g.map.dispose()}):(f.material.dispose(),f.material.map&&f.material.map.dispose())))}),sr.clear(),Jj.clear(),_l.clear(),Eo.dispose(),t!==null&&(cancelAnimationFrame(t),t=null)}function d(f,g,p){return f.map(({x:m,y:C})=>{const A=m/g*360-180,I=(p-C)/p*180-90;return{x:m,y:C,lat:I,lon:A}})}return mt(()=>{i.coords&&s()}),mt(()=>{(({x:g,y:p,z:m})=>g!==0||p!==0||m!==0)(i.groupPosition)||Fd.to(sr.position,{duration:3,x:i.groupPosition.x,y:i.groupPosition.y,z:i.groupPosition.z,ease:"power4.inOut",onComplete:()=>{document.body.style.overflow="auto",i.setGlobeVisible(!0)}})}),tr(()=>{Tn.width=e.parentElement.getBoundingClientRect().width,Tn.height=e.parentElement.getBoundingClientRect().height,Ur=document.createElement("canvas");const f=Ur.getContext("2d"),g=new Image;g.src="/earth_specular_map_simplified2.jpg",g.onload=()=>{Ur.width=g.width,Ur.height=g.height,f?.drawImage(g,0,0);const p=f?.getImageData(0,0,Ur.width,Ur.height);if(!p)return;const m=[];for(let C=0;C<p.data.length;C+=400){const A=p.data[C],I=p.data[C+1],y=p.data[C+2];if(A<254&&I<254&&y<=255){const x=C/4%Ur.width,T=Math.floor(C/4/Ur.width);m.push({x,y:T}),Bg.push(A/255,I/255,y/255)}}MC=d(m,Ur.width,Ur.height),c()},window.addEventListener("resize",h),an(()=>{u(),window.removeEventListener("resize",h)})}),F($.Generic,{ref(f){const g=e;typeof g=="function"?g(f):e=f},css:{position:"absolute",inset:"0px",height:"100%",width:"100%"},as:"canvas"})},qj=({str:i,callback:e})=>{const[t,n]=tn(!1);let r=null;return mt(()=>{if(!r)return;new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&(n(!0),e&&typeof e=="function"&&e())})},{threshold:.5,rootMargin:"-50% 0px 0px 0px"}).observe(r)}),F($.Generic,{css:{maxWidth:"900rem",paddingLeft:"40rem",paddingRight:"40rem"},as:"div",ref(s){const o=r;typeof o=="function"?o(s):r=s},get children(){return[F($.Generic,{get css(){return[{marginLeft:"auto",marginRight:"auto",textAlign:"center",textTransform:"uppercase","@media (max-width: 767px)":{maxWidth:"300rem"}},ht.breit.h4,ht.m.breit.h3]},as:"h1",get children(){return F(Nn,{get each(){return i.split(" ")},children:(s,o)=>F($.Generic,{get style(){return{"transition-duration":"1000ms","transition-delay":`${o()*500}ms`,"transition-property":"top, opacity, filter"}},get css(){return[{position:"relative"},{top:t()?"0":"40px",opacity:t()?1:0,filter:t()?"blur(0)":"blur(10px)"}]},as:"span",get children(){return s+(o()===i.split(" ").length-1?"":" ")}})})}}),F($.Generic,{get css(){return[{position:"relative",marginTop:"32rem",textAlign:"center",color:"rgb(255 255 255 / 0.5)"},ht.sohne.body2,ht.m.sohne.body2]},as:"p",get style(){return{"transition-duration":"1000ms","transition-delay":"800ms","transition-property":"top, opacity, filter",top:t()?"0":"40px",opacity:t()?1:0,filter:t()?"blur(0)":"blur(10px)"}},children:"Our globally distributed team is composed of industry-leading talent, bringing diverse perspectives and expertise to every project."})]}})};/*!
 * ScrollToPlugin 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fi,p8,jo,Js,Ya,m8,Ph,Gg,C8=function(){return typeof window<"u"},I8=function(){return Fi||C8()&&(Fi=window.gsap)&&Fi.registerPlugin&&Fi},A8=function(e){return typeof e=="string"},Wb=function(e){return typeof e=="function"},df=function(e,t){var n=t==="x"?"Width":"Height",r="scroll"+n,s="client"+n;return e===jo||e===Js||e===Ya?Math.max(Js[r],Ya[r])-(jo["inner"+n]||Js[s]||Ya[s]):e[r]-e["offset"+n]},ff=function(e,t){var n="scroll"+(t==="x"?"Left":"Top");return e===jo&&(e.pageXOffset!=null?n="page"+t.toUpperCase()+"Offset":e=Js[n]!=null?Js:Ya),function(){return e[n]}},e$=function(e,t,n,r){if(Wb(e)&&(e=e(t,n,r)),typeof e!="object")return A8(e)&&e!=="max"&&e.charAt(1)!=="="?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var s={},o;for(o in e)s[o]=o!=="onAutoKill"&&Wb(e[o])?e[o](t,n,r):e[o];return s},y8=function(e,t){if(e=m8(e)[0],!e||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=e.getBoundingClientRect(),r=!t||t===jo||t===Ya,s=r?{top:Js.clientTop-(jo.pageYOffset||Js.scrollTop||Ya.scrollTop||0),left:Js.clientLeft-(jo.pageXOffset||Js.scrollLeft||Ya.scrollLeft||0)}:t.getBoundingClientRect(),o={x:n.left-s.left,y:n.top-s.top};return!r&&t&&(o.x+=ff(t,"x")(),o.y+=ff(t,"y")()),o},Hb=function(e,t,n,r,s){return!isNaN(e)&&typeof e!="object"?parseFloat(e)-s:A8(e)&&e.charAt(1)==="="?parseFloat(e.substr(2))*(e.charAt(0)==="-"?-1:1)+r-s:e==="max"?df(t,n)-s:Math.min(df(t,n),y8(e,t)[n]-s)},CA=function(){Fi=I8(),C8()&&Fi&&typeof document<"u"&&document.body&&(jo=window,Ya=document.body,Js=document.documentElement,m8=Fi.utils.toArray,Fi.config({autoKillThreshold:7}),Ph=Fi.config(),p8=1)},wu={version:"3.12.7",name:"scrollTo",rawVars:1,register:function(e){Fi=e,CA()},init:function(e,t,n,r,s){p8||CA();var o=this,a=Fi.getProperty(e,"scrollSnapType");o.isWin=e===jo,o.target=e,o.tween=n,t=e$(t,r,e,s),o.vars=t,o.autoKill=!!("autoKill"in t?t:Ph).autoKill,o.getX=ff(e,"x"),o.getY=ff(e,"y"),o.x=o.xPrev=o.getX(),o.y=o.yPrev=o.getY(),Gg||(Gg=Fi.core.globals().ScrollTrigger),Fi.getProperty(e,"scrollBehavior")==="smooth"&&Fi.set(e,{scrollBehavior:"auto"}),a&&a!=="none"&&(o.snap=1,o.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),t.x!=null?(o.add(o,"x",o.x,Hb(t.x,e,"x",o.x,t.offsetX||0),r,s),o._props.push("scrollTo_x")):o.skipX=1,t.y!=null?(o.add(o,"y",o.y,Hb(t.y,e,"y",o.y,t.offsetY||0),r,s),o._props.push("scrollTo_y")):o.skipY=1},render:function(e,t){for(var n=t._pt,r=t.target,s=t.tween,o=t.autoKill,a=t.xPrev,l=t.yPrev,c=t.isWin,h=t.snap,u=t.snapInline,d,f,g,p,m;n;)n.r(e,n.d),n=n._next;d=c||!t.skipX?t.getX():a,f=c||!t.skipY?t.getY():l,g=f-l,p=d-a,m=Ph.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),o&&(!t.skipX&&(p>m||p<-m)&&d<df(r,"x")&&(t.skipX=1),!t.skipY&&(g>m||g<-m)&&f<df(r,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(s.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(s,t.vars.onAutoKillParams||[]))),c?jo.scrollTo(t.skipX?d:t.x,t.skipY?f:t.y):(t.skipY||(r.scrollTop=t.y),t.skipX||(r.scrollLeft=t.x)),h&&(e===1||e===0)&&(f=r.scrollTop,d=r.scrollLeft,u?r.style.scrollSnapType=u:r.style.removeProperty("scroll-snap-type"),r.scrollTop=f+1,r.scrollLeft=d+1,r.scrollTop=f,r.scrollLeft=d),t.xPrev=t.x,t.yPrev=t.y,Gg&&Gg.update()},kill:function(e){var t=e==="scrollTo",n=this._props.indexOf(e);return(t||e==="scrollTo_x")&&(this.skipX=1),(t||e==="scrollTo_y")&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};wu.max=df;wu.getOffset=y8;wu.buildGetter=ff;wu.config=function(i){Ph||CA()||(Ph=Fi.config());for(var e in i)Ph[e]=i[e]};I8()&&Fi.registerPlugin(wu);Fd.registerPlugin(wu);const LC={europe:"Europe","north america":"North America","south america":"South America"},t$={europe:{minLat:37,maxLat:70,minLon:-10,maxLon:35},"north america":{minLat:26,maxLat:49.384358,minLon:-125,maxLon:-66.93457},"south america":{minLat:-55.98,maxLat:12.45,minLon:-81.33,maxLon:-34.79}},Ure=i=>{const e=ux,[t,n]=tn(""),[r,s]=tn(""),[o,a]=tn(null),[l,c]=tn(!0),[h,u]=tn(!1),[d,f]=tn({x:0,y:-5,z:5});let g=!1,p=null,m=null,C=null,A=null,I=null,y=850;const x=pe(()=>e()<=pi.MD?400:500),T=Gi(()=>C),S=Gi(()=>m);Gi(()=>I);const M=Gi(()=>A),_=Gi(()=>p);let v=pe(()=>S().width-_().width+$l(x())+dn().height*1.5);const B=pe(()=>-qi(Vn()-_().y-dn().height*.5,0,v()-dn().height*1.5));mt(()=>{if(r()===""||h()===!1)return;c(!1),a(t$[r()]);const L=setTimeout(()=>{n(LC[r()]),c(!0)},t().length*100);an(()=>clearTimeout(L))});const E=pe(()=>{if(g)return 1;const G=(Vn()+(M().height+y)-T().y+dn().height-dn().height)/(dn().height*1.5-dn().height)*.4;return qi(G,.5,1)});return mt(()=>{E()>=1&&d().z===5&&(g=!0,f({x:0,y:0,z:0}))}),tr(()=>{setTimeout(()=>{zd(zd()+1)})}),F($.Generic,{css:{position:"relative",width:"100%"},as:"section",ref(L){const G=C;typeof G=="function"?G(L):C=L},get children(){return[F($.Generic,{css:{inset:"0px",display:"flex",width:"100%",justifyContent:"center",paddingBottom:"20rem",paddingTop:"200rem","@media (max-width: 767px)":{paddingBottom:"0",paddingTop:"100rem"}},as:"div",ref(L){const G=A;typeof G=="function"?G(L):A=L},get children(){return F(qj,{str:"Global Disruption"})}}),F($.Generic,{get css(){return{height:`${v()}px`}},as:"div",ref(L){const G=p;typeof G=="function"?G(L):p=L},get children(){return F(N0,{get type(){return fi.Regions},children:L=>F($.Generic,$n({css:[{position:"sticky",top:"0px",height:"100vh",overflow:"hidden"},Za],as:"div"},L,{get children(){return[F($.Generic,{css:{pointerEvents:"none",position:"absolute",inset:"0px",zIndex:"2",display:"flex",height:"100%",width:"300vw",flexWrap:"nowrap","@media (max-width: 767px)":{width:"400vw"}},as:"div",class:"hide-scrollbars",get style(){return{"will-change":"transform",transform:`translateX(${B()}px)`}},ref(G){const Z=m;typeof Z=="function"?Z(G):m=G},get children(){return Object.entries(LC).map(([,G],Z)=>F(n$,{setKey:s,setCoords:a,text:G,countries:LC}))}}),F($.Generic,{css:{pointerEvents:"none",position:"absolute",inset:"0px",zIndex:"2",display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},as:"div",get children(){return F($.Generic,{get css(){return[{textAlign:"center",textTransform:"uppercase"},ht.breit.h1,ht.m.breit.h05]},as:"h2",get children(){return F(Nn,{get each(){return t().split(" ").flatMap((G,Z,U)=>G.split("").map((V,z)=>({char:V,isLastInWord:z===G.length-1,isLastWord:Z===U.length-1})))},children:(G,Z)=>[F($.Generic,{css:{position:"relative",paddingLeft:"8px",paddingRight:"8px","@media (max-width: 767px)":{paddingLeft:"3px",paddingRight:"3px"}},as:"span",get style(){return{"animation-delay":`${Z()*100}ms`}},get class(){return l()?"fade-in-blur":"fade-out-blur"},get children(){return G.char}}),pe((()=>{const U=pe(()=>!G.isLastInWord&&!G.isLastWord);return()=>U()&&F($.Generic,{css:{display:"inline-block","--tw-content":"' '",content:"var(--tw-content)"},as:"span"})})()),pe((()=>{const U=pe(()=>!!(G.isLastInWord&&!G.isLastWord));return()=>U()&&F($.Generic,{css:{display:"block",width:"100%"},as:"span"})})())]})}})}}),F($.Generic,{css:{position:"absolute",inset:"0px",zIndex:"1",height:"100%",width:"100%",willChange:"transform, opacity"},as:"div",get style(){return{opacity:E(),transform:`translate3d(0, ${100-E()*100}%, 0)`}},ref(G){const Z=I;typeof Z=="function"?Z(G):I=G},get children(){return F(Qj,{get groupPosition(){return d()},get coords(){return o()},setGlobeVisible:u,get globeInView(){return I.getBoundingClientRect().top<=0}})}})]}}))})}})]}})},n$=i=>{let e=null;return mt(()=>{if(!e)return;const t=new IntersectionObserver(n=>{n.forEach(r=>{r.isIntersecting&&i.setKey(i.text.toLowerCase())})},{threshold:.5,rootMargin:"0px"});t.observe(e),an(()=>t.disconnect())}),F($.Generic,{css:{display:"flex",height:"100%",flex:"1 1 0%",flexShrink:"0",alignItems:"center",justifyContent:"center"},as:"div",ref(t){const n=e;typeof n=="function"?n(t):e=t}})};var xc=(i=>(i[i.WEBGL_LEGACY=0]="WEBGL_LEGACY",i[i.WEBGL=1]="WEBGL",i[i.WEBGL2=2]="WEBGL2",i))(xc||{}),_8=(i=>(i[i.UNKNOWN=0]="UNKNOWN",i[i.WEBGL=1]="WEBGL",i[i.CANVAS=2]="CANVAS",i))(_8||{}),IA=(i=>(i[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",i))(IA||{}),ct=(i=>(i[i.NORMAL=0]="NORMAL",i[i.ADD=1]="ADD",i[i.MULTIPLY=2]="MULTIPLY",i[i.SCREEN=3]="SCREEN",i[i.OVERLAY=4]="OVERLAY",i[i.DARKEN=5]="DARKEN",i[i.LIGHTEN=6]="LIGHTEN",i[i.COLOR_DODGE=7]="COLOR_DODGE",i[i.COLOR_BURN=8]="COLOR_BURN",i[i.HARD_LIGHT=9]="HARD_LIGHT",i[i.SOFT_LIGHT=10]="SOFT_LIGHT",i[i.DIFFERENCE=11]="DIFFERENCE",i[i.EXCLUSION=12]="EXCLUSION",i[i.HUE=13]="HUE",i[i.SATURATION=14]="SATURATION",i[i.COLOR=15]="COLOR",i[i.LUMINOSITY=16]="LUMINOSITY",i[i.NORMAL_NPM=17]="NORMAL_NPM",i[i.ADD_NPM=18]="ADD_NPM",i[i.SCREEN_NPM=19]="SCREEN_NPM",i[i.NONE=20]="NONE",i[i.SRC_OVER=0]="SRC_OVER",i[i.SRC_IN=21]="SRC_IN",i[i.SRC_OUT=22]="SRC_OUT",i[i.SRC_ATOP=23]="SRC_ATOP",i[i.DST_OVER=24]="DST_OVER",i[i.DST_IN=25]="DST_IN",i[i.DST_OUT=26]="DST_OUT",i[i.DST_ATOP=27]="DST_ATOP",i[i.ERASE=26]="ERASE",i[i.SUBTRACT=28]="SUBTRACT",i[i.XOR=29]="XOR",i))(ct||{}),Qs=(i=>(i[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN",i))(Qs||{}),ve=(i=>(i[i.RGBA=6408]="RGBA",i[i.RGB=6407]="RGB",i[i.RG=33319]="RG",i[i.RED=6403]="RED",i[i.RGBA_INTEGER=36249]="RGBA_INTEGER",i[i.RGB_INTEGER=36248]="RGB_INTEGER",i[i.RG_INTEGER=33320]="RG_INTEGER",i[i.RED_INTEGER=36244]="RED_INTEGER",i[i.ALPHA=6406]="ALPHA",i[i.LUMINANCE=6409]="LUMINANCE",i[i.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",i[i.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",i[i.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i))(ve||{}),Gh=(i=>(i[i.TEXTURE_2D=3553]="TEXTURE_2D",i[i.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",i[i.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",i[i.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",i[i.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",i[i.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",i[i.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",i[i.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i))(Gh||{}),Qe=(i=>(i[i.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",i[i.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",i[i.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",i[i.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",i[i.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",i[i.UNSIGNED_INT=5125]="UNSIGNED_INT",i[i.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",i[i.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",i[i.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",i[i.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",i[i.BYTE=5120]="BYTE",i[i.SHORT=5122]="SHORT",i[i.INT=5124]="INT",i[i.FLOAT=5126]="FLOAT",i[i.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",i[i.HALF_FLOAT=36193]="HALF_FLOAT",i))(Qe||{}),Ne=(i=>(i[i.FLOAT=0]="FLOAT",i[i.INT=1]="INT",i[i.UINT=2]="UINT",i))(Ne||{}),Vo=(i=>(i[i.NEAREST=0]="NEAREST",i[i.LINEAR=1]="LINEAR",i))(Vo||{}),Xa=(i=>(i[i.CLAMP=33071]="CLAMP",i[i.REPEAT=10497]="REPEAT",i[i.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i))(Xa||{}),uo=(i=>(i[i.OFF=0]="OFF",i[i.POW2=1]="POW2",i[i.ON=2]="ON",i[i.ON_MANUAL=3]="ON_MANUAL",i))(uo||{}),lr=(i=>(i[i.NPM=0]="NPM",i[i.UNPACK=1]="UNPACK",i[i.PMA=2]="PMA",i[i.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",i[i.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",i[i.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i))(lr||{}),Zs=(i=>(i[i.NO=0]="NO",i[i.YES=1]="YES",i[i.AUTO=2]="AUTO",i[i.BLEND=0]="BLEND",i[i.CLEAR=1]="CLEAR",i[i.BLIT=2]="BLIT",i))(Zs||{}),Z3=(i=>(i[i.AUTO=0]="AUTO",i[i.MANUAL=1]="MANUAL",i))(Z3||{}),Jr=(i=>(i.LOW="lowp",i.MEDIUM="mediump",i.HIGH="highp",i))(Jr||{}),ni=(i=>(i[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE",i[i.COLOR=4]="COLOR",i))(ni||{}),Kn=(i=>(i[i.NONE=0]="NONE",i[i.LOW=2]="LOW",i[i.MEDIUM=4]="MEDIUM",i[i.HIGH=8]="HIGH",i))(Kn||{}),no=(i=>(i[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",i))(no||{});const i$={createCanvas:(i,e)=>{const t=document.createElement("canvas");return t.width=i,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,e)=>fetch(i,e),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")},ke={ADAPTER:i$,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var RC=/iPhone/i,zb=/iPod/i,Yb=/iPad/i,Xb=/\biOS-universal(?:.+)Mac\b/i,BC=/\bAndroid(?:.+)Mobile\b/i,Kb=/Android/i,Kc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Dg=/Silk/i,Mo=/Windows Phone/i,jb=/\bWindows(?:.+)ARM\b/i,$b=/BlackBerry/i,Jb=/BB10/i,Qb=/Opera Mini/i,qb=/\b(CriOS|Chrome)(?:.+)Mobile/i,e4=/Mobile(?:.+)Firefox\b/i,t4=function(i){return typeof i<"u"&&i.platform==="MacIntel"&&typeof i.maxTouchPoints=="number"&&i.maxTouchPoints>1&&typeof MSStream>"u"};function r$(i){return function(e){return e.test(i)}}function n4(i){var e={userAgent:"",platform:"",maxTouchPoints:0};!i&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof i=="string"?e.userAgent=i:i&&i.userAgent&&(e={userAgent:i.userAgent,platform:i.platform,maxTouchPoints:i.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var r=r$(t),s={apple:{phone:r(RC)&&!r(Mo),ipod:r(zb),tablet:!r(RC)&&(r(Yb)||t4(e))&&!r(Mo),universal:r(Xb),device:(r(RC)||r(zb)||r(Yb)||r(Xb)||t4(e))&&!r(Mo)},amazon:{phone:r(Kc),tablet:!r(Kc)&&r(Dg),device:r(Kc)||r(Dg)},android:{phone:!r(Mo)&&r(Kc)||!r(Mo)&&r(BC),tablet:!r(Mo)&&!r(Kc)&&!r(BC)&&(r(Dg)||r(Kb)),device:!r(Mo)&&(r(Kc)||r(Dg)||r(BC)||r(Kb))||r(/\bokhttp\b/i)},windows:{phone:r(Mo),tablet:r(jb),device:r(Mo)||r(jb)},other:{blackberry:r($b),blackberry10:r(Jb),opera:r(Qb),firefox:r(e4),chrome:r(qb),device:r($b)||r(Jb)||r(Qb)||r(e4)||r(qb)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const s$=n4.default??n4,Wo=s$(globalThis.navigator);ke.RETINA_PREFIX=/@([0-9\.]+)x/;ke.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var v8={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function r(l,c,h){this.fn=l,this.context=c,this.once=h||!1}function s(l,c,h,u,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new r(h,u||l,d),g=t?t+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],h,u;if(this._eventsCount===0)return c;for(u in h=this._events)e.call(h,u)&&c.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},a.prototype.listeners=function(c){var h=t?t+c:c,u=this._events[h];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,g=new Array(f);d<f;d++)g[d]=u[d].fn;return g},a.prototype.listenerCount=function(c){var h=t?t+c:c,u=this._events[h];return u?u.fn?1:u.length:0},a.prototype.emit=function(c,h,u,d,f,g){var p=t?t+c:c;if(!this._events[p])return!1;var m=this._events[p],C=arguments.length,A,I;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),C){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,h),!0;case 3:return m.fn.call(m.context,h,u),!0;case 4:return m.fn.call(m.context,h,u,d),!0;case 5:return m.fn.call(m.context,h,u,d,f),!0;case 6:return m.fn.call(m.context,h,u,d,f,g),!0}for(I=1,A=new Array(C-1);I<C;I++)A[I-1]=arguments[I];m.fn.apply(m.context,A)}else{var y=m.length,x;for(I=0;I<y;I++)switch(m[I].once&&this.removeListener(c,m[I].fn,void 0,!0),C){case 1:m[I].fn.call(m[I].context);break;case 2:m[I].fn.call(m[I].context,h);break;case 3:m[I].fn.call(m[I].context,h,u);break;case 4:m[I].fn.call(m[I].context,h,u,d);break;default:if(!A)for(x=1,A=new Array(C-1);x<C;x++)A[x-1]=arguments[x];m[I].fn.apply(m[I].context,A)}}return!0},a.prototype.on=function(c,h,u){return s(this,c,h,u,!1)},a.prototype.once=function(c,h,u){return s(this,c,h,u,!0)},a.prototype.removeListener=function(c,h,u,d){var f=t?t+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===h&&(!d||g.once)&&(!u||g.context===u)&&o(this,f);else{for(var p=0,m=[],C=g.length;p<C;p++)(g[p].fn!==h||d&&!g[p].once||u&&g[p].context!==u)&&m.push(g[p]);m.length?this._events[f]=m.length===1?m[0]:m:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var h;return c?(h=t?t+c:c,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})(v8);var o$=v8.exports;const Zf=Ef(o$);var V3={exports:{}};V3.exports=Y0;V3.exports.default=Y0;function Y0(i,e,t){t=t||2;var n=e&&e.length,r=n?e[0]*t:i.length,s=b8(i,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,h,u,d,f;if(n&&(s=u$(i,e,s,t)),i.length>80*t){a=c=i[0],l=h=i[1];for(var g=t;g<r;g+=t)u=i[g],d=i[g+1],u<a&&(a=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=Math.max(c-a,h-l),f=f!==0?32767/f:0}return gf(s,o,t,a,l,f,0),o}function b8(i,e,t,n,r){var s,o;if(r===_A(i,e,t,n)>0)for(s=e;s<t;s+=n)o=i4(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=i4(s,i[s],i[s+1],o);return o&&X0(o,o.next)&&(mf(o),o=o.next),o}function mc(i,e){if(!i)return i;e||(e=i);var t=i,n;do if(n=!1,!t.steiner&&(X0(t,t.next)||Rn(t.prev,t,t.next)===0)){if(mf(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function gf(i,e,t,n,r,s,o){if(i){!o&&s&&m$(i,n,r,s);for(var a=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,s?l$(i,n,r,s):a$(i)){e.push(l.i/t|0),e.push(i.i/t|0),e.push(c.i/t|0),mf(i),i=c.next,a=c.next;continue}if(i=c,i===a){o?o===1?(i=c$(mc(i),e,t),gf(i,e,t,n,r,s,2)):o===2&&h$(i,e,t,n,r,s):gf(mc(i),e,t,n,r,s,1);break}}}}function a$(i){var e=i.prev,t=i,n=i.next;if(Rn(e,t,n)>=0)return!1;for(var r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,c=n.y,h=r<s?r<o?r:o:s<o?s:o,u=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,g=n.next;g!==e;){if(g.x>=h&&g.x<=d&&g.y>=u&&g.y<=f&&Ih(r,a,s,l,o,c,g.x,g.y)&&Rn(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function l$(i,e,t,n){var r=i.prev,s=i,o=i.next;if(Rn(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,c=o.x,h=r.y,u=s.y,d=o.y,f=a<l?a<c?a:c:l<c?l:c,g=h<u?h<d?h:d:u<d?u:d,p=a>l?a>c?a:c:l>c?l:c,m=h>u?h>d?h:d:u>d?u:d,C=AA(f,g,e,t,n),A=AA(p,m,e,t,n),I=i.prevZ,y=i.nextZ;I&&I.z>=C&&y&&y.z<=A;){if(I.x>=f&&I.x<=p&&I.y>=g&&I.y<=m&&I!==r&&I!==o&&Ih(a,h,l,u,c,d,I.x,I.y)&&Rn(I.prev,I,I.next)>=0||(I=I.prevZ,y.x>=f&&y.x<=p&&y.y>=g&&y.y<=m&&y!==r&&y!==o&&Ih(a,h,l,u,c,d,y.x,y.y)&&Rn(y.prev,y,y.next)>=0))return!1;y=y.nextZ}for(;I&&I.z>=C;){if(I.x>=f&&I.x<=p&&I.y>=g&&I.y<=m&&I!==r&&I!==o&&Ih(a,h,l,u,c,d,I.x,I.y)&&Rn(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;y&&y.z<=A;){if(y.x>=f&&y.x<=p&&y.y>=g&&y.y<=m&&y!==r&&y!==o&&Ih(a,h,l,u,c,d,y.x,y.y)&&Rn(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function c$(i,e,t){var n=i;do{var r=n.prev,s=n.next.next;!X0(r,s)&&x8(r,n,n.next,s)&&pf(r,s)&&pf(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),mf(n),mf(n.next),n=i=s),n=n.next}while(n!==i);return mc(n)}function h$(i,e,t,n,r,s){var o=i;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&A$(o,a)){var l=w8(o,a);o=mc(o,o.next),l=mc(l,l.next),gf(o,e,t,n,r,s,0),gf(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function u$(i,e,t,n){var r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,c=b8(i,a,l,n,!1),c===c.next&&(c.steiner=!0),r.push(I$(c));for(r.sort(d$),s=0;s<r.length;s++)t=f$(r[s],t);return t}function d$(i,e){return i.x-e.x}function f$(i,e){var t=g$(i,e);if(!t)return e;var n=w8(t,i);return mc(n,n.next),mc(t,t.next)}function g$(i,e){var t=e,n=i.x,r=i.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,c=o.x,h=o.y,u=1/0,d;t=o;do n>=t.x&&t.x>=c&&n!==t.x&&Ih(r<h?n:s,r,c,h,r<h?s:n,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(n-t.x),pf(t,i)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&p$(o,t)))&&(o=t,u=d)),t=t.next;while(t!==l);return o}function p$(i,e){return Rn(i.prev,i,e.prev)<0&&Rn(e.next,i,i.next)<0}function m$(i,e,t,n){var r=i;do r.z===0&&(r.z=AA(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,C$(r)}function C$(i){var e,t,n,r,s,o,a,l,c=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<c&&(a++,n=n.nextZ,!!n);e++);for(l=c;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,c*=2}while(o>1);return i}function AA(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function I$(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function Ih(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function A$(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!y$(i,e)&&(pf(i,e)&&pf(e,i)&&_$(i,e)&&(Rn(i.prev,i,e.prev)||Rn(i,e.prev,e))||X0(i,e)&&Rn(i.prev,i,i.next)>0&&Rn(e.prev,e,e.next)>0)}function Rn(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function X0(i,e){return i.x===e.x&&i.y===e.y}function x8(i,e,t,n){var r=Ng(Rn(i,e,t)),s=Ng(Rn(i,e,n)),o=Ng(Rn(t,n,i)),a=Ng(Rn(t,n,e));return!!(r!==s&&o!==a||r===0&&Fg(i,t,e)||s===0&&Fg(i,n,e)||o===0&&Fg(t,i,n)||a===0&&Fg(t,e,n))}function Fg(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function Ng(i){return i>0?1:i<0?-1:0}function y$(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&x8(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function pf(i,e){return Rn(i.prev,i,i.next)<0?Rn(i,e,i.next)>=0&&Rn(i,i.prev,e)>=0:Rn(i,e,i.prev)<0||Rn(i,i.next,e)<0}function _$(i,e){var t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function w8(i,e){var t=new yA(i.i,i.x,i.y),n=new yA(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function i4(i,e,t,n){var r=new yA(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function mf(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function yA(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Y0.deviation=function(i,e,t,n){var r=e&&e.length,s=r?e[0]*t:i.length,o=Math.abs(_A(i,0,s,t));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,h=a<l-1?e[a+1]*t:i.length;o-=Math.abs(_A(i,c,h,t))}var u=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,f=n[a+1]*t,g=n[a+2]*t;u+=Math.abs((i[d]-i[g])*(i[f+1]-i[d+1])-(i[d]-i[f])*(i[g+1]-i[d+1]))}return o===0&&u===0?0:Math.abs((u-o)/o)};function _A(i,e,t,n){for(var r=0,s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}Y0.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,r=0;r<i.length;r++){for(var s=0;s<i[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(i[r][s][o]);r>0&&(n+=i[r-1].length,t.holes.push(n))}return t};var v$=V3.exports;const b$=Ef(v$);var Yp={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Yp.exports;(function(i,e){(function(t){var n=e&&!e.nodeType&&e,r=i&&!i.nodeType&&i,s=typeof p1=="object"&&p1;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,c=1,h=26,u=38,d=700,f=72,g=128,p="-",m=/^xn--/,C=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=l-c,x=Math.floor,T=String.fromCharCode,S;function M(j){throw new RangeError(I[j])}function _(j,re){for(var Ae=j.length,xe=[];Ae--;)xe[Ae]=re(j[Ae]);return xe}function v(j,re){var Ae=j.split("@"),xe="";Ae.length>1&&(xe=Ae[0]+"@",j=Ae[1]),j=j.replace(A,".");var J=j.split("."),oe=_(J,re).join(".");return xe+oe}function B(j){for(var re=[],Ae=0,xe=j.length,J,oe;Ae<xe;)J=j.charCodeAt(Ae++),J>=55296&&J<=56319&&Ae<xe?(oe=j.charCodeAt(Ae++),(oe&64512)==56320?re.push(((J&1023)<<10)+(oe&1023)+65536):(re.push(J),Ae--)):re.push(J);return re}function E(j){return _(j,function(re){var Ae="";return re>65535&&(re-=65536,Ae+=T(re>>>10&1023|55296),re=56320|re&1023),Ae+=T(re),Ae}).join("")}function L(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:l}function G(j,re){return j+22+75*(j<26)-((re!=0)<<5)}function Z(j,re,Ae){var xe=0;for(j=Ae?x(j/d):j>>1,j+=x(j/re);j>y*h>>1;xe+=l)j=x(j/y);return x(xe+(y+1)*j/(j+u))}function U(j){var re=[],Ae=j.length,xe,J=0,oe=g,fe=f,ae,Ce,Je,Se,qe,ot,$e,O,$t;for(ae=j.lastIndexOf(p),ae<0&&(ae=0),Ce=0;Ce<ae;++Ce)j.charCodeAt(Ce)>=128&&M("not-basic"),re.push(j.charCodeAt(Ce));for(Je=ae>0?ae+1:0;Je<Ae;){for(Se=J,qe=1,ot=l;Je>=Ae&&M("invalid-input"),$e=L(j.charCodeAt(Je++)),($e>=l||$e>x((a-J)/qe))&&M("overflow"),J+=$e*qe,O=ot<=fe?c:ot>=fe+h?h:ot-fe,!($e<O);ot+=l)$t=l-O,qe>x(a/$t)&&M("overflow"),qe*=$t;xe=re.length+1,fe=Z(J-Se,xe,Se==0),x(J/xe)>a-oe&&M("overflow"),oe+=x(J/xe),J%=xe,re.splice(J++,0,oe)}return E(re)}function V(j){var re,Ae,xe,J,oe,fe,ae,Ce,Je,Se,qe,ot=[],$e,O,$t,St;for(j=B(j),$e=j.length,re=g,Ae=0,oe=f,fe=0;fe<$e;++fe)qe=j[fe],qe<128&&ot.push(T(qe));for(xe=J=ot.length,J&&ot.push(p);xe<$e;){for(ae=a,fe=0;fe<$e;++fe)qe=j[fe],qe>=re&&qe<ae&&(ae=qe);for(O=xe+1,ae-re>x((a-Ae)/O)&&M("overflow"),Ae+=(ae-re)*O,re=ae,fe=0;fe<$e;++fe)if(qe=j[fe],qe<re&&++Ae>a&&M("overflow"),qe==re){for(Ce=Ae,Je=l;Se=Je<=oe?c:Je>=oe+h?h:Je-oe,!(Ce<Se);Je+=l)St=Ce-Se,$t=l-Se,ot.push(T(G(Se+St%$t,0))),Ce=x(St/$t);ot.push(T(G(Ce,0))),oe=Z(Ae,O,xe==J),Ae=0,++xe}++Ae,++re}return ot.join("")}function z(j){return v(j,function(re){return m.test(re)?U(re.slice(4).toLowerCase()):re})}function le(j){return v(j,function(re){return C.test(re)?"xn--"+V(re):re})}if(o={version:"1.4.1",ucs2:{decode:B,encode:E},decode:U,encode:V,toASCII:le,toUnicode:z},n&&r)if(i.exports==n)r.exports=o;else for(S in o)o.hasOwnProperty(S)&&(n[S]=o[S]);else t.punycode=o})(p1)})(Yp,Yp.exports);var x$=Yp.exports,w$=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==r||o.enumerable!==!0)return!1}return!0},r4=typeof Symbol<"u"&&Symbol,S$=w$,T$=function(){return typeof r4!="function"||typeof Symbol!="function"||typeof r4("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:S$()},s4={foo:{}},E$=Object,M$=function(){return{__proto__:s4}.foo===s4.foo&&!({__proto__:null}instanceof E$)},L$="Function.prototype.bind called on incompatible ",PC=Array.prototype.slice,R$=Object.prototype.toString,B$="[object Function]",P$=function(e){var t=this;if(typeof t!="function"||R$.call(t)!==B$)throw new TypeError(L$+t);for(var n=PC.call(arguments,1),r,s=function(){if(this instanceof r){var h=t.apply(this,n.concat(PC.call(arguments)));return Object(h)===h?h:this}else return t.apply(e,n.concat(PC.call(arguments)))},o=Math.max(0,t.length-n.length),a=[],l=0;l<o;l++)a.push("$"+l);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r},G$=P$,S8=Function.prototype.bind||G$,o4={}.hasOwnProperty,GC=Function.prototype.call,D$=GC.bind?GC.bind(o4):function(i,e){return GC.call(o4,i,e)},Zt,ou=SyntaxError,T8=Function,Dh=TypeError,DC=function(i){try{return T8('"use strict"; return ('+i+").constructor;")()}catch{}},ac=Object.getOwnPropertyDescriptor;if(ac)try{ac({},"")}catch{ac=null}var FC=function(){throw new Dh},F$=ac?function(){try{return arguments.callee,FC}catch{try{return ac(arguments,"callee").get}catch{return FC}}}():FC,jc=T$(),N$=M$(),gi=Object.getPrototypeOf||(N$?function(i){return i.__proto__}:null),nh={},k$=typeof Uint8Array>"u"||!gi?Zt:gi(Uint8Array),lc={"%AggregateError%":typeof AggregateError>"u"?Zt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Zt:ArrayBuffer,"%ArrayIteratorPrototype%":jc&&gi?gi([][Symbol.iterator]()):Zt,"%AsyncFromSyncIteratorPrototype%":Zt,"%AsyncFunction%":nh,"%AsyncGenerator%":nh,"%AsyncGeneratorFunction%":nh,"%AsyncIteratorPrototype%":nh,"%Atomics%":typeof Atomics>"u"?Zt:Atomics,"%BigInt%":typeof BigInt>"u"?Zt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Zt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Zt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Zt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Zt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Zt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Zt:FinalizationRegistry,"%Function%":T8,"%GeneratorFunction%":nh,"%Int8Array%":typeof Int8Array>"u"?Zt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Zt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Zt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":jc&&gi?gi(gi([][Symbol.iterator]())):Zt,"%JSON%":typeof JSON=="object"?JSON:Zt,"%Map%":typeof Map>"u"?Zt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!jc||!gi?Zt:gi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Zt:Promise,"%Proxy%":typeof Proxy>"u"?Zt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Zt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Zt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!jc||!gi?Zt:gi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Zt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":jc&&gi?gi(""[Symbol.iterator]()):Zt,"%Symbol%":jc?Symbol:Zt,"%SyntaxError%":ou,"%ThrowTypeError%":F$,"%TypedArray%":k$,"%TypeError%":Dh,"%Uint8Array%":typeof Uint8Array>"u"?Zt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Zt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Zt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Zt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Zt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Zt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Zt:WeakSet};if(gi)try{null.error}catch(i){var O$=gi(gi(i));lc["%Error.prototype%"]=O$}var U$=function i(e){var t;if(e==="%AsyncFunction%")t=DC("async function () {}");else if(e==="%GeneratorFunction%")t=DC("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=DC("async function* () {}");else if(e==="%AsyncGenerator%"){var n=i("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=i("%AsyncGenerator%");r&&gi&&(t=gi(r.prototype))}return lc[e]=t,t},a4={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vf=S8,Xp=D$,Z$=Vf.call(Function.call,Array.prototype.concat),V$=Vf.call(Function.apply,Array.prototype.splice),l4=Vf.call(Function.call,String.prototype.replace),Kp=Vf.call(Function.call,String.prototype.slice),W$=Vf.call(Function.call,RegExp.prototype.exec),H$=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z$=/\\(\\)?/g,Y$=function(e){var t=Kp(e,0,1),n=Kp(e,-1);if(t==="%"&&n!=="%")throw new ou("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new ou("invalid intrinsic syntax, expected opening `%`");var r=[];return l4(e,H$,function(s,o,a,l){r[r.length]=a?l4(l,z$,"$1"):o||s}),r},X$=function(e,t){var n=e,r;if(Xp(a4,n)&&(r=a4[n],n="%"+r[0]+"%"),Xp(lc,n)){var s=lc[n];if(s===nh&&(s=U$(n)),typeof s>"u"&&!t)throw new Dh("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new ou("intrinsic "+e+" does not exist!")},W3=function(e,t){if(typeof e!="string"||e.length===0)throw new Dh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Dh('"allowMissing" argument must be a boolean');if(W$(/^%?[^%]*%?$/,e)===null)throw new ou("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Y$(e),r=n.length>0?n[0]:"",s=X$("%"+r+"%",t),o=s.name,a=s.value,l=!1,c=s.alias;c&&(r=c[0],V$(n,Z$([0,1],c)));for(var h=1,u=!0;h<n.length;h+=1){var d=n[h],f=Kp(d,0,1),g=Kp(d,-1);if((f==='"'||f==="'"||f==="`"||g==='"'||g==="'"||g==="`")&&f!==g)throw new ou("property names with quotes must have matching quotes");if((d==="constructor"||!u)&&(l=!0),r+="."+d,o="%"+r+"%",Xp(lc,o))a=lc[o];else if(a!=null){if(!(d in a)){if(!t)throw new Dh("base intrinsic for "+e+" exists, but the property is not available.");return}if(ac&&h+1>=n.length){var p=ac(a,d);u=!!p,u&&"get"in p&&!("originalValue"in p.get)?a=p.get:a=a[d]}else u=Xp(a,d),a=a[d];u&&!l&&(lc[o]=a)}}return a},E8={exports:{}};(function(i){var e=S8,t=W3,n=t("%Function.prototype.apply%"),r=t("%Function.prototype.call%"),s=t("%Reflect.apply%",!0)||e.call(r,n),o=t("%Object.getOwnPropertyDescriptor%",!0),a=t("%Object.defineProperty%",!0),l=t("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}i.exports=function(u){var d=s(e,r,arguments);if(o&&a){var f=o(d,"length");f.configurable&&a(d,"length",{value:1+l(0,u.length-(arguments.length-1))})}return d};var c=function(){return s(e,n,arguments)};a?a(i.exports,"apply",{value:c}):i.exports.apply=c})(E8);var K$=E8.exports,M8=W3,L8=K$,j$=L8(M8("String.prototype.indexOf")),$$=function(e,t){var n=M8(e,!!t);return typeof n=="function"&&j$(e,".prototype.")>-1?L8(n):n},H3=typeof Map=="function"&&Map.prototype,NC=Object.getOwnPropertyDescriptor&&H3?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,jp=H3&&NC&&typeof NC.get=="function"?NC.get:null,c4=H3&&Map.prototype.forEach,z3=typeof Set=="function"&&Set.prototype,kC=Object.getOwnPropertyDescriptor&&z3?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,$p=z3&&kC&&typeof kC.get=="function"?kC.get:null,h4=z3&&Set.prototype.forEach,J$=typeof WeakMap=="function"&&WeakMap.prototype,Nd=J$?WeakMap.prototype.has:null,Q$=typeof WeakSet=="function"&&WeakSet.prototype,kd=Q$?WeakSet.prototype.has:null,q$=typeof WeakRef=="function"&&WeakRef.prototype,u4=q$?WeakRef.prototype.deref:null,eJ=Boolean.prototype.valueOf,tJ=Object.prototype.toString,nJ=Function.prototype.toString,iJ=String.prototype.match,Y3=String.prototype.slice,ka=String.prototype.replace,rJ=String.prototype.toUpperCase,d4=String.prototype.toLowerCase,R8=RegExp.prototype.test,f4=Array.prototype.concat,Vs=Array.prototype.join,sJ=Array.prototype.slice,g4=Math.floor,vA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,OC=Object.getOwnPropertySymbols,bA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,au=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===au||"symbol")?Symbol.toStringTag:null,B8=Object.prototype.propertyIsEnumerable,p4=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(i){return i.__proto__}:null);function m4(i,e){if(i===1/0||i===-1/0||i!==i||i&&i>-1e3&&i<1e3||R8.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof i=="number"){var n=i<0?-g4(-i):g4(i);if(n!==i){var r=String(n),s=Y3.call(e,r.length+1);return ka.call(r,t,"$&_")+"."+ka.call(ka.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ka.call(e,t,"$&_")}var xA=zy,C4=xA.custom,I4=G8(C4)?C4:null,oJ=function i(e,t,n,r){var s=t||{};if(Sa(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Sa(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Sa(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Sa(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Sa(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return F8(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?m4(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?m4(e,c):c}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return wA(e)?"[Array]":"[Object]";var u=xJ(s,n);if(typeof r>"u")r=[];else if(D8(r,e)>=0)return"[Circular]";function d(L,G,Z){if(G&&(r=sJ.call(r),r.push(G)),Z){var U={depth:s.depth};return Sa(s,"quoteStyle")&&(U.quoteStyle=s.quoteStyle),i(L,U,n+1,r)}return i(L,s,n+1,r)}if(typeof e=="function"&&!A4(e)){var f=pJ(e),g=kg(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(g.length>0?" { "+Vs.call(g,", ")+" }":"")}if(G8(e)){var p=au?ka.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):bA.call(e);return typeof e=="object"&&!au?Ju(p):p}if(_J(e)){for(var m="<"+d4.call(String(e.nodeName)),C=e.attributes||[],A=0;A<C.length;A++)m+=" "+C[A].name+"="+P8(aJ(C[A].value),"double",s);return m+=">",e.childNodes&&e.childNodes.length&&(m+="..."),m+="</"+d4.call(String(e.nodeName))+">",m}if(wA(e)){if(e.length===0)return"[]";var I=kg(e,d);return u&&!bJ(I)?"["+SA(I,u)+"]":"[ "+Vs.call(I,", ")+" ]"}if(cJ(e)){var y=kg(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!B8.call(e,"cause")?"{ ["+String(e)+"] "+Vs.call(f4.call("[cause]: "+d(e.cause),y),", ")+" }":y.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Vs.call(y,", ")+" }"}if(typeof e=="object"&&o){if(I4&&typeof e[I4]=="function"&&xA)return xA(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(mJ(e)){var x=[];return c4&&c4.call(e,function(L,G){x.push(d(G,e,!0)+" => "+d(L,e))}),y4("Map",jp.call(e),x,u)}if(AJ(e)){var T=[];return h4&&h4.call(e,function(L){T.push(d(L,e))}),y4("Set",$p.call(e),T,u)}if(CJ(e))return UC("WeakMap");if(yJ(e))return UC("WeakSet");if(IJ(e))return UC("WeakRef");if(uJ(e))return Ju(d(Number(e)));if(fJ(e))return Ju(d(vA.call(e)));if(dJ(e))return Ju(eJ.call(e));if(hJ(e))return Ju(d(String(e)));if(!lJ(e)&&!A4(e)){var S=kg(e,d),M=p4?p4(e)===Object.prototype:e instanceof Object||e.constructor===Object,_=e instanceof Object?"":"null prototype",v=!M&&Vi&&Object(e)===e&&Vi in e?Y3.call(nl(e),8,-1):_?"Object":"",B=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",E=B+(v||_?"["+Vs.call(f4.call([],v||[],_||[]),": ")+"] ":"");return S.length===0?E+"{}":u?E+"{"+SA(S,u)+"}":E+"{ "+Vs.call(S,", ")+" }"}return String(e)};function P8(i,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+i+n}function aJ(i){return ka.call(String(i),/"/g,"&quot;")}function wA(i){return nl(i)==="[object Array]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function lJ(i){return nl(i)==="[object Date]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function A4(i){return nl(i)==="[object RegExp]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function cJ(i){return nl(i)==="[object Error]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function hJ(i){return nl(i)==="[object String]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function uJ(i){return nl(i)==="[object Number]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function dJ(i){return nl(i)==="[object Boolean]"&&(!Vi||!(typeof i=="object"&&Vi in i))}function G8(i){if(au)return i&&typeof i=="object"&&i instanceof Symbol;if(typeof i=="symbol")return!0;if(!i||typeof i!="object"||!bA)return!1;try{return bA.call(i),!0}catch{}return!1}function fJ(i){if(!i||typeof i!="object"||!vA)return!1;try{return vA.call(i),!0}catch{}return!1}var gJ=Object.prototype.hasOwnProperty||function(i){return i in this};function Sa(i,e){return gJ.call(i,e)}function nl(i){return tJ.call(i)}function pJ(i){if(i.name)return i.name;var e=iJ.call(nJ.call(i),/^function\s*([\w$]+)/);return e?e[1]:null}function D8(i,e){if(i.indexOf)return i.indexOf(e);for(var t=0,n=i.length;t<n;t++)if(i[t]===e)return t;return-1}function mJ(i){if(!jp||!i||typeof i!="object")return!1;try{jp.call(i);try{$p.call(i)}catch{return!0}return i instanceof Map}catch{}return!1}function CJ(i){if(!Nd||!i||typeof i!="object")return!1;try{Nd.call(i,Nd);try{kd.call(i,kd)}catch{return!0}return i instanceof WeakMap}catch{}return!1}function IJ(i){if(!u4||!i||typeof i!="object")return!1;try{return u4.call(i),!0}catch{}return!1}function AJ(i){if(!$p||!i||typeof i!="object")return!1;try{$p.call(i);try{jp.call(i)}catch{return!0}return i instanceof Set}catch{}return!1}function yJ(i){if(!kd||!i||typeof i!="object")return!1;try{kd.call(i,kd);try{Nd.call(i,Nd)}catch{return!0}return i instanceof WeakSet}catch{}return!1}function _J(i){return!i||typeof i!="object"?!1:typeof HTMLElement<"u"&&i instanceof HTMLElement?!0:typeof i.nodeName=="string"&&typeof i.getAttribute=="function"}function F8(i,e){if(i.length>e.maxStringLength){var t=i.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return F8(Y3.call(i,0,e.maxStringLength),e)+n}var r=ka.call(ka.call(i,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,vJ);return P8(r,"single",e)}function vJ(i){var e=i.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+rJ.call(e.toString(16))}function Ju(i){return"Object("+i+")"}function UC(i){return i+" { ? }"}function y4(i,e,t,n){var r=n?SA(t,n):Vs.call(t,", ");return i+" ("+e+") {"+r+"}"}function bJ(i){for(var e=0;e<i.length;e++)if(D8(i[e],`
`)>=0)return!1;return!0}function xJ(i,e){var t;if(i.indent==="	")t="	";else if(typeof i.indent=="number"&&i.indent>0)t=Vs.call(Array(i.indent+1)," ");else return null;return{base:t,prev:Vs.call(Array(e+1),t)}}function SA(i,e){if(i.length===0)return"";var t=`
`+e.prev+e.base;return t+Vs.call(i,","+t)+`
`+e.prev}function kg(i,e){var t=wA(i),n=[];if(t){n.length=i.length;for(var r=0;r<i.length;r++)n[r]=Sa(i,r)?e(i[r],i):""}var s=typeof OC=="function"?OC(i):[],o;if(au){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in i)Sa(i,l)&&(t&&String(Number(l))===l&&l<i.length||au&&o["$"+l]instanceof Symbol||(R8.call(/[^\w$]/,l)?n.push(e(l,i)+": "+e(i[l],i)):n.push(l+": "+e(i[l],i))));if(typeof OC=="function")for(var c=0;c<s.length;c++)B8.call(i,s[c])&&n.push("["+e(s[c])+"]: "+e(i[s[c]],i));return n}var X3=W3,Su=$$,wJ=oJ,SJ=X3("%TypeError%"),Og=X3("%WeakMap%",!0),Ug=X3("%Map%",!0),TJ=Su("WeakMap.prototype.get",!0),EJ=Su("WeakMap.prototype.set",!0),MJ=Su("WeakMap.prototype.has",!0),LJ=Su("Map.prototype.get",!0),RJ=Su("Map.prototype.set",!0),BJ=Su("Map.prototype.has",!0),K3=function(i,e){for(var t=i,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=i.next,i.next=n,n},PJ=function(i,e){var t=K3(i,e);return t&&t.value},GJ=function(i,e,t){var n=K3(i,e);n?n.value=t:i.next={key:e,next:i.next,value:t}},DJ=function(i,e){return!!K3(i,e)},FJ=function(){var e,t,n,r={assert:function(s){if(!r.has(s))throw new SJ("Side channel does not contain "+wJ(s))},get:function(s){if(Og&&s&&(typeof s=="object"||typeof s=="function")){if(e)return TJ(e,s)}else if(Ug){if(t)return LJ(t,s)}else if(n)return PJ(n,s)},has:function(s){if(Og&&s&&(typeof s=="object"||typeof s=="function")){if(e)return MJ(e,s)}else if(Ug){if(t)return BJ(t,s)}else if(n)return DJ(n,s);return!1},set:function(s,o){Og&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Og),EJ(e,s,o)):Ug?(t||(t=new Ug),RJ(t,s,o)):(n||(n={key:{},next:null}),GJ(n,s,o))}};return r},NJ=String.prototype.replace,kJ=/%20/g,ZC={RFC1738:"RFC1738",RFC3986:"RFC3986"},j3={default:ZC.RFC3986,formatters:{RFC1738:function(i){return NJ.call(i,kJ,"+")},RFC3986:function(i){return String(i)}},RFC1738:ZC.RFC1738,RFC3986:ZC.RFC3986},OJ=j3,VC=Object.prototype.hasOwnProperty,Xl=Array.isArray,Bs=function(){for(var i=[],e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i}(),UJ=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Xl(n)){for(var r=[],s=0;s<n.length;++s)typeof n[s]<"u"&&r.push(n[s]);t.obj[t.prop]=r}}},N8=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},ZJ=function i(e,t,n){if(!t)return e;if(typeof t!="object"){if(Xl(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!VC.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var r=e;return Xl(e)&&!Xl(t)&&(r=N8(e,n)),Xl(e)&&Xl(t)?(t.forEach(function(s,o){if(VC.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=i(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return VC.call(s,o)?s[o]=i(s[o],a,n):s[o]=a,s},r)},VJ=function(e,t){return Object.keys(t).reduce(function(n,r){return n[r]=t[r],n},e)},WJ=function(i,e,t){var n=i.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},HJ=function(e,t,n,r,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===OJ.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+Bs[c];continue}if(c<2048){a=a+(Bs[192|c>>6]+Bs[128|c&63]);continue}if(c<55296||c>=57344){a=a+(Bs[224|c>>12]+Bs[128|c>>6&63]+Bs[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=Bs[240|c>>18]+Bs[128|c>>12&63]+Bs[128|c>>6&63]+Bs[128|c&63]}return a},zJ=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var s=t[r],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],h=o[c];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(t.push({obj:o,prop:c}),n.push(h))}return UJ(t),e},YJ=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},XJ=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},KJ=function(e,t){return[].concat(e,t)},jJ=function(e,t){if(Xl(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},k8={arrayToObject:N8,assign:VJ,combine:KJ,compact:zJ,decode:WJ,encode:HJ,isBuffer:XJ,isRegExp:YJ,maybeMap:jJ,merge:ZJ},O8=FJ,H1=k8,Od=j3,$J=Object.prototype.hasOwnProperty,_4={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ko=Array.isArray,JJ=Array.prototype.push,U8=function(i,e){JJ.apply(i,ko(e)?e:[e])},QJ=Date.prototype.toISOString,v4=Od.default,Ri={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:H1.encode,encodeValuesOnly:!1,format:v4,formatter:Od.formatters[v4],indices:!1,serializeDate:function(e){return QJ.call(e)},skipNulls:!1,strictNullHandling:!1},qJ=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},WC={},eQ=function i(e,t,n,r,s,o,a,l,c,h,u,d,f,g,p,m){for(var C=e,A=m,I=0,y=!1;(A=A.get(WC))!==void 0&&!y;){var x=A.get(e);if(I+=1,typeof x<"u"){if(x===I)throw new RangeError("Cyclic object value");y=!0}typeof A.get(WC)>"u"&&(I=0)}if(typeof l=="function"?C=l(t,C):C instanceof Date?C=u(C):n==="comma"&&ko(C)&&(C=H1.maybeMap(C,function(U){return U instanceof Date?u(U):U})),C===null){if(s)return a&&!g?a(t,Ri.encoder,p,"key",d):t;C=""}if(qJ(C)||H1.isBuffer(C)){if(a){var T=g?t:a(t,Ri.encoder,p,"key",d);return[f(T)+"="+f(a(C,Ri.encoder,p,"value",d))]}return[f(t)+"="+f(String(C))]}var S=[];if(typeof C>"u")return S;var M;if(n==="comma"&&ko(C))g&&a&&(C=H1.maybeMap(C,a)),M=[{value:C.length>0?C.join(",")||null:void 0}];else if(ko(l))M=l;else{var _=Object.keys(C);M=c?_.sort(c):_}for(var v=r&&ko(C)&&C.length===1?t+"[]":t,B=0;B<M.length;++B){var E=M[B],L=typeof E=="object"&&typeof E.value<"u"?E.value:C[E];if(!(o&&L===null)){var G=ko(C)?typeof n=="function"?n(v,E):v:v+(h?"."+E:"["+E+"]");m.set(e,I);var Z=O8();Z.set(WC,m),U8(S,i(L,G,n,r,s,o,n==="comma"&&g&&ko(C)?null:a,l,c,h,u,d,f,g,p,Z))}}return S},tQ=function(e){if(!e)return Ri;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Ri.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Od.default;if(typeof e.format<"u"){if(!$J.call(Od.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=Od.formatters[n],s=Ri.filter;return(typeof e.filter=="function"||ko(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Ri.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Ri.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ri.charsetSentinel,delimiter:typeof e.delimiter>"u"?Ri.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Ri.encode,encoder:typeof e.encoder=="function"?e.encoder:Ri.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Ri.encodeValuesOnly,filter:s,format:n,formatter:r,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Ri.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Ri.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ri.strictNullHandling}},nQ=function(i,e){var t=i,n=tQ(e),r,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):ko(n.filter)&&(s=n.filter,r=s);var o=[];if(typeof t!="object"||t===null)return"";var a;e&&e.arrayFormat in _4?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=_4[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);for(var h=O8(),u=0;u<r.length;++u){var d=r[u];n.skipNulls&&t[d]===null||U8(o,eQ(t[d],d,l,c,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}var f=o.join(n.delimiter),g=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),f.length>0?g+f:""},lu=k8,TA=Object.prototype.hasOwnProperty,iQ=Array.isArray,di={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:lu.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},rQ=function(i){return i.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Z8=function(i,e){return i&&typeof i=="string"&&e.comma&&i.indexOf(",")>-1?i.split(","):i},sQ="utf8=%26%2310003%3B",oQ="utf8=%E2%9C%93",aQ=function(e,t){var n={__proto__:null},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=r.split(t.delimiter,s),a=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===oQ?c="utf-8":o[l]===sQ&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],u=h.indexOf("]="),d=u===-1?h.indexOf("="):u+1,f,g;d===-1?(f=t.decoder(h,di.decoder,c,"key"),g=t.strictNullHandling?null:""):(f=t.decoder(h.slice(0,d),di.decoder,c,"key"),g=lu.maybeMap(Z8(h.slice(d+1),t),function(p){return t.decoder(p,di.decoder,c,"value")})),g&&t.interpretNumericEntities&&c==="iso-8859-1"&&(g=rQ(g)),h.indexOf("[]=")>-1&&(g=iQ(g)?[g]:g),TA.call(n,f)?n[f]=lu.combine(n[f],g):n[f]=g}return n},lQ=function(i,e,t,n){for(var r=n?e:Z8(e,t),s=i.length-1;s>=0;--s){var o,a=i[s];if(a==="[]"&&t.parseArrays)o=[].concat(r);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!t.parseArrays&&l===""?o={0:r}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[],o[c]=r):l!=="__proto__"&&(o[l]=r)}r=o}return r},cQ=function(e,t,n,r){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,h=[];if(c){if(!n.plainObjects&&TA.call(Object.prototype,c)&&!n.allowPrototypes)return;h.push(c)}for(var u=0;n.depth>0&&(l=a.exec(s))!==null&&u<n.depth;){if(u+=1,!n.plainObjects&&TA.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}return l&&h.push("["+s.slice(l.index)+"]"),lQ(h,t,n,r)}},hQ=function(e){if(!e)return di;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?di.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?di.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:di.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:di.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:di.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:di.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:di.comma,decoder:typeof e.decoder=="function"?e.decoder:di.decoder,delimiter:typeof e.delimiter=="string"||lu.isRegExp(e.delimiter)?e.delimiter:di.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:di.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:di.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:di.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:di.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:di.strictNullHandling}},uQ=function(i,e){var t=hQ(e);if(i===""||i===null||typeof i>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof i=="string"?aQ(i,t):i,r=t.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=cQ(a,n[a],t,typeof i=="string");r=lu.merge(r,l,t)}return t.allowSparse===!0?r:lu.compact(r)},dQ=nQ,fQ=uQ,gQ=j3,pQ={formats:gQ,parse:fQ,stringify:dQ},mQ=x$;function $o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var CQ=/^([a-z0-9.+-]+:)/i,IQ=/:[0-9]*$/,AQ=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,yQ=["<",">",'"',"`"," ","\r",`
`,"	"],_Q=["{","}","|","\\","^","`"].concat(yQ),EA=["'"].concat(_Q),b4=["%","/","?",";","#"].concat(EA),x4=["/","?","#"],vQ=255,w4=/^[+a-z0-9A-Z_-]{0,63}$/,bQ=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,xQ={javascript:!0,"javascript:":!0},MA={javascript:!0,"javascript:":!0},Fh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},LA=pQ;function wQ(i,e,t){if(i&&typeof i=="object"&&i instanceof $o)return i;var n=new $o;return n.parse(i,e,t),n}$o.prototype.parse=function(i,e,t){if(typeof i!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof i);var n=i.indexOf("?"),r=n!==-1&&n<i.indexOf("#")?"?":"#",s=i.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),i=s.join(r);var a=i;if(a=a.trim(),!t&&i.split("#").length===1){var l=AQ.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=LA.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=CQ.exec(a);if(c){c=c[0];var h=c.toLowerCase();this.protocol=h,a=a.substr(c.length)}if(t||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var u=a.substr(0,2)==="//";u&&!(c&&MA[c])&&(a=a.substr(2),this.slashes=!0)}if(!MA[c]&&(u||c&&!Fh[c])){for(var d=-1,f=0;f<x4.length;f++){var g=a.indexOf(x4[f]);g!==-1&&(d===-1||g<d)&&(d=g)}var p,m;d===-1?m=a.lastIndexOf("@"):m=a.lastIndexOf("@",d),m!==-1&&(p=a.slice(0,m),a=a.slice(m+1),this.auth=decodeURIComponent(p)),d=-1;for(var f=0;f<b4.length;f++){var g=a.indexOf(b4[f]);g!==-1&&(d===-1||g<d)&&(d=g)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var C=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!C)for(var A=this.hostname.split(/\./),f=0,I=A.length;f<I;f++){var y=A[f];if(y&&!y.match(w4)){for(var x="",T=0,S=y.length;T<S;T++)y.charCodeAt(T)>127?x+="x":x+=y[T];if(!x.match(w4)){var M=A.slice(0,f),_=A.slice(f+1),v=y.match(bQ);v&&(M.push(v[1]),_.unshift(v[2])),_.length&&(a="/"+_.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>vQ?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=mQ.toASCII(this.hostname));var B=this.port?":"+this.port:"",E=this.hostname||"";this.host=E+B,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!xQ[h])for(var f=0,I=EA.length;f<I;f++){var L=EA[f];if(a.indexOf(L)!==-1){var G=encodeURIComponent(L);G===L&&(G=escape(L)),a=a.split(L).join(G)}}var Z=a.indexOf("#");Z!==-1&&(this.hash=a.substr(Z),a=a.slice(0,Z));var U=a.indexOf("?");if(U!==-1?(this.search=a.substr(U),this.query=a.substr(U+1),e&&(this.query=LA.parse(this.query)),a=a.slice(0,U)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Fh[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",V=this.search||"";this.path=B+V}return this.href=this.format(),this};$o.prototype.format=function(){var i=this.auth||"";i&&(i=encodeURIComponent(i),i=i.replace(/%3A/i,":"),i+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=i+this.host:this.hostname&&(r=i+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=LA.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Fh[e])&&r!==!1?(r="//"+(r||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):r||(r=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+r+t+o+n};$o.prototype.resolve=function(i){return this.resolveObject(wQ(i,!1,!0)).format()};$o.prototype.resolveObject=function(i){if(typeof i=="string"){var e=new $o;e.parse(i,!1,!0),i=e}for(var t=new $o,n=Object.keys(this),r=0;r<n.length;r++){var s=n[r];t[s]=this[s]}if(t.hash=i.hash,i.href==="")return t.href=t.format(),t;if(i.slashes&&!i.protocol){for(var o=Object.keys(i),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=i[l])}return Fh[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(i.protocol&&i.protocol!==t.protocol){if(!Fh[i.protocol]){for(var c=Object.keys(i),h=0;h<c.length;h++){var u=c[h];t[u]=i[u]}return t.href=t.format(),t}if(t.protocol=i.protocol,!i.host&&!MA[i.protocol]){for(var I=(i.pathname||"").split("/");I.length&&!(i.host=I.shift()););i.host||(i.host=""),i.hostname||(i.hostname=""),I[0]!==""&&I.unshift(""),I.length<2&&I.unshift(""),t.pathname=I.join("/")}else t.pathname=i.pathname;if(t.search=i.search,t.query=i.query,t.host=i.host||"",t.auth=i.auth,t.hostname=i.hostname||i.host,t.port=i.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||i.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",p=i.host||i.pathname&&i.pathname.charAt(0)==="/",m=p||g||t.host&&i.pathname,C=m,A=t.pathname&&t.pathname.split("/")||[],I=i.pathname&&i.pathname.split("/")||[],y=t.protocol&&!Fh[t.protocol];if(y&&(t.hostname="",t.port=null,t.host&&(A[0]===""?A[0]=t.host:A.unshift(t.host)),t.host="",i.protocol&&(i.hostname=null,i.port=null,i.host&&(I[0]===""?I[0]=i.host:I.unshift(i.host)),i.host=null),m=m&&(I[0]===""||A[0]==="")),p)t.host=i.host||i.host===""?i.host:t.host,t.hostname=i.hostname||i.hostname===""?i.hostname:t.hostname,t.search=i.search,t.query=i.query,A=I;else if(I.length)A||(A=[]),A.pop(),A=A.concat(I),t.search=i.search,t.query=i.query;else if(i.search!=null){if(y){t.host=A.shift(),t.hostname=t.host;var x=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;x&&(t.auth=x.shift(),t.hostname=x.shift(),t.host=t.hostname)}return t.search=i.search,t.query=i.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!A.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var T=A.slice(-1)[0],S=(t.host||i.host||A.length>1)&&(T==="."||T==="..")||T==="",M=0,_=A.length;_>=0;_--)T=A[_],T==="."?A.splice(_,1):T===".."?(A.splice(_,1),M++):M&&(A.splice(_,1),M--);if(!m&&!C)for(;M--;M)A.unshift("..");m&&A[0]!==""&&(!A[0]||A[0].charAt(0)!=="/")&&A.unshift(""),S&&A.join("/").substr(-1)!=="/"&&A.push("");var v=A[0]===""||A[0]&&A[0].charAt(0)==="/";if(y){t.hostname=v?"":A.length?A.shift():"",t.host=t.hostname;var x=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;x&&(t.auth=x.shift(),t.hostname=x.shift(),t.host=t.hostname)}return m=m||t.host&&A.length,m&&!v&&A.unshift(""),A.length>0?t.pathname=A.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=i.auth||t.auth,t.slashes=t.slashes||i.slashes,t.href=t.format(),t};$o.prototype.parseHost=function(){var i=this.host,e=IQ.exec(i);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),i=i.substr(0,i.length-e.length)),i&&(this.hostname=i)};const S4={};function kt(i,e,t=3){if(S4[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${i}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${i}`),console.warn(n))),S4[e]=!0}function hs(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function Qu(i){return i.split("?")[0].split("#")[0]}function SQ(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function TQ(i,e,t){return i.replace(new RegExp(SQ(e),"g"),t)}function EQ(i,e){let t="",n=0,r=-1,s=0,o=-1;for(let a=0;a<=i.length;++a){if(a<i.length)o=i.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),r=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,r=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${i.slice(r+1,a)}`:t=i.slice(r+1,a),n=a-r-1;r=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Qi={toPosix(i){return TQ(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){hs(i),i=this.toPosix(i);const e=/^file:\/\/\//.exec(i);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(i);return t?t[0]:""},toAbsolute(i,e,t){if(hs(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const n=Qu(this.toPosix(e??ke.ADAPTER.getBaseUrl())),r=Qu(this.toPosix(t??this.rootname(n)));return i=this.toPosix(i),i.startsWith("/")?Qi.join(r,i.slice(1)):this.isAbsolute(i)?i:this.join(n,i)},normalize(i){if(hs(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let e="";const t=i.startsWith("/");this.hasProtocol(i)&&(e=this.rootname(i),i=i.slice(e.length));const n=i.endsWith("/");return i=EQ(i,!1),i.length>0&&n&&(i+="/"),t?`/${i}`:e+i},isAbsolute(i){return hs(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];if(hs(n),n.length>0)if(e===void 0)e=n;else{const r=i[t-1]??"";this.extname(r)?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(i){if(hs(i),i.length===0)return".";i=this.toPosix(i);let e=i.charCodeAt(0);const t=e===47;let n=-1,r=!0;const s=this.getProtocol(i),o=i;i=i.slice(s.length);for(let a=i.length-1;a>=1;--a)if(e=i.charCodeAt(a),e===47){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":this.isUrl(o)?s+i:s:t&&n===1?"//":s+i.slice(0,n)},rootname(i){hs(i),i=this.toPosix(i);let e="";if(i.startsWith("/")?e="/":e=this.getProtocol(i),this.isUrl(i)){const t=i.indexOf("/",e.length);t!==-1?e=i.slice(0,t):e=i,e.endsWith("/")||(e+="/")}return e},basename(i,e){hs(i),e&&hs(e),i=Qu(this.toPosix(i));let t=0,n=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";let o=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){const l=i.charCodeAt(s);if(l===47){if(!r){t=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!r){t=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":i.slice(t,n)},extname(i){hs(i),i=Qu(this.toPosix(i));let e=-1,t=0,n=-1,r=!0,s=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===47){if(!r){t=o+1;break}continue}n===-1&&(r=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":i.slice(e,n)},parse(i){hs(i);const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;i=Qu(this.toPosix(i));let t=i.charCodeAt(0);const n=this.isAbsolute(i);let r;e.root=this.rootname(i),n||this.hasProtocol(i)?r=1:r=0;let s=-1,o=0,a=-1,l=!0,c=i.length-1,h=0;for(;c>=r;--c){if(t=i.charCodeAt(c),t===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),t===46?s===-1?s=c:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=i.slice(1,a):e.base=e.name=i.slice(o,a)):(o===0&&n?(e.name=i.slice(1,s),e.base=i.slice(1,a)):(e.name=i.slice(o,s),e.base=i.slice(o,a)),e.ext=i.slice(s,a)),e.dir=this.dirname(i),e},sep:"/",delimiter:":"};let HC;async function MQ(){return HC??(HC=(async()=>{const i=document.createElement("canvas").getContext("webgl");if(!i)return lr.UNPACK;const e=await new Promise(s=>{const o=document.createElement("video");o.onloadeddata=()=>s(o),o.onerror=()=>s(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!e)return lr.UNPACK;const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t);const n=i.createFramebuffer();i.bindFramebuffer(i.FRAMEBUFFER,n),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e);const r=new Uint8Array(4);return i.readPixels(0,0,1,1,i.RGBA,i.UNSIGNED_BYTE,r),i.deleteFramebuffer(n),i.deleteTexture(t),i.getExtension("WEBGL_lose_context")?.loseContext(),r[0]<=r[3]?lr.PMA:lr.UNPACK})()),HC}let zC;function LQ(){return typeof zC>"u"&&(zC=function(){const i={stencil:!0,failIfMajorPerformanceCaveat:ke.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ke.ADAPTER.getWebGLRenderingContext())return!1;const e=ke.ADAPTER.createCanvas();let t=e.getContext("webgl",i)||e.getContext("experimental-webgl",i);const n=!!t?.getContextAttributes()?.stencil;if(t){const r=t.getExtension("WEBGL_lose_context");r&&r.loseContext()}return t=null,n}catch{return!1}}()),zC}var RQ={grad:.9,turn:360,rad:360/(2*Math.PI)},Lo=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Ci=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*i)/t+0},Qr=function(i,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),i>t?t:i>e?i:e},V8=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},T4=function(i){return{r:Qr(i.r,0,255),g:Qr(i.g,0,255),b:Qr(i.b,0,255),a:Qr(i.a)}},YC=function(i){return{r:Ci(i.r),g:Ci(i.g),b:Ci(i.b),a:Ci(i.a,3)}},BQ=/^#([0-9a-f]{3,8})$/i,Zg=function(i){var e=i.toString(16);return e.length<2?"0"+e:e},W8=function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},H8=function(i){var e=i.h,t=i.s,n=i.v,r=i.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),c=s%6;return{r:255*[n,a,o,o,l,n][c],g:255*[l,n,n,a,o,o][c],b:255*[o,o,l,n,n,a][c],a:r}},E4=function(i){return{h:V8(i.h),s:Qr(i.s,0,100),l:Qr(i.l,0,100),a:Qr(i.a)}},M4=function(i){return{h:Ci(i.h),s:Ci(i.s),l:Ci(i.l),a:Ci(i.a,3)}},L4=function(i){return H8((t=(e=i).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},Ud=function(i){return{h:(e=W8(i)).h,s:(r=(200-(t=e.s))*(n=e.v)/100)>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,n,r},PQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,GQ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,DQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,FQ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,RA={string:[[function(i){var e=BQ.exec(i);return e?(i=e[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Ci(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Ci(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var e=DQ.exec(i)||FQ.exec(i);return e?e[2]!==e[4]||e[4]!==e[6]?null:T4({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(i){var e=PQ.exec(i)||GQ.exec(i);if(!e)return null;var t,n,r=E4({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(RQ[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return L4(r)},"hsl"]],object:[[function(i){var e=i.r,t=i.g,n=i.b,r=i.a,s=r===void 0?1:r;return Lo(e)&&Lo(t)&&Lo(n)?T4({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(i){var e=i.h,t=i.s,n=i.l,r=i.a,s=r===void 0?1:r;if(!Lo(e)||!Lo(t)||!Lo(n))return null;var o=E4({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return L4(o)},"hsl"],[function(i){var e=i.h,t=i.s,n=i.v,r=i.a,s=r===void 0?1:r;if(!Lo(e)||!Lo(t)||!Lo(n))return null;var o=function(a){return{h:V8(a.h),s:Qr(a.s,0,100),v:Qr(a.v,0,100),a:Qr(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return H8(o)},"hsv"]]},R4=function(i,e){for(var t=0;t<e.length;t++){var n=e[t][0](i);if(n)return[n,e[t][1]]}return[null,void 0]},NQ=function(i){return typeof i=="string"?R4(i.trim(),RA.string):typeof i=="object"&&i!==null?R4(i,RA.object):[null,void 0]},XC=function(i,e){var t=Ud(i);return{h:t.h,s:Qr(t.s+100*e,0,100),l:t.l,a:t.a}},KC=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},B4=function(i,e){var t=Ud(i);return{h:t.h,s:t.s,l:Qr(t.l+100*e,0,100),a:t.a}},BA=function(){function i(e){this.parsed=NQ(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Ci(KC(this.rgba),2)},i.prototype.isDark=function(){return KC(this.rgba)<.5},i.prototype.isLight=function(){return KC(this.rgba)>=.5},i.prototype.toHex=function(){return e=YC(this.rgba),t=e.r,n=e.g,r=e.b,o=(s=e.a)<1?Zg(Ci(255*s)):"","#"+Zg(t)+Zg(n)+Zg(r)+o;var e,t,n,r,s,o},i.prototype.toRgb=function(){return YC(this.rgba)},i.prototype.toRgbString=function(){return e=YC(this.rgba),t=e.r,n=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+r+", "+s+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,s},i.prototype.toHsl=function(){return M4(Ud(this.rgba))},i.prototype.toHslString=function(){return e=M4(Ud(this.rgba)),t=e.h,n=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+s+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,s},i.prototype.toHsv=function(){return e=W8(this.rgba),{h:Ci(e.h),s:Ci(e.s),v:Ci(e.v),a:Ci(e.a,3)};var e},i.prototype.invert=function(){return Gs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},i.prototype.saturate=function(e){return e===void 0&&(e=.1),Gs(XC(this.rgba,e))},i.prototype.desaturate=function(e){return e===void 0&&(e=.1),Gs(XC(this.rgba,-e))},i.prototype.grayscale=function(){return Gs(XC(this.rgba,-1))},i.prototype.lighten=function(e){return e===void 0&&(e=.1),Gs(B4(this.rgba,e))},i.prototype.darken=function(e){return e===void 0&&(e=.1),Gs(B4(this.rgba,-e))},i.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},i.prototype.alpha=function(e){return typeof e=="number"?Gs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ci(this.rgba.a,3);var t},i.prototype.hue=function(e){var t=Ud(this.rgba);return typeof e=="number"?Gs({h:e,s:t.s,l:t.l,a:t.a}):Ci(t.h)},i.prototype.isEqual=function(e){return this.toHex()===Gs(e).toHex()},i}(),Gs=function(i){return i instanceof BA?i:new BA(i)},P4=[],kQ=function(i){i.forEach(function(e){P4.indexOf(e)<0&&(e(BA,RA),P4.push(e))})};function OQ(i,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var r in t)n[t[r]]=r;var s={};i.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=n[this.toHex()];if(c)return c;if(o?.closest){var h=this.toRgb(),u=1/0,d="black";if(!s.length)for(var f in t)s[f]=new i(t[f]).toRgb();for(var g in t){var p=(a=h,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));p<u&&(u=p,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new i(l).toRgb():null},"name"])}kQ([OQ]);const ih=class z1{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof z1)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((r,s)=>r===t[s]);if(e!==null&&t!==null){const r=Object.keys(e),s=Object.keys(t);return r.length!==s.length?!1:r.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,r]=this._components;return{r:e,g:t,b:n,a:r}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,r]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(r*255),e}toRgbArray(e){e=e??[];const[t,n,r]=this._components;return e[0]=t,e[1]=n,e[2]=r,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,r,s]=z1.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=r,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,r=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,r=r*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(r<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,r]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(r*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,r,s]=this._components;return e[0]=t,e[1]=n,e[2]=r,e[3]=s,e}normalize(e){let t,n,r,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,r=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,r,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,r,s=255]=e,t/=255,n/=255,r/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=z1.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Gs(e);o.isValid()&&({r:t,g:n,b:r,a:s}=o.rgba,t/=255,n/=255,r/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=r,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((r,s)=>{e[s]=Math.min(Math.max(r,t),n)}),e)}};ih.shared=new ih,ih.temp=new ih,ih.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let _n=ih;function UQ(i){return kt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),_n.shared.setValue(i).toHex()}function ZQ(i){return kt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),_n.shared.setValue(i).toNumber()}function VQ(){const i=[],e=[];for(let n=0;n<32;n++)i[n]=n,e[n]=n;i[ct.NORMAL_NPM]=ct.NORMAL,i[ct.ADD_NPM]=ct.ADD,i[ct.SCREEN_NPM]=ct.SCREEN,e[ct.NORMAL]=ct.NORMAL_NPM,e[ct.ADD]=ct.ADD_NPM,e[ct.SCREEN]=ct.SCREEN_NPM;const t=[];return t.push(e),t.push(i),t}const z8=VQ();function Y8(i,e){return z8[e?1:0][i]}function WQ(i,e=null){const t=i*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,r=0;n<t;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e}function X8(i){if(i.BYTES_PER_ELEMENT===4)return i instanceof Float32Array?"Float32Array":i instanceof Uint32Array?"Uint32Array":"Int32Array";if(i.BYTES_PER_ELEMENT===2){if(i instanceof Uint16Array)return"Uint16Array"}else if(i.BYTES_PER_ELEMENT===1&&i instanceof Uint8Array)return"Uint8Array";return null}function Jp(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function G4(i){return!(i&i-1)&&!!i}function D4(i){let e=(i>65535?1:0)<<4;i>>>=e;let t=(i>255?1:0)<<3;return i>>>=t,e|=t,t=(i>15?1:0)<<2,i>>>=t,e|=t,t=(i>3?1:0)<<1,i>>>=t,e|=t,e|i>>1}function Nh(i,e,t){const n=i.length;let r;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(r=e;r<s;++r)i[r]=i[r+t];i.length=s}function Oa(i){return i===0?0:i<0?-1:1}let HQ=0;function Cc(){return++HQ}const PA=class{constructor(i,e,t,n){this.left=i,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};PA.EMPTY=new PA(0,0,0,0);let F4=PA;const N4={},Ds=Object.create(null),Ca=Object.create(null);class zQ{constructor(e,t,n){this._canvas=ke.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||ke.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function k4(i,e,t){for(let n=0,r=4*t*e;n<e;++n,r+=4)if(i[r+3]!==0)return!1;return!0}function O4(i,e,t,n,r){const s=4*e;for(let o=n,a=n*s+4*t;o<=r;++o,a+=s)if(i[a+3]!==0)return!1;return!0}function YQ(i){const{width:e,height:t}=i,n=i.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const r=n.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&k4(r,e,o);)++o;if(o===t)return F4.EMPTY;for(;k4(r,e,l);)--l;for(;O4(r,e,s,o,l);)++s;for(;O4(r,e,a,o,l);)--a;return++a,++l,new F4(s,o,a,l)}function XQ(i){const e=YQ(i),{width:t,height:n}=e;let r=null;if(!e.isEmpty()){const s=i.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");r=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:r}}function KQ(i,e=globalThis.location){if(i.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(i,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function ea(i,e=1){const t=ke.RETINA_PREFIX?.exec(i);return t?parseFloat(t[1]):e}var Ge=(i=>(i.Renderer="renderer",i.Application="application",i.RendererSystem="renderer-webgl-system",i.RendererPlugin="renderer-webgl-plugin",i.CanvasRendererSystem="renderer-canvas-system",i.CanvasRendererPlugin="renderer-canvas-plugin",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i))(Ge||{});const GA=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},U4=(i,e)=>GA(i).priority??e,Xe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(GA).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...i){return i.map(GA).forEach(e=>{e.type.forEach(t=>{const n=this._addHandlers,r=this._queue;n[t]?n[t](e):(r[t]=r[t]||[],r[t].push(e))})}),this},handle(i,e,t){const n=this._addHandlers,r=this._removeHandlers;if(n[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);n[i]=e,r[i]=t;const s=this._queue;return s[i]&&(s[i].forEach(o=>e(o)),delete s[i]),this},handleByMap(i,e){return this.handle(i,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(i,e,t=-1){return this.handle(i,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((r,s)=>U4(s,t)-U4(r,t)))},n=>{const r=e.indexOf(n.ref);r!==-1&&e.splice(r,1)})}};class DA{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const jQ=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function $Q(i){let e="";for(let t=0;t<i;++t)t>0&&(e+=`
else `),t<i-1&&(e+=`if(test == ${t}.0){}`);return e}function JQ(i,e){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=jQ.replace(/%forloop%/gi,$Q(i));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))i=i/2|0;else break}return i}const jC=0,$C=1,JC=2,QC=3,qC=4,e2=5;class Io{constructor(){this.data=0,this.blendMode=ct.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jC)}set blend(e){!!(this.data&1<<jC)!==e&&(this.data^=1<<jC)}get offsets(){return!!(this.data&1<<$C)}set offsets(e){!!(this.data&1<<$C)!==e&&(this.data^=1<<$C)}get culling(){return!!(this.data&1<<JC)}set culling(e){!!(this.data&1<<JC)!==e&&(this.data^=1<<JC)}get depthTest(){return!!(this.data&1<<QC)}set depthTest(e){!!(this.data&1<<QC)!==e&&(this.data^=1<<QC)}get depthMask(){return!!(this.data&1<<e2)}set depthMask(e){!!(this.data&1<<e2)!==e&&(this.data^=1<<e2)}get clockwiseFrontFace(){return!!(this.data&1<<qC)}set clockwiseFrontFace(e){!!(this.data&1<<qC)!==e&&(this.data^=1<<qC)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==ct.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Io;return e.depthTest=!1,e.blend=!0,e}}Io.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const FA=[];function K8(i,e){if(!i)return null;let t="";if(typeof i=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(i);n&&(t=n[1].toLowerCase())}for(let n=FA.length-1;n>=0;--n){const r=FA[n];if(r.test&&r.test(i,t))return new r(i,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class vs{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:h}=this;this._aliasCount++;for(let u=0,d=h.length;u<d;u++)h[u][c](e,t,n,r,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(vs.prototype,{dispatch:{value:vs.prototype.emit},run:{value:vs.prototype.emit}});class Cf{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new vs("setRealSize"),this.onUpdate=new vs("update"),this.onError=new vs("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class K0 extends Cf{constructor(e,t){const{width:n,height:r}=t||{};if(!n||!r)throw new Error("BufferResource width or height invalid");super(n,r),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const r=e.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lr.UNPACK);const s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?r.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,r.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const QQ={scaleMode:Vo.NEAREST,alphaMode:lr.NPM},NA=class rh extends Zf{constructor(e=null,t=null){super(),t=Object.assign({},rh.defaultOptions,t);const{alphaMode:n,mipmap:r,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:h,type:u,target:d,resolution:f,resourceOptions:g}=t;e&&!(e instanceof Cf)&&(e=K8(e,g),e.internal=!0),this.resolution=f||ke.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=h,this.type=u,this.target=d,this.alphaMode=n,this.uid=Cc(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=G4(this.realWidth)&&G4(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ca[this.cacheId],delete Ds[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),rh.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=ke.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let s=null;if(r)s=e;else{if(!e._pixiId){const a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${Cc()}`}s=e._pixiId}let o=Ca[s];if(r&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new rh(e,t),o.cacheId=s,rh.addToCache(o,s)),o}static fromBuffer(e,t,n,r){e=e||new Float32Array(t*n*4);const s=new K0(e,{width:t,height:n,...r?.resourceOptions});let o,a;return e instanceof Float32Array?(o=ve.RGBA,a=Qe.FLOAT):e instanceof Int32Array?(o=ve.RGBA_INTEGER,a=Qe.INT):e instanceof Uint32Array?(o=ve.RGBA_INTEGER,a=Qe.UNSIGNED_INT):e instanceof Int16Array?(o=ve.RGBA_INTEGER,a=Qe.SHORT):e instanceof Uint16Array?(o=ve.RGBA_INTEGER,a=Qe.UNSIGNED_SHORT):e instanceof Int8Array?(o=ve.RGBA,a=Qe.BYTE):(o=ve.RGBA,a=Qe.UNSIGNED_BYTE),s.internal=!0,new rh(s,Object.assign({},QQ,{type:a,format:o},r))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ca[t]&&Ca[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Ca[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ca[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ca[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Ca[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};NA.defaultOptions={mipmap:uo.POW2,anisotropicLevel:0,scaleMode:Vo.LINEAR,wrapMode:Xa.CLAMP,alphaMode:lr.UNPACK,target:Gh.TEXTURE_2D,format:ve.RGBA,type:Qe.UNSIGNED_BYTE},NA._globalBatch=0;let bt=NA;class kA{constructor(){this.texArray=null,this.blend=0,this.type=Qs.TRIANGLES,this.start=0,this.size=0,this.data=null}}let qQ=0,ii=class j8{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=qQ++,this.disposeRunner=new vs("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?no.ELEMENT_ARRAY_BUFFER:no.ARRAY_BUFFER}get index(){return this.type===no.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new j8(e)}};class Qp{constructor(e,t=0,n=!1,r=Qe.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=n,this.type=r,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,n,r,s){return new Qp(e,t,n,r,s)}}const eq={Float32Array,Uint32Array,Int32Array,Uint8Array};function tq(i,e){let t=0,n=0;const r={};for(let l=0;l<i.length;l++)n+=e[l],t+=i[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<i.length;l++){const c=e[l],h=i[l],u=X8(h);r[u]||(r[u]=new eq[u](s)),o=r[u];for(let d=0;d<h.length;d++){const f=(d/c|0)*n+a,g=d%c;o[f+g]=h[d]}a+=c}return new Float32Array(s)}const Z4={5126:4,5123:2,5121:1};let nq=0;const iq={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Qa{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=nq++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new vs("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,r=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof ii||(t instanceof Array&&(t=new Float32Array(t)),t=new ii(t));const c=e.split("|");if(c.length>1){for(let u=0;u<c.length;u++)this.addAttribute(c[u],t,n,r,s);return this}let h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new Qp(h,n,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ii||(e instanceof Array&&(e=new Uint16Array(e)),e=new ii(e)),e.type=no.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],n=new ii;let r;for(r in this.attributes){const s=this.attributes[r],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*Z4[s.type]/4),s.buffer=0}for(n.data=tq(e,t),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Qa;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new ii(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new Qp(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=no.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Qa,n=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new iq[X8(o.buffers[a].data)](r[a]),t.buffers[a]=new ii(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=no.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,h=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){h=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===h&&(l+=d.size*Z4[d.type]/4)}for(let u=0;u<e.length;u++){const d=e[u].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+c]+=a;a+=e[u].buffers[h].data.length/l,c+=d.length}}return t}}class $8 extends Qa{constructor(e=!1){super(),this._buffer=new ii(null,e,!1),this._indexBuffer=new ii(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Qe.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Qe.FLOAT).addAttribute("aColor",this._buffer,4,!0,Qe.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Qe.FLOAT).addIndex(this._indexBuffer)}}const qp=Math.PI*2,rq=180/Math.PI,sq=Math.PI/180;var xi=(i=>(i[i.POLY=0]="POLY",i[i.RECT=1]="RECT",i[i.CIRC=2]="CIRC",i[i.ELIP=3]="ELIP",i[i.RREC=4]="RREC",i))(xi||{});class Kt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Kt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}Kt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Vg=[new Kt,new Kt,new Kt,new Kt];class Mt{constructor(e=0,t=0,n=0,r=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(r),this.type=xi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Mt(0,0,0,0)}clone(){return new Mt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const _=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>_}const n=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=n||o<=s)return!1;const a=Vg[0].set(e.left,e.top),l=Vg[1].set(e.left,e.bottom),c=Vg[2].set(e.right,e.top),h=Vg[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const u=Math.sign(t.a*t.d-t.b*t.c);if(u===0||(t.apply(a,a),t.apply(l,l),t.apply(c,c),t.apply(h,h),Math.max(a.x,l.x,c.x,h.x)<=n||Math.min(a.x,l.x,c.x,h.x)>=r||Math.max(a.y,l.y,c.y,h.y)<=s||Math.min(a.y,l.y,c.y,h.y)>=o))return!1;const d=u*(l.y-a.y),f=u*(a.x-l.x),g=d*n+f*s,p=d*r+f*s,m=d*n+f*o,C=d*r+f*o;if(Math.max(g,p,m,C)<=d*a.x+f*a.y||Math.min(g,p,m,C)>=d*h.x+f*h.y)return!1;const A=u*(a.y-c.y),I=u*(c.x-a.x),y=A*n+I*s,x=A*r+I*s,T=A*n+I*o,S=A*r+I*o;return!(Math.max(y,x,T,S)<=A*a.x+I*a.y||Math.min(y,x,T,S)>=A*h.x+I*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=s-r,this}}Mt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class j0{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=xi.CIRC}clone(){return new j0(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=n}getBounds(){return new Mt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}j0.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class $0{constructor(e=0,t=0,n=0,r=0){this.x=e,this.y=t,this.width=n,this.height=r,this.type=xi.ELIP}clone(){return new $0(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,r=(t-this.y)/this.height;return n*=n,r*=r,n+r<=1}getBounds(){return new Mt(this.x-this.width,this.y-this.height,this.width,this.height)}}$0.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class cc{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let r=0,s=t.length;r<s;r++)n.push(t[r].x,t[r].y);t=n}this.points=t,this.type=xi.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new cc(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],h=this.points[o*2+1];l>t!=h>t&&e<(c-a)*((t-l)/(h-l))+a&&(n=!n)}return n}}cc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((i,e)=>`${i}, ${e}`,"")}]`};class J0{constructor(e=0,t=0,n=0,r=0,s=20){this.x=e,this.y=t,this.width=n,this.height=r,this.radius=s,this.type=xi.RREC}clone(){return new J0(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let r=e-(this.x+n),s=t-(this.y+n);const o=n*n;if(r*r+s*s<=o||(r=e-(this.x+this.width-n),r*r+s*s<=o)||(s=t-(this.y+this.height-n),r*r+s*s<=o)||(r=e-(this.x+n),r*r+s*s<=o))return!0}return!1}}J0.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class vn{constructor(e=1,t=0,n=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,r,s,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Kt;const n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}applyInverse(e,t){t=t||new Kt;const n=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return t.x=this.d*n*r+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,r,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(n,t),c=Math.abs(a+l);return c<1e-5||Math.abs(qp-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,r=this.d,s=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new vn;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new vn}static get TEMP_MATRIX(){return new vn}}vn.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const kl=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ol=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ul=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Zl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],OA=[],J8=[],Wg=Math.sign;function oq(){for(let i=0;i<16;i++){const e=[];OA.push(e);for(let t=0;t<16;t++){const n=Wg(kl[i]*kl[t]+Ul[i]*Ol[t]),r=Wg(Ol[i]*kl[t]+Zl[i]*Ol[t]),s=Wg(kl[i]*Ul[t]+Ul[i]*Zl[t]),o=Wg(Ol[i]*Ul[t]+Zl[i]*Zl[t]);for(let a=0;a<16;a++)if(kl[a]===n&&Ol[a]===r&&Ul[a]===s&&Zl[a]===o){e.push(a);break}}}for(let i=0;i<16;i++){const e=new vn;e.set(kl[i],Ol[i],Ul[i],Zl[i],0,0),J8.push(e)}}oq();const En={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>kl[i],uY:i=>Ol[i],vX:i=>Ul[i],vY:i=>Zl[i],inv:i=>i&8?i&15:-i&7,add:(i,e)=>OA[i][e],sub:(i,e)=>OA[i][En.inv(e)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,e)=>Math.abs(i)*2<=Math.abs(e)?e>=0?En.S:En.N:Math.abs(e)*2<=Math.abs(i)?i>0?En.E:En.W:e>0?i>0?En.SE:En.SW:i>0?En.NE:En.NW,matrixAppendRotationInv:(i,e,t=0,n=0)=>{const r=J8[En.inv(e)];r.tx=t,r.ty=n,i.append(r)}};class Ho{constructor(e,t,n=0,r=0){this._x=n,this._y=r,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ho(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ho.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const UA=class{constructor(){this.worldTransform=new vn,this.localTransform=new vn,this.position=new Ho(this.onChange,this,0,0),this.scale=new Ho(this.onChange,this,1,1),this.pivot=new Ho(this.onChange,this,0,0),this.skew=new Ho(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(i){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){const t=i.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=i._worldID,this._worldID++}}setFromMatrix(i){i.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())}};UA.IDENTITY=new UA;let $3=UA;$3.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var aq=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,lq=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function V4(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}function t2(i){const e=new Array(i);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Q8(i,e){switch(i){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return t2(2*e);case"bvec3":return t2(3*e);case"bvec4":return t2(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const kh=[{test:i=>i.type==="float"&&i.size===1&&!i.isArray,code:i=>`
            if(uv["${i}"] !== ud["${i}"].value)
            {
                ud["${i}"].value = uv["${i}"]
                gl.uniform1f(ud["${i}"].location, uv["${i}"])
            }
            `},{test:(i,e)=>(i.type==="sampler2D"||i.type==="samplerCube"||i.type==="sampler2DArray")&&i.size===1&&!i.isArray&&(e==null||e.castToBaseTexture!==void 0),code:i=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${i}"], t);

            if(ud["${i}"].value !== t)
            {
                ud["${i}"].value = t;
                gl.uniform1i(ud["${i}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(i,e)=>i.type==="mat3"&&i.size===1&&!i.isArray&&e.a!==void 0,code:i=>`
            gl.uniformMatrix3fv(ud["${i}"].location, false, uv["${i}"].toArray(true));
            `,codeUbo:i=>`
                var ${i}_matrix = uv.${i}.toArray(true);

                data[offset] = ${i}_matrix[0];
                data[offset+1] = ${i}_matrix[1];
                data[offset+2] = ${i}_matrix[2];
        
                data[offset + 4] = ${i}_matrix[3];
                data[offset + 5] = ${i}_matrix[4];
                data[offset + 6] = ${i}_matrix[5];
        
                data[offset + 8] = ${i}_matrix[6];
                data[offset + 9] = ${i}_matrix[7];
                data[offset + 10] = ${i}_matrix[8];
            `},{test:(i,e)=>i.type==="vec2"&&i.size===1&&!i.isArray&&e.x!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${i}"].location, v.x, v.y);
                }`,codeUbo:i=>`
                v = uv.${i};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:i=>i.type==="vec2"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${i}"].location, v[0], v[1]);
                }
            `},{test:(i,e)=>i.type==="vec4"&&i.size===1&&!i.isArray&&e.width!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${i}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(i,e)=>i.type==="vec4"&&i.size===1&&!i.isArray&&e.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${i}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(i,e)=>i.type==="vec3"&&i.size===1&&!i.isArray&&e.red!==void 0,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${i}"].location, v.red, v.green, v.blue)
                }`,codeUbo:i=>`
                    v = uv.${i};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:i=>i.type==="vec4"&&i.size===1&&!i.isArray,code:i=>`
                cv = ud["${i}"].value;
                v = uv["${i}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${i}"].location, v[0], v[1], v[2], v[3])
                }`}],cq={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},hq={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function uq(i,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in i.uniforms){const r=e[n];if(!r){i.uniforms[n]?.group===!0&&(i.uniforms[n].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const s=i.uniforms[n];let o=!1;for(let a=0;a<kh.length;a++)if(kh[a].test(r,s)){t.push(kh[a].code(n,s)),o=!0;break}if(!o){const a=(r.size===1&&!r.isArray?cq:hq)[r.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const q8={};let Hg=q8;function dq(){if(Hg===q8||Hg?.isContextLost()){const i=ke.ADAPTER.createCanvas();let e;ke.PREFER_ENV>=xc.WEBGL2&&(e=i.getContext("webgl2",{})),e||(e=i.getContext("webgl",{})||i.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Hg=e}return Hg}let zg;function fq(){if(!zg){zg=Jr.MEDIUM;const i=dq();i&&i.getShaderPrecisionFormat&&(zg=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?Jr.HIGH:Jr.MEDIUM)}return zg}function W4(i,e){const t=i.getShaderSource(e).split(`
`).map((c,h)=>`${h}: ${c}`),n=i.getShaderInfoLog(e),r=n.split(`
`),s={},o=r.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{t[c-1]=`%c${t[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function gq(i,e,t,n){i.getProgramParameter(e,i.LINK_STATUS)||(i.getShaderParameter(t,i.COMPILE_STATUS)||W4(i,t),i.getShaderParameter(n,i.COMPILE_STATUS)||W4(i,n),console.error("PixiJS Error: Could not initialize shader."),i.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",i.getProgramInfoLog(e)))}const pq={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function eT(i){return pq[i]}let Yg=null;const H4={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function tT(i,e){if(!Yg){const t=Object.keys(H4);Yg={};for(let n=0;n<t.length;++n){const r=t[n];Yg[i[r]]=H4[r]}}return Yg[e]}function z4(i,e,t){if(i.substring(0,9)!=="precision"){let n=e;return e===Jr.HIGH&&t!==Jr.HIGH&&(n=Jr.MEDIUM),`precision ${n} float;
${i}`}else if(t!==Jr.HIGH&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}let qu;function mq(){if(typeof qu=="boolean")return qu;try{qu=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{qu=!1}return qu}let Cq=0;const Xg={},ZA=class sh{constructor(e,t,n="pixi-shader",r={}){this.extra={},this.id=Cq++,this.vertexSrc=e||sh.defaultVertexSrc,this.fragmentSrc=t||sh.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Xg[n]?(Xg[n]++,n+=`-${Xg[n]}`):Xg[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=z4(this.vertexSrc,sh.defaultVertexPrecision,Jr.HIGH),this.fragmentSrc=z4(this.fragmentSrc,sh.defaultFragmentPrecision,fq())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return lq}static get defaultFragmentSrc(){return aq}static from(e,t,n){const r=e+t;let s=N4[r];return s||(N4[r]=s=new sh(e,t,n)),s}};ZA.defaultVertexPrecision=Jr.HIGH,ZA.defaultFragmentPrecision=Wo.apple.device?Jr.HIGH:Jr.MEDIUM;let zo=ZA,Iq=0;class bs{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Iq++,this.static=!!t,this.ubo=!!n,e instanceof ii?(this.buffer=e,this.buffer.type=no.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ii(new Float32Array(1)),this.buffer.type=no.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new bs(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new bs(e,t,n)}static uboFrom(e,t){return new bs(e,t??!0,!0)}}class io{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof bs?this.uniformGroup=t:this.uniformGroup=new bs(t):this.uniformGroup=new bs({}),this.disposeRunner=new vs("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const r=t.uniforms[n];if(r.group===!0&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const r=zo.from(e,t);return new io(r,n)}}class Aq{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=bs.from({uSamplers:n},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new zo(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new vn,default:this.defaultGroupCache[e]};return new io(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class VA{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function yq(){return!Wo.apple.device}function _q(i){let e=!0;const t=ke.ADAPTER.getNavigator();if(Wo.tablet||Wo.phone){if(Wo.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Wo.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?i:4}class Q0{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var vq=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,bq=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const md=class fs extends Q0{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=$8,this.vertexSize=6,this.state=Io.for2d(),this.size=fs.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??_q(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??yq(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return kt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return bq}static get defaultFragmentTemplate(){return vq}setShaderGenerator({vertex:e=fs.defaultVertexSrc,fragment:t=fs.defaultFragmentTemplate}={}){this.shaderGenerator=new Aq(e,t)}contextChange(){const e=this.renderer.gl;ke.PREFER_ENV===xc.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),fs.defaultMaxTextures),this.maxTextures=JQ(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=fs,n=this.size/4,r=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new kA);for(;t.length<r;)t.push(new VA);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,n=fs._textureArrayPool,r=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++bt._globalBatch,l=0,c=n[0],h=0;r.copyBoundTextures(s,t);for(let u=0;u<this._bufferSize;++u){const d=e[u];e[u]=null,d._batchEnabled!==a&&(c.count>=t&&(r.boundArray(c,s,a,t),this.buildDrawCalls(c,h,u),h=u,c=n[++l],++a),d._batchEnabled=a,d.touched=o,c.elements[c.count++]=d)}c.count>0&&(r.boundArray(c,s,a,t),this.buildDrawCalls(c,h,this._bufferSize),++l,++a);for(let u=0;u<s.length;u++)s[u]=null;bt._globalBatch=a}buildDrawCalls(e,t,n){const{_bufferedElements:r,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=fs._drawCallPool;let c=this._dcIndex,h=this._aIndex,u=this._iIndex,d=l[c];d.start=this._iIndex,d.texArray=e;for(let f=t;f<n;++f){const g=r[f],p=g._texture.baseTexture,m=z8[p.alphaMode?1:0][g.blendMode];r[f]=null,t<f&&d.blend!==m&&(d.size=u-d.start,t=f,d=l[++c],d.texArray=e,d.start=u),this.packInterleavedGeometry(g,s,o,h,u),h+=g.vertexData.length/2*a,u+=g.indices.length,d.blend=m}t<n&&(d.size=u-d.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;fs.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:n}=this.renderer,r=fs._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:h,blend:u}=r[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=u,n.set(this.state),t.drawElements(l,c,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),fs.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Jp(Math.ceil(e/8)),n=D4(t),r=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[r];return s||(this._aBuffers[r]=s=new DA(r*this.vertexSize*4)),s}getIndexBuffer(e){const t=Jp(Math.ceil(e/12)),n=D4(t),r=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(r)),s}packInterleavedGeometry(e,t,n,r,s){const{uint32View:o,float32View:a}=t,l=r/this.vertexSize,c=e.uvs,h=e.indices,u=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),g=_n.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let p=0;p<u.length;p+=2)a[r++]=u[p],a[r++]=u[p+1],a[r++]=c[p],a[r++]=c[p+1],o[r++]=g,a[r++]=d;for(let p=0;p<h.length;p++)n[s++]=l+h[p]}};md.defaultBatchSize=4096,md.extension={name:"batch",type:Ge.RendererPlugin},md._drawCallPool=[],md._textureArrayPool=[];let Vl=md;Xe.add(Vl);var xq=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,wq=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const WA=class Cd extends io{constructor(e,t,n){const r=zo.from(e||Cd.defaultVertexSrc,t||Cd.defaultFragmentSrc);super(r,n),this.padding=0,this.resolution=Cd.defaultResolution,this.multisample=Cd.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Io}apply(e,t,n,r,s){e.applyFilter(this,t,n,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return wq}static get defaultFragmentSrc(){return xq}};WA.defaultResolution=1,WA.defaultMultisample=Kn.NONE;let $i=WA;class e0{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new _n(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:r}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=r}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}e0.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},e0.extension={type:[Ge.RendererSystem,Ge.CanvasRendererSystem],name:"background"};Xe.add(e0);class nT{constructor(e){this.renderer=e,this.emptyRenderer=new Q0(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,t,n,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const h=s[c],u=h._batchLocation;if(u>=0&&u<r&&t[u]===h){o[c]=u;continue}for(;l<r;){const d=t[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[c]=l,h._batchLocation=l,t[l]=h;break}}}destroy(){this.renderer=null}}nT.extension={type:Ge.RendererSystem,name:"batch"};Xe.add(nT);let Y4=0;class t0{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Y4++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Y4++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(ke.PREFER_ENV>=xc.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}t0.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},t0.extension={type:Ge.RendererSystem,name:"context"};Xe.add(t0);class HA{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new vs("disposeFramebuffer"),this.multisample=Kn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new bt(null,{scaleMode:Vo.NEAREST,resolution:1,mipmap:uo.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new bt(null,{scaleMode:Vo.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:uo.OFF,format:ve.DEPTH_COMPONENT,type:Qe.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const r=this.colorTextures[n],s=r.resolution;r.setSize(e/s,t/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class iT extends bt{constructor(e={}){if(typeof e=="number"){const t=arguments[0],n=arguments[1],r=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:r,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Kn.NONE),super(null,e),this.mipmap=uo.OFF,this.valid=!0,this._clear=new _n([0,0,0,0]),this.framebuffer=new HA(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class qa extends Cf{constructor(e){const t=e,n=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;super(n,r),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=KQ(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,r){const s=e.gl,o=t.realWidth,a=t.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lr.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,r):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class rT extends qa{constructor(e,t){if(t=t||{},typeof e=="string"){const n=new Image;qa.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??ke.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(r=>r.blob()).then(r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lr.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let r=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class J3{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const r=t.width,s=t.height;if(n){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,c=e.y/s+a;n=En.add(n,En.NW),this.x0=l+o*En.uX(n),this.y0=c+a*En.uY(n),n=En.add(n,2),this.x1=l+o*En.uX(n),this.y1=c+a*En.uY(n),n=En.add(n,2),this.x2=l+o*En.uX(n),this.y2=c+a*En.uY(n),n=En.add(n,2),this.x3=l+o*En.uX(n),this.y3=c+a*En.uY(n)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}J3.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const X4=new J3;function Kg(i){i.destroy=function(){},i.on=function(){},i.once=function(){},i.emit=function(){}}class je extends Zf{constructor(e,t,n,r,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Mt(0,0,1,1)),e instanceof je&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=r,this.valid=!1,this.destroyed=!1,this._uvs=X4,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Kt(o.x,o.y):new Kt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&Ds[t.url]&&je.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,je.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new je(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===X4&&(this._uvs=new J3),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=ke.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let s=null;if(r)s=e;else if(e instanceof bt){if(!e.cacheId){const a=t?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${Cc()}`,bt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${Cc()}`}s=e._pixiId}let o=Ds[s];if(r&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof bt)?(t.resolution||(t.resolution=ea(e)),o=new je(new bt(e,t)),o.baseTexture.cacheId=s,bt.addToCache(o.baseTexture,s),je.addToCache(o,s)):!o&&e instanceof bt&&(o=new je(e),je.addToCache(o,s)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t?.resourceOptions),r=je.from(e,Object.assign({resourceOptions:n},t),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,t,n,r){return new je(bt.fromBuffer(e,t,n,r))}static fromLoader(e,t,n,r){const s=new bt(e,Object.assign({scaleMode:bt.defaultOptions.scaleMode,resolution:ea(t)},r)),{resource:o}=s;o instanceof rT&&(o.url=t);const a=new je(s);return n||(n=t),bt.addToCache(a.baseTexture,n),je.addToCache(a,n),n!==t&&(bt.addToCache(a.baseTexture,t),je.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ds[t]&&Ds[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Ds[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ds[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ds[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Ds[e.textureCacheIds[t]]===e&&delete Ds[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:r,height:s}=e,o=t+r>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${t} + ${r} = ${t+r} > ${this.baseTexture.width}`,h=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${h}`)}this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return je._EMPTY||(je._EMPTY=new je(new bt),Kg(je._EMPTY),Kg(je._EMPTY.baseTexture)),je._EMPTY}static get WHITE(){if(!je._WHITE){const e=ke.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),je._WHITE=new je(bt.from(e)),Kg(je._WHITE),Kg(je._WHITE.baseTexture)}return je._WHITE}}class wc extends je{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new wc(new iT(e))}}class sT{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=Kn.NONE){const r=new iT(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new wc(r)}getOptimalTexture(e,t,n=1,r=Kn.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=Jp(e),t=Jp(t),s=((e&65535)<<16|t&65535)>>>0,r>1&&(s+=r*4294967296)):s=r>1?-r:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,r)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,t,n){const r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||Kn.NONE);return r.filterFrame=e.filterFrame,r}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const n=this.texturePool[t];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const n=this.texturePool[t];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}sT.SCREEN_KEY=-1;class Sq extends Qa{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class oT extends Qa{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ii(this.vertices),this.uvBuffer=new ii(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Tq{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Kn.NONE,this.sourceFrame=new Mt,this.destinationFrame=new Mt,this.bindingSourceFrame=new Mt,this.bindingDestinationFrame=new Mt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const jg=[new Kt,new Kt,new Kt,new Kt],n2=new vn;class aT{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new sT,this.statePool=[],this.quad=new Sq,this.quadUv=new oT,this.tempRect=new Mt,this.activeState={},this.globalUniforms=new bs({outputFrame:new Mt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new Tq,o=n.renderTexture;let a,l;if(o.current){const m=o.current;a=m.resolution,l=m.multisample}else a=n.resolution,l=n.multisample;let c=t[0].resolution||a,h=t[0].multisample??l,u=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let m=1;m<t.length;m++){const C=t[m];c=Math.min(c,C.resolution||a),h=Math.min(h,C.multisample??l),u=this.useMaxPadding?Math.max(u,C.padding):u+C.padding,d=d&&C.autoFit,f=f||(C.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=c,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(n2.copyFrom(n.projection.transform).invert(),g),d?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=s.sourceFrame.width,p.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,p),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const c=r.filterArea;c[0]=t.destinationFrame.width,c[1]=t.destinationFrame.height,c[2]=t.sourceFrame.x,c[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,Zs.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let c=t.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,t.resolution);h.filterFrame=c.filterFrame;let u=0;for(u=0;u<n.length-1;++u){u===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(c.width,c.height,t.resolution),h.filterFrame=c.filterFrame),n[u].apply(this,c,h,Zs.CLEAR,t);const d=c;c=h,h=d}n[u].apply(this,c,l.renderTexture,Zs.BLEND,t),u>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Zs.CLEAR){const{renderTexture:n,state:r}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=r.stateId&1||this.forceClear;(t===Zs.CLEAR||t===Zs.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Qs.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Qs.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:r}=this.activeState,{orig:s}=t._texture,o=e.set(r.width,0,0,r.height,n.x,n.y),a=t.worldTransform.copyTo(vn.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,r=Kn.NONE){return this.texturePool.getOptimalTexture(e,t,n,r)}getFilterTexture(e,t,n){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||Kn.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=jg[0],r=jg[1],s=jg[2],o=jg[3];n.set(t.left,t.top),r.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,r.x,s.x,o.x),l=Math.min(n.y,r.y,s.y,o.y),c=Math.max(n.x,r.x,s.x,o.x),h=Math.max(n.y,r.y,s.y,o.y);t.x=a,t.y=l,t.width=c-a,t.height=h-l}roundFrame(e,t,n,r,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?n2.copyFrom(s):n2.identity(),s.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}aT.extension={type:Ge.RendererSystem,name:"filter"};Xe.add(aT);class Eq{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Kn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Mq=new Mt;class lT{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new HA(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Mt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;ke.PREFER_ENV===xc.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=r=>t.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>n,a=t.height>>n,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,r){const s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),(s.width!==n||s.height!==r||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=r,this.gl.viewport(e,t,n,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,r,s=IA.COLOR|IA.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,r),o.clear(s)}initFramebuffer(e){const{gl:t}=this,n=new Eq(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const r=e.colorTextures;let s=r.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer():r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],h=c.parentTextureArray||c;this.renderer.texture.bind(h,0),l===0&&r.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,c.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){r.stencil=r.stencil||n.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,c=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,c=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,c=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,c,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,c,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,r.stencil)}else r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=Kn.NONE;if(e<=1||t===null)return n;for(let r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return n===1&&(n=Kn.NONE),n}blit(e,t,n){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=r.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new HA(r.width,r.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||(t=Mq,t.width=r.width,t.height=r.height),n||(n=t);const c=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,r=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,n,r):s.renderbufferStorage(s.RENDERBUFFER,l,n,r),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Mt}destroy(){this.renderer=null}}lT.extension={type:Ge.RendererSystem,name:"framebuffer"};Xe.add(lT);const i2={5126:4,5123:2,5121:1};class cT{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;ke.PREFER_ENV===xc.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=r=>n.bindVertexArrayOES(r),e.deleteVertexArray=r=>n.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(r,s)=>n.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>n.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>n.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const r=e.buffers[n];t.update(r)}}checkCompatibility(e,t){const n=e.attributes,r=t.attributeData;for(const s in r)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,r=t.attributeData,s=["g",e.id];for(const o in n)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let h=c[l];if(h)return c[a.id]=h,h;const u=e.buffers,d=e.attributes,f={},g={};for(const p in u)f[p]=0,g[p]=0;for(const p in d)!d[p].size&&a.attributeData[p]?d[p].size=a.attributeData[p].size:d[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[p].buffer]+=d[p].size*i2[d[p].type];for(const p in d){const m=d[p],C=m.size;m.stride===void 0&&(f[m.buffer]===C*i2[m.type]?m.stride=0:m.stride=f[m.buffer]),m.start===void 0&&(m.start=g[m.buffer],g[m.buffer]+=C*i2[m.type])}h=r.createVertexArray(),r.bindVertexArray(h);for(let p=0;p<u.length;p++){const m=u[p];o.bind(m),n&&m._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=h,c[l]=h,r.bindVertexArray(null),o.unbind(no.ARRAY_BUFFER),h}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(s[a],t))}if(!t){for(const a in n)if(a[0]==="g"){const l=n[a];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const h=a[c],u=o[h.buffer],d=u._glBuffers[r];if(t.attributeData[c]){l!==d&&(s.bind(u),l=d);const f=t.attributeData[c].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(n||0)*a,r||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),r||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}cT.extension={type:Ge.RendererSystem,name:"geometry"};Xe.add(cT);const K4=new vn;class hT{constructor(e,t){this._texture=e,this.mapCoord=new vn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];t[r]=s*n.a+o*n.c+n.tx,t[r+1]=s*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const r=t.orig,s=t.trim;s&&(K4.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(K4));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(t._frame.x+l+c)/o.width,a[1]=(t._frame.y+l+c)/o.height,a[2]=(t._frame.x+t._frame.width-l+c)/o.width,a[3]=(t._frame.y+t._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var Lq=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Rq=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class Bq extends $i{constructor(e,t,n){let r=null;typeof e!="string"&&t===void 0&&n===void 0&&(r=e,e=void 0,t=void 0,n=void 0),super(e||Rq,t||Lq,n),this.maskSprite=r,this.maskMatrix=new vn}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,r){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new hT(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))}}class Pq{constructor(e=null){this.type=ni.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=$i.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ni.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class uT{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const s=this.maskDataPool.pop()||new Pq;s.pooled=!0,s.maskObject=t,n=s}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(r),n._colorMask=r?r._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==ni.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case ni.SCISSOR:this.renderer.scissor.push(n);break;case ni.STENCIL:this.renderer.stencil.push(n);break;case ni.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case ni.COLOR:this.pushColorMask(n);break}n.type===ni.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case ni.SCISSOR:this.renderer.scissor.pop(t);break;case ni.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ni.SPRITE:this.popSpriteMask(t);break;case ni.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===ni.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=ni.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=ni.SCISSOR:e.type=ni.STENCIL:e.type=ni.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Bq])),r[0].resolution=e.resolution,r[0].multisample=e.multisample,r[0].maskSprite=t;const s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}uT.extension={type:Ge.RendererSystem,name:"mask"};Xe.add(uT);class dT{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==n&&(r===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const j4=new vn,$4=[],fT=class Y1 extends dT{constructor(e){super(e),this.glConst=ke.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:r}=this,s=r.renderTexture,o=n.getBounds(!0,$4.pop()??new Mt);this.roundFrameToPixels(o,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:r,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Y1.isMatrixRotated(t.worldTransform)||Y1.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,r,s){Y1.isMatrixRotated(s)||(s=s?j4.copyFrom(s):j4.identity(),s.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.renderer.filter.transformAABB(s,e),e.fit(r),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&$4.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};fT.extension={type:Ge.RendererSystem,name:"scissor"};let Gq=fT;Xe.add(Gq);class gT extends dT{constructor(e){super(e),this.glConst=ke.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,r=e._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;r!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,r!==0&&(n._colorMask=r,t.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}gT.extension={type:Ge.RendererSystem,name:"stencil"};Xe.add(gT);class pT{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}pT.extension={type:[Ge.RendererSystem,Ge.CanvasRendererSystem],name:"_plugin"};Xe.add(pT);class mT{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new vn,this.transform=null}update(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}mT.extension={type:Ge.RendererSystem,name:"projection"};Xe.add(mT);const Dq=new $3,J4=new Mt;class CT{constructor(e){this.renderer=e,this._tempMatrix=new vn}generateTexture(e,t){const{region:n,...r}=t||{},s=n?.copyTo(J4)||e.getLocalBounds(J4,!0),o=r.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),r.width=s.width,r.height=s.height,r.resolution=o,r.multisample??(r.multisample=this.renderer.multisample);const a=wc.create(r);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=Dq,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}CT.extension={type:[Ge.RendererSystem,Ge.CanvasRendererSystem],name:"textureGenerator"};Xe.add(CT);const vl=new Mt,ed=new Mt;class IT{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Mt,this.destinationFrame=new Mt,this.viewportFrame=new Mt}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const r=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(vl.width=e.frame.width,vl.height=e.frame.height,t=vl),n||(ed.x=e.frame.x,ed.y=e.frame.y,ed.width=t.width,ed.height=t.height,n=ed),o=s.framebuffer):(a=r.resolution,t||(vl.width=r._view.screen.width,vl.height=r._view.screen.height,t=vl),n||(n=vl,n.width=t.width,n.height=t.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=_n.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:h,height:u}=this.viewportFrame;l=Math.round(l),c=Math.round(c),h=Math.round(h),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,h,u)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}IT.extension={type:Ge.RendererSystem,name:"renderTexture"};Xe.add(IT);class Fq{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Nq(i,e){const t={},n=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=e.getActiveAttrib(i,r);if(s.name.startsWith("gl_"))continue;const o=tT(e,s.type),a={type:o,name:s.name,size:eT(o),location:e.getAttribLocation(i,s.name)};t[s.name]=a}return t}function kq(i,e){const t={},n=e.getProgramParameter(i,e.ACTIVE_UNIFORMS);for(let r=0;r<n;r++){const s=e.getActiveUniform(i,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=tT(e,s.type);t[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:Q8(l,s.size)}}return t}function Oq(i,e){const t=V4(i,i.VERTEX_SHADER,e.vertexSrc),n=V4(i,i.FRAGMENT_SHADER,e.fragmentSrc),r=i.createProgram();i.attachShader(r,t),i.attachShader(r,n);const s=e.extra?.transformFeedbackVaryings;if(s&&(typeof i.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):i.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?i.SEPARATE_ATTRIBS:i.INTERLEAVED_ATTRIBS)),i.linkProgram(r),i.getProgramParameter(r,i.LINK_STATUS)||gq(i,r,t,n),e.attributeData=Nq(r,i),e.uniformData=kq(r,i),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const a=Object.keys(e.attributeData);a.sort((l,c)=>l>c?1:-1);for(let l=0;l<a.length;l++)e.attributeData[a[l]].location=l,i.bindAttribLocation(r,l,a[l]);i.linkProgram(r)}i.deleteShader(t),i.deleteShader(n);const o={};for(const a in e.uniformData){const l=e.uniformData[a];o[a]={location:i.getUniformLocation(r,a),value:Q8(l.type,l.size)}}return new Fq(r,o)}function Uq(i,e,t,n,r){t.buffer.update(r)}const Zq={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},AT={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Vq(i){const e=i.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,n=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=AT[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){const a=n%t%16;n+=a,r+=a}n+t>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=t,n=t):(o.offset=r,n+=t,r+=t)}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}function Wq(i,e){const t=[];for(const n in i)e[n]&&t.push(e[n]);return t.sort((n,r)=>n.index-r.index),t}function Hq(i,e){if(!i.autoManage)return{size:0,syncFunc:Uq};const t=Wq(i.uniforms,e),{uboElements:n,size:r}=Vq(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=i.uniforms[a.data.name],c=a.data.name;let h=!1;for(let u=0;u<kh.length;u++){const d=kh[u];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,kh[u].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const u=eT(a.data.type),d=Math.max(AT[a.data.type]/16,1),f=u/d,g=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const u=Zq[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${u};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let zq=0;const $g={textureCount:0,uboCount:0};class yT{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=zq++}systemCheck(){if(!mq())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||($g.textureCount=0,$g.uboCount=0,this.syncUniformGroup(e.uniformGroup,$g)),r}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=uq(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,$g,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=Hq(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const r=e.uniforms,s=[`${n}-`];for(const o in r)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,r=Oq(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}yT.extension={type:Ge.RendererSystem,name:"shader"};Xe.add(yT);class n0{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.3.1 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}n0.defaultOptions={hello:!1},n0.extension={type:[Ge.RendererSystem,Ge.CanvasRendererSystem],name:"startup"};Xe.add(n0);function Yq(i,e=[]){return e[ct.NORMAL]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.ADD]=[i.ONE,i.ONE],e[ct.MULTIPLY]=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SCREEN]=[i.ONE,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.OVERLAY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.DARKEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.LIGHTEN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR_DODGE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR_BURN]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.HARD_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SOFT_LIGHT]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.DIFFERENCE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.EXCLUSION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.HUE]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SATURATION]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.COLOR]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.LUMINOSITY]=[i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.NONE]=[0,0],e[ct.NORMAL_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.ADD_NPM]=[i.SRC_ALPHA,i.ONE,i.ONE,i.ONE],e[ct.SCREEN_NPM]=[i.SRC_ALPHA,i.ONE_MINUS_SRC_COLOR,i.ONE,i.ONE_MINUS_SRC_ALPHA],e[ct.SRC_IN]=[i.DST_ALPHA,i.ZERO],e[ct.SRC_OUT]=[i.ONE_MINUS_DST_ALPHA,i.ZERO],e[ct.SRC_ATOP]=[i.DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ct.DST_OVER]=[i.ONE_MINUS_DST_ALPHA,i.ONE],e[ct.DST_IN]=[i.ZERO,i.SRC_ALPHA],e[ct.DST_OUT]=[i.ZERO,i.ONE_MINUS_SRC_ALPHA],e[ct.DST_ATOP]=[i.ONE_MINUS_DST_ALPHA,i.SRC_ALPHA],e[ct.XOR]=[i.ONE_MINUS_DST_ALPHA,i.ONE_MINUS_SRC_ALPHA],e[ct.SUBTRACT]=[i.ONE,i.ONE,i.ONE,i.ONE,i.FUNC_REVERSE_SUBTRACT,i.FUNC_ADD],e}const Xq=0,Kq=1,jq=2,$q=3,Jq=4,Qq=5,_T=class zA{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ct.NONE,this._blendEq=!1,this.map=[],this.map[Xq]=this.setBlend,this.map[Kq]=this.setOffset,this.map[jq]=this.setCullFace,this.map[$q]=this.setDepthTest,this.map[Jq]=this.setFrontFace,this.map[Qq]=this.setDepthMask,this.checks=[],this.defaultState=new Io,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Yq(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(zA.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(zA.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};_T.extension={type:Ge.RendererSystem,name:"state"};let qq=_T;Xe.add(qq);class eee extends Zf{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(r=>e.systems[r]),n=[...t,...Object.keys(e.systems).filter(r=>!t.includes(r))];for(const r of n)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(t=>{this.runners[t]=new vs(t)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const r in this.runners)this.runners[r].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=n.find(o=>this._systemsHash[o]===r);r[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Id=class X1{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=X1.defaultMaxIdle,this.checkCountMax=X1.defaultCheckCountMax,this.mode=X1.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Z3.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let r=0;r<t.length;r++){const s=t[r];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[r]=null,n=!0)}if(n){let r=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[r++]=t[s]);t.length=r}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}};Id.defaultMode=Z3.AUTO,Id.defaultMaxIdle=60*60,Id.defaultCheckCountMax=60*10,Id.extension={type:Ge.RendererSystem,name:"textureGC"};let Wl=Id;Xe.add(Wl);class r2{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Qe.UNSIGNED_BYTE,this.internalFormat=ve.RGBA,this.samplerType=0}}function tee(i){let e;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?e={[i.RGB]:Ne.FLOAT,[i.RGBA]:Ne.FLOAT,[i.ALPHA]:Ne.FLOAT,[i.LUMINANCE]:Ne.FLOAT,[i.LUMINANCE_ALPHA]:Ne.FLOAT,[i.R8]:Ne.FLOAT,[i.R8_SNORM]:Ne.FLOAT,[i.RG8]:Ne.FLOAT,[i.RG8_SNORM]:Ne.FLOAT,[i.RGB8]:Ne.FLOAT,[i.RGB8_SNORM]:Ne.FLOAT,[i.RGB565]:Ne.FLOAT,[i.RGBA4]:Ne.FLOAT,[i.RGB5_A1]:Ne.FLOAT,[i.RGBA8]:Ne.FLOAT,[i.RGBA8_SNORM]:Ne.FLOAT,[i.RGB10_A2]:Ne.FLOAT,[i.RGB10_A2UI]:Ne.FLOAT,[i.SRGB8]:Ne.FLOAT,[i.SRGB8_ALPHA8]:Ne.FLOAT,[i.R16F]:Ne.FLOAT,[i.RG16F]:Ne.FLOAT,[i.RGB16F]:Ne.FLOAT,[i.RGBA16F]:Ne.FLOAT,[i.R32F]:Ne.FLOAT,[i.RG32F]:Ne.FLOAT,[i.RGB32F]:Ne.FLOAT,[i.RGBA32F]:Ne.FLOAT,[i.R11F_G11F_B10F]:Ne.FLOAT,[i.RGB9_E5]:Ne.FLOAT,[i.R8I]:Ne.INT,[i.R8UI]:Ne.UINT,[i.R16I]:Ne.INT,[i.R16UI]:Ne.UINT,[i.R32I]:Ne.INT,[i.R32UI]:Ne.UINT,[i.RG8I]:Ne.INT,[i.RG8UI]:Ne.UINT,[i.RG16I]:Ne.INT,[i.RG16UI]:Ne.UINT,[i.RG32I]:Ne.INT,[i.RG32UI]:Ne.UINT,[i.RGB8I]:Ne.INT,[i.RGB8UI]:Ne.UINT,[i.RGB16I]:Ne.INT,[i.RGB16UI]:Ne.UINT,[i.RGB32I]:Ne.INT,[i.RGB32UI]:Ne.UINT,[i.RGBA8I]:Ne.INT,[i.RGBA8UI]:Ne.UINT,[i.RGBA16I]:Ne.INT,[i.RGBA16UI]:Ne.UINT,[i.RGBA32I]:Ne.INT,[i.RGBA32UI]:Ne.UINT,[i.DEPTH_COMPONENT16]:Ne.FLOAT,[i.DEPTH_COMPONENT24]:Ne.FLOAT,[i.DEPTH_COMPONENT32F]:Ne.FLOAT,[i.DEPTH_STENCIL]:Ne.FLOAT,[i.DEPTH24_STENCIL8]:Ne.FLOAT,[i.DEPTH32F_STENCIL8]:Ne.FLOAT}:e={[i.RGB]:Ne.FLOAT,[i.RGBA]:Ne.FLOAT,[i.ALPHA]:Ne.FLOAT,[i.LUMINANCE]:Ne.FLOAT,[i.LUMINANCE_ALPHA]:Ne.FLOAT,[i.DEPTH_STENCIL]:Ne.FLOAT},e}function nee(i){let e;return"WebGL2RenderingContext"in globalThis&&i instanceof globalThis.WebGL2RenderingContext?e={[Qe.UNSIGNED_BYTE]:{[ve.RGBA]:i.RGBA8,[ve.RGB]:i.RGB8,[ve.RG]:i.RG8,[ve.RED]:i.R8,[ve.RGBA_INTEGER]:i.RGBA8UI,[ve.RGB_INTEGER]:i.RGB8UI,[ve.RG_INTEGER]:i.RG8UI,[ve.RED_INTEGER]:i.R8UI,[ve.ALPHA]:i.ALPHA,[ve.LUMINANCE]:i.LUMINANCE,[ve.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[Qe.BYTE]:{[ve.RGBA]:i.RGBA8_SNORM,[ve.RGB]:i.RGB8_SNORM,[ve.RG]:i.RG8_SNORM,[ve.RED]:i.R8_SNORM,[ve.RGBA_INTEGER]:i.RGBA8I,[ve.RGB_INTEGER]:i.RGB8I,[ve.RG_INTEGER]:i.RG8I,[ve.RED_INTEGER]:i.R8I},[Qe.UNSIGNED_SHORT]:{[ve.RGBA_INTEGER]:i.RGBA16UI,[ve.RGB_INTEGER]:i.RGB16UI,[ve.RG_INTEGER]:i.RG16UI,[ve.RED_INTEGER]:i.R16UI,[ve.DEPTH_COMPONENT]:i.DEPTH_COMPONENT16},[Qe.SHORT]:{[ve.RGBA_INTEGER]:i.RGBA16I,[ve.RGB_INTEGER]:i.RGB16I,[ve.RG_INTEGER]:i.RG16I,[ve.RED_INTEGER]:i.R16I},[Qe.UNSIGNED_INT]:{[ve.RGBA_INTEGER]:i.RGBA32UI,[ve.RGB_INTEGER]:i.RGB32UI,[ve.RG_INTEGER]:i.RG32UI,[ve.RED_INTEGER]:i.R32UI,[ve.DEPTH_COMPONENT]:i.DEPTH_COMPONENT24},[Qe.INT]:{[ve.RGBA_INTEGER]:i.RGBA32I,[ve.RGB_INTEGER]:i.RGB32I,[ve.RG_INTEGER]:i.RG32I,[ve.RED_INTEGER]:i.R32I},[Qe.FLOAT]:{[ve.RGBA]:i.RGBA32F,[ve.RGB]:i.RGB32F,[ve.RG]:i.RG32F,[ve.RED]:i.R32F,[ve.DEPTH_COMPONENT]:i.DEPTH_COMPONENT32F},[Qe.HALF_FLOAT]:{[ve.RGBA]:i.RGBA16F,[ve.RGB]:i.RGB16F,[ve.RG]:i.RG16F,[ve.RED]:i.R16F},[Qe.UNSIGNED_SHORT_5_6_5]:{[ve.RGB]:i.RGB565},[Qe.UNSIGNED_SHORT_4_4_4_4]:{[ve.RGBA]:i.RGBA4},[Qe.UNSIGNED_SHORT_5_5_5_1]:{[ve.RGBA]:i.RGB5_A1},[Qe.UNSIGNED_INT_2_10_10_10_REV]:{[ve.RGBA]:i.RGB10_A2,[ve.RGBA_INTEGER]:i.RGB10_A2UI},[Qe.UNSIGNED_INT_10F_11F_11F_REV]:{[ve.RGB]:i.R11F_G11F_B10F},[Qe.UNSIGNED_INT_5_9_9_9_REV]:{[ve.RGB]:i.RGB9_E5},[Qe.UNSIGNED_INT_24_8]:{[ve.DEPTH_STENCIL]:i.DEPTH24_STENCIL8},[Qe.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ve.DEPTH_STENCIL]:i.DEPTH32F_STENCIL8}}:e={[Qe.UNSIGNED_BYTE]:{[ve.RGBA]:i.RGBA,[ve.RGB]:i.RGB,[ve.ALPHA]:i.ALPHA,[ve.LUMINANCE]:i.LUMINANCE,[ve.LUMINANCE_ALPHA]:i.LUMINANCE_ALPHA},[Qe.UNSIGNED_SHORT_5_6_5]:{[ve.RGB]:i.RGB},[Qe.UNSIGNED_SHORT_4_4_4_4]:{[ve.RGBA]:i.RGBA},[Qe.UNSIGNED_SHORT_5_5_5_1]:{[ve.RGBA]:i.RGBA}},e}class vT{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new bt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=nee(e),this.samplerTypes=tee(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};const n=new r2(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new r2(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,t=0){const{gl:n}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<n.length;r++)n[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[r]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:r}=this;if(n)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[r].samplerType!==Ne.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new r2(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??Ne.FLOAT,this.webGLVersion===2&&e.type===Qe.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(n,e,t))t.samplerType!==Ne.FLOAT&&(this.hasIntegerTextures=!0);else{const r=e.realWidth,s=e.realHeight,o=n.gl;(t.width!==r||t.height!==s||t.dirtyId<0)&&(t.width=r,t.height=s,o.texImage2D(e.target,0,t.internalFormat,r,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const r=this.managedTextures.indexOf(e);r!==-1&&Nh(this.managedTextures,r,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===uo.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Xa.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==uo.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Vo.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===Vo.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Vo.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Vo.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}vT.extension={type:Ge.RendererSystem,name:"texture"};Xe.add(vT);class bT{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:r}=this;t&&r.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:r}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[r]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}n&&(t||r.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}bT.extension={type:Ge.RendererSystem,name:"transformFeedback"};Xe.add(bT);class i0{constructor(e){this.renderer=e}init(e){this.screen=new Mt(0,0,e.width,e.height),this.element=e.view||ke.ADAPTER.createCanvas(),this.resolution=e.resolution||ke.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",n,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}i0.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},i0.extension={type:[Ge.RendererSystem,Ge.CanvasRendererSystem],name:"_view"};Xe.add(i0);ke.PREFER_ENV=xc.WEBGL2;ke.STRICT_TEXTURE_CACHE=!1;ke.RENDER_OPTIONS={...t0.defaultOptions,...e0.defaultOptions,...i0.defaultOptions,...n0.defaultOptions};Object.defineProperties(ke,{WRAP_MODE:{get(){return bt.defaultOptions.wrapMode},set(i){kt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),bt.defaultOptions.wrapMode=i}},SCALE_MODE:{get(){return bt.defaultOptions.scaleMode},set(i){kt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),bt.defaultOptions.scaleMode=i}},MIPMAP_TEXTURES:{get(){return bt.defaultOptions.mipmap},set(i){kt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),bt.defaultOptions.mipmap=i}},ANISOTROPIC_LEVEL:{get(){return bt.defaultOptions.anisotropicLevel},set(i){kt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),bt.defaultOptions.anisotropicLevel=i}},FILTER_RESOLUTION:{get(){return kt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),$i.defaultResolution},set(i){$i.defaultResolution=i}},FILTER_MULTISAMPLE:{get(){return kt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),$i.defaultMultisample},set(i){$i.defaultMultisample=i}},SPRITE_MAX_TEXTURES:{get(){return Vl.defaultMaxTextures},set(i){kt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Vl.defaultMaxTextures=i}},SPRITE_BATCH_SIZE:{get(){return Vl.defaultBatchSize},set(i){kt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Vl.defaultBatchSize=i}},CAN_UPLOAD_SAME_BUFFER:{get(){return Vl.canUploadSameBuffer},set(i){kt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Vl.canUploadSameBuffer=i}},GC_MODE:{get(){return Wl.defaultMode},set(i){kt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Wl.defaultMode=i}},GC_MAX_IDLE:{get(){return Wl.defaultMaxIdle},set(i){kt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Wl.defaultMaxIdle=i}},GC_MAX_CHECK_COUNT:{get(){return Wl.defaultCheckCountMax},set(i){kt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Wl.defaultCheckCountMax=i}},PRECISION_VERTEX:{get(){return zo.defaultVertexPrecision},set(i){kt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),zo.defaultVertexPrecision=i}},PRECISION_FRAGMENT:{get(){return zo.defaultFragmentPrecision},set(i){kt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),zo.defaultFragmentPrecision=i}}});var Ic=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(Ic||{});class s2{constructor(e,t=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=r}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const xT=class _r{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s2(null,null,1/0),this.deltaMS=1/_r.targetFPMS,this.elapsedMS=1/_r.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=Ic.NORMAL){return this._addListener(new s2(e,t,n))}addOnce(e,t,n=Ic.NORMAL){return this._addListener(new s2(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*_r.targetFPMS;const n=this._head;let r=n.next;for(;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,_r.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!_r._shared){const e=_r._shared=new _r;e.autoStart=!0,e._protected=!0}return _r._shared}static get system(){if(!_r._system){const e=_r._system=new _r;e.autoStart=!0,e._protected=!0}return _r._system}};xT.targetFPMS=.06;let cr=xT;Object.defineProperties(ke,{TARGET_FPMS:{get(){return cr.targetFPMS},set(i){kt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),cr.targetFPMS=i}}});class wT{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ic.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?cr.shared:new cr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}wT.extension=Ge.Application;Xe.add(wT);const ST=[];Xe.handleByList(Ge.Renderer,ST);function iee(i){for(const e of ST)if(e.test(i))return new e(i);throw new Error("Unable to auto-detect a suitable renderer.")}var ree=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,see=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const oee=ree,TT=see;class ET{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=Kn.HIGH?this.multisample=Kn.HIGH:t>=Kn.MEDIUM?this.multisample=Kn.MEDIUM:t>=Kn.LOW?this.multisample=Kn.LOW:this.multisample=Kn.NONE}destroy(){}}ET.extension={type:Ge.RendererSystem,name:"_multisample"};Xe.add(ET);class aee{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class MT{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:r}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){const{gl:r,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,r=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new aee(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}MT.extension={type:Ge.RendererSystem,name:"buffer"};Xe.add(MT);class LT{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let r,s,o,a;if(t&&(r=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!r,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(r),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),r&&(t.blit&&n.framebuffer.blit(),r.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}LT.extension={type:Ge.RendererSystem,name:"objectRenderer"};Xe.add(LT);const K1=class YA extends eee{constructor(e){super(),this.type=_8.WEBGL,e=Object.assign({},ke.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new bs({projectionMatrix:new vn},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:YA.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(kt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=YA.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:LQ()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return kt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return kt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return kt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return kt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};K1.extension={type:Ge.Renderer,priority:1},K1.__plugins={},K1.__systems={};let Q3=K1;Xe.handleByMap(Ge.RendererPlugin,Q3.__plugins);Xe.handleByMap(Ge.RendererSystem,Q3.__systems);Xe.add(Q3);class RT extends Cf{constructor(e,t){const{width:n,height:r}=t||{};super(n,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new bt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Cf?this.addResourceAt(e[n],n):this.addResourceAt(K8(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}}class lee extends RT{constructor(e,t){const{width:n,height:r}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:r}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Gh.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,t.format,n.type,null);for(let l=0;l<r;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,t.format,n.type,c.resource.source))}return!0}}class cee extends qa{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const BT=class Ad extends RT{constructor(e,t){const{width:n,height:r,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==Ad.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:r});for(let a=0;a<Ad.SIDES;a++)this.items[a].target=Gh.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Gh.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Gh.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){const r=this.itemDirtyIds;for(let s=0;s<Ad.SIDES;s++){const o=this.items[s];(r[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),r[s]=o.dirtyId):r[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),r[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Ad.SIDES}};BT.SIDES=6;let hee=BT;class Ah extends qa{constructor(e,t){t=t||{};let n,r,s;typeof e=="string"?(n=Ah.EMPTY,r=e,s=!0):(n=e,r=null,s=!1),super(n),this.url=r,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const n=await ke.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===lr.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}}),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Ah._EMPTY=Ah._EMPTY??ke.ADAPTER.createCanvas(0,0),Ah._EMPTY}}const XA=class j1 extends qa{constructor(e,t){t=t||{},super(ke.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},j1.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;qa.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),r=Math.round(r),s=Math.round(s);const o=this.source;o.width=r,o.height=s,o._pixiId=`canvas_${Cc()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,r,s),this._resolve(),this._resolve=null}}static getSize(e){const t=j1.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&j1.SVG_XML.test(e)}};XA.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,XA.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let KA=XA;const jA=class $A extends qa{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const r=e[0].src||e[0];qa.crossOrigin(n,r,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),h=c.slice(c.lastIndexOf(".")+1);l=l||$A.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=cr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(cr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(cr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(cr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||$A.TYPES.includes(t)}};jA.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],jA.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let PT=jA;FA.push(Ah,rT,cee,PT,KA,K0,hee,lee);class r0{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Mt.EMPTY:(e=e||new Mt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:r,c:s,d:o,tx:a,ty:l}=e,c=n*t.x+s*t.y+a,h=r*t.x+o*t.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,n=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=r,this.maxY=s}addFrame(e,t,n,r,s){this.addFrameMatrix(e.worldTransform,t,n,r,s)}addFrameMatrix(e,t,n,r,s){const o=e.a,a=e.b,l=e.c,c=e.d,h=e.tx,u=e.ty;let d=this.minX,f=this.minY,g=this.maxX,p=this.maxY,m=o*t+l*n+h,C=a*t+c*n+u;d=m<d?m:d,f=C<f?C:f,g=m>g?m:g,p=C>p?C:p,m=o*r+l*n+h,C=a*r+c*n+u,d=m<d?m:d,f=C<f?C:f,g=m>g?m:g,p=C>p?C:p,m=o*t+l*s+h,C=a*t+c*s+u,d=m<d?m:d,f=C<f?C:f,g=m>g?m:g,p=C>p?C:p,m=o*r+l*s+h,C=a*r+c*s+u,d=m<d?m:d,f=C<f?C:f,g=m>g?m:g,p=C>p?C:p,this.minX=d,this.minY=f,this.maxX=g,this.maxY=p}addVertexData(e,t,n){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<n;l+=2){const c=e[l],h=e[l+1];r=c<r?c:r,s=h<s?h:s,o=c>o?c:o,a=h>a?h:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)}addVerticesMatrix(e,t,n,r,s=0,o=s){const a=e.a,l=e.b,c=e.c,h=e.d,u=e.tx,d=e.ty;let f=this.minX,g=this.minY,p=this.maxX,m=this.maxY;for(let C=n;C<r;C+=2){const A=t[C],I=t[C+1],y=a*A+c*I+u,x=h*I+l*A+d;f=Math.min(f,y-s),p=Math.max(p,y+s),g=Math.min(g,x-o),m=Math.max(m,x+o)}this.minX=f,this.minY=g,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,n=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>h?o:h}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>h?o:h}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,r,s,o){e-=s,t-=o,n+=s,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}class Pn extends Zf{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new $3,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new r0,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const r=t[n];Object.defineProperty(Pn.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Mt),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Mt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new r0);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,n=1,r=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new uee),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*rq}set angle(e){this.transform.rotation=e*sq}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class uee extends Pn{constructor(){super(...arguments),this.sortDirty=null}}Pn.prototype.displayObjectUpdateTransform=Pn.prototype.updateTransform;const dee=new vn;function fee(i,e){return i.zIndex===e.zIndex?i._lastSortedIndex-e._lastSortedIndex:i.zIndex-e.zIndex}const GT=class JA extends Pn{constructor(){super(),this.children=[],this.sortableChildren=JA.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Nh(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,Nh(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Nh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,r=t,s=r-n;let o;if(s>0&&s<=r){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&r.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(fee),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let r=0,s=this.children.length;r<s;++r){const o=this.children[r];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,r;this.cullArea?(n=this.cullArea,r=this.worldTransform):this._render!==JA.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(r?(r=dee.copyFrom(r),r.prepend(s)):r=s),n&&t.intersects(n,r))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<t.length;s++)t[s].enabled&&this._enabledFilters.push(t[s])}const r=t&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==ni.NONE));if(r&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}r&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,n=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<n.length;++r)n[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};GT.defaultSortableChildren=!1;let is=GT;is.prototype.containerUpdateTransform=is.prototype.updateTransform;Object.defineProperties(ke,{SORTABLE_CHILDREN:{get(){return is.defaultSortableChildren},set(i){kt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),is.defaultSortableChildren=i}}});const td=new Kt,gee=new Uint16Array([0,1,2,0,2,3]);class Tu extends is{constructor(e){super(),this._anchor=new Ho(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new _n(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ct.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||je.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=gee,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ke.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Oa(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Oa(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,r=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this.vertexData,h=e.trim,u=e.orig,d=this._anchor;let f=0,g=0,p=0,m=0;if(h?(g=h.x-d._x*u.width,f=g+h.width,m=h.y-d._y*u.height,p=m+h.height):(g=-d._x*u.width,f=g+u.width,m=-d._y*u.height,p=m+u.height),c[0]=n*g+s*m+a,c[1]=o*m+r*g+l,c[2]=n*f+s*m+a,c[3]=o*m+r*f+l,c[4]=n*f+s*p+a,c[5]=o*p+r*f+l,c[6]=n*g+s*p+a,c[7]=o*p+r*g+l,this._roundPixels){const C=ke.RESOLUTION;for(let A=0;A<c.length;++A)c[A]=Math.round(c[A]*C)/C}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,h=s.tx,u=s.ty,d=-r._x*n.width,f=d+n.width,g=-r._y*n.height,p=g+n.height;if(t[0]=o*d+l*g+h,t[1]=c*g+a*d+u,t[2]=o*f+l*g+h,t[3]=c*g+a*f+u,t[4]=o*f+l*p+h,t[5]=c*p+a*f+u,t[6]=o*d+l*p+h,t[7]=c*p+a*d+u,this._roundPixels){const m=ke.RESOLUTION;for(let C=0;C<t.length;++C)t[C]=Math.round(t[C]*m)/m}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new r0),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Mt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,td);const t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x;let s=0;return td.x>=r&&td.x<r+t&&(s=-n*this.anchor.y,td.y>=s&&td.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){const t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof je?e:je.from(e,t);return new Tu(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Oa(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Oa(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||je.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const DT=new vn;Pn.prototype._cacheAsBitmap=!1;Pn.prototype._cacheData=null;Pn.prototype._cacheAsBitmapResolution=null;Pn.prototype._cacheAsBitmapMultisample=null;class pee{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Pn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(i){i!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(i){i!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=i,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(i){if(this._cacheAsBitmap===i)return;this._cacheAsBitmap=i;let e;i?(this._cacheData||(this._cacheData=new pee),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Pn.prototype._renderCached=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))};Pn.prototype._initCachedDisplayObject=function(i){if(this._cacheData?.sprite)return;const e=this.alpha;this.alpha=1,i.batch.flush();const t=this.getLocalBounds(new Mt,!0);if(this.filters?.length){const d=this.filters[0].padding;t.pad(d)}const n=this.cacheAsBitmapResolution||i.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const r=i.renderTexture.current,s=i.renderTexture.sourceFrame.clone(),o=i.renderTexture.destinationFrame.clone(),a=i.projection.transform,l=wc.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??i.multisample}),c=`cacheAsBitmap_${Cc()}`;this._cacheData.textureCacheId=c,bt.addToCache(l.baseTexture,c),je.addToCache(l,c);const h=this.transform.localTransform.copyTo(DT).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=a,i.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Tu(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)};Pn.prototype._renderCachedCanvas=function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))};Pn.prototype._initCachedDisplayObjectCanvas=function(i){if(this._cacheData?.sprite)return;const e=this.getLocalBounds(new Mt,!0),t=this.alpha;this.alpha=1;const n=i.canvasContext.activeContext,r=i._projTransform,s=this.cacheAsBitmapResolution||i.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=wc.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Cc()}`;this._cacheData.textureCacheId=a,bt.addToCache(o.baseTexture,a),je.addToCache(o,a);const l=DT;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),i.canvasContext.activeContext=n,i._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const c=new Tu(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=t,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};Pn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Pn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Pn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,bt.removeFromCache(this._cacheData.textureCacheId),je.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Pn.prototype._cacheAsBitmapDestroy=function(i){this.cacheAsBitmap=!1,this.destroy(i)};Pn.prototype.name=null;is.prototype.getChildByName=function(i,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===i)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){const r=this.children[t];if(!r.getChildByName)continue;const s=r.getChildByName(i,!0);if(s)return s}return null};Pn.prototype.getGlobalPosition=function(i=new Kt,e=!1){return this.parent?this.parent.toGlobal(this.position,i,e):(i.x=this.position.x,i.y=this.position.y),i};var mee=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class Cee extends $i{constructor(e=1){super(oee,mee,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const Iee={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Aee=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function yee(i){const e=Iee[i],t=e.length;let n=Aee,r="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<i;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=i-a-1),l=l.replace("%value%",e[o].toString()),r+=l,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",i.toString()),n}const _ee=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function vee(i,e){const t=Math.ceil(i/2);let n=_ee,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<i;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),r+=a,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",i.toString()),n}class QA extends $i{constructor(e,t=8,n=4,r=$i.defaultResolution,s=5){const o=vee(s,e),a=yee(s);super(o,a),this.horizontal=e,this.resolution=r,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,r);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Zs.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Zs.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,r),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class bee extends $i{constructor(e=8,t=4,n=$i.defaultResolution,r=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new QA(!0,e,t,n,r),this.blurYFilter=new QA(!1,e,t,n,r),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,r){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Zs.CLEAR),this.blurYFilter.apply(e,a,n,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var xee=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class qA extends $i{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(TT,xee,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,r,s]=_n.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,r,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),r=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,c=o*(1-n)-a*r,h=o*(1-n)+a*r,u=o*(1-n)+a*r,d=n+o*(1-n),f=o*(1-n)-a*r,g=o*(1-n)-a*r,p=o*(1-n)+a*r,m=n+o*(1-n),C=[l,c,h,0,0,u,d,f,0,0,g,p,m,0,0,0,0,0,1,0];this._loadMatrix(C,t)}contrast(e,t){const n=(e||0)+1,r=-.5*(n-1),s=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const n=e*2/3+1,r=(n-1)*-.5,s=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,r,s){e=e||.2,t=t||.15,n=n||16770432,r=r||3375104;const o=_n.shared,[a,l,c]=o.setValue(n).toArray(),[h,u,d]=o.setValue(r).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,h,u,d,t,0,a-h,l-u,c-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}qA.prototype.grayscale=qA.prototype.greyscale;var wee=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,See=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Tee extends $i{constructor(e,t){const n=new vn;e.renderable=!1,super(See,wee,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new Kt(t,t)}apply(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,r)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var Eee=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Mee=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class Lee extends $i{constructor(){super(Mee,Eee)}}var Ree=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Bee extends $i{constructor(e=.5,t=Math.random()){super(TT,Ree,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Q4={AlphaFilter:Cee,BlurFilter:bee,BlurFilterPass:QA,ColorMatrixFilter:qA,DisplacementFilter:Tee,FXAAFilter:Lee,NoiseFilter:Bee};Object.entries(Q4).forEach(([i,e])=>{Object.defineProperty(Q4,i,{get(){return kt("7.1.0",`filters.${i} has moved to ${i}`),e}})});class Pee{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(cr.system.add(this.tickerUpdate,this,Ic.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(cr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const La=new Pee;class Wf{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Wf.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Kt,this.page=new Kt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class s0 extends Wf{constructor(){super(...arguments),this.client=new Kt,this.movement=new Kt,this.offset=new Kt,this.global=new Kt,this.screen=new Kt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,r,s,o,a,l,c,h,u,d,f,g,p){throw new Error("Method not implemented.")}}class gs extends s0{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Oh extends s0{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Oh.DOM_DELTA_PIXEL=0,Oh.DOM_DELTA_LINE=1,Oh.DOM_DELTA_PAGE=2;const Gee=2048,Dee=new Kt,o2=new Kt;class Fee{constructor(e){this.dispatch=new Zf,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,r)=>n.priority-r.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,r=t.length;n<r;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){La.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[n](this.rootTarget,this.rootTarget.eventMode,Dee.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=n.length-1;r<s;r++)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const r=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)r.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let n=0;n<Gee&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,r,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(La.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let u=h.length-1;u>=0;u--){const d=h[u],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,r,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const g=e.isInteractive();(f.length>0||g)&&(g&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),c=e.isInteractive();return c&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&r(e,n)?c?[e]:[]:null}hitTestRecursive(e,t,n,r,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(La.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const h=l[c],u=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,n,r,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;const d=e.isInteractive();return(u.length>0||d)&&u.push(e),u}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&r(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,o2),!e.hitArea.contains(o2.x,o2.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!n.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;const n=`on${t}`;e.currentTarget[n]?.(e);const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const r=t.button===2;this.dispatchEvent(t,r?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets?.length>0&&s!==t.target){const l=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,l,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!t.composedPath().includes(s)){const h=this.createPointerEvent(e,"pointerleave",s);for(h.eventPhase=h.AT_TARGET;h.target&&!t.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(c)}if(s!==t.target){const l=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(t,l);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let h=s?.parent;for(;h&&h!==this.rootTarget.parent&&h!==t.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const u=this.clonePointerEvent(t,"pointerenter");for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==s&&u.target!==this.rootTarget.parent;)u.currentTarget=u.target,this.notifyTarget(u),n&&this.notifyTarget(u,"mouseenter"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),r=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),r&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=r.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof gs)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){let s=n;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof Oh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const r=this.allocateEvent(gs);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=n??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof t=="string"&&(r.type=t),r}createWheelEvent(e){const t=this.allocateEvent(Oh);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(gs);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gs&&t instanceof gs&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof s0&&t instanceof s0&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let r=0,s=n.length;r<s&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(t,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}}const Nee=1,kee={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ey=class ty{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Fee(null),La.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new gs(null),this.rootWheelEvent=new Oh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ty.defaultEventFeatures},{set:(t,n,r)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),t[n]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,ty._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,r=t.length;n<r;n++){const s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,La.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,r=t.length;n<r;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,r=t.length;n<r;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,La.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;La.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;La.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*s,e.y=(n-r.top)*(this.domElement.height/r.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,r=e.changedTouches.length;n<r;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=Nee),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=kee[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};ey.extension={name:"events",type:[Ge.RendererSystem,Ge.CanvasRendererSystem]},ey.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let ny=ey;Xe.add(ny);function q4(i){return i==="dynamic"||i==="static"}const Oee={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??q4(ny.defaultEventMode)},set interactive(i){kt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=i,this.eventMode=i?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??ny.defaultEventMode},set eventMode(i){this._internalInteractive=q4(i),this._internalEventMode=i},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(i,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof e=="function"?void 0:e;i=n?`${i}capture`:i,e=typeof e=="function"?e:e.handleEvent,this.on(i,e,r)},removeEventListener(i,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,r=typeof e=="function"?void 0:e;i=n?`${i}capture`:i,e=typeof e=="function"?e:e.handleEvent,this.off(i,e,r)},dispatchEvent(i){if(!(i instanceof Wf))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return i.defaultPrevented=!1,i.path=null,i.target=this,i.manager.dispatchEvent(i),!i.defaultPrevented}};Pn.mixin(Oee);const Uee={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Pn.mixin(Uee);const Zee=9,Jg=100,Vee=0,Wee=0,e9=2,t9=1,Hee=-1e3,zee=-1e3,Yee=2;class FT{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Wo.tablet||Wo.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Jg}px`,t.style.height=`${Jg}px`,t.style.position="absolute",t.style.top=`${Vee}px`,t.style.left=`${Wee}px`,t.style.zIndex=e9.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${t9}px`,e.style.height=`${t9}px`,e.style.position="absolute",e.style.top=`${Hee}px`,e.style.left=`${zee}px`,e.style.zIndex=Yee.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if(Wo.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=r/o*l,h=s/a*l;let u=this.div;u.style.left=`${t}px`,u.style.top=`${n}px`,u.style.width=`${o}px`,u.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Nh(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{u=f._accessibleDiv;let g=f.hitArea;const p=f.worldTransform;f.hitArea?(u.style.left=`${(p.tx+g.x*p.a)*c}px`,u.style.top=`${(p.ty+g.y*p.d)*h}px`,u.style.width=`${g.width*p.a*c}px`,u.style.height=`${g.height*p.d*h}px`):(g=f.getBounds(),this.capHitArea(g),u.style.left=`${g.x*c}px`,u.style.top=`${g.y*h}px`,u.style.width=`${g.width*c}px`,u.style.height=`${g.height*h}px`,u.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(u.title=f.accessibleTitle),u.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&u.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==u.title||f.tabIndex!==u.tabIndex)&&(u.title=f.accessibleTitle,u.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Jg}px`,t.style.height=`${Jg}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=e9.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,r=this.renderer.events.rootBoundary,s=Object.assign(new Wf(r),{target:n});r.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===Zee&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}FT.extension={name:"accessibility",type:[Ge.RendererPlugin,Ge.CanvasRendererPlugin]};Xe.add(FT);const NT=class iy{constructor(e){this.stage=new is,e=Object.assign({forceCanvas:!1},e),this.renderer=iee(e),iy._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){const n=iy._plugins.slice(0);n.reverse(),n.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};NT._plugins=[];let q3=NT;Xe.handleByList(Ge.Application,q3._plugins);class kT{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;t=r,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}kT.extension=Ge.Application;Xe.add(kT);const n9={loader:Ge.LoadParser,resolver:Ge.ResolveParser,cache:Ge.CacheParser,detection:Ge.DetectionParser};Xe.handle(Ge.Asset,i=>{const e=i.ref;Object.entries(n9).filter(([t])=>!!e[t]).forEach(([t,n])=>Xe.add(Object.assign(e[t],{extension:e[t].extension??n})))},i=>{const e=i.ref;Object.keys(n9).filter(t=>!!e[t]).forEach(t=>Xe.remove(e[t]))});class Xee{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Eu(i,e){if(Array.isArray(e)){for(const t of e)if(i.startsWith(`data:${t}`))return!0;return!1}return i.startsWith(`data:${e}`)}function il(i,e){const t=i.split("?")[0],n=Qi.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const Cs=(i,e,t=!1)=>(Array.isArray(i)||(i=[i]),e?i.map(n=>typeof n=="string"||t?e(n):n):i),ry=(i,e)=>{const t=e.split("?")[1];return t&&(i+=`?${t}`),i};function OT(i,e,t,n,r){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?OT(i.replace(n[t],a),e,t+1,n,r):r.push(i.replace(n[t],a))}}function Kee(i){const e=/\{(.*?)\}/g,t=i.match(e),n=[];if(t){const r=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),OT(i,r,0,t,n)}else n.push(i);return n}const o0=i=>!Array.isArray(i);class jee{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Cs(e);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){r=l.getCacheableAssets(n,t);break}}r||(r={},n.forEach(a=>{r[a]=t}));const s=Object.keys(r),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),t instanceof je){const a=t;n.forEach(l=>{a.baseTexture!==je.EMPTY.baseTexture&&bt.addToCache(a.baseTexture,l),je.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Kl=new jee;class $ee{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{let r=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];if(a.load&&a.test?.(e,t,this)){s=a;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await s.load(e,t,this),n.parser=s;for(let o=0;o<this.parsers.length;o++){const a=this.parsers[o];a.parse&&a.parse&&await a.testParse?.(r,t,this)&&(r=await a.parse(r,t,this)||r,n.parser=a)}return r})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const r={},s=o0(e),o=Cs(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const h=Qi.toAbsolute(c.src);if(!r[c.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,c)),r[c.src]=await this.promiseCache[h].promise,t&&t(++n/a)}catch(u){throw delete this.promiseCache[h],delete r[c.src],new Error(`[Loader.load] Failed to load ${h}.
${u}`)}});return await Promise.all(l),s?r[o[0].src]:r}async unload(e){const t=Cs(e,n=>({alias:[n],src:n})).map(async n=>{const r=Qi.toAbsolute(n.src),s=this.promiseCache[r];if(s){const o=await s.promise;delete this.promiseCache[r],s.parser?.unload?.(o,n,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var Rs=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(Rs||{});const Jee=".json",Qee="application/json",qee={extension:{type:Ge.LoadParser,priority:Rs.Low},name:"loadJson",test(i){return Eu(i,Qee)||il(i,Jee)},async load(i){return await(await ke.ADAPTER.fetch(i)).json()}};Xe.add(qee);const ete=".txt",tte="text/plain",nte={name:"loadTxt",extension:{type:Ge.LoadParser,priority:Rs.Low},test(i){return Eu(i,tte)||il(i,ete)},async load(i){return await(await ke.ADAPTER.fetch(i)).text()}};Xe.add(nte);const ite=["normal","bold","100","200","300","400","500","600","700","800","900"],rte=[".ttf",".otf",".woff",".woff2"],ste=["font/ttf","font/otf","font/woff","font/woff2"],ote=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function ate(i){const e=Qi.extname(i),t=Qi.basename(i,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=t.length>0;for(const s of t)if(!s.match(ote)){n=!1;break}let r=t.join(" ");return n||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}const lte={extension:{type:Ge.LoadParser,priority:Rs.Low},name:"loadWebFont",test(i){return Eu(i,ste)||il(i,rte)},async load(i,e){const t=ke.ADAPTER.getFontFaceSet();if(t){const n=[],r=e.data?.family??ate(i),s=e.data?.weights?.filter(a=>ite.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],c=new FontFace(r,`url(${encodeURI(i)})`,{...o,weight:l});await c.load(),t.add(c),n.push(c)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(e=>ke.ADAPTER.getFontFaceSet().delete(e))}};Xe.add(lte);let i9=0,a2;const cte="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",hte={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${cte}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},ute={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let l2;class dte{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const t=URL.createObjectURL(new Blob([hte.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",r=>{n.terminate(),URL.revokeObjectURL(t),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){a2===void 0&&(a2=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<a2&&(l2||(l2=URL.createObjectURL(new Blob([ute.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(l2),e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((r,s)=>{this.queue.push({id:e,arguments:t,resolve:r,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[i9]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:i9++,id:n})}}const r9=new dte;function Hf(i,e,t){i.resource.internal=!0;const n=new je(i),r=()=>{delete e.promiseCache[t],Kl.has(t)&&Kl.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),r())}),n.once("destroyed",()=>{i.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),n}const fte=[".jpeg",".jpg",".png",".webp",".avif"],gte=["image/jpeg","image/png","image/webp","image/avif"];async function pte(i){const e=await ke.ADAPTER.fetch(i);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const q0={name:"loadTextures",extension:{type:Ge.LoadParser,priority:Rs.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return Eu(i,gte)||il(i,fte)},async load(i,e,t){const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let r;n?this.config.preferWorkers&&await r9.isImageBitmapSupported()?r=await r9.loadImageBitmap(i):r=await pte(i):r=await new Promise((a,l)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=i,c.complete?a(c):(c.onload=()=>a(c),c.onerror=h=>l(h))});const s={...e.data};s.resolution??(s.resolution=ea(i)),n&&s.resourceOptions?.ownsImageBitmap===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new bt(r,s);return o.resource.src=i,Hf(o,t,i)},unload(i){i.destroy(!0)}};Xe.add(q0);const mte=".svg",Cte="image/svg+xml",Ite={extension:{type:Ge.LoadParser,priority:Rs.High},name:"loadSVG",test(i){return Eu(i,Cte)||il(i,mte)},async testParse(i){return KA.test(i)},async parse(i,e,t){const n=new KA(i,e?.data?.resourceOptions);await n.load();const r=new bt(n,{resolution:ea(i),...e?.data});return r.resource.src=e.src,Hf(r,t,e.src)},async load(i,e){return(await ke.ADAPTER.fetch(i)).text()},unload:q0.unload};Xe.add(Ite);const Ate=[".mp4",".m4v",".webm",".ogv"],yte=["video/mp4","video/webm","video/ogg"],_te={name:"loadVideo",extension:{type:Ge.LoadParser,priority:Rs.High},config:{defaultAutoPlay:!0},test(i){return Eu(i,yte)||il(i,Ate)},async load(i,e,t){let n;const r=await(await ke.ADAPTER.fetch(i)).blob(),s=URL.createObjectURL(r);try{const o={autoPlay:this.config.defaultAutoPlay,...e?.data?.resourceOptions},a=new PT(s,o);await a.load();const l=new bt(a,{alphaMode:await MQ(),resolution:ea(i),...e?.data});l.resource.src=i,n=Hf(l,t,i),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(o){throw URL.revokeObjectURL(s),o}return n},unload(i){i.destroy(!0)}};Xe.add(_te);class vte{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:r,srcs:s}=e;return Cs(t||n||r||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>a?.src??a?.srcs??a):o?.src||o?.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(r=>{const s=r.src??r.srcs,o=r.alias??r.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));n.push(...l),a=[...o,...l]}this.add({...r,alias:a,src:s})}):Object.keys(t).forEach(r=>{const s=[r,this._createBundleAssetId(e,r)];if(typeof t[r]=="string")this.add({alias:s,src:t[r]});else if(Array.isArray(t[r]))this.add({alias:s,src:t[r]});else{const o=t[r],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,t,n,r,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(kt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:r,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Cs(o).forEach(l=>{const{src:c,srcs:h}=l;let{data:u,format:d,loadParser:f}=l;const g=Cs(c||h).map(C=>typeof C=="string"?Kee(C):Array.isArray(C)?C:[C]),p=this.getAlias(l);Array.isArray(p)?p.forEach(a):a(p);const m=[];g.forEach(C=>{C.forEach(A=>{let I={};if(typeof A!="object"){I.src=A;for(let y=0;y<this._parsers.length;y++){const x=this._parsers[y];if(x.test(A)){I=x.parse(A);break}}}else u=A.data??u,d=A.format??d,f=A.loadParser??f,I={...I,...A};if(!p)throw new Error(`[Resolver] alias is undefined for this asset: ${I.src}`);I=this.buildResolvedAsset(I,{aliases:p,data:u,format:d,loadParser:f}),m.push(I)})}),p.forEach(C=>{this._assetMap[C]=m})})}resolveBundle(e){const t=o0(e);e=Cs(e);const n={};return e.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(r,l)]=c}n[r]=a}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const r in t)n[r]=t[r].src;return n}return t.src}resolve(e){const t=o0(e);e=Cs(e);const n={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=s[0],a=this._getPreferredOrder(s);a?.priority.forEach(l=>{a.params[l].forEach(c=>{const h=s.filter(u=>u[l]?u[l]===c:!1);h.length&&(s=h)})}),this._resolverHash[r]=s[0]??o}else this._resolverHash[r]=this.buildResolvedAsset({alias:[r],src:r},{});n[r]=this._resolverHash[r]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:n,data:r,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Qi.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...r||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.src.split(".").pop(),e.srcs=e.src,e.name=e.alias,e}}class bte{constructor(){this._detections=[],this._initialized=!1,this.resolver=new vte,this.loader=new $ee,this.cache=Kl,this._backgroundLoader=new Xee(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const t=e.texturePreference?.resolution??1,n=typeof t=="number"?[t]:t,r=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,r,s){this.resolver.add(e,t,n,r,s)}async load(e,t){this._initialized||await this.init();const n=o0(e),r=Cs(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,t);return n?o[r[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},o=Object.keys(r);let a=0,l=0;const c=()=>{t?.(++a/l)},h=o.map(u=>{const d=r[u];return l+=Object.keys(d).length,this._mapLoadToResolve(d,c).then(f=>{s[u]=f})});return await Promise.all(h),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Kl.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=Kl.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),r=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const c=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[r[l]]=c,Kl.set(h,c)}),o}async unload(e){this._initialized||await this.init();const t=Cs(e).map(r=>typeof r!="string"?r.src:r),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Cs(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(r=>this._unloadFromResolved(t[r]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{Kl.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,r)=>t.indexOf(n)===r),t}get detections(){return this._detections}get preferWorkers(){return q0.config.preferWorkers}set preferWorkers(e){kt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const Qg=new bte;Xe.handleByList(Ge.LoadParser,Qg.loader.parsers).handleByList(Ge.ResolveParser,Qg.resolver.parsers).handleByList(Ge.CacheParser,Qg.cache.parsers).handleByList(Ge.DetectionParser,Qg.detections);const xte={extension:Ge.CacheParser,test:i=>Array.isArray(i)&&i.every(e=>e instanceof je),getCacheableAssets:(i,e)=>{const t={};return i.forEach(n=>{e.forEach((r,s)=>{t[n+(s===0?"":s+1)]=r})}),t}};Xe.add(xte);const wte={extension:{type:Ge.DetectionParser,priority:1},test:async()=>{const i="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=";return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i})},add:async i=>[...i,"avif"],remove:async i=>i.filter(e=>e!=="avif")};Xe.add(wte);const Ste={extension:{type:Ge.DetectionParser,priority:0},test:async()=>{const i="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=";return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=i})},add:async i=>[...i,"webp"],remove:async i=>i.filter(e=>e!=="webp")};Xe.add(Ste);const s9=["png","jpg","jpeg"],Tte={extension:{type:Ge.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...s9],remove:async i=>i.filter(e=>!s9.includes(e))};Xe.add(Tte);const Ete="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function e_(i){return Ete?!1:document.createElement("video").canPlayType(i)!==""}const Mte={extension:{type:Ge.DetectionParser,priority:0},test:async()=>e_("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(e=>e!=="webm")};Xe.add(Mte);const Lte={extension:{type:Ge.DetectionParser,priority:0},test:async()=>e_("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(e=>e!=="mp4"&&e!=="m4v")};Xe.add(Lte);const Rte={extension:{type:Ge.DetectionParser,priority:0},test:async()=>e_("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(e=>e!=="ogv")};Xe.add(Rte);const Bte={extension:Ge.ResolveParser,test:q0.test,parse:i=>({resolution:parseFloat(ke.RETINA_PREFIX.exec(i)?.[1]??"1"),format:i.split(".").pop(),src:i})};Xe.add(Bte);var vr=(i=>(i[i.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",i[i.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",i[i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",i[i.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",i[i.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",i[i.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",i[i.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",i[i.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",i[i.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",i[i.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",i[i.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",i[i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",i[i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",i[i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",i[i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",i[i.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",i[i.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",i[i.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",i[i.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",i))(vr||{});const a0={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Bo,oh;function o9(){oh={s3tc:Bo.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Bo.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Bo.getExtension("WEBGL_compressed_texture_etc"),etc1:Bo.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Bo.getExtension("WEBGL_compressed_texture_pvrtc")||Bo.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Bo.getExtension("WEBGL_compressed_texture_atc"),astc:Bo.getExtension("WEBGL_compressed_texture_astc")}}const Pte={extension:{type:Ge.DetectionParser,priority:2},test:async()=>{const i=ke.ADAPTER.createCanvas().getContext("webgl");return i?(Bo=i,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async i=>{oh||o9();const e=[];for(const t in oh)oh[t]&&e.push(t);return[...e,...i]},remove:async i=>(oh||o9(),i.filter(e=>!(e in oh)))};Xe.add(Pte);class Gte extends K0{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,r;typeof e=="string"?(n=e,r=new Uint8Array):(n=null,r=e),super(r,t),this.origin=n,this.buffer=r?new DA(r):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new DA(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class hc extends Gte{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=hc._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||hc._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;r.pixelStorei(r.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:h}=this._levelBuffers[s];r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,l,c,0,h)}return!0}onBlobLoaded(){this._levelBuffers=hc._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,n,r,s,o,a){const l=new Array(n);let c=e.byteOffset,h=o,u=a,d=h+r-1&~(r-1),f=u+s-1&~(s-1),g=d*f*a0[t];for(let p=0;p<n;p++)l[p]={levelID:p,levelWidth:n>1?h:d,levelHeight:n>1?u:f,levelBuffer:new Uint8Array(e.buffer,c,g)},c+=g,h=h>>1||1,u=u>>1||1,d=h+r-1&~(r-1),f=u+s-1&~(s-1),g=d*f*a0[t];return l}}const c2=4,qg=124,Dte=32,a9=20,Fte=542327876,e1={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Nte={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},t1={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},kte=1,Ote=2,Ute=4,Zte=64,Vte=512,Wte=131072,Hte=827611204,zte=861165636,Yte=894720068,Xte=808540228,Kte=4,jte={[Hte]:vr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[zte]:vr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Yte]:vr.COMPRESSED_RGBA_S3TC_DXT5_EXT},$te={70:vr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:vr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:vr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:vr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:vr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:vr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:vr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:vr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:vr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Jte(i){const e=new Uint32Array(i);if(e[0]!==Fte)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(i,0,qg/Uint32Array.BYTES_PER_ELEMENT),n=t[e1.HEIGHT],r=t[e1.WIDTH],s=t[e1.MIPMAP_COUNT],o=new Uint32Array(i,e1.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Dte/Uint32Array.BYTES_PER_ELEMENT),a=o[kte];if(a&Ute){const l=o[Nte.FOURCC];if(l!==Xte){const A=jte[l],I=c2+qg,y=new Uint8Array(i,I);return[new hc(y,{format:A,width:r,height:n,levels:s})]}const c=c2+qg,h=new Uint32Array(e.buffer,c,a9/Uint32Array.BYTES_PER_ELEMENT),u=h[t1.DXGI_FORMAT],d=h[t1.RESOURCE_DIMENSION],f=h[t1.MISC_FLAG],g=h[t1.ARRAY_SIZE],p=$te[u];if(p===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${u}`);if(f===Kte)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const m=new Array,C=c2+qg+a9;if(g===1)m.push(new Uint8Array(i,C));else{const A=a0[p];let I=0,y=r,x=n;for(let S=0;S<s;S++){const M=Math.max(1,y+3&-4),_=Math.max(1,x+3&-4),v=M*_*A;I+=v,y=y>>>1,x=x>>>1}let T=C;for(let S=0;S<g;S++)m.push(new Uint8Array(i,T,I)),T+=I}return m.map(A=>new hc(A,{format:p,width:r,height:n,levels:s}))}throw a&Zte?new Error("DDSParser does not support uncompressed texture data."):a&Vte?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Wte?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&Ote?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const l9=[171,75,84,88,32,49,49,187,13,10,26,10],Qte=67305985,us={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},sy=64,c9={[Qe.UNSIGNED_BYTE]:1,[Qe.UNSIGNED_SHORT]:2,[Qe.INT]:4,[Qe.UNSIGNED_INT]:4,[Qe.FLOAT]:4,[Qe.HALF_FLOAT]:8},qte={[ve.RGBA]:4,[ve.RGB]:3,[ve.RG]:2,[ve.RED]:1,[ve.LUMINANCE]:1,[ve.LUMINANCE_ALPHA]:2,[ve.ALPHA]:1},ene={[Qe.UNSIGNED_SHORT_4_4_4_4]:2,[Qe.UNSIGNED_SHORT_5_5_5_1]:2,[Qe.UNSIGNED_SHORT_5_6_5]:2};function tne(i,e,t=!1){const n=new DataView(e);if(!nne(i,n))return null;const r=n.getUint32(us.ENDIANNESS,!0)===Qte,s=n.getUint32(us.GL_TYPE,r),o=n.getUint32(us.GL_FORMAT,r),a=n.getUint32(us.GL_INTERNAL_FORMAT,r),l=n.getUint32(us.PIXEL_WIDTH,r),c=n.getUint32(us.PIXEL_HEIGHT,r)||1,h=n.getUint32(us.PIXEL_DEPTH,r)||1,u=n.getUint32(us.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=n.getUint32(us.NUMBER_OF_FACES,r),f=n.getUint32(us.NUMBER_OF_MIPMAP_LEVELS,r),g=n.getUint32(us.BYTES_OF_KEY_VALUE_DATA,r);if(c===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");const p=4,m=4,C=l+3&-4,A=c+3&-4,I=new Array(u);let y=l*c;s===0&&(y=C*A);let x;if(s!==0?c9[s]?x=c9[s]*qte[o]:x=ene[s]:x=a0[a],x===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=t?rne(n,g,r):null;let S=y*x,M=l,_=c,v=C,B=A,E=sy+g;for(let L=0;L<f;L++){const G=n.getUint32(E,r);let Z=E+4;for(let U=0;U<u;U++){let V=I[U];V||(V=I[U]=new Array(f)),V[L]={levelID:L,levelWidth:f>1||s!==0?M:v,levelHeight:f>1||s!==0?_:B,levelBuffer:new Uint8Array(e,Z,S)},Z+=S}E+=G+4,E=E%4!==0?E+4-E%4:E,M=M>>1||1,_=_>>1||1,v=M+p-1&~(p-1),B=_+m-1&~(m-1),S=v*B*x}return s!==0?{uncompressed:I.map(L=>{let G=L[0].levelBuffer,Z=!1;return s===Qe.FLOAT?G=new Float32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4):s===Qe.UNSIGNED_INT?(Z=!0,G=new Uint32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)):s===Qe.INT&&(Z=!0,G=new Int32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)),{resource:new K0(G,{width:L[0].levelWidth,height:L[0].levelHeight}),type:s,format:Z?ine(o):o}}),kvData:T}:{compressed:I.map(L=>new hc(null,{format:a,width:l,height:c,levels:f,levelBuffers:L})),kvData:T}}function nne(i,e){for(let t=0;t<l9.length;t++)if(e.getUint8(t)!==l9[t])return console.error(`${i} is not a valid *.ktx file!`),!1;return!0}function ine(i){switch(i){case ve.RGBA:return ve.RGBA_INTEGER;case ve.RGB:return ve.RGB_INTEGER;case ve.RG:return ve.RG_INTEGER;case ve.RED:return ve.RED_INTEGER;default:return i}}function rne(i,e,t){const n=new Map;let r=0;for(;r<e;){const s=i.getUint32(sy+r,t),o=sy+r+4,a=3-(s+3)%4;if(s===0||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&i.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(i.buffer,o,l)),h=new DataView(i.buffer,o+l+1,s-l-1);n.set(c,h),r+=4+s+a}return n}const sne={extension:{type:Ge.LoadParser,priority:Rs.High},name:"loadDDS",test(i){return il(i,".dds")},async load(i,e,t){const n=await(await ke.ADAPTER.fetch(i)).arrayBuffer(),r=Jte(n).map(s=>{const o=new bt(s,{mipmap:uo.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA,resolution:ea(i),...e.data});return Hf(o,t,i)});return r.length===1?r[0]:r},unload(i){Array.isArray(i)?i.forEach(e=>e.destroy(!0)):i.destroy(!0)}};Xe.add(sne);const one={extension:{type:Ge.LoadParser,priority:Rs.High},name:"loadKTX",test(i){return il(i,".ktx")},async load(i,e,t){const n=await(await ke.ADAPTER.fetch(i)).arrayBuffer(),{compressed:r,uncompressed:s,kvData:o}=tne(i,n),a=r??s,l={mipmap:uo.OFF,alphaMode:lr.NO_PREMULTIPLIED_ALPHA,resolution:ea(i),...e.data},c=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const u=h.resource??h,d=new bt(u,l);return d.ktxKeyValueData=o,Hf(d,t,i)});return c.length===1?c[0]:c},unload(i){Array.isArray(i)?i.forEach(e=>e.destroy(!0)):i.destroy(!0)}};Xe.add(one);const ane={extension:Ge.ResolveParser,test:i=>{const e=i.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(e)},parse:i=>{if(i.split("?")[0].split(".").pop()==="ktx"){const e=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(e.some(t=>i.endsWith(t)))return{resolution:parseFloat(ke.RETINA_PREFIX.exec(i)?.[1]??"1"),format:e.find(t=>i.endsWith(t)),src:i}}return{resolution:parseFloat(ke.RETINA_PREFIX.exec(i)?.[1]??"1"),format:i.split(".").pop(),src:i}}};Xe.add(ane);const n1=new Mt,lne=4,UT=class yd{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,r){const s=new Image;return s.src=await this.base64(e,t,n,r),s}async base64(e,t,n,r){const s=this.canvas(e,r);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:n});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:n,width:r,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&yd._flipY(n,r,s),a&&yd._unpremultiplyAlpha(n);const l=new zQ(r,s,1),c=new ImageData(new Uint8ClampedArray(n.buffer),r,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,t){const{pixels:n,width:r,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&yd._flipY(n,r,s),a&&yd._unpremultiplyAlpha(n),n}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let r,s=!1,o=!1,a,l=!1;e&&(e instanceof wc?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),l=!0,t&&(n1.width=t.width,n1.height=t.height,t=n1)));const c=n.gl;if(a){if(r=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===ve.RGBA,!l){n.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else r=n.resolution,t||(t=n1,t.width=n.width/r,t.height=n.height/r),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const h=Math.max(Math.round(t.width*r),1),u=Math.max(Math.round(t.height*r),1),d=new Uint8Array(lne*h*u);return c.readPixels(Math.round(t.x*r),Math.round(t.y*r),h,u,c.RGBA,c.UNSIGNED_BYTE,d),l&&a?.destroy(!0),{pixels:d,width:h,height:u,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){const r=t<<2,s=n>>1,o=new Uint8Array(r);for(let a=0;a<s;a++){const l=a*r,c=(n-a-1)*r;o.set(e.subarray(l,l+r)),e.copyWithin(l,c,c+r),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const r=e[n+3];if(r!==0){const s=255.001/r;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};UT.extension={name:"extract",type:Ge.RendererSystem};let cne=UT;Xe.add(cne);const l0={build(i){const e=i.points;let t,n,r,s,o,a;if(i.type===xi.CIRC){const g=i.shape;t=g.x,n=g.y,o=a=g.radius,r=s=0}else if(i.type===xi.ELIP){const g=i.shape;t=g.x,n=g.y,o=g.width,a=g.height,r=s=0}else{const g=i.shape,p=g.width/2,m=g.height/2;t=g.x+p,n=g.y+m,o=a=Math.max(0,Math.min(g.radius,Math.min(p,m))),r=p-o,s=m-a}if(!(o>=0&&a>=0&&r>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(r?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=t+r,e[1]=e[3]=n+s,e[2]=e[4]=t-r,e[5]=e[7]=n-s;return}let h=0,u=l*4+(r?2:0)+2,d=u,f=c;{const g=r+o,p=s,m=t+g,C=t-g,A=n+p;if(e[h++]=m,e[h++]=A,e[--u]=A,e[--u]=C,s){const I=n-p;e[d++]=C,e[d++]=I,e[--f]=I,e[--f]=m}}for(let g=1;g<l;g++){const p=Math.PI/2*(g/l),m=r+Math.cos(p)*o,C=s+Math.sin(p)*a,A=t+m,I=t-m,y=n+C,x=n-C;e[h++]=A,e[h++]=y,e[--u]=y,e[--u]=I,e[d++]=I,e[d++]=x,e[--f]=x,e[--f]=A}{const g=r,p=s+a,m=t+g,C=t-g,A=n+p,I=n-p;e[h++]=m,e[h++]=A,e[--f]=I,e[--f]=m,r&&(e[h++]=C,e[h++]=A,e[--f]=I,e[--f]=C)}},triangulate(i,e){const t=i.points,n=e.points,r=e.indices;if(t.length===0)return;let s=n.length/2;const o=s;let a,l;if(i.type!==xi.RREC){const h=i.shape;a=h.x,l=h.y}else{const h=i.shape;a=h.x+h.width/2,l=h.y+h.height/2}const c=i.matrix;n.push(i.matrix?c.a*a+c.c*l+c.tx:a,i.matrix?c.b*a+c.d*l+c.ty:l),s++,n.push(t[0],t[1]);for(let h=2;h<t.length;h+=2)n.push(t[h],t[h+1]),r.push(s++,o,s);r.push(o+1,o,s)}};function h9(i,e=!1){const t=i.length;if(t<6)return;let n=0;for(let r=0,s=i[t-2],o=i[t-1];r<t;r+=2){const a=i[r],l=i[r+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const r=t/2;for(let s=r+r%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,c=s+1;[i[o],i[l]]=[i[l],i[o]],[i[a],i[c]]=[i[c],i[a]]}}}const ZT={build(i){i.points=i.shape.points.slice()},triangulate(i,e){let t=i.points;const n=i.holes,r=e.points,s=e.indices;if(t.length>=6){h9(t,!1);const o=[];for(let c=0;c<n.length;c++){const h=n[c];h9(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}const a=b$(t,o,2);if(!a)return;const l=r.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<t.length;c++)r.push(t[c])}}},hne={build(i){const e=i.shape,t=e.x,n=e.y,r=e.width,s=e.height,o=i.points;o.length=0,r>=0&&s>=0&&o.push(t,n,t+r,n,t+r,n+s,t,n+s)},triangulate(i,e){const t=i.points,n=e.points;if(t.length===0)return;const r=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},une={build(i){l0.build(i)},triangulate(i,e){l0.triangulate(i,e)}};var zr=(i=>(i.MITER="miter",i.BEVEL="bevel",i.ROUND="round",i))(zr||{}),Ua=(i=>(i.BUTT="butt",i.ROUND="round",i.SQUARE="square",i))(Ua||{});const cu={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(i,e=20){if(!this.adaptive||!i||isNaN(i))return e;let t=Math.ceil(i/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class u9{static curveTo(e,t,n,r,s,o){const a=o[o.length-2],l=o[o.length-1]-t,c=a-e,h=r-t,u=n-e,d=Math.abs(l*u-c*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const f=l*l+c*c,g=h*h+u*u,p=l*h+c*u,m=s*Math.sqrt(f)/d,C=s*Math.sqrt(g)/d,A=m*p/f,I=C*p/g,y=m*u+C*c,x=m*h+C*l,T=c*(C+A),S=l*(C+A),M=u*(m+I),_=h*(m+I),v=Math.atan2(S-x,T-y),B=Math.atan2(_-x,M-y);return{cx:y+e,cy:x+t,radius:s,startAngle:v,endAngle:B,anticlockwise:c*h>u*l}}static arc(e,t,n,r,s,o,a,l,c){const h=a-o,u=cu._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/qp)*40),d=h/(u*2),f=d*2,g=Math.cos(d),p=Math.sin(d),m=u-1,C=m%1/m;for(let A=0;A<=m;++A){const I=A+C*A,y=d+o+f*I,x=Math.cos(y),T=-Math.sin(y);c.push((g*x+p*T)*s+n,(g*-T+p*x)*s+r)}}}class dne{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class t_{static curveLength(e,t,n,r,s,o,a,l){let c=0,h=0,u=0,d=0,f=0,g=0,p=0,m=0,C=0,A=0,I=0,y=e,x=t;for(let T=1;T<=10;++T)h=T/10,u=h*h,d=u*h,f=1-h,g=f*f,p=g*f,m=p*e+3*g*h*n+3*f*u*s+d*a,C=p*t+3*g*h*r+3*f*u*o+d*l,A=y-m,I=x-C,y=m,x=C,c+=Math.sqrt(A*A+I*I);return c}static curveTo(e,t,n,r,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const h=cu._segmentsCount(t_.curveLength(l,c,e,t,n,r,s,o));let u=0,d=0,f=0,g=0,p=0;a.push(l,c);for(let m=1,C=0;m<=h;++m)C=m/h,u=1-C,d=u*u,f=d*u,g=C*C,p=g*C,a.push(f*l+3*d*C*e+3*u*g*n+p*s,f*c+3*d*C*t+3*u*g*r+p*o)}}function d9(i,e,t,n,r,s,o,a){const l=i-t*r,c=e-n*r,h=i+t*s,u=e+n*s;let d,f;o?(d=n,f=-t):(d=-n,f=t);const g=l+d,p=c+f,m=h+d,C=u+f;return a.push(g,p,m,C),2}function bl(i,e,t,n,r,s,o,a){const l=t-i,c=n-e;let h=Math.atan2(l,c),u=Math.atan2(r-i,s-e);a&&h<u?h+=Math.PI*2:!a&&h>u&&(u+=Math.PI*2);let d=h;const f=u-h,g=Math.abs(f),p=Math.sqrt(l*l+c*c),m=(15*g*Math.sqrt(p)/Math.PI>>0)+1,C=f/m;if(d+=C,a){o.push(i,e,t,n);for(let A=1,I=d;A<m;A++,I+=C)o.push(i,e,i+Math.sin(I)*p,e+Math.cos(I)*p);o.push(i,e,r,s)}else{o.push(t,n,i,e);for(let A=1,I=d;A<m;A++,I+=C)o.push(i+Math.sin(I)*p,e+Math.cos(I)*p,i,e);o.push(r,s,i,e)}return m*2}function fne(i,e){const t=i.shape;let n=i.points||t.points.slice();const r=e.closePointEps;if(n.length===0)return;const s=i.lineStyle,o=new Kt(n[0],n[1]),a=new Kt(n[n.length-2],n[n.length-1]),l=t.type!==xi.POLY||t.closeStroke,c=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){n=n.slice(),c&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const V=(o.x+a.x)*.5,z=(a.y+o.y)*.5;n.unshift(V,z),n.push(V,z)}const h=e.points,u=n.length/2;let d=n.length;const f=h.length/2,g=s.width/2,p=g*g,m=s.miterLimit*s.miterLimit;let C=n[0],A=n[1],I=n[2],y=n[3],x=0,T=0,S=-(A-y),M=C-I,_=0,v=0,B=Math.sqrt(S*S+M*M);S/=B,M/=B,S*=g,M*=g;const E=s.alignment,L=(1-E)*2,G=E*2;l||(s.cap===Ua.ROUND?d+=bl(C-S*(L-G)*.5,A-M*(L-G)*.5,C-S*L,A-M*L,C+S*G,A+M*G,h,!0)+2:s.cap===Ua.SQUARE&&(d+=d9(C,A,S,M,L,G,!0,h))),h.push(C-S*L,A-M*L,C+S*G,A+M*G);for(let V=1;V<u-1;++V){C=n[(V-1)*2],A=n[(V-1)*2+1],I=n[V*2],y=n[V*2+1],x=n[(V+1)*2],T=n[(V+1)*2+1],S=-(A-y),M=C-I,B=Math.sqrt(S*S+M*M),S/=B,M/=B,S*=g,M*=g,_=-(y-T),v=I-x,B=Math.sqrt(_*_+v*v),_/=B,v/=B,_*=g,v*=g;const z=I-C,le=A-y,j=I-x,re=T-y,Ae=z*j+le*re,xe=le*j-re*z,J=xe<0;if(Math.abs(xe)<.001*Math.abs(Ae)){h.push(I-S*L,y-M*L,I+S*G,y+M*G),Ae>=0&&(s.join===zr.ROUND?d+=bl(I,y,I-S*L,y-M*L,I-_*L,y-v*L,h,!1)+4:d+=2,h.push(I-_*G,y-v*G,I+_*L,y+v*L));continue}const oe=(-S+C)*(-M+y)-(-S+I)*(-M+A),fe=(-_+x)*(-v+y)-(-_+I)*(-v+T),ae=(z*fe-j*oe)/xe,Ce=(re*oe-le*fe)/xe,Je=(ae-I)*(ae-I)+(Ce-y)*(Ce-y),Se=I+(ae-I)*L,qe=y+(Ce-y)*L,ot=I-(ae-I)*G,$e=y-(Ce-y)*G,O=Math.min(z*z+le*le,j*j+re*re),$t=J?L:G,St=O+$t*$t*p,nt=Je<=St;let Ie=s.join;if(Ie===zr.MITER&&Je/p>m&&(Ie=zr.BEVEL),nt)switch(Ie){case zr.MITER:{h.push(Se,qe,ot,$e);break}case zr.BEVEL:{J?h.push(Se,qe,I+S*G,y+M*G,Se,qe,I+_*G,y+v*G):h.push(I-S*L,y-M*L,ot,$e,I-_*L,y-v*L,ot,$e),d+=2;break}case zr.ROUND:{J?(h.push(Se,qe,I+S*G,y+M*G),d+=bl(I,y,I+S*G,y+M*G,I+_*G,y+v*G,h,!0)+4,h.push(Se,qe,I+_*G,y+v*G)):(h.push(I-S*L,y-M*L,ot,$e),d+=bl(I,y,I-S*L,y-M*L,I-_*L,y-v*L,h,!1)+4,h.push(I-_*L,y-v*L,ot,$e));break}}else{switch(h.push(I-S*L,y-M*L,I+S*G,y+M*G),Ie){case zr.MITER:{J?h.push(ot,$e,ot,$e):h.push(Se,qe,Se,qe),d+=2;break}case zr.ROUND:{J?d+=bl(I,y,I+S*G,y+M*G,I+_*G,y+v*G,h,!0)+2:d+=bl(I,y,I-S*L,y-M*L,I-_*L,y-v*L,h,!1)+2;break}}h.push(I-_*L,y-v*L,I+_*G,y+v*G),d+=2}}C=n[(u-2)*2],A=n[(u-2)*2+1],I=n[(u-1)*2],y=n[(u-1)*2+1],S=-(A-y),M=C-I,B=Math.sqrt(S*S+M*M),S/=B,M/=B,S*=g,M*=g,h.push(I-S*L,y-M*L,I+S*G,y+M*G),l||(s.cap===Ua.ROUND?d+=bl(I-S*(L-G)*.5,y-M*(L-G)*.5,I-S*L,y-M*L,I+S*G,y+M*G,h,!1)+2:s.cap===Ua.SQUARE&&(d+=d9(I,y,S,M,L,G,!1,h)));const Z=e.indices,U=cu.epsilon*cu.epsilon;for(let V=f;V<d+f-2;++V)C=h[V*2],A=h[V*2+1],I=h[(V+1)*2],y=h[(V+1)*2+1],x=h[(V+2)*2],T=h[(V+2)*2+1],!(Math.abs(C*(y-T)+I*(T-A)+x*(A-y))<U)&&Z.push(V,V+1,V+2)}function gne(i,e){let t=0;const n=i.shape,r=i.points||n.points,s=n.type!==xi.POLY||n.closeStroke;if(r.length===0)return;const o=e.points,a=e.indices,l=r.length/2,c=o.length/2;let h=c;for(o.push(r[0],r[1]),t=1;t<l;t++)o.push(r[t*2],r[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,c)}function f9(i,e){i.lineStyle.native?gne(i,e):fne(i,e)}class n_{static curveLength(e,t,n,r,s,o){const a=e-2*n+s,l=t-2*r+o,c=2*n-2*e,h=2*r-2*t,u=4*(a*a+l*l),d=4*(a*c+l*h),f=c*c+h*h,g=2*Math.sqrt(u+d+f),p=Math.sqrt(u),m=2*u*p,C=2*Math.sqrt(f),A=d/p;return(m*g+p*d*(g-C)+(4*f*u-d*d)*Math.log((2*p+A+g)/(A+C)))/(4*m)}static curveTo(e,t,n,r,s){const o=s[s.length-2],a=s[s.length-1],l=cu._segmentsCount(n_.curveLength(o,a,e,t,n,r));let c=0,h=0;for(let u=1;u<=l;++u){const d=u/l;c=o+(e-o)*d,h=a+(t-a)*d,s.push(c+(e+(n-e)*d-c)*d,h+(t+(r-t)*d-h)*d)}}}const h2={[xi.POLY]:ZT,[xi.CIRC]:l0,[xi.ELIP]:l0,[xi.RECT]:hne,[xi.RREC]:une},g9=[],i1=[];class c0{constructor(e,t=null,n=null,r=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=r,this.type=e.type}clone(){return new c0(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const $c=new Kt,VT=class WT extends $8{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new r0,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),i1.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),g9.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,r=null){const s=new c0(e,t,n,r);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new c0(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const r=t[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(e,$c):$c.copyFrom(e),r.shape.contains($c.x,$c.y))){let s=!1;if(r.holes){for(let o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains($c.x,$c.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,r=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],r=n.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const c=t[l],h=c.fillStyle,u=c.lineStyle;h2[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(h.visible||u.visible)&&this.processHoles(c.holes);for(let d=0;d<2;d++){const f=d===0?h:u;if(!f.visible)continue;const g=f.texture.baseTexture,p=this.indices.length,m=this.points.length/2;g.wrapMode=Xa.REPEAT,d===0?this.processFill(c):this.processLine(c);const C=this.points.length/2-m;C!==0&&(n&&!this._compareStyles(r,f)&&(n.end(p,m),n=null),n||(n=g9.pop()||new dne,n.begin(f,p,m),this.batches.push(n),r=f),this.addUvs(this.points,e,f.texture,m,C,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const n=this.graphicsData[e],r=n.fillStyle,s=n.lineStyle;if(r&&!r.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const r=e[t];for(let s=0;s<r.size;s++){const o=r.start+s;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<WT.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++bt._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),i1.push(this.drawCalls[u]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let r=i1.pop();r||(r=new kA,r.texArray=new VA),r.texArray.count=0,r.start=0,r.size=0,r.type=Qs.TRIANGLES;let s=0,o=null,a=0,l=!1,c=Qs.TRIANGLES,h=0;this.drawCalls.push(r);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,g=d.style,p=g.texture.baseTexture;l!==!!g.native&&(l=!!g.native,c=l?Qs.LINES:Qs.TRIANGLES,o=null,s=f,e++),o!==p&&(o=p,p._batchEnabled!==e&&(s===f&&(e++,s=0,r.size>0&&(r=i1.pop(),r||(r=new kA,r.texArray=new VA),this.drawCalls.push(r)),r.start=h,r.size=0,r.texArray.count=0,r.type=c),p.touched=1,p._batchEnabled=e,p._batchLocation=s,p.wrapMode=Xa.REPEAT,r.texArray.elements[r.texArray.count++]=p,s++)),r.size+=d.size,h+=d.size,a=p._batchLocation,this.addColors(t,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}bt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=t[c*2],o[l++]=t[c*2+1],a[l++]=n[c],o[l++]=r[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?ZT.triangulate(e,this):h2[e.type].triangulate(e,this)}processLine(e){f9(e,this);for(let t=0;t<e.holes.length;t++)f9(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];h2[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const r=e[n*2],s=e[n*2+1];e[n*2]=t.a*r+t.c*s+t.tx,e[n*2+1]=t.b*r+t.d*s+t.ty}}addColors(e,t,n,r,s=0){const o=_n.shared.setValue(t).toLittleEndianNumber(),a=_n.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+r);for(let l=0;l<r;l++)e[s+l]=a}addTextureIds(e,t,n,r=0){e.length=Math.max(e.length,r+n);for(let s=0;s<n;s++)e[r+s]=t}addUvs(e,t,n,r,s,o=null){let a=0;const l=t.length,c=n.frame;for(;a<s;){let u=e[(r+a)*2],d=e[(r+a)*2+1];if(o){const f=o.a*u+o.c*d+o.tx;d=o.b*u+o.d*d+o.ty,u=f}a++,t.push(u/c.width,d/c.height)}const h=n.baseTexture;(c.width<h.width||c.height<h.height)&&this.adjustUvs(t,n,l,s)}adjustUvs(e,t,n,r){const s=t.baseTexture,o=1e-6,a=n+r*2,l=t.frame,c=l.width/s.width,h=l.height/s.height;let u=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let p=n+2;p<a;p+=2)f=Math.min(f,Math.floor(e[p]+o)),g=Math.min(g,Math.floor(e[p+1]+o));u-=f,d-=g;for(let p=n;p<a;p+=2)e[p]=(e[p]+u)*c,e[p+1]=(e[p+1]+d)*h}};VT.BATCHABLE_SIZE=100;let pne=VT;class em{constructor(){this.color=16777215,this.alpha=1,this.texture=je.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new em;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=je.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class i_ extends em{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ua.BUTT,this.join=zr.MITER,this.miterLimit=10}clone(){const e=new i_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ua.BUTT,this.join=zr.MITER,this.miterLimit=10}}const u2={},oy=class $1 extends is{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new em,this._lineStyle=new i_,this._matrix=null,this._holeMode=!1,this.state=Io.for2d(),this._geometry=e||new pne,this._geometry.refCount++,this._transformID=-1,this._tintColor=new _n(16777215),this.blendMode=ct.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new $1(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,r=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:r,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:je.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ua.BUTT,join:zr.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new cc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new cc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,r=n[n.length-2],s=n[n.length-1];return(r!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,r){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),n_.curveTo(e,t,n,r,s),this}bezierCurveTo(e,t,n,r,s,o){return this._initCurve(),t_.curveTo(e,t,n,r,s,o,this.currentPath.points),this}arcTo(e,t,n,r,s){this._initCurve(e,t);const o=this.currentPath.points,a=u9.curveTo(e,t,n,r,s,o);if(a){const{cx:l,cy:c,radius:h,startAngle:u,endAngle:d,anticlockwise:f}=a;this.arc(l,c,h,u,d,f)}return this}arc(e,t,n,r,s,o=!1){if(r===s)return this;if(!o&&s<=r?s+=qp:o&&r<=s&&(r+=qp),s-r===0)return this;const a=e+Math.cos(r)*n,l=t+Math.sin(r)*n,c=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const u=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);u<c&&d<c||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return u9.arc(a,l,e,t,n,r,s,o,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:je.WHITE,color:e,alpha:t})}normalizeColor(e){const t=_n.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:je.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,r){return this.drawShape(new Mt(e,t,n,r))}drawRoundedRect(e,t,n,r,s){return this.drawShape(new J0(e,t,n,r,s))}drawCircle(e,t,n){return this.drawShape(new j0(e,t,n))}drawEllipse(e,t,n,r){return this.drawShape(new $0(e,t,n,r))}drawPolygon(...e){let t,n=!0;const r=e[0];r.points?(n=r.closeStroke,t=r.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new cc(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===xi.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let r=0;r<n;r++){const s=e.batches[r],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:t,indices:c,uvs:l,_batchRGB:_n.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[r]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,r=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,_n.shared.setValue(this._tintColor).premultiply(r).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:n,type:r,size:s,start:o}=t,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(r,s,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!u2[n]){const{maxTextures:r}=e.plugins[n],s=new Int32Array(r);for(let l=0;l<r;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new vn,default:bs.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;u2[n]=new io(a,o)}t=u2[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:r,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,r,s)}containsPoint(e){return this.worldTransform.applyInverse(e,$1._TEMP_POINT),this._geometry.containsPoint($1._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=_n.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,r=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,c=this._geometry.points,h=this.vertexData;let u=0;for(let d=0;d<c.length;d+=2){const f=c[d],g=c[d+1];h[u++]=n*f+s*g+a,h[u++]=o*g+r*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};oy.curves=cu,oy._TEMP_POINT=new Kt;let h0=oy;class mne{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const d2=new Kt,p9=new cc,HT=class zT extends is{constructor(e,t,n,r=Qs.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Io.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ke.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Qs.TRIANGLES&&t.length<zT.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,c=r.tx,h=r.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=t[d*2],g=t[d*2+1];u[d*2]=s*f+a*g+c,u[d*2+1]=o*f+l*g+h}if(this._roundPixels){const d=ke.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new mne(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,d2);const t=this.geometry.getBuffer("aVertexPosition").data,n=p9.points,r=this.geometry.getIndex().data,s=r.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=r[a]*2,c=r[a+1]*2,h=r[a+2]*2;if(n[0]=t[l],n[1]=t[l+1],n[2]=t[c],n[3]=t[c+1],n[4]=t[h],n[5]=t[h+1],p9.contains(d2.x,d2.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};HT.BATCHABLE_SIZE=100;let m9=HT;class Cne extends Qa{constructor(e,t,n){super();const r=new ii(e),s=new ii(t,!0),o=new ii(n,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,Qe.FLOAT).addAttribute("aTextureCoord",s,2,!1,Qe.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var Ine=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Ane=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class C9 extends io{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:vn.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||zo.from(Ane,Ine),n),this._colorDirty=!1,this.uvMatrix=new hT(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new _n(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;_n.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class I9{constructor(e,t,n){this.geometry=new Qa,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let s=e[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Qe.FLOAT,offset:s.offset},t[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new ii(WQ(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new ii(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ii(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Qe.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Qe.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(e,t,n,s.type===Qe.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(e,t,n,s.type===Qe.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var yne=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,_ne=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class YT extends Q0{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new vn,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Qe.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=io.from(_ne,yne,{}),this.state=Io.for2d()}render(e){const t=e.children,n=e._maxSize,r=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=Y8(e.blendMode,c),s.state.set(this.state);const h=s.gl,u=e.worldTransform.copyTo(this.tempMatrix);u.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=_n.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,g=0;f<o;f+=r,g+=1){let p=o-f;p>r&&(p=r),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const m=a[g];m.uploadDynamic(t,f,p);const C=e._bufferUpdateIDs[g]||0;d=d||m._updateID<C,d&&(m._updateID=e._updateID,m.uploadStatic(t,f,p)),s.geometry.bind(m.geometry),h.drawElements(h.TRIANGLES,p*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,r=e._batchSize,s=e._properties;for(let o=0;o<n;o+=r)t.push(new I9(this.properties,s,r));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new I9(this.properties,n,t)}uploadVertices(e,t,n,r,s,o){let a=0,l=0,c=0,h=0;for(let u=0;u<n;++u){const d=e[t+u],f=d._texture,g=d.scale.x,p=d.scale.y,m=f.trim,C=f.orig;m?(l=m.x-d.anchor.x*C.width,a=l+m.width,h=m.y-d.anchor.y*C.height,c=h+m.height):(a=C.width*(1-d.anchor.x),l=C.width*-d.anchor.x,c=C.height*(1-d.anchor.y),h=C.height*-d.anchor.y),r[o]=l*g,r[o+1]=h*p,r[o+s]=a*g,r[o+s+1]=h*p,r[o+s*2]=a*g,r[o+s*2+1]=c*p,r[o+s*3]=l*g,r[o+s*3+1]=c*p,o+=s*4}}uploadPosition(e,t,n,r,s,o){for(let a=0;a<n;a++){const l=e[t+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+s*2]=l.x,r[o+s*2+1]=l.y,r[o+s*3]=l.x,r[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,n,r,s,o){for(let a=0;a<n;a++){const l=e[t+a].rotation;r[o]=l,r[o+s]=l,r[o+s*2]=l,r[o+s*3]=l,o+=s*4}}uploadUvs(e,t,n,r,s,o){for(let a=0;a<n;++a){const l=e[t+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+s*2]=l.x2,r[o+s*2+1]=l.y2,r[o+s*3]=l.x3,r[o+s*3+1]=l.y3,o+=s*4):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+s*2]=0,r[o+s*2+1]=0,r[o+s*3]=0,r[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,r,s,o){for(let a=0;a<n;++a){const l=e[t+a],c=_n.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);r[o]=c,r[o+s]=c,r[o+s*2]=c,r[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}YT.extension={name:"particle",type:Ge.RendererPlugin};Xe.add(YT);var tm=(i=>(i[i.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",i[i.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",i))(tm||{});const r1={willReadFrequently:!0},Fs=class Ke{static get experimentalLetterSpacingSupported(){let e=Ke._experimentalLetterSpacingSupported;if(e!==void 0){const t=ke.ADAPTER.getCanvasRenderingContext2D().prototype;e=Ke._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,r,s,o,a,l,c){this.text=e,this.style=t,this.width=n,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,t,n,r=Ke._canvas){n=n??t.wordWrap;const s=t.toFontString(),o=Ke.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=r.getContext("2d",r1);a.font=s;const l=(n?Ke.wordWrap(e,t,r):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let h=0;for(let g=0;g<l.length;g++){const p=Ke._measureText(l[g],t.letterSpacing,a);c[g]=p,h=Math.max(h,p)}let u=h+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new Ke(e,t,u,f,l,c,d+t.leading,h,o)}static _measureText(e,t,n){let r=!1;Ke.experimentalLetterSpacingSupported&&(Ke.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,r=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(r?s-=t:s+=(Ke.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=Ke._canvas){const r=n.getContext("2d",r1);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:h}=t,u=Ke.collapseSpaces(h),d=Ke.collapseNewlines(h);let f=!u;const g=t.wordWrapWidth+c,p=Ke.tokenize(e);for(let m=0;m<p.length;m++){let C=p[m];if(Ke.isNewline(C)){if(!d){a+=Ke.addLine(o),f=!u,o="",s=0;continue}C=" "}if(u){const I=Ke.isBreakingSpace(C),y=Ke.isBreakingSpace(o[o.length-1]);if(I&&y)continue}const A=Ke.getFromCache(C,c,l,r);if(A>g)if(o!==""&&(a+=Ke.addLine(o),o="",s=0),Ke.canBreakWords(C,t.breakWords)){const I=Ke.wordWrapSplit(C);for(let y=0;y<I.length;y++){let x=I[y],T=x,S=1;for(;I[y+S];){const _=I[y+S];if(!Ke.canBreakChars(T,_,C,y,t.breakWords))x+=_;else break;T=_,S++}y+=S-1;const M=Ke.getFromCache(x,c,l,r);M+s>g&&(a+=Ke.addLine(o),f=!1,o="",s=0),o+=x,s+=M}}else{o.length>0&&(a+=Ke.addLine(o),o="",s=0);const I=m===p.length-1;a+=Ke.addLine(C,!I),f=!1,o="",s=0}else A+s>g&&(f=!1,a+=Ke.addLine(o),o="",s=0),(o.length>0||!Ke.isBreakingSpace(C)||f)&&(o+=C,s+=A)}return a+=Ke.addLine(o,!1),a}static addLine(e,t=!0){return e=Ke.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,r){let s=n[e];return typeof s!="number"&&(s=Ke._measureText(e,t,r)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!Ke.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Ke._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Ke._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let r=0;r<e.length;r++){const s=e[r],o=e[r+1];if(Ke.isBreakingSpace(s,o)||Ke.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,r,s){return!0}static wordWrapSplit(e){return Ke.graphemeSegmenter(e)}static measureFont(e){if(Ke._fonts[e])return Ke._fonts[e];const t={ascent:0,descent:0,fontSize:0},n=Ke._canvas,r=Ke._context;r.font=e;const s=Ke.METRICS_STRING+Ke.BASELINE_SYMBOL,o=Math.ceil(r.measureText(s).width);let a=Math.ceil(r.measureText(Ke.BASELINE_SYMBOL).width);const l=Math.ceil(Ke.HEIGHT_MULTIPLIER*a);if(a=a*Ke.BASELINE_MULTIPLIER|0,o===0||l===0)return Ke._fonts[e]=t,t;n.width=o,n.height=l,r.fillStyle="#f00",r.fillRect(0,0,o,l),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);const c=r.getImageData(0,0,o,l).data,h=c.length,u=o*4;let d=0,f=0,g=!1;for(d=0;d<a;++d){for(let p=0;p<u;p+=4)if(c[f+p]!==255){g=!0;break}if(!g)f+=u;else break}for(t.ascent=a-d,f=h-u,g=!1,d=l;d>a;--d){for(let p=0;p<u;p+=4)if(c[f+p]!==255){g=!0;break}if(!g)f-=u;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,Ke._fonts[e]=t,t}static clearMetrics(e=""){e?delete Ke._fonts[e]:Ke._fonts={}}static get _canvas(){if(!Ke.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",r1)?.measureText)return Ke.__canvas=t,t;e=ke.ADAPTER.createCanvas()}catch{e=ke.ADAPTER.createCanvas()}e.width=e.height=10,Ke.__canvas=e}return Ke.__canvas}static get _context(){return Ke.__context||(Ke.__context=Ke._canvas.getContext("2d",r1)),Ke.__context}};Fs.METRICS_STRING="|q",Fs.BASELINE_SYMBOL="M",Fs.BASELINE_MULTIPLIER=1.4,Fs.HEIGHT_MULTIPLIER=2,Fs.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const i=new Intl.Segmenter;return e=>[...i.segment(e)].map(t=>t.segment)}return i=>[...i]})(),Fs.experimentalLetterSpacing=!1,Fs._fonts={},Fs._newlines=[10,13],Fs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ta=Fs;const vne=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],XT=class _d{constructor(e){this.styleID=0,this.reset(),g2(this,e,e)}clone(){const e={};return g2(e,this,_d.defaultStyle),new _d(e)}reset(){g2(this,_d.defaultStyle,_d.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=f2(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=f2(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){bne(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=f2(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let r=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!vne.includes(r)&&(r=`"${r}"`),t[n]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};XT.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:tm.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let el=XT;function f2(i){const e=_n.shared,t=n=>{const r=e.setValue(n);return r.alpha===1?r.toHex():r.toRgbaString()};return Array.isArray(i)?i.map(t):t(i)}function bne(i,e){if(!Array.isArray(i)||!Array.isArray(e)||i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(i[t]!==e[t])return!1;return!0}function g2(i,e,t){for(const n in t)Array.isArray(e[n])?i[n]=e[n].slice():i[n]=e[n]}const xne={texture:!0,children:!1,baseTexture:!0},KT=class ay extends Tu{constructor(e,t,n){let r=!1;n||(n=ke.ADAPTER.createCanvas(),r=!0),n.width=3,n.height=3;const s=je.from(n);s.orig=new Mt,s.trim=new Mt,super(s),this._ownCanvas=r,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=ay.defaultResolution??ke.RESOLUTION,this._autoResolution=ay.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ta.experimentalLetterSpacing}static set experimentalLetterSpacing(e){kt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ta.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,r=Ta.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=r.width,o=r.height,a=r.lines,l=r.lineHeight,c=r.lineWidths,h=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,f;const g=t.dropShadow?2:1;for(let p=0;p<g;++p){const m=t.dropShadow&&p===0,C=m?Math.ceil(Math.max(1,o)+t.padding*2):0,A=C*this._resolution;if(m){n.fillStyle="black",n.strokeStyle="black";const y=t.dropShadowColor,x=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;n.shadowColor=_n.shared.setValue(y).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=x,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+A}else n.fillStyle=this._generateFillStyle(t,a,r),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let I=(l-u.fontSize)/2;l-u.fontSize<0&&(I=0);for(let y=0;y<a.length;y++)d=t.strokeThickness/2,f=t.strokeThickness/2+y*l+u.ascent+I,t.align==="right"?d+=h-c[y]:t.align==="center"&&(d+=(h-c[y])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[y],d+t.padding,f+t.padding-C,!0),t.fill&&this.drawLetterSpacing(a[y],d+t.padding,f+t.padding-C)}this.updateTexture()}drawLetterSpacing(e,t,n,r=!1){const s=this._style.letterSpacing;let o=!1;if(Ta.experimentalLetterSpacingSupported&&(Ta.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t;const l=Ta.graphemeSegmenter(e);let c=this.context.measureText(e).width,h=0;for(let u=0;u<l.length;++u){const d=l[u];r?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let g=u+1;g<l.length;++g)f+=l[g];h=this.context.measureText(f).width,a+=c-h+s,c=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=XQ(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,n=this._style,r=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-r*2,t.orig.height=t._frame.height-r*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const r=e.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,h=r.slice(),u=e.fillGradientStops.slice();if(!u.length){const d=h.length+1;for(let f=1;f<d;++f)u.push(f/d)}if(h.unshift(r[0]),u.unshift(0),h.push(r[r.length-1]),u.push(1),e.fillGradientType===tm.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const g=n.lineHeight*(f-1)+d,p=n.lineHeight*f;let m=p;f>0&&g>p&&(m=(p+g)/2);const C=p+d,A=n.lineHeight*(f+1);let I=C;f+1<t.length&&A<C&&(I=(C+A)/2);const y=(I-m)/c;for(let x=0;x<h.length;x++){let T=0;typeof u[x]=="number"?T=u[x]:T=x/h.length;let S=Math.min(1,Math.max(0,m/c+T*y));S=Number(S.toFixed(5)),s.addColorStop(S,h[x])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const d=h.length+1;let f=1;for(let g=0;g<h.length;g++){let p;typeof u[g]=="number"?p=u[g]:p=f/d,s.addColorStop(p,h[g]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},xne,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Oa(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Oa(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof el?this._style=e:this._style=new el(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};KT.defaultAutoResolution=!0;let r_=KT;class wne{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Sne(i,e){let t=!1;if(i?._textures?.length){for(let n=0;n<i._textures.length;n++)if(i._textures[n]instanceof je){const r=i._textures[n].baseTexture;e.includes(r)||(e.push(r),t=!0)}}return t}function Tne(i,e){if(i.baseTexture instanceof bt){const t=i.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function Ene(i,e){if(i._texture&&i._texture instanceof je){const t=i._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function Mne(i,e){return e instanceof r_?(e.updateText(!0),!0):!1}function Lne(i,e){if(e instanceof el){const t=e.toFontString();return Ta.measureFont(t),!0}return!1}function Rne(i,e){if(i instanceof r_){e.includes(i.style)||e.push(i.style),e.includes(i)||e.push(i);const t=i._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function Bne(i,e){return i instanceof el?(e.includes(i)||e.push(i),!0):!1}const jT=class $T{constructor(e){this.limiter=new wne($T.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Rne),this.registerFindHook(Bne),this.registerFindHook(Sne),this.registerFindHook(Tne),this.registerFindHook(Ene),this.registerUploadHook(Mne),this.registerUploadHook(Lne)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,cr.system.addOnce(this.tick,this,Ic.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)cr.system.addOnce(this.tick,this,Ic.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof is)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&cr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};jT.uploadsPerFrame=4;let ly=jT;Object.defineProperties(ke,{UPLOADS_PER_FRAME:{get(){return ly.uploadsPerFrame},set(i){kt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),ly.uploadsPerFrame=i}}});function JT(i,e){return e instanceof bt?(e._glTextures[i.CONTEXT_UID]||i.texture.bind(e),!0):!1}function Pne(i,e){if(!(e instanceof h0))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:n}=t;for(let r=0;r<n.length;r++){const{texture:s}=n[r].style;s&&JT(i,s.baseTexture)}return t.batchable||i.geometry.bind(t,e._resolveDirectShader(i)),!0}function Gne(i,e){return i instanceof h0?(e.push(i),!0):!1}class QT extends ly{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Gne),this.registerUploadHook(JT),this.registerUploadHook(Pne)}}QT.extension={name:"prepare",type:Ge.RendererSystem};Xe.add(QT);var Dne=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Fne=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Nne=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,A9=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,kne=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const s1=new vn;class qT extends Q0{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new oT,this.state=Io.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=io.from(A9,kne,t),this.shader=e.context.webGLVersion>1?io.from(Fne,Dne,t):io.from(A9,Nne,t)}render(e){const t=this.renderer,n=this.quad;let r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=n.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,h=e.tileTransform.localTransform,u=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==Xa.CLAMP:l.wrapMode===Xa.CLAMP&&(l.wrapMode=Xa.REPEAT));const f=d?this.simpleShader:this.shader,g=a.width,p=a.height,m=e._width,C=e._height;s1.set(h.a*g/m,h.b*g/C,h.c*p/m,h.d*p/C,h.tx/m,h.ty/C),s1.invert(),d?s1.prepend(u.mapCoord):(f.uniforms.uMapCoord=u.mapCoord.toArray(!0),f.uniforms.uClampFrame=u.uClampFrame,f.uniforms.uClampOffset=u.uClampOffset),f.uniforms.uTransform=s1.toArray(!0),f.uniforms.uColor=_n.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(n),this.state.blendMode=Y8(e.blendMode,c),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}qT.extension={name:"tilingSprite",type:Ge.RendererPlugin};Xe.add(qT);const eE=class vd{constructor(e,t,n=null){this.linkedSheets=[],this._texture=e instanceof je?e:null,this.baseTexture=e instanceof bt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=ea(e,null);return n===null&&(n=parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=vd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=vd.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const r=this._frameKeys[t],s=this._frames[r],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Mt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new Mt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Mt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Mt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new je(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),je.addToCache(this.textures[r],r.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const r=e[t][n];this.animations[t].push(this.textures[r])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*vd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*vd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};eE.BATCH_SIZE=1e3;let y9=eE;const One=["jpg","png","jpeg","avif","webp"];function tE(i,e,t){const n={};if(i.forEach(r=>{n[r]=e}),Object.keys(e.textures).forEach(r=>{n[r]=e.textures[r]}),!t){const r=Qi.dirname(i[0]);e.linkedSheets.forEach((s,o)=>{const a=tE([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const Une={extension:Ge.Asset,cache:{test:i=>i instanceof y9,getCacheableAssets:(i,e)=>tE(i,e,!1)},resolver:{test:i=>{const e=i.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&One.includes(n)},parse:i=>{const e=i.split(".");return{resolution:parseFloat(ke.RETINA_PREFIX.exec(i)?.[1]??"1"),format:e[e.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:Ge.LoadParser,priority:Rs.Normal},async testParse(i,e){return Qi.extname(e.src).toLowerCase()===".json"&&!!i.frames},async parse(i,e,t){let n=Qi.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let r=n+i.meta.image;r=ry(r,e.src);const s=(await t.load([r]))[r],o=new y9(s.baseTexture,i,e.src);await o.parse();const a=i?.meta?.related_multi_packs;if(Array.isArray(a)){const l=[];for(const h of a){if(typeof h!="string")continue;let u=n+h;e.data?.ignoreMultiPack||(u=ry(u,e.src),l.push(t.load({src:u,data:{ignoreMultiPack:!0}})))}const c=await Promise.all(l);o.linkedSheets=c,c.forEach(h=>{h.linkedSheets=[o].concat(o.linkedSheets.filter(u=>u!==h))})}return o},unload(i){i.destroy(!0)}}};Xe.add(Une);class u0{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class J1{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const h=a[c].split("="),u=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),g=isNaN(f)?d:f;l[u]=g}n[o].push(l)}const r=new u0;return n.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class cy{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new u0,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<n.length;c++)t.info.push({face:n[c].getAttribute("face"),size:parseInt(n[c].getAttribute("size"),10)});for(let c=0;c<r.length;c++)t.common.push({lineHeight:parseInt(r[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)t.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const h=o[c];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)t.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)t.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return t}}class hy{static test(e){return typeof e=="string"&&e.includes("<font>")?cy.test(ke.ADAPTER.parseXML(e)):!1}static parse(e){return cy.parse(ke.ADAPTER.parseXML(e))}}const p2=[J1,cy,hy];function Zne(i){for(let e=0;e<p2.length;e++)if(p2[e].test(i))return p2[e];return null}function Vne(i,e,t,n,r,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,h=i.width/n-l-c*2,u=i.height/n-l-c*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){const g=d.length+1;for(let p=1;p<g;++p)f.push(p/g)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===tm.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,c,h/2,u+c);let g=0;const p=(s.fontProperties.fontSize+t.strokeThickness)/u;for(let m=0;m<r.length;m++){const C=s.lineHeight*m;for(let A=0;A<d.length;A++){let I=0;typeof f[A]=="number"?I=f[A]:I=A/d.length;const y=C/u+I*p;let x=Math.max(g,y);x=Math.min(x,1),a.addColorStop(x,d[A]),g=x}}}else{a=e.createLinearGradient(c,u/2,h+c,u/2);const g=d.length+1;let p=1;for(let m=0;m<d.length;m++){let C;typeof f[m]=="number"?C=f[m]:C=p/g,a.addColorStop(C,d[m]),p++}}return a}function Wne(i,e,t,n,r,s,o){const a=t.text,l=t.fontProperties;e.translate(n,r),e.scale(s,s);const c=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=Vne(i,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const u=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=_n.shared.setValue(u).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,h+t.lineHeight-l.descent),o.fill&&e.fillText(a,c,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Q1(i){return i.codePointAt?i.codePointAt(0):i.charCodeAt(0)}function nE(i){return Array.from?Array.from(i):i.split("")}function Hne(i){typeof i=="string"&&(i=[i]);const e=[];for(let t=0,n=i.length;t<n;t++){const r=i[t];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...nE(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const _a=class Ns{constructor(e,t,n){const[r]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=ea(o.file),c={};this._ownsTextures=n,this.font=r.face,this.size=r.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let h=0;h<e.page.length;h++){const{id:u,file:d}=e.page[h];c[u]=t instanceof Array?t[h]:t[d],a?.fieldType&&a.fieldType!=="none"&&(c[u].baseTexture.alphaMode=lr.NO_PREMULTIPLIED_ALPHA,c[u].baseTexture.mipmap=uo.OFF)}for(let h=0;h<e.char.length;h++){const{id:u,page:d}=e.char[h];let{x:f,y:g,width:p,height:m,xoffset:C,yoffset:A,xadvance:I}=e.char[h];f/=l,g/=l,p/=l,m/=l,C/=l,A/=l,I/=l;const y=new Mt(f+c[d].frame.x/l,g+c[d].frame.y/l,p,m);this.chars[u]={xOffset:C,yOffset:A,xAdvance:I,kerning:{},texture:new je(c[d].baseTexture,y),page:d}}for(let h=0;h<e.kerning.length;h++){let{first:u,second:d,amount:f}=e.kerning[h];u/=l,d/=l,f/=l,this.chars[d]&&(this.chars[d].kerning[u]=f)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let r;if(e instanceof u0)r=e;else{const o=Zne(e);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(e)}t instanceof je&&(t=[t]);const s=new Ns(r,t,n);return Ns.available[s.font]=s,s}static uninstall(e){const t=Ns.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ns.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},Ns.defaultOptions,n),h=Hne(r),u=t instanceof el?t:new el(t),d=a,f=new u0;f.info[0]={face:u.fontFamily,size:u.fontSize},f.common[0]={lineHeight:u.fontSize};let g=0,p=0,m,C,A,I=0;const y=[];for(let T=0;T<h.length;T++){m||(m=ke.ADAPTER.createCanvas(),m.width=a,m.height=l,C=m.getContext("2d"),A=new bt(m,{resolution:o,...c}),y.push(new je(A)),f.page.push({id:y.length-1,file:""}));const S=h[T],M=Ta.measureText(S,u,!1,m),_=M.width,v=Math.ceil(M.height),B=Math.ceil((u.fontStyle==="italic"?2:1)*_);if(p>=l-v*o){if(p===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${S}')`);--T,m=null,C=null,A=null,p=0,g=0,I=0;continue}if(I=Math.max(v+M.fontProperties.descent,I),B*o+g>=d){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${S}')`);--T,p+=I*o,p=Math.ceil(p),g=0,I=0;continue}Wne(m,C,M,g,p,o,u);const E=Q1(M.text);f.char.push({id:E,page:y.length-1,x:g/o,y:p/o,width:B,height:v,xoffset:0,yoffset:0,xadvance:_-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),g+=(B+2*s)*o,g=Math.ceil(g)}if(!n?.skipKerning)for(let T=0,S=h.length;T<S;T++){const M=h[T];for(let _=0;_<S;_++){const v=h[_],B=C.measureText(M).width,E=C.measureText(v).width,L=C.measureText(M+v).width-(B+E);L&&f.kerning.push({first:Q1(M),second:Q1(v),amount:L})}}const x=new Ns(f,y,!0);return Ns.available[e]!==void 0&&Ns.uninstall(e),Ns.available[e]=x,x}};_a.ALPHA=[["a","z"],["A","Z"]," "],_a.NUMERIC=[["0","9"]],_a.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_a.ASCII=[[" ","~"]],_a.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_a.ALPHANUMERIC},_a.available={};let va=_a;var zne=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,Yne=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const _9=[],v9=[],b9=[],Xne=class iE extends is{constructor(e,t={}){super();const{align:n,tint:r,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},iE.styleDefaults,t);if(!va.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new _n(r),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ho(()=>{this.dirty=!0},this,0,0),this._roundPixels=ke.ROUND_PIXELS,this.dirty=!0,this._resolution=ke.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=va.available[this._fontName],t=this.fontSize,n=t/e.size,r=new Kt,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=nE(l),h=this._maxWidth*e.size/t,u=e.distanceFieldType==="none"?_9:v9;let d=null,f=0,g=0,p=0,m=-1,C=0,A=0,I=0,y=0;for(let B=0;B<c.length;B++){const E=c[B],L=Q1(E);if(/(?:\s)/.test(E)&&(m=B,C=f,y++),E==="\r"||E===`
`){o.push(f),a.push(-1),g=Math.max(g,f),++p,++A,r.x=0,r.y+=e.lineHeight,d=null,y=0;continue}const G=e.chars[L];if(!G)continue;d&&G.kerning[d]&&(r.x+=G.kerning[d]);const Z=b9.pop()||{texture:je.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Kt};Z.texture=G.texture,Z.line=p,Z.charCode=L,Z.position.x=Math.round(r.x+G.xOffset+this._letterSpacing/2),Z.position.y=Math.round(r.y+G.yOffset),Z.prevSpaces=y,s.push(Z),f=Z.position.x+Math.max(G.xAdvance-G.xOffset,G.texture.orig.width),r.x+=G.xAdvance+this._letterSpacing,I=Math.max(I,G.yOffset+G.texture.height),d=L,m!==-1&&h>0&&r.x>h&&(++A,Nh(s,1+m-A,1+B-m),B=m,m=-1,o.push(C),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,C),p++,r.x=0,r.y+=e.lineHeight,d=null,y=0)}const x=c[c.length-1];x!=="\r"&&x!==`
`&&(/(?:\s)/.test(x)&&(f=C),o.push(f),g=Math.max(g,f),a.push(-1));const T=[];for(let B=0;B<=p;B++){let E=0;this._align==="right"?E=g-o[B]:this._align==="center"?E=(g-o[B])/2:this._align==="justify"&&(E=a[B]<0?0:(g-o[B])/a[B]),T.push(E)}const S=s.length,M={},_=[],v=this._activePagesMeshData;u.push(...v);for(let B=0;B<S;B++){const E=s[B].texture,L=E.baseTexture.uid;if(!M[L]){let G=u.pop();if(!G){const U=new Cne;let V,z;e.distanceFieldType==="none"?(V=new C9(je.EMPTY),z=ct.NORMAL):(V=new C9(je.EMPTY,{program:zo.from(Yne,zne),uniforms:{uFWidth:0}}),z=ct.NORMAL_NPM);const le=new m9(U,V);le.blendMode=z,G={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:le,vertices:null,uvs:null,indices:null}}G.index=0,G.indexCount=0,G.vertexCount=0,G.uvsCount=0,G.total=0;const{_textureCache:Z}=this;Z[L]=Z[L]||new je(E.baseTexture),G.mesh.texture=Z[L],G.mesh.tint=this._tintColor.value,_.push(G),M[L]=G}M[L].total++}for(let B=0;B<v.length;B++)_.includes(v[B])||this.removeChild(v[B].mesh);for(let B=0;B<_.length;B++)_[B].mesh.parent!==this&&this.addChild(_[B].mesh);this._activePagesMeshData=_;for(const B in M){const E=M[B],L=E.total;if(!(E.indices?.length>6*L)||E.vertices.length<m9.BATCHABLE_SIZE*2)E.vertices=new Float32Array(4*2*L),E.uvs=new Float32Array(4*2*L),E.indices=new Uint16Array(6*L);else{const G=E.total,Z=E.vertices;for(let U=G*4*2;U<Z.length;U++)Z[U]=0}E.mesh.size=6*L}for(let B=0;B<S;B++){const E=s[B];let L=E.position.x+T[E.line]*(this._align==="justify"?E.prevSpaces:1);this._roundPixels&&(L=Math.round(L));const G=L*n,Z=E.position.y*n,U=E.texture,V=M[U.baseTexture.uid],z=U.frame,le=U._uvs,j=V.index++;V.indices[j*6+0]=0+j*4,V.indices[j*6+1]=1+j*4,V.indices[j*6+2]=2+j*4,V.indices[j*6+3]=0+j*4,V.indices[j*6+4]=2+j*4,V.indices[j*6+5]=3+j*4,V.vertices[j*8+0]=G,V.vertices[j*8+1]=Z,V.vertices[j*8+2]=G+z.width*n,V.vertices[j*8+3]=Z,V.vertices[j*8+4]=G+z.width*n,V.vertices[j*8+5]=Z+z.height*n,V.vertices[j*8+6]=G,V.vertices[j*8+7]=Z+z.height*n,V.uvs[j*8+0]=le.x0,V.uvs[j*8+1]=le.y0,V.uvs[j*8+2]=le.x1,V.uvs[j*8+3]=le.y1,V.uvs[j*8+4]=le.x2,V.uvs[j*8+5]=le.y2,V.uvs[j*8+6]=le.x3,V.uvs[j*8+7]=le.y3}this._textWidth=g*n,this._textHeight=(r.y+e.lineHeight)*n;for(const B in M){const E=M[B];if(this.anchor.x!==0||this.anchor.y!==0){let U=0;const V=this._textWidth*this.anchor.x,z=this._textHeight*this.anchor.y;for(let le=0;le<E.total;le++)E.vertices[U++]-=V,E.vertices[U++]-=z,E.vertices[U++]-=V,E.vertices[U++]-=z,E.vertices[U++]-=V,E.vertices[U++]-=z,E.vertices[U++]-=V,E.vertices[U++]-=z}this._maxLineHeight=I*n;const L=E.mesh.geometry.getBuffer("aVertexPosition"),G=E.mesh.geometry.getBuffer("aTextureCoord"),Z=E.mesh.geometry.getIndex();L.data=E.vertices,G.data=E.uvs,Z.data=E.indices,L.update(),G.update(),Z.update()}for(let B=0;B<s.length;B++)b9.push(s[B]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:r}=va.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),u=(Math.abs(c)+Math.abs(h))/2,d=this.fontSize/r,f=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=u*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=va.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!va.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??va.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=va.available[this._fontName].distanceFieldType==="none"?_9:v9;n.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],n.filter(r=>t[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=je.EMPTY});for(const r in t)t[r].destroy(),delete t[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Xne.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Kne=[".xml",".fnt"],jne={extension:{type:Ge.LoadParser,priority:Rs.Normal},name:"loadBitmapFont",test(i){return Kne.includes(Qi.extname(i).toLowerCase())},async testParse(i){return J1.test(i)||hy.test(i)},async parse(i,e,t){const n=J1.test(i)?J1.parse(i):hy.parse(i),{src:r}=e,{page:s}=n,o=[];for(let c=0;c<s.length;++c){const h=s[c].file;let u=Qi.join(Qi.dirname(r),h);u=ry(u,r),o.push(u)}const a=await t.load(o),l=o.map(c=>a[c]);return va.install(n,l,!0)},async load(i,e){return(await ke.ADAPTER.fetch(i)).text()},unload(i){i.destroy()}};Xe.add(jne);const uy=class ah extends el{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ah(Object.keys(ah.defaultOptions).reduce((t,n)=>({...t,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ah.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:n}=ah;if(n[e]){const r=n[e];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ke.ADAPTER.fetch(e).then(r=>r.blob()).then(async r=>new Promise((s,o)=>{const a=URL.createObjectURL(r),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(r)})).then(async([r,s])=>{const o=Object.assign({family:Qi.basename(e,Qi.extname(e)),weight:"normal",style:"normal",display:"auto",src:r,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=ZQ(e)),typeof e=="number"?UQ(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,ah.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ke.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};uy.availableFonts={},uy.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let m2=uy;const o1=class lh extends Tu{constructor(e="",t={}){super(je.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,r=je.from(n,{scaleMode:ke.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new Mt,r.trim=new Mt,this.texture=r;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=lh.defaultMaxWidth,this.maxHeight=lh.defaultMaxHeight,this._domElement=c,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(c),this._image=n,this._loadImage=new Image,this._autoResolution=lh.defaultAutoResolution,this._resolution=lh.defaultResolution??ke.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:n,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(r)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(r)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:l+n.padding*2,height:c+n.padding*2}}async updateText(e=!0){const{style:t,_image:n,_loadImage:r}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=r.width=Math.ceil(Math.max(1,s)),n.height=r.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{r.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),n.src=r.src,r.onload=null,r.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:r}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/r,t.trim.height=t._frame.height=n.height/r,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,r),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},lh.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Oa(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Oa(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof m2?(this.ownsStyle=!1,this._style=e):e instanceof el?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=m2.from(e)):(this.ownsStyle=!0,this._style=new m2(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};o1.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},o1.defaultMaxWidth=2024,o1.defaultMaxHeight=2024,o1.defaultAutoResolution=!0;cr.system.autoStart=!1;const $ne=i=>{const[e,t]=Gr(i,["ref"]);let n=null,r=null;mt(()=>{try{r=new q3({autoStart:!1,resolution:window.devicePixelRatio,autoDensity:!0,sharedTicker:!1,view:n,preserveDrawingBuffer:!0,resizeTo:n})}catch(o){if(o.message==="Unable to auto-detect a suitable renderer."){console.error(o);return}throw o}an(()=>{r.destroy()})});let s;return mt(()=>{r?.renderer.resize(window.innerWidth,window.innerHeight);const o=[{str:"FORMAT",xOffset:-109,yOffset:0,xOffsetMobile:-58,yOffsetMobile:-1},{str:"",xOffset:361,yOffset:-12,xOffsetMobile:165-110,yOffsetMobile:-6},{str:"3",xOffset:475,yOffset:0,xOffsetMobile:219-127,yOffsetMobile:-1}];s=new is;for(let{str:a,xOffset:l,xOffsetMobile:c,yOffsetMobile:h,yOffset:u}of o){const d=new r_(a);d.anchor.set(.5),d.x=$l(Qc({[pi.XL]:l,[pi.MD]:c-30})),d.y=$l(Qc({[pi.XL]:u,[pi.MD]:h})),d.style.fill=16777215,d.style.fontFamily="Sohne Breit",d.style.fontSize=$l(Qc({[pi.XL]:175,[pi.MD]:95*.4})),d.style.letterSpacing=$l(Qc({[pi.XL]:-1.5,[pi.MD]:-.8})),s.addChild(d)}s.x=(r?.screen.width??0)/2,s.y=(r?.screen.height??0)/2,s.rotation=Qc({[pi.XL]:0,[pi.MD]:Math.PI/2}),r?.stage.addChild(s),r?.render(),an(()=>{r?.stage.removeChildren()})}),mt(()=>{s.scale.set(.5+.5*Po()),r?.render()}),F($.Generic,$n({css:{position:"fixed",inset:"0px"},as:"canvas",ref(o){const a=LU(l=>{n=l},e.ref);typeof a=="function"&&a(o)}},t))},Jne=i=>fy(()=>new Promise(e=>{new jX().load(i,n=>{const r={};n.scene.traverse(s=>{s.name&&(r[s.name]=s)}),e({...n,nodes:r})})})),Qne=wt("<canvas>"),qne=i=>{let e=null;const[t,n]=Gr(i,["children","resources","isPlaying"]);return mt(()=>{let r=new Ai(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(0,0,17),r.zoom=6.59,r.updateProjectionMatrix();let s=new f3,o=null;try{o=new b3({antialias:!0,canvas:e,alpha:!0})}catch(c){if(c.message==="Error creating WebGL context."){console.error(c);return}throw c}const a=t.resources.map(c=>c[0]);let l;mt(Ji(a,()=>{let c=[];for(const p of a){let m=p();if(m==null)return;c.push(m)}let h,u=0;function d(p){l&&(l(p,(p-u)/1e3),u=p),o?.render(s,r)}function f(p){d(p),h=requestAnimationFrame(f)}let g=null;mt(Ji(dn,()=>{o?.setSize(e.clientWidth,e.clientHeight),o?.setViewport(0,0,e.clientWidth,e.clientHeight),r.aspect=e.clientWidth/e.clientHeight,r.updateProjectionMatrix(),g?.()})),o&&t.children({scene:s,renderer:o,camera:r,renderFrame:d,onFrame:p=>{l=p},onResize:p=>{g=p}},c),g?.(),mt(()=>{t.isPlaying?(h=requestAnimationFrame(f),an(()=>{cancelAnimationFrame(h)})):requestAnimationFrame(d)})}))}),(()=>{const r=dt(Qne),s=e;return typeof s=="function"?x2(s,r):e=r,ln(r,n,!1,!1),Cn(),r})()};var x9=`varying vec3 worldNormal;

attribute vec3 morphTargetPosition;
attribute vec3 morphTargetNormal;

uniform float morphTargetInfluence;

void main() {
  vec3 mixedNormal = normal + (morphTargetNormal * morphTargetInfluence);
  worldNormal = normalize(mat3(modelMatrix) * mixedNormal);
  vec3 transformed = vec3(position);
  transformed += morphTargetPosition * morphTargetInfluence;

  gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);
}`,w9=`varying vec3 worldNormal;

void main() {
  gl_FragColor = vec4(worldNormal, 1.0);
}`,S9=`varying vec3 worldNormal;
varying vec3 eyeVector;

attribute vec3 morphTargetPosition;
attribute vec3 morphTargetNormal;

uniform float morphTargetInfluence;

void main() {
  vec3 transformed = vec3( position );

  vec4 worldPosition = modelMatrix * vec4(transformed, 1.0);
  eyeVector = normalize(worldPosition.xyz - cameraPosition);

  
  vec3 mixedNormal = normal + (morphTargetNormal * morphTargetInfluence);

  
  worldNormal = normalize(mat3(modelMatrix) * mixedNormal);

  vec3 worldCameraToVertex = worldPosition.xyz - cameraPosition;

  
  transformed += morphTargetPosition * morphTargetInfluence;

  gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);
}`,T9=`uniform sampler2D uTexture;
uniform sampler2D uBackfaceTexture;
uniform vec2 winResolution;

uniform bool isTransparent;

varying vec3 worldNormal;
varying vec3 eyeVector;

float a = 0.33;

float noise(vec2 p) {
  vec2 ip = floor(p);
  vec2 u = fract(p);
  u = u * u * (3.0 - 2.0 * u);
  float res = mix(
    mix(dot(ip, vec2(127.1, 311.7)),
        dot(ip + vec2(1.0, 0.0), vec2(127.1, 311.7)), u.x),
    mix(dot(ip + vec2(0.0, 1.0), vec2(127.1, 311.7)),
        dot(ip + vec2(1.0, 1.0), vec2(127.1, 311.7)), u.x), u.y);
  return fract(sin(res) * 43758.5453123);
}

float fresnel(vec3 I, vec3 N, float refIndex) {
  float F0 = ((1.0 - refIndex) / (1.0 + refIndex)) * ((1.0 - refIndex) / (1.0 + refIndex));
  float cosAlpha = dot(-I, N);
  return F0 + (1.0 - F0) * pow(1.0 - cosAlpha, 5.0);
}

vec2 refraction(vec2 uv, vec3 normal, float iqr) {
  float noiseValue = noise(uv * 25.0);

  float angle = noiseValue * 2.0 * 3.14159;
  float magnitudeFactor = 0.07;
  if (isTransparent) {
    magnitudeFactor = 0.1;
  }

  float magnitude = noise(vec2(angle, iqr)) * magnitudeFactor;

  vec3 noisyNormal = worldNormal + vec3(cos(angle) * magnitude, sin(angle) * magnitude, 0.0);
  vec3 backfaceNormal = texture2D(uBackfaceTexture, uv).rgb;
  noisyNormal *= (1.0 - a) - backfaceNormal * a;

  return refract(eyeVector / 2.0, noisyNormal, 1.0 / iqr).xy;
}

vec4 withFresnelTerm(vec2 uv, vec3 normal, float iqr) {
  if (isTransparent) {
    float fresnelTerm = fresnel(eyeVector, worldNormal, iqr * 1.3);

    return texture2D(uTexture, mix(uv, uv + refraction(uv, normal, iqr), fresnelTerm));
  }

  return texture2D(uTexture, uv + refraction(uv, normal, iqr));
}

vec4 splitRefraction(vec3 normal, vec2 uv) {
  return vec4(
    withFresnelTerm(uv, normal, 1.4).r,
    withFresnelTerm(uv, normal, 1.43).g,
    withFresnelTerm(uv, normal, 1.46).b,
    1.0
  );
}

vec4 applyGaussianBlur(vec3 normal, vec2 uv, float blurAmount) {
  vec2 pixel = vec2(.0001);

  
  float weights[10];
  weights[0] = 0.002956596480241978;
  weights[1] = 0.017493275444828427;
  weights[2] = 0.0663636774278952;
  weights[3] = 0.1614246982157177;
  weights[4] = 0.25176175243131665;
  weights[5] = 0.25176175243131665;
  weights[6] = 0.1614246982157177;
  weights[7] = 0.0663636774278952;
  weights[8] = 0.017493275444828427;
  weights[9] = 0.002956596480241978;

  float weightSum = weights[0] + weights[1] + weights[2] + weights[3] + weights[4];

  vec4 sum = vec4(0.0);

  for (int x = -5; x <= 5; x++) {
    for (int y = -5; y <= 5; y++) {
      vec2 offset = vec2(float(x), float(y)) * pixel * blurAmount;
      sum += splitRefraction(normal, uv + offset) * weights[abs(x)] * weights[abs(y)];
    }
  }

  return sum / (weightSum * weightSum) / 3.5;
}

void main() {
  vec2 uv = gl_FragCoord.xy / winResolution;
  vec3 backfaceNormal = texture2D(uBackfaceTexture, uv).rgb;
  vec3 normal = worldNormal * (1.0 - a) - backfaceNormal * a;

  vec4 color = applyGaussianBlur(normal, uv, 10.0);

  gl_FragColor = vec4(color.rgb, 1.0);

}`;const dy=Sn(!1),eie=Iu(.16,1,.3,1),tie=i=>{const[e,t]=Gr(i,["backgroundCanvas","isPlaying"]),n=Sn(null),r=Sn([0,0]),s=pe(()=>e5(0,dn().height,hh()));return an(()=>{dy(!1)}),[F(Au,{onPointerUp:()=>{n(null)}}),F($.Generic,$n({css:{height:"100% !important",width:"100% !important",touchAction:"pan-y"},as:qne,get isPlaying(){return e.isPlaying},get resources(){return[Jne("/f.glb")]},onPointerDown:o=>{n([o.clientX,o.clientY])},onPointerMove:o=>{n()&&(r([r()[0]+(o.clientX-n()[0])*.01,(r()[1]+(o.clientY-n()[1])*.01)%(Math.PI*2)]),n([o.clientX,o.clientY]))}},t,{children:({scene:o,renderer:a,camera:l,onFrame:c,onResize:h},[{nodes:{Top_F:u,Bottom_F:d},animations:f}])=>{const g=My();u.geometry.setAttribute("morphTargetPosition",u.geometry.morphAttributes.position[0]),u.geometry.setAttribute("morphTargetNormal",u.geometry.morphAttributes.normal[0]);const p=new zv(u),m=new zv(d),C=p.clipAction(f[2]);C.loop=YI,C.clampWhenFinished=!0;const A=m.clipAction(f[0]);A.loop=YI,A.clampWhenFinished=!0;const I=Sn(!1);mt(Ji(I,V=>{V?(C.paused=!1,C.timeScale=1,C.play(),A.paused=!1,A.timeScale=1,A.play()):(C.timeScale=-1,C.paused=!1,A.timeScale=-1,A.paused=!1)},{defer:!0}));const y=new Ni({vertexShader:x9,fragmentShader:w9,side:Oi,uniforms:{morphTargetInfluence:{value:0}}}),x=new Ni({vertexShader:x9,fragmentShader:w9,side:Oi,uniforms:{morphTargetInfluence:{value:0}}});let T=new Q7(e.backgroundCanvas);const S=new lo,M=new lo,_={uTexture:{value:S.texture},uBackfaceTexture:{value:M.texture},winResolution:{value:null},morphTargetInfluence:{value:0}},v=new Ni({vertexShader:S9,fragmentShader:T9,uniforms:_}),B=new Ni({vertexShader:S9,fragmentShader:T9,uniforms:_});let E=new Kr;u.onAfterRender=()=>{dy(!0),u.onAfterRender=()=>{}},E.add(u),u.position.z=0,E.add(d),d.position.z=0,o.add(E),h(()=>{S.setSize(75*(g()?window.innerHeight/window.innerWidth:window.innerWidth/window.innerHeight),75),M.setSize(window.innerWidth,window.innerHeight),T?.dispose(),_.winResolution.value=new Pt(window.innerWidth,window.innerHeight),requestAnimationFrame(()=>{E.visible=!1,o.background=T,a.setRenderTarget(S),a.render(o,l),o.background=null,E.visible=!0,a.setRenderTarget(null)})});let L=0,G=!1,Z=0;mt(()=>{let V=(.344827586+.655172414*Po())*(g()?.5:1);L=eie(e5(.9,2,Jl()))*.3,L>0&&(G=!0),T.needsUpdate=!0,o.background=T,E.scale.set(V,V,V),E.visible=!1,a.setRenderTarget(S),a.render(o,l),E.visible=!0,a.setRenderTarget(null),o.background=null});let U=[0,0];c((V,z)=>{m.update(z),p.update(z),U[0]+=(r()[0]-U[0])*.1,U[1]+=(r()[1]-U[1])*.1,r([r()[0],r()[1]*.99]),E.rotation.y=L+U[0],E.rotation.x=U[1],G&&(Z===0?Z=V:E.rotation.y+=(V-Z)*1e-4);let le=s();if(E.rotation.x=E.rotation.x*(1-le)-le*(Math.PI/2),E.rotation.y=E.rotation.y%(Math.PI*2),E.position.y=le+(g()?.28:0),le){let re=(1+le*.5)*(g()?.5:1);E.scale.set(re,re,re)}let j=Math.abs(E.rotation.y);I(j>Math.PI/2&&j<Math.PI*1.5),u.material=y,d.material=x,v.uniforms.morphTargetInfluence.value=u.morphTargetInfluences[0],y.uniforms.morphTargetInfluence.value=u.morphTargetInfluences[0],a.setRenderTarget(M),a.render(o,l),u.material=v,d.material=B,a.setRenderTarget(null)})}}))]},nie=wt("<br>"),iie=wt("<div>"),rie=wt("<li>Strategy"),sie=wt("<li>Design"),oie=wt("<li>Technology"),rE=vi(!1),Zre=()=>{const i=wa(),e=F0();let t=null;const n=uw();let r=null;const s=_0(()=>r),o=My(),a=pe(()=>o()?!s():rE());return F(N0,{get type(){return fi.ScrollDown},children:l=>F($.Generic,$n({ref(c){const h=r;typeof h=="function"?h(c):r=c},get css(){return[{position:"sticky",top:"0px",height:"100vh",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","@media (max-width: 767px)":{marginTop:"-72rem",display:"flex",alignItems:"flex-end",justifyContent:"center",paddingBottom:"24rem"}},{...a()&&{visibility:"hidden"},...i&&!e()&&{opacity:"0"},"&":{height:"100svh"}}]},as:"section"},l,{get children(){return[F($.Generic,{css:[{pointerEvents:"none",position:"fixed",top:"0px",zIndex:"10",display:"flex",height:"100vh",width:"100%",userSelect:"none",flexDirection:"column",justifyContent:"flex-end",paddingBottom:"64rem",paddingTop:"96rem",fontFamily:"Sohne, sans-serif",fontSize:"16rem",lineHeight:"1.2",letterSpacing:"-0.03em","@media (max-width: 767px)":{paddingBottom:"16rem",paddingTop:"0px"}},Za,{"&":{height:"100svh"}}],as:"div",get children(){return F($.Generic,{css:{display:"flex",alignItems:"flex-end",justifyContent:"space-between","@media (max-width: 767px)":{justifyContent:"center",textAlign:"center"}},as:"div",get children(){return[F($.Generic,{css:{maxWidth:"516rem","@media (max-width: 767px)":{maxWidth:"none"}},as:"div",get children(){return[F($.Generic,{get css(){return[{marginBottom:"16rem"},ht.sohne.h4,ht.m.sohne.body1]},as:"h1",get children(){return["Your Strategic Digital",dt(nie),"Product Agency Partner"]}}),F($.Generic,{get css(){return[{"--tw-text-opacity":"0.4",color:"rgb(255 255 255 / var(--tw-text-opacity))"},ht.sohne.body3,ht.m.sohne.body3]},as:"p",children:"At Format3, we offer end-to-end digital product solutions that empower businesses to innovate, grow and lead. As a digital experience agency, Format3 partners with you to turn vision into impactful digital products."}),F($.Generic,{css:{marginTop:"24rem",display:"none",flexDirection:"column",alignItems:"center","@media (max-width: 767px)":{display:"flex"}},as:"div",get children(){return dt(iie)}})]}}),F($.Generic,{css:[{display:"flex",alignItems:"center",textAlign:"right","@media (max-width: 767px)":{display:"none"}},{li:{"&:not(:last-child)::after":{content:"var(--tw-content)",fontWeight:"700","--tw-text-opacity":"1",color:"rgb(110 50 225 / var(--tw-text-opacity))","--tw-content":'"\\0a0\\0a0+\\0a0\\0a0"'}}}],as:"ul",get children(){return[dt(rie),dt(sie),dt(oie)]}})]}})}}),pe(()=>pe(()=>!!n())()&&[F($ne,{ref(c){const h=t;typeof h=="function"?h(c):t=c}}),F($.Generic,{get isPlaying(){return!a()},backgroundCanvas:t,get css(){return[{position:"fixed",inset:"0px",height:"100%",width:"100%",opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","@media (max-width: 767px)":{position:"absolute"}},{...dy()&&{opacity:"1"}}]},as:tie})])]}}))})},aie=wt('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.06066 0.93934C2.47487 0.353553 1.52513 0.353553 0.93934 0.93934C0.353553 1.52513 0.353553 2.47487 0.93934 3.06066L29.2236 31.3449C29.8094 31.9307 30.7591 31.9307 31.3449 31.3449C31.9307 30.7591 31.9307 29.8094 31.3449 29.2236L3.06066 0.93934ZM5.98567 13.1012C6.75579 13.104 7.49976 12.8266 8.07952 12.3222L17.5403 21.7829C17.2868 23.0207 16.474 24.0897 15.4378 24.7643C14.411 25.4299 13.1422 25.2943 12.3377 24.4582C10.9974 23.0612 9.55067 21.6605 8.07108 20.2582C7.48013 19.7069 6.70116 19.4018 5.893 19.4051H4.91649C3.89762 19.4051 3.03231 18.6304 3.01325 17.6745C2.99577 16.7271 2.99419 15.7866 3.01696 14.8313C3.03973 13.876 3.90556 13.1012 4.92337 13.1012H5.98567ZM19.7113 24.3496C19.5236 24.1433 19.4056 23.8857 19.3702 23.6128L20.5384 24.781C20.2214 24.7399 19.9279 24.5876 19.7113 24.3496ZM21.8659 17.6233L24.1551 19.9125C24.1791 19.8276 24.2023 19.7425 24.2244 19.657C24.5301 18.4663 24.6819 17.2414 24.6761 16.0121C24.6815 14.7815 24.5292 13.5553 24.2228 12.3634C23.9874 11.4542 23.6471 10.5754 23.2087 9.74472C22.4673 8.34774 21.7011 7.63071 21.6163 7.55393C21.3518 7.31123 21.0017 7.18357 20.643 7.19901C20.2844 7.21445 19.9465 7.37174 19.7038 7.63627C19.4611 7.90081 19.3335 8.25092 19.3489 8.60958C19.3644 8.96825 19.5216 9.30609 19.7862 9.54878C19.899 9.65469 21.969 11.6977 21.969 16.0121C21.9719 16.5514 21.9374 17.0898 21.8659 17.6233ZM26.3151 22.0725L28.3675 24.1248C28.8377 23.1496 29.2118 22.1302 29.484 21.0813C29.9095 19.4271 30.1209 17.7251 30.1131 16.0171C30.1206 14.3075 29.9092 12.604 29.484 10.9481C29.1591 9.69189 28.689 8.47773 28.0833 7.33018C27.0671 5.42006 26.0424 4.45785 25.9296 4.35617C25.7986 4.236 25.6452 4.14281 25.4782 4.08191C25.3112 4.02101 25.1339 3.99361 24.9563 4.00125C24.7787 4.0089 24.6044 4.05145 24.4432 4.12648C24.2821 4.2015 24.1373 4.30754 24.0171 4.43852C23.8969 4.5695 23.8037 4.72287 23.7428 4.88987C23.6819 5.05688 23.6545 5.23424 23.6622 5.41183C23.6776 5.77049 23.8349 6.10833 24.0994 6.35103C24.1296 6.37962 24.925 7.14537 25.7114 8.63608C26.2135 9.59556 26.6031 10.6099 26.8722 11.6588C27.2341 13.0831 27.4135 14.5476 27.406 16.0171C27.4137 17.4844 27.2343 18.9466 26.8722 20.3685C26.7232 20.9484 26.5371 21.5175 26.3151 22.0725ZM12.409 8.1664L17.8682 13.6256C17.7928 12.6151 17.682 11.7781 17.5687 11.0857C17.35 9.77928 16.5096 8.64655 15.4219 7.94648C14.4297 7.30889 13.2163 7.40726 12.409 8.1664Z" fill="white" style="fill:white;fill-opacity:1;">'),sE=(i={})=>(()=>{const e=dt(aie);return ln(e,i,!0,!0),Cn(),e})(),lie=wt('<svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M25.0833 3.33018C25.689 4.47773 26.1591 5.69189 26.484 6.94814C26.9092 8.60401 27.1206 10.3075 27.1131 12.0171C27.1209 13.7251 26.9095 15.4271 26.484 17.0813C26.1589 18.3342 25.6884 19.5449 25.0823 20.6886C24.0639 22.5898 23.0371 23.5462 22.9232 23.6489C22.6574 23.8901 22.3066 24.0158 21.948 23.9984C21.5894 23.981 21.2525 23.8218 21.0113 23.556C20.7701 23.2901 20.6443 22.9393 20.6618 22.5807C20.6792 22.2221 20.8383 21.8852 21.1042 21.644C21.1376 21.6122 21.9293 20.8539 22.7125 19.379C23.2145 18.4239 23.6037 17.4136 23.8722 16.3685C24.2343 14.9466 24.4137 13.4844 24.406 12.0171C24.4135 10.5476 24.2341 9.08308 23.8722 7.65881C23.6031 6.60987 23.2135 5.59556 22.7114 4.63608C21.925 3.14537 21.1296 2.37962 21.0994 2.35103C20.8349 2.10833 20.6776 1.77049 20.6622 1.41183C20.6545 1.23424 20.6819 1.05688 20.7428 0.889875C20.8037 0.722874 20.8969 0.569504 21.0171 0.43852C21.1373 0.307535 21.2821 0.201504 21.4432 0.126476C21.6044 0.0514506 21.7787 0.00889956 21.9563 0.001253C22.1339 -0.00639356 22.3112 0.021015 22.4782 0.081911C22.6452 0.142809 22.7986 0.236002 22.9296 0.356172C23.0424 0.457847 24.0671 1.42006 25.0833 3.33018ZM21.6761 12.0121C21.6815 10.7815 21.5292 9.55526 21.2228 8.3634C20.9874 7.45416 20.6471 6.57537 20.2087 5.74472C19.4673 4.34774 18.7011 3.63071 18.6163 3.55393C18.3518 3.31123 18.0017 3.18357 17.643 3.19901C17.2844 3.21445 16.9465 3.37174 16.7038 3.63627C16.4611 3.90081 16.3335 4.25092 16.3489 4.60958C16.3644 4.96825 16.5216 5.30609 16.7862 5.54878C16.899 5.65469 18.969 7.69774 18.969 12.0121C18.9743 13.0011 18.8538 13.9867 18.6105 14.9453C18.4313 15.6449 18.1717 16.3214 17.8368 16.9613C17.3603 17.861 16.882 18.3535 16.8014 18.4364L16.7909 18.4473C16.5298 18.69 16.375 19.0259 16.3601 19.3821C16.3452 19.7382 16.4714 20.0859 16.7113 20.3496C16.9512 20.6133 17.2854 20.7717 17.6414 20.7904C17.9974 20.8091 18.3464 20.6866 18.6126 20.4496C18.6974 20.3733 19.4642 19.6616 20.2087 18.2688C20.6481 17.4409 20.989 16.5643 21.2244 15.657C21.5301 14.4663 21.6819 13.2414 21.6761 12.0121ZM1.91649 15.4051H2.893C3.70116 15.4018 4.48013 15.7069 5.07108 16.2582C6.55067 17.6605 7.99743 19.0612 9.33775 20.4582C10.1422 21.2943 11.411 21.4299 12.4378 20.7643C13.5149 20.0631 14.3506 18.9357 14.5677 17.6356C14.771 16.3964 14.9622 14.6928 14.9643 12.3607C14.9664 10.0285 14.7716 8.32541 14.5687 7.08571C14.35 5.77928 13.5096 4.64655 12.4219 3.94648C11.4025 3.29141 10.1496 3.41321 9.34357 4.23032C8.01967 5.5754 6.59304 6.92366 5.13357 8.27404C4.54639 8.80891 3.77994 9.10408 2.98567 9.10122H1.92337C0.90556 9.10122 0.0397286 9.87596 0.0169568 10.8313C-0.00581506 11.7866 -0.00422624 12.7271 0.0132508 13.6745C0.0323147 14.6304 0.897616 15.4051 1.91649 15.4051Z" fill="white" style="fill:white;fill-opacity:1;">'),oE=(i={})=>(()=>{const e=dt(lie);return ln(e,i,!0,!0),Cn(),e})(),cie=Iu(.25,.25,0,1),Vre=i=>{const[e,t]=Gr(i,["shouldTrimMargin","src","noMarginBottom"]),n=Vn;let r=null;const s=dn,o=Gi(()=>r),a=pe(()=>cie(qi((n()-o().y+s().height-32)/(o().height-32),0,1)));mt(()=>{rE(a()===1)});const l=My();let c=null;const h=_0(()=>r);mt(()=>{c[h()?"play":"pause"]()});const u=Sn(!0);return F($.Generic,$n({ref(d){const f=r;typeof f=="function"?f(d):r=d},get css(){return[{position:"relative",marginBottom:"220rem",marginTop:"-32rem",height:"100vh",paddingTop:"32rem",paddingBottom:"32rem","@media (max-width: 767px)":{position:"static",marginBottom:"0px",marginTop:"0px",height:"auto",paddingLeft:"0px !important",paddingRight:"0px !important",paddingTop:"16rem",paddingBottom:"16rem"}},Za,{"&":{height:"100lvh","@media (max-width: 767px)":{height:"auto"}},...e.shouldTrimMargin&&{marginBottom:"256rem","@media (max-width: 767px)":{marginBottom:"80rem"}},...e.noMarginBottom&&{marginBottom:"0px"}}]},as:"section"},t,{get children(){return F($.Generic,{css:{position:"relative",zIndex:"10",height:"100%",transformOrigin:"top","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))"},as:"div",get style(){return pe(()=>!!l())()?{}:{transform:`scale(${.5+a()/2})`}},get children(){return[F($.Generic,{ref(d){const f=c;typeof f=="function"?f(d):c=d},get src(){return e.src},autoplay:!0,width:"1920",height:"1080",playsinline:!0,loop:!0,muted:!0,css:{position:"absolute",inset:"0px",height:"100%",width:"100%",objectFit:"cover","@media (max-width: 767px)":{position:"static"}},as:"video"}),F($.Generic,{css:{position:"absolute",bottom:"44rem",right:"44rem",display:"flex",height:"72rem",width:"72rem",alignItems:"center",justifyContent:"center",borderRadius:"9999px","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))","@media (max-width: 767px)":{bottom:"16rem",right:"16rem",height:"32rem",width:"32rem"}},as:"button",onClick:()=>{c.muted=!u(),u(!u())},get children(){return pe(()=>!!u())()?F($.Generic,{css:{height:"auto","@media (max-width: 767px)":{width:"12rem"}},as:sE}):F($.Generic,{css:{marginLeft:"1.5rem",height:"auto","@media (max-width: 767px)":{marginLeft:"0px",width:"11rem"}},as:oE})}})]}})}}))},hie=()=>Es(()=>Ms({"*[_type == 'about'][0]":{seo:po,heroSection:{title:!0,copy:!0,cursorImages:[st()]},teamSection:{title:!0,copy:!0,members:[{...st(),name:!0,title:!0}]},globeSection:{title:!0,copy:!0,list:!0,coordinates:[{isClickable:!0,latitude:!0,longitude:!0,city:!0,country:!0,address:!0,description:!0,color:!0,avatars:[st()]}]},'"reel": *[_type == "about"][0].reel.asset->url':!0,advisorsSection:{title:!0,copy:!0,advisors:[{...st(),name:!0,title:!0}]},"...*[_type == 'home'][0]":{awardsSection:{title:!0,copy:!0,awards:[{year:!0,issuer:!0,award:!0,image:st()}]},clientsSection:{title:!0,copy:!0,logos:[{...st(),mobileWidth:!0,displayOnMobile:!0}]}},collaborationSection:{title:!0,copy:!0},servicesSection:{title:!0,copy:!0,button:wr,services:[{title:!0,button:wr,subServices:[{label:!0,copy:!0}]}]},statisticsSection:{title:!0,statistics:[{label:!0,suffix:!0,value:!0}],video:{'"src": asset->url':!0}},'"featuredArticles": *[_type == "article"] | order(publishedAt desc)':{thumbnail:st(),'"slug": slug.current':!0,'"categories": categories[]->label':!0,title:!0,excerpt:!0}}})),uie=wt('<svg width="342" height="119" viewBox="0 0 342 119" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_2264_11640)"><rect width="543" height="41" transform="translate(-99.2461 92.6973) rotate(-11.3134)" fill="white" style="fill:white;fill:white;fill-opacity:1;"></rect><path d="M-82.9939 110.835C-83.5844 107.884 -81.539 105.262 -78.258 104.605C-75.6909 104.092 -73.585 104.984 -72.4976 106.779L-73.4805 107.576C-74.3921 106.088 -75.9764 105.377 -78.0081 105.783C-80.5752 106.297 -82.1264 108.249 -81.6622 110.569C-81.1981 112.889 -79.0152 114.094 -76.4481 113.581C-74.4164 113.174 -73.2276 111.908 -72.9586 110.184L-71.745 110.541C-72.0579 112.617 -73.6585 114.25 -76.2257 114.764C-79.5066 115.42 -82.4034 113.787 -82.9939 110.835ZM-66.8098 102.315C-63.5151 101.656 -60.6595 103.297 -60.069 106.249C-59.4785 109.2 -61.4827 111.814 -64.7774 112.474C-68.0721 113.133 -70.9277 111.491 -71.5181 108.539C-72.1086 105.588 -70.1045 102.974 -66.8098 102.315ZM-66.5736 103.495C-69.1544 104.012 -70.6507 105.953 -70.1865 108.273C-69.7224 110.593 -67.5944 111.809 -65.0136 111.293C-62.4327 110.777 -60.9502 108.838 -61.4144 106.518C-61.8785 104.198 -63.9927 102.979 -66.5736 103.495ZM-51.0701 109.574L-52.1683 109.794L-58.1707 101.986L-56.4377 110.648L-57.7144 110.903L-59.6864 101.047L-57.6409 100.638L-51.9186 108.116L-49.5002 99.0089L-47.5097 98.6106L-45.5377 108.467L-46.8144 108.723L-48.5474 100.06L-51.0701 109.574ZM-44.1847 97.9454L-42.2128 107.802L-43.5307 108.066L-45.5026 98.2091L-44.1847 97.9454ZM-32.2937 95.5665L-30.3218 105.423L-31.4887 105.657L-40.5936 98.8974L-38.9429 107.148L-40.2059 107.401L-42.1779 97.5439L-40.7776 97.2638L-31.961 103.795L-33.5567 95.8192L-32.2937 95.5665ZM-25.1688 93.984C-22.6154 93.4731 -20.482 94.3598 -19.3974 96.1417L-20.3912 96.9545C-21.3029 95.4664 -22.9009 94.7581 -24.9326 95.1646C-27.5272 95.6837 -29.0536 97.6167 -28.5895 99.9367C-28.1226 102.27 -25.9809 103.484 -23.4275 102.973C-21.2173 102.531 -19.603 100.966 -19.8969 99.2113L-24.7291 100.178L-24.9598 99.0249L-18.9607 97.8247L-17.9363 102.945L-19.1718 103.192L-19.5151 101.476C-19.9104 102.641 -21.2584 103.753 -23.1913 104.154C-26.4998 104.816 -29.3416 103.171 -29.9348 100.206C-30.5281 97.2406 -28.491 94.6486 -25.1688 93.984ZM-14.3642 99.6892L-13.5736 98.6459C-12.2666 100.112 -10.2458 100.364 -8.52976 100.021C-6.58039 99.6311 -5.30922 98.6344 -5.52894 97.5361C-5.76789 96.3418 -6.76455 96.3556 -9.77923 96.6303C-12.3985 96.8831 -14.2601 96.8558 -14.6391 94.9613C-14.9824 93.2453 -13.4751 91.6445 -10.8668 91.1227C-8.57426 90.664 -6.54247 91.1856 -5.49906 92.3332L-6.30621 93.2942C-7.21233 92.3333 -8.76913 91.9023 -10.691 92.2868C-12.6953 92.6878 -13.5986 93.668 -13.4146 94.5878C-13.2058 95.6311 -12.2037 95.6448 -9.59809 95.3948C-6.44339 95.1063 -4.66696 95.1364 -4.26598 97.1407C-3.87598 99.0901 -5.66329 100.647 -8.32651 101.18C-10.7564 101.666 -13.1533 101.103 -14.3642 99.6892ZM0.824565 88.7837C4.11927 88.1245 6.97483 89.7662 7.56532 92.7177C8.15581 95.6692 6.15166 98.2832 2.85695 98.9423C-0.437761 99.6015 -3.29331 97.9598 -3.8838 95.0083C-4.47429 92.0568 -2.47015 89.4428 0.824565 88.7837ZM1.06076 89.9643C-1.5201 90.4806 -3.01634 92.4218 -2.55219 94.7419C-2.08804 97.0619 0.0398971 98.2781 2.62075 97.7617C5.20161 97.2454 6.68413 95.3069 6.21998 92.9869C5.75582 90.6669 3.64162 89.4479 1.06076 89.9643ZM13.2253 86.3027C16.52 85.6436 19.3756 87.2853 19.9661 90.2368C20.5566 93.1883 18.5524 95.8023 15.2577 96.4614C11.963 97.1206 9.10743 95.4789 8.51694 92.5273C7.92645 89.5758 9.9306 86.9619 13.2253 86.3027ZM13.4615 87.4833C10.8806 87.9997 9.3844 89.9409 9.84856 92.2609C10.3127 94.581 12.4406 95.7971 15.0215 95.2808C17.6024 94.7645 19.0849 92.826 18.6207 90.5059C18.1566 88.1859 16.0424 86.967 13.4615 87.4833ZM30.2328 83.0572L32.2048 92.9139L31.0379 93.1473L21.933 86.3881L23.5836 94.6386L22.3207 94.8913L20.3487 85.0346L21.7489 84.7545L30.5656 91.2858L28.9699 83.3099L30.2328 83.0572ZM38.1656 85.4393C39.3187 85.2086 40.3978 85.8921 40.6422 87.1139C40.8839 88.322 40.1509 89.3681 38.9977 89.5988C37.8309 89.8323 36.7243 89.1542 36.4826 87.9461C36.2382 86.7243 36.9987 85.6727 38.1656 85.4393ZM44.9014 85.2481C44.3109 82.2966 46.3562 79.6744 49.6372 79.018C52.2044 78.5044 54.3103 79.3966 55.3977 81.1922L54.4148 81.9885C53.5032 80.5004 51.9189 79.7894 49.8871 80.1959C47.32 80.7095 45.7689 82.6617 46.233 84.9817C46.6972 87.3017 48.88 88.5069 51.4471 87.9934C53.4789 87.5869 54.6677 86.3211 54.9366 84.5968L56.1502 84.9537C55.8373 87.0294 54.2367 88.6631 51.6696 89.1767C48.3886 89.8331 45.4919 88.1996 44.9014 85.2481ZM61.0855 76.7276C64.3802 76.0685 67.2357 77.7102 67.8262 80.6617C68.4167 83.6132 66.4126 86.2272 63.1179 86.8863C59.8232 87.5455 56.9676 85.9038 56.3771 82.9523C55.7866 80.0007 57.7908 77.3868 61.0855 76.7276ZM61.3217 77.9082C58.7408 78.4246 57.2446 80.3658 57.7087 82.6858C58.1729 85.0059 60.3008 86.2221 62.8817 85.7057C65.4625 85.1894 66.9451 83.2509 66.4809 80.9309C66.0167 78.6108 63.9025 77.3919 61.3217 77.9082ZM76.8252 83.9869L75.7269 84.2067L69.7245 76.3985L71.4575 85.0608L70.1808 85.3162L68.2089 75.4596L70.2543 75.0503L75.9767 82.5291L78.395 73.4217L80.3856 73.0234L82.3575 82.8801L81.0808 83.1355L79.3478 74.4732L76.8252 83.9869ZM83.7105 72.3582L85.6825 82.2149L84.3646 82.4786L82.3926 72.6219L83.7105 72.3582ZM95.6015 69.9793L97.5735 79.836L96.4066 80.0694L87.3017 73.3102L88.9523 81.5607L87.6893 81.8134L85.7174 71.9567L87.1176 71.6766L95.9342 78.2079L94.3385 70.232L95.6015 69.9793ZM102.726 68.3968C105.28 67.8859 107.413 68.7726 108.498 70.5545L107.504 71.3673C106.592 69.8792 104.994 69.1709 102.963 69.5774C100.368 70.0965 98.8416 72.0295 99.3058 74.3495C99.7727 76.6833 101.914 77.8967 104.468 77.3859C106.678 76.9437 108.292 75.3786 107.998 73.6241L103.166 74.5909L102.935 73.4377L108.935 72.2375L109.959 77.3581L108.723 77.6052L108.38 75.8892C107.985 77.0534 106.637 78.1655 104.704 78.5665C101.396 79.2284 98.5537 77.5839 97.9604 74.6187C97.3672 71.6534 99.4043 69.0614 102.726 68.3968ZM113.531 74.102L114.322 73.0587C115.629 74.5247 117.65 74.7772 119.366 74.4339C121.315 74.0439 122.586 73.0472 122.366 71.9489C122.127 70.7546 121.131 70.7684 118.116 71.0431C115.497 71.2959 113.635 71.2686 113.256 69.3741C112.913 67.6581 114.42 66.0573 117.028 65.5355C119.321 65.0768 121.353 65.5984 122.396 66.746L121.589 67.707C120.683 66.7461 119.126 66.3151 117.204 66.6996C115.2 67.1006 114.297 68.0808 114.481 69.0006C114.689 70.0439 115.692 70.0576 118.297 69.8076C121.452 69.5191 123.228 69.5492 123.629 71.5535C124.019 73.5029 122.232 75.0597 119.569 75.5926C117.139 76.0787 114.742 75.516 113.531 74.102ZM128.72 63.1965C132.015 62.5373 134.87 64.179 135.461 67.1305C136.051 70.082 134.047 72.696 130.752 73.3551C127.458 74.0143 124.602 72.3726 124.011 69.4211C123.421 66.4696 125.425 63.8556 128.72 63.1965ZM128.956 64.3771C126.375 64.8934 124.879 66.8346 125.343 69.1547C125.807 71.4747 127.935 72.6909 130.516 72.1745C133.097 71.6582 134.579 69.7197 134.115 67.3997C133.651 65.0797 131.537 63.8607 128.956 64.3771ZM141.121 60.7155C144.415 60.0564 147.271 61.6981 147.861 64.6496C148.452 67.6011 146.448 70.2151 143.153 70.8742C139.858 71.5334 137.003 69.8916 136.412 66.9401C135.822 63.9886 137.826 61.3747 141.121 60.7155ZM141.357 61.8961C138.776 62.4125 137.28 64.3537 137.744 66.6737C138.208 68.9938 140.336 70.2099 142.917 69.6936C145.498 69.1773 146.98 67.2388 146.516 64.9187C146.052 62.5987 143.938 61.3798 141.357 61.8961ZM158.128 57.47L160.1 67.3267L158.933 67.5601L149.828 60.8009L151.479 69.0514L150.216 69.3041L148.244 59.4474L149.644 59.1673L158.461 65.6986L156.865 57.7227L158.128 57.47ZM166.061 59.8521C167.214 59.6213 168.293 60.3049 168.537 61.5267C168.779 62.7348 168.046 63.7809 166.893 64.0116C165.726 64.2451 164.62 63.567 164.378 62.3589C164.133 61.1371 164.894 60.0855 166.061 59.8521ZM172.797 59.6609C172.206 56.7094 174.252 54.0872 177.532 53.4308C180.1 52.9172 182.206 53.8094 183.293 55.605L182.31 56.4013C181.398 54.9132 179.814 54.2022 177.782 54.6087C175.215 55.1223 173.664 57.0745 174.128 59.3945C174.592 61.7145 176.775 62.9197 179.342 62.4062C181.374 61.9997 182.563 60.7339 182.832 59.0096L184.045 59.3665C183.733 61.4422 182.132 63.0759 179.565 63.5895C176.284 64.2459 173.387 62.6124 172.797 59.6609ZM188.981 51.1404C192.275 50.4813 195.131 52.123 195.722 55.0745C196.312 58.026 194.308 60.64 191.013 61.2991C187.718 61.9583 184.863 60.3166 184.272 57.3651C183.682 54.4135 185.686 51.7996 188.981 51.1404ZM189.217 52.321C186.636 52.8374 185.14 54.7786 185.604 57.0986C186.068 59.4187 188.196 60.6349 190.777 60.1185C193.358 59.6022 194.84 57.6637 194.376 55.3437C193.912 53.0236 191.798 51.8047 189.217 52.321ZM204.72 58.3997L203.622 58.6195L197.62 50.8113L199.353 59.4736L198.076 59.729L196.104 49.8723L198.15 49.4631L203.872 56.9419L206.29 47.8345L208.281 47.4362L210.253 57.2929L208.976 57.5483L207.243 48.886L204.72 58.3997ZM211.606 46.771L213.578 56.6277L212.26 56.8914L210.288 47.0347L211.606 46.771ZM223.497 44.3921L225.469 54.2488L224.302 54.4822L215.197 47.723L216.848 55.9735L215.585 56.2262L213.613 46.3695L215.013 46.0894L223.83 52.6207L222.234 44.6448L223.497 44.3921ZM230.622 42.8096C233.175 42.2987 235.309 43.1854 236.393 44.9673L235.399 45.7801C234.488 44.292 232.89 43.5837 230.858 43.9902C228.263 44.5093 226.737 46.4423 227.201 48.7623C227.668 51.0961 229.81 52.3095 232.363 51.7987C234.573 51.3565 236.188 49.7914 235.894 48.0369L231.061 49.0037L230.831 47.8505L236.83 46.6503L237.854 51.7709L236.619 52.018L236.275 50.302C235.88 51.4662 234.532 52.5783 232.599 52.9793C229.291 53.6412 226.449 51.9967 225.856 49.0315C225.262 46.0662 227.3 43.4742 230.622 42.8096ZM241.426 48.5148L242.217 47.4715C243.524 48.9375 245.545 49.19 247.261 48.8467C249.21 48.4567 250.481 47.46 250.262 46.3617C250.023 45.1674 249.026 45.1812 246.011 45.4559C243.392 45.7087 241.53 45.6814 241.151 43.7869C240.808 42.0709 242.315 40.4701 244.924 39.9483C247.216 39.4896 249.248 40.0112 250.291 41.1588L249.484 42.1198C248.578 41.1589 247.021 40.7279 245.099 41.1124C243.095 41.5134 242.192 42.4936 242.376 43.4134C242.585 44.4567 243.587 44.4704 246.192 44.2204C249.347 43.9319 251.124 43.962 251.525 45.9663C251.915 47.9157 250.127 49.4725 247.464 50.0053C245.034 50.4915 242.637 49.9288 241.426 48.5148ZM256.615 37.6093C259.91 36.9501 262.765 38.5918 263.356 41.5433C263.946 44.4948 261.942 47.1088 258.647 47.7679C255.353 48.4271 252.497 46.7854 251.907 43.8339C251.316 40.8824 253.32 38.2684 256.615 37.6093ZM256.851 38.7899C254.27 39.3062 252.774 41.2474 253.238 43.5675C253.702 45.8875 255.83 47.1037 258.411 46.5873C260.992 46.071 262.475 44.1325 262.011 41.8125C261.546 39.4924 259.432 38.2735 256.851 38.7899ZM269.016 35.1283C272.311 34.4692 275.166 36.1109 275.757 39.0624C276.347 42.0139 274.343 44.6279 271.048 45.287C267.754 45.9462 264.898 44.3044 264.307 41.3529C263.717 38.4014 265.721 35.7875 269.016 35.1283ZM269.252 36.3089C266.671 36.8253 265.175 38.7665 265.639 41.0865C266.103 43.4066 268.231 44.6227 270.812 44.1064C273.393 43.5901 274.875 41.6516 274.411 39.3315C273.947 37.0115 271.833 35.7926 269.252 36.3089ZM286.023 31.8828L287.995 41.7395L286.828 41.9729L277.724 35.2137L279.374 43.4642L278.111 43.7169L276.139 33.8602L277.539 33.5801L286.356 40.1114L284.76 32.1355L286.023 31.8828ZM293.956 34.2649C295.109 34.0341 296.188 34.7177 296.433 35.9395C296.674 37.1476 295.941 38.1937 294.788 38.4244C293.621 38.6579 292.515 37.9798 292.273 36.7717C292.029 35.5499 292.789 34.4983 293.956 34.2649ZM300.692 34.0737C300.101 31.1222 302.147 28.5 305.428 27.8436C307.995 27.33 310.101 28.2222 311.188 30.0178L310.205 30.8141C309.294 29.326 307.709 28.615 305.678 29.0215C303.111 29.5351 301.559 31.4873 302.024 33.8073C302.488 36.1273 304.671 37.3325 307.238 36.8189C309.269 36.4125 310.458 35.1467 310.727 33.4224L311.941 33.7793C311.628 35.855 310.027 37.4887 307.46 38.0023C304.179 38.6587 301.282 37.0252 300.692 34.0737ZM316.876 25.5532C320.171 24.8941 323.026 26.5358 323.617 29.4873C324.207 32.4388 322.203 35.0528 318.908 35.7119C315.614 36.3711 312.758 34.7294 312.168 31.7778C311.577 28.8263 313.581 26.2124 316.876 25.5532ZM317.112 26.7338C314.531 27.2502 313.035 29.1914 313.499 31.5114C313.963 33.8315 316.091 35.0476 318.672 34.5313C321.253 34.015 322.736 32.0765 322.271 29.7564C321.807 27.4364 319.693 26.2175 317.112 26.7338ZM332.616 32.8125L331.517 33.0323L325.515 25.2241L327.248 33.8864L325.971 34.1418L323.999 24.2851L326.045 23.8759L331.767 31.3547L334.186 22.2473L336.176 21.849L338.148 31.7057L336.871 31.9611L335.138 23.2988L332.616 32.8125ZM339.501 21.1838L341.473 31.0405L340.155 31.3042L338.183 21.4475L339.501 21.1838ZM351.392 18.8049L353.364 28.6615L352.197 28.895L343.092 22.1358L344.743 30.3863L343.48 30.639L341.508 20.7823L342.908 20.5022L351.725 27.0335L350.129 19.0575L351.392 18.8049ZM358.517 17.2224C361.07 16.7115 363.204 17.5982 364.288 19.3801L363.295 20.1929C362.383 18.7048 360.785 17.9965 358.753 18.403C356.159 18.9221 354.632 20.8551 355.096 23.1751C355.563 25.5089 357.705 26.7223 360.258 26.2114C362.468 25.7693 364.083 24.2042 363.789 22.4497L358.957 23.4165L358.726 22.2633L364.725 21.0631L365.75 26.1837L364.514 26.4308L364.171 24.7148C363.775 25.879 362.427 26.9911 360.494 27.3921C357.186 28.054 354.344 26.4095 353.751 23.4443C353.158 20.479 355.195 17.887 358.517 17.2224ZM369.322 22.9276L370.112 21.8843C371.419 23.3503 373.44 23.6028 375.156 23.2595C377.105 22.8695 378.377 21.8728 378.157 20.7745C377.918 19.5802 376.921 19.594 373.907 19.8687C371.287 20.1215 369.426 20.0941 369.047 18.1997C368.703 16.4837 370.211 14.8829 372.819 14.3611C375.112 13.9024 377.143 14.424 378.187 15.5716L377.38 16.5326C376.473 15.5717 374.917 15.1407 372.995 15.5252C370.99 15.9262 370.087 16.9064 370.271 17.8262C370.48 18.8695 371.482 18.8832 374.088 18.6332C377.242 18.3447 379.019 18.3748 379.42 20.3791C379.81 22.3285 378.022 23.8853 375.359 24.4181C372.929 24.9043 370.532 24.3416 369.322 22.9276ZM384.51 12.022C387.805 11.3629 390.661 13.0046 391.251 15.9561C391.842 18.9076 389.837 21.5216 386.543 22.1807C383.248 22.8399 380.392 21.1982 379.802 18.2467C379.211 15.2952 381.216 12.6812 384.51 12.022ZM384.747 13.2027C382.166 13.719 380.669 15.6602 381.134 17.9803C381.598 20.3003 383.726 21.5165 386.307 21.0001C388.887 20.4838 390.37 18.5453 389.906 16.2253C389.442 13.9052 387.327 12.6863 384.747 13.2027ZM396.911 9.54111C400.206 8.88196 403.061 10.5237 403.652 13.4752C404.242 16.4267 402.238 19.0406 398.943 19.6998C395.649 20.359 392.793 18.7172 392.203 15.7657C391.612 12.8142 393.616 10.2003 396.911 9.54111ZM397.147 10.7217C394.566 11.238 393.07 13.1793 393.534 15.4993C393.998 17.8193 396.126 19.0355 398.707 18.5192C401.288 18.0029 402.771 16.0644 402.307 13.7443C401.842 11.4243 399.728 10.2054 397.147 10.7217ZM413.919 6.29557L415.891 16.1523L414.724 16.3857L405.619 9.62653L407.269 17.877L406.006 18.1297L404.034 8.27303L405.435 7.99289L414.251 14.5242L412.656 6.54825L413.919 6.29557ZM421.851 8.67765C423.004 8.44694 424.084 9.13054 424.328 10.3523C424.57 11.5604 423.837 12.6065 422.684 12.8372C421.517 13.0707 420.41 12.3926 420.168 11.1845C419.924 9.96272 420.684 8.9111 421.851 8.67765Z" fill="black" style="fill:black;fill:black;fill-opacity:1;"></path><rect width="543" height="41" transform="translate(-96.1016 6.73047) rotate(6.86517)" fill="#6E32E1" style="fill:#6E32E1;fill:color(display-p3 0.4314 0.1961 0.8824);fill-opacity:1;"></rect><path d="M-86.3185 29.0335C-85.9587 26.045 -83.1974 24.1918 -79.8754 24.5918C-77.2761 24.9047 -75.5537 26.4094 -75.0807 28.4546L-76.263 28.9045C-76.6649 27.2063 -77.9482 26.0365 -80.0054 25.7888C-82.6046 25.4759 -84.6874 26.8467 -84.9702 29.1958C-85.253 31.5448 -83.5551 33.3709 -80.9559 33.6838C-78.8988 33.9315 -77.3744 33.0997 -76.5809 31.5454L-75.5393 32.2631C-76.4841 34.1376 -78.5145 35.1904 -81.1137 34.8775C-84.4357 34.4775 -86.6783 32.0219 -86.3185 29.0335ZM-68.284 25.9873C-64.948 26.389 -62.7472 28.8396 -63.107 31.828C-63.4668 34.8165 -66.1864 36.6747 -69.5223 36.2731C-72.8582 35.8714 -75.0591 33.4208 -74.6993 30.4324C-74.3395 27.4439 -71.6199 25.5857 -68.284 25.9873ZM-68.4279 27.1827C-71.041 26.8681 -73.0682 28.2457 -73.351 30.5947C-73.6338 32.9437 -71.9915 34.7631 -69.3784 35.0777C-66.7653 35.3923 -64.752 34.0131 -64.4692 31.664C-64.1863 29.315 -65.8147 27.4973 -68.4279 27.1827ZM-55.5946 37.7948L-56.7066 37.6609L-59.9734 28.3698L-61.0294 37.1405L-62.322 36.9848L-61.1205 27.0049L-59.0494 27.2543L-55.9459 36.145L-50.807 28.2466L-48.7915 28.4893L-49.9931 38.4692L-51.2857 38.3136L-50.2298 29.5429L-55.5946 37.7948ZM-45.425 28.8946L-46.6265 38.8745L-47.9609 38.7139L-46.7594 28.7339L-45.425 28.8946ZM-33.3853 30.3441L-34.5869 40.3241L-35.7683 40.1818L-42.3101 30.9194L-43.3158 39.2731L-44.5946 39.1192L-43.393 29.1392L-41.9753 29.3099L-35.6364 38.2658L-34.6641 30.1902L-33.3853 30.3441ZM-26.1223 31.0635C-23.5369 31.3747 -21.7867 32.8828 -21.3121 34.914L-22.5099 35.3762C-22.9118 33.678 -24.209 32.5065 -26.2662 32.2588C-28.8932 31.9425 -30.9465 33.3029 -31.2294 35.6519C-31.5138 38.0148 -29.8576 39.8359 -27.2723 40.1471C-25.0345 40.4165 -23.0124 39.4332 -22.7443 37.6746L-27.637 37.0856L-27.4964 35.918L-21.4223 36.6493L-22.0465 41.8339L-23.2974 41.6833L-23.0883 39.9458C-23.827 40.9285 -25.4547 41.5645 -27.4162 41.3425C-30.766 40.9392 -32.953 38.4902 -32.5915 35.4879C-32.2301 32.4856 -29.486 30.6585 -26.1223 31.0635ZM-17.6369 39.8548L-16.5602 39.1101C-15.7758 40.9108 -13.9346 41.7811 -12.1972 41.9903C-10.2234 42.2279 -8.70475 41.6775 -8.57087 40.5656C-8.42528 39.3563 -9.3765 39.0585 -12.3264 38.379C-14.8939 37.8019 -16.654 37.1952 -16.423 35.2771C-16.2138 33.5396 -14.2824 32.4889 -11.6415 32.8069C-9.32023 33.0864 -7.55256 34.2158 -6.91926 35.6316L-7.98595 36.2928C-8.54705 35.0972 -9.89169 34.2021 -11.8376 33.9678C-13.867 33.7234 -15.031 34.373 -15.1431 35.3042C-15.2703 36.3606 -14.3224 36.6862 -11.7689 37.2616C-8.68162 37.9717 -7.00325 38.5545 -7.24757 40.5839C-7.48521 42.5576 -9.66902 43.4792 -12.3655 43.1545C-14.8258 42.8583 -16.9276 41.5759 -17.6369 39.8548ZM0.196123 34.2321C3.53203 34.6337 5.73288 37.0844 5.37308 40.0728C5.01329 43.0612 2.29367 44.9195 -1.04224 44.5178C-4.37815 44.1162 -6.579 41.6655 -6.2192 38.6771C-5.85941 35.6887 -3.13979 33.8305 0.196123 34.2321ZM0.0522048 35.4275C-2.56092 35.1129 -4.58812 36.4904 -4.87094 38.8395C-5.15375 41.1885 -3.51145 43.0078 -0.898324 43.3225C1.71481 43.6371 3.7281 42.2578 4.01092 39.9088C4.29374 37.5598 2.66533 35.7421 0.0522048 35.4275ZM12.7519 35.7438C16.0878 36.1454 18.2887 38.5961 17.9289 41.5845C17.5691 44.5729 14.8495 46.4311 11.5136 46.0295C8.17766 45.6279 5.97681 43.1772 6.33661 40.1888C6.6964 37.2004 9.41602 35.3421 12.7519 35.7438ZM12.608 36.9391C9.99489 36.6245 7.96769 38.0021 7.68487 40.3511C7.40206 42.7002 9.04436 44.5195 11.6575 44.8341C14.2706 45.1487 16.2839 43.7695 16.5667 41.4205C16.8495 39.0714 15.2211 37.2538 12.608 36.9391ZM29.9231 37.9662L28.7216 47.9462L27.5401 47.8039L20.9984 38.5416L19.9926 46.8952L18.7138 46.7413L19.9154 36.7613L21.3332 36.932L27.6721 45.888L28.6444 37.8123L29.9231 37.9662ZM36.7168 42.7043C37.8843 42.8448 38.6963 43.831 38.5473 45.068C38.4001 46.2912 37.3773 47.0564 36.2097 46.9159C35.0282 46.7736 34.1885 45.7841 34.3358 44.561C34.4847 43.3239 35.5353 42.562 36.7168 42.7043ZM43.176 44.6241C43.5358 41.6357 46.2972 39.7825 49.6192 40.1825C52.2184 40.4954 53.9409 42.0001 54.4138 44.0453L53.2316 44.4952C52.8297 42.797 51.5463 41.6272 49.4891 41.3795C46.8899 41.0666 44.8071 42.4374 44.5243 44.7865C44.2415 47.1355 45.9394 48.9615 48.5386 49.2745C50.5958 49.5222 52.1201 48.6904 52.9136 47.1361L53.9553 47.8538C53.0104 49.7283 50.98 50.7811 48.3808 50.4682C45.0588 50.0682 42.8162 47.6126 43.176 44.6241ZM61.2106 41.578C64.5465 41.9797 66.7473 44.4303 66.3875 47.4187C66.0277 50.4071 63.3081 52.2654 59.9722 51.8637C56.6363 51.4621 54.4355 49.0115 54.7953 46.0231C55.1551 43.0346 57.8747 41.1764 61.2106 41.578ZM61.0667 42.7734C58.4535 42.4588 56.4263 43.8363 56.1435 46.1854C55.8607 48.5344 57.503 50.3538 60.1161 50.6684C62.7293 50.983 64.7426 49.6038 65.0254 47.2547C65.3082 44.9057 63.6798 43.088 61.0667 42.7734ZM73.8999 53.3855L72.7879 53.2516L69.5211 43.9605L68.4652 52.7312L67.1725 52.5755L68.374 42.5956L70.4451 42.8449L73.5486 51.7357L78.6876 43.8373L80.703 44.08L79.5015 54.0599L78.2088 53.9043L79.2648 45.1336L73.8999 53.3855ZM84.0695 44.4853L82.868 54.4652L81.5336 54.3046L82.7352 44.3246L84.0695 44.4853ZM96.1092 45.9348L94.9077 55.9147L93.7262 55.7725L87.1845 46.5101L86.1787 54.8638L84.8999 54.7098L86.1015 44.7299L87.5193 44.9006L93.8582 53.8565L94.8305 45.7809L96.1092 45.9348ZM103.372 46.6541C105.958 46.9654 107.708 48.4734 108.182 50.5047L106.985 50.9669C106.583 49.2686 105.285 48.0972 103.228 47.8495C100.601 47.5332 98.548 48.8935 98.2652 51.2426C97.9807 53.6055 99.6369 55.4265 102.222 55.7378C104.46 56.0072 106.482 55.0239 106.75 53.2653L101.858 52.6763L101.998 51.5087L108.072 52.24L107.448 57.4246L106.197 57.2739L106.406 55.5365C105.668 56.5192 104.04 57.1552 102.078 56.9332C98.7285 56.5299 96.5415 54.0809 96.903 51.0786C97.2645 48.0763 100.009 46.2492 103.372 46.6541ZM111.858 55.4455L112.934 54.7008C113.719 56.5015 115.56 57.3718 117.297 57.581C119.271 57.8186 120.79 57.2682 120.924 56.1562C121.069 54.947 120.118 54.6491 117.168 53.9697C114.601 53.3926 112.841 52.7859 113.072 50.8677C113.281 49.1303 115.212 48.0796 117.853 48.3976C120.174 48.677 121.942 49.8064 122.575 51.2223L121.509 51.8835C120.947 50.6879 119.603 49.7927 117.657 49.5585C115.628 49.3141 114.464 49.9636 114.351 50.8949C114.224 51.9513 115.172 52.2769 117.726 52.8523C120.813 53.5624 122.491 54.1452 122.247 56.1746C122.009 58.1483 119.826 59.0699 117.129 58.7452C114.669 58.449 112.567 57.1666 111.858 55.4455ZM129.691 49.8228C133.027 50.2244 135.227 52.6751 134.868 55.6635C134.508 58.6519 131.788 60.5101 128.452 60.1085C125.116 59.7069 122.916 57.2562 123.275 54.2678C123.635 51.2794 126.355 49.4212 129.691 49.8228ZM129.547 51.0182C126.934 50.7035 124.906 52.0811 124.624 54.4301C124.341 56.7792 125.983 58.5985 128.596 58.9131C131.209 59.2277 133.223 57.8485 133.505 55.4995C133.788 53.1504 132.16 51.3328 129.547 51.0182ZM142.246 51.3345C145.582 51.7361 147.783 54.1867 147.423 57.1752C147.064 60.1636 144.344 62.0218 141.008 61.6202C137.672 61.2185 135.471 58.7679 135.831 55.7795C136.191 52.7911 138.911 50.9328 142.246 51.3345ZM142.103 52.5298C139.489 52.2152 137.462 53.5928 137.179 55.9418C136.897 58.2908 138.539 60.1102 141.152 60.4248C143.765 60.7394 145.778 59.3602 146.061 57.0112C146.344 54.6621 144.716 52.8444 142.103 52.5298ZM159.418 53.5569L158.216 63.5369L157.035 63.3946L150.493 54.1322L149.487 62.4859L148.208 62.332L149.41 52.352L150.828 52.5227L157.167 61.4786L158.139 53.403L159.418 53.5569ZM166.211 58.295C167.379 58.4355 168.191 59.4217 168.042 60.6587C167.895 61.8819 166.872 62.6471 165.704 62.5065C164.523 62.3643 163.683 61.3748 163.83 60.1517C163.979 58.9146 165.03 58.1527 166.211 58.295ZM172.671 60.2148C173.03 57.2264 175.792 55.3732 179.114 55.7731C181.713 56.0861 183.435 57.5908 183.908 59.636L182.726 60.0859C182.324 58.3876 181.041 57.2179 178.984 56.9702C176.384 56.6572 174.302 58.0281 174.019 60.3771C173.736 62.7262 175.434 64.5522 178.033 64.8652C180.09 65.1128 181.615 64.2811 182.408 62.7268L183.45 63.4445C182.505 65.319 180.475 66.3718 177.875 66.0589C174.553 65.6589 172.311 63.2032 172.671 60.2148ZM190.705 57.1687C194.041 57.5703 196.242 60.021 195.882 63.0094C195.522 65.9978 192.803 67.8561 189.467 67.4544C186.131 67.0528 183.93 64.6022 184.29 61.6137C184.65 58.6253 187.369 56.7671 190.705 57.1687ZM190.561 58.3641C187.948 58.0495 185.921 59.427 185.638 61.7761C185.355 64.1251 186.998 65.9445 189.611 66.2591C192.224 66.5737 194.237 65.1944 194.52 62.8454C194.803 60.4964 193.174 58.6787 190.561 58.3641ZM203.394 68.9762L202.282 68.8423L199.016 59.5512L197.96 68.3218L196.667 68.1662L197.869 58.1863L199.94 58.4356L203.043 67.3263L208.182 59.428L210.198 59.6706L208.996 69.6506L207.703 69.4949L208.759 60.7243L203.394 68.9762ZM213.564 60.076L212.363 70.0559L211.028 69.8952L212.23 59.9153L213.564 60.076ZM225.604 61.5255L224.402 71.5054L223.221 71.3632L216.679 62.1008L215.673 70.4545L214.394 70.3005L215.596 60.3206L217.014 60.4913L223.353 69.4472L224.325 61.3715L225.604 61.5255ZM232.867 62.2448C235.452 62.5561 237.202 64.0641 237.677 66.0954L236.479 66.5575C236.077 64.8593 234.78 63.6879 232.723 63.4402C230.096 63.1239 228.043 64.4842 227.76 66.8333C227.475 69.1962 229.131 71.0172 231.717 71.3285C233.955 71.5979 235.977 70.6146 236.245 68.856L231.352 68.2669L231.493 67.0994L237.567 67.8307L236.943 73.0152L235.692 72.8646L235.901 71.1272C235.162 72.1099 233.534 72.7459 231.573 72.5239C228.223 72.1205 226.036 69.6716 226.398 66.6693C226.759 63.6669 229.503 61.8398 232.867 62.2448ZM241.352 71.0361L242.429 70.2915C243.213 72.0922 245.054 72.9625 246.792 73.1717C248.766 73.4093 250.284 72.8589 250.418 71.7469C250.564 70.5377 249.613 70.2398 246.663 69.5603C244.095 68.9833 242.335 68.3766 242.566 66.4584C242.775 64.721 244.707 63.6703 247.348 63.9883C249.669 64.2677 251.437 65.3971 252.07 66.813L251.003 67.4742C250.442 66.2786 249.097 65.3834 247.151 65.1491C245.122 64.9048 243.958 65.5543 243.846 66.4856C243.719 67.542 244.667 67.8676 247.22 68.443C250.307 69.1531 251.986 69.7359 251.741 71.7652C251.504 73.739 249.32 74.6606 246.624 74.3359C244.163 74.0397 242.062 72.7573 241.352 71.0361ZM259.185 65.4135C262.521 65.8151 264.722 68.2657 264.362 71.2542C264.002 74.2426 261.283 76.1008 257.947 75.6992C254.611 75.2976 252.41 72.8469 252.77 69.8585C253.13 66.8701 255.849 65.0118 259.185 65.4135ZM259.041 66.6088C256.428 66.2942 254.401 67.6718 254.118 70.0208C253.835 72.3699 255.478 74.1892 258.091 74.5038C260.704 74.8184 262.717 73.4392 263 71.0902C263.283 68.7411 261.654 66.9234 259.041 66.6088ZM271.741 66.9251C275.077 67.3268 277.278 69.7774 276.918 72.7658C276.558 75.7543 273.839 77.6125 270.503 77.2109C267.167 76.8092 264.966 74.3586 265.326 71.3702C265.685 68.3817 268.405 66.5235 271.741 66.9251ZM271.597 68.1205C268.984 67.8059 266.957 69.1835 266.674 71.5325C266.391 73.8815 268.033 75.7009 270.647 76.0155C273.26 76.3301 275.273 74.9509 275.556 72.6018C275.839 70.2528 274.21 68.4351 271.597 68.1205ZM288.912 69.1476L287.711 79.1275L286.529 78.9853L279.987 69.7229L278.982 78.0766L277.703 77.9226L278.904 67.9427L280.322 68.1134L286.661 77.0693L287.633 68.9936L288.912 69.1476ZM295.706 73.8856C296.873 74.0262 297.685 75.0123 297.536 76.2494C297.389 77.4726 296.366 78.2378 295.199 78.0972C294.017 77.955 293.178 76.9655 293.325 75.7423C293.474 74.5053 294.524 73.7434 295.706 73.8856ZM302.165 75.8055C302.525 72.8171 305.286 70.9639 308.608 71.3638C311.207 71.6768 312.93 73.1814 313.403 75.2266L312.221 75.6765C311.819 73.9783 310.535 72.8085 308.478 72.5609C305.879 72.2479 303.796 73.6188 303.513 75.9678C303.231 78.3169 304.928 80.1429 307.528 80.4559C309.585 80.7035 311.109 79.8718 311.903 78.3175L312.944 79.0351C312 80.9096 309.969 81.9625 307.37 81.6495C304.048 81.2496 301.805 78.7939 302.165 75.8055ZM320.2 72.7594C323.536 73.161 325.736 75.6117 325.377 78.6001C325.017 81.5885 322.297 83.4467 318.961 83.0451C315.625 82.6435 313.425 80.1928 313.784 77.2044C314.144 74.216 316.864 72.3578 320.2 72.7594ZM320.056 73.9548C317.443 73.6401 315.415 75.0177 315.133 77.3667C314.85 79.7158 316.492 81.5351 319.105 81.8497C321.718 82.1644 323.732 80.7851 324.014 78.4361C324.297 76.0871 322.669 74.2694 320.056 73.9548ZM332.889 84.5668L331.777 84.433L328.51 75.1419L327.454 83.9125L326.162 83.7569L327.363 73.777L329.434 74.0263L332.538 82.917L337.677 75.0187L339.692 75.2613L338.491 85.2413L337.198 85.0856L338.254 76.315L332.889 84.5668ZM343.059 75.6666L341.857 85.6466L340.523 85.4859L341.724 75.506L343.059 75.6666ZM355.098 77.1162L353.897 87.0961L352.715 86.9539L346.174 77.6915L345.168 86.0452L343.889 85.8912L345.091 75.9113L346.508 76.082L352.847 85.0379L353.82 76.9622L355.098 77.1162ZM362.361 77.8355C364.947 78.1468 366.697 79.6548 367.172 81.6861L365.974 82.1482C365.572 80.45 364.275 79.2785 362.217 79.0309C359.59 78.7146 357.537 80.0749 357.254 82.4239C356.97 84.7869 358.626 86.6079 361.211 86.9192C363.449 87.1886 365.471 86.2052 365.739 84.4467L360.847 83.8576L360.987 82.6901L367.061 83.4214L366.437 88.6059L365.186 88.4553L365.395 86.7179C364.657 87.7006 363.029 88.3366 361.067 88.1145C357.718 87.7112 355.531 85.2623 355.892 82.2599C356.254 79.2576 358.998 77.4305 362.361 77.8355ZM370.847 86.6268L371.923 85.8822C372.708 87.6829 374.549 88.5532 376.286 88.7624C378.26 89 379.779 88.4496 379.913 87.3376C380.058 86.1283 379.107 85.8305 376.157 85.151C373.59 84.574 371.83 83.9673 372.061 82.0491C372.27 80.3116 374.201 79.261 376.842 79.5789C379.163 79.8584 380.931 80.9878 381.564 82.4037L380.498 83.0649C379.937 81.8693 378.592 80.9741 376.646 80.7398C374.617 80.4955 373.453 81.145 373.341 82.0763C373.213 83.1327 374.161 83.4583 376.715 84.0337C379.802 84.7438 381.48 85.3266 381.236 87.3559C380.998 89.3297 378.815 90.2512 376.118 89.9266C373.658 89.6304 371.556 88.348 370.847 86.6268ZM388.68 81.0042C392.016 81.4058 394.216 83.8564 393.857 86.8448C393.497 89.8333 390.777 91.6915 387.441 91.2899C384.105 90.8882 381.905 88.4376 382.264 85.4492C382.624 82.4608 385.344 80.6025 388.68 81.0042ZM388.536 82.1995C385.923 81.8849 383.895 83.2625 383.613 85.6115C383.33 87.9605 384.972 89.7799 387.585 90.0945C390.198 90.4091 392.212 89.0299 392.495 86.6808C392.777 84.3318 391.149 82.5141 388.536 82.1995ZM401.236 82.5158C404.571 82.9175 406.772 85.3681 406.413 88.3565C406.053 91.3449 403.333 93.2032 399.997 92.8015C396.661 92.3999 394.46 89.9493 394.82 86.9609C395.18 83.9724 397.9 82.1142 401.236 82.5158ZM401.092 83.7112C398.478 83.3966 396.451 84.7741 396.168 87.1232C395.886 89.4722 397.528 91.2916 400.141 91.6062C402.754 91.9208 404.768 90.5416 405.05 88.1925C405.333 85.8435 403.705 84.0258 401.092 83.7112ZM418.407 84.7383L417.205 94.7182L416.024 94.576L409.482 85.3136L408.476 93.6673L407.197 93.5133L408.399 83.5334L409.817 83.7041L416.156 92.66L417.128 84.5843L418.407 84.7383ZM425.2 89.4763C426.368 89.6169 427.18 90.603 427.031 91.8401C426.884 93.0633 425.861 93.8285 424.693 93.6879C423.512 93.5457 422.672 92.5562 422.819 91.333C422.968 90.096 424.019 89.3341 425.2 89.4763Z" fill="white" style="fill:white;fill:white;fill-opacity:1;"></path></g><defs><clipPath id="clip0_2264_11640"><rect width="342" height="119" fill="white" style="fill:white;fill:white;fill-opacity:1;">'),die=(i={})=>(()=>{const e=dt(uie);return ln(e,i,!0,!0),Cn(),e})(),aE=i=>{const[e,t]=Gr(i,["title","opacity","slug","isEager","tags","media","isComingSoon","excerpt","shouldBlendDifference","isList","fixedAspectRatio","shouldDisableWebGL","isHome","hideTags"]);let n=null;const r=Gi(()=>n),s=pe(()=>dn().width>pi.MD?qi((Vn()-r().y+dn().height*1.4)/(dn().height*2-dn().height),0,1):1);return F(N0,{get type(){return e.isComingSoon?fi.ComingSoon:fi.CaseStudy},children:o=>F($.Generic,$n({get as(){return e.isComingSoon?"div":Ys},get href(){return`/work/${e.slug}`},get css(){return[{...e.isList&&{alignItems:"flex-start",gap:"32rem"},...e.isList&&op,...e.isComingSoon?{}:{"&:hover":{"ul li":{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(0 0 0 / var(--tw-text-opacity))"},img:{"--tw-scale-x":"1.05","--tw-scale-y":"1.05",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"},h3:{"&::after":{content:"var(--tw-content)","--tw-scale-x":"1",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"}}}}},{"@media (max-width: 767px)":{"--tw-scale-x":"1","--tw-scale-y":"1",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))"}}]},get style(){return{transform:e.isHome&&`scale(${s()})`}},ref(a){const l=n;typeof l=="function"?l(a):n=a}},o,t,{get children(){return[F($.Generic,{get css(){return[{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},{...e.isList&&{gridColumn:"span 8 / span 8"}}]},as:"div",get children(){return[F($.Generic,{css:{width:"100%",overflow:"hidden"},as:"div",get children(){return F($.Generic,$n({get sizes(){return{[-1]:"50vw",[pi.MD]:"100vw"}},get isEager(){return e.isEager},get css(){return[{width:"100%",objectFit:"cover",transitionProperty:"transform !important",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1) !important",transitionDuration:"500ms !important","@media (max-width: 767px)":{aspectRatio:"342 / 272"}},{...e.fixedAspectRatio&&{aspectRatio:"640 / 542"},...e.isList&&{aspectRatio:"864 / 488"},...e.isComingSoon&&{opacity:"0.3 !important"}}]},as:kU},()=>e.media,{get alt(){return e.title},get style(){return{"aspect-ratio":e.isHome?"16 / 9":void 0,"object-fit":"cover","object-position":"center"}}}))}}),pe(()=>pe(()=>!!e.isComingSoon)()&&F($.Generic,{css:{position:"absolute",display:"block",height:"auto",width:"100%"},as:die}))]}}),F($.Generic,{get css(){return[{gridColumn:"span 4 / span 4",display:"flex",flexDirection:"column"},{...e.shouldBlendDifference&&{mixBlendMode:"difference"}}]},as:"div",get children(){return[F($.Generic,{get css(){return[{marginBottom:"8rem",marginTop:"16rem",display:"flex",justifyContent:"space-between","@media (max-width: 767px)":{flexDirection:"column"}},ht.sohne.body1,{...e.isList&&ht.sohne.h3,...e.isList&&{order:"1",marginTop:"0px",flexDirection:"column",gap:"16rem"}}]},as:"div",get children(){return[F($.Generic,{get css(){return[{display:"flex",alignItems:"center",justifyContent:"space-between","@media (max-width: 767px)":{order:"1",marginTop:"16rem"}},{...e.isList&&{order:"1"}}]},as:"div",get children(){return F($.Generic,{get css(){return[{position:"relative",fontFamily:"Sohne Breit, sans-serif",fontSize:"24rem",lineHeight:"1.4","&::after":{content:"var(--tw-content)",position:"absolute",bottom:"0px",display:"block",width:"100%",transformOrigin:"left","--tw-scale-x":"0",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",borderBottomWidth:"1px",transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"}},{...e.isList&&{marginRight:"auto"},...e.isList&&ht.breit.h5}]},as:"h3",get children(){return e.title}})}}),pe(()=>pe(()=>!!e.tags)()&&F($.Generic,{get css(){return[ht.sohne.body3,{display:"flex",flexShrink:"0",gap:"8rem"}]},as:"ul",get style(){return{display:e.hideTags?"none":void 0}},get children(){return F(Nn,{get each(){return e.tags},children:a=>F($.Generic,{css:[cx,{transitionProperty:"color, background-color, border-color, text-decoration-color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"}],as:"li",children:a})})}}))]}}),pe(()=>pe(()=>!!e.excerpt)()&&F($.Generic,{get css(){return[ht.sohne.body3,{...e.isList&&{marginTop:"24rem"}},{order:"1",letterSpacing:"-0.03em","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"}]},as:"p",get children(){return e.excerpt}}))]}})]}}))})},fie=i=>F($.Generic,{css:{marginLeft:"auto",marginRight:"auto",width:"100%",maxWidth:"914rem",textAlign:"center"},as:"h2",get children(){return F(Nn,{get each(){return i.parts},children:(e,t)=>t()===1?F($.Generic,{css:{position:"relative",marginBottom:"8rem",display:"block",overflow:"hidden",paddingLeft:"16rem",paddingRight:"16rem",paddingTop:"24rem",paddingBottom:"24rem"},as:"span",get children(){return[F($.Generic,{css:{position:"absolute",inset:"0px",height:"100%",width:"100%",willChange:"transform"},as:"div",get style(){return{"background-color":e.backgroundColor,transform:`translate3d(${qi(i.progress+95,-100,0)}%, 0, 0)`}}}),F(Nn,{get each(){return e.text.split("")},children:(n,r)=>F($.Generic,{css:{position:"relative",zIndex:"1"},as:"span",get style(){return{color:e.textColor,opacity:qi(i.progress+(120+-r()),0,1)}},children:n})})]}}):F($.Generic,{get css(){return[{marginBottom:"8rem",display:"block"},{backgroundColor:e.backgroundColor,color:e.textColor}]},as:"span",get children(){return e.text}})})}}),gie=i=>F($.Generic,{isEager:!0,get slug(){return i.project.slug},get excerpt(){return i.project.excerpt},get isComingSoon(){return i.project.isComingSoon},get css(){return[{"margin-top":i.offset?ro()?"56rem":"250rem":"0",transform:i.offset?`translate3d(0,${qi(i.offsetTop,0,250)}rem, 0)`:"0"},{gridColumn:"span 6 / span 6",willChange:"transform","@media (max-width: 767px)":{gridColumn:"span 12 / span 12"}}]},as:aE,shouldBlendDifference:!0,get title(){return i.project.title},get media(){return i.project.thumbnail},hideTags:!0}),pie=i=>F($.Generic,{css:{position:"relative",zIndex:"1",marginTop:"120rem",display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",columnGap:"30rem",paddingBottom:"250rem","@media (max-width: 767px)":{marginTop:"48rem",paddingBottom:"0px"}},as:"div",get children(){return F(Nn,{get each(){return i.projects},children:(e,t)=>F(gie,{project:e,get offset(){return t()===1},get offsetTop(){return i.offsetTop}})})}}),mie=Iu(.32,0,.67,0),Wre=i=>{let e=null,t=Gi(()=>e),n=Gi(()=>e.parentElement);const r=Sn(!1);mt(()=>{Vn()>t().y-dn().height/1.5&&r(!0)});const s=pe(()=>qi((Vn()-t().y+dn().height)/dn().height,0,1)),o=pe(()=>qi(Vn()-n().y,0,n().height)/3);return tr(()=>{t=Gi(()=>e),n=Gi(()=>e.parentElement)}),F($.Generic,{css:{position:"relative",boxSizing:"border-box","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))",paddingLeft:"64rem",paddingRight:"64rem",paddingBottom:"100rem",paddingTop:"200rem","@media (max-width: 767px)":{paddingLeft:"24rem",paddingRight:"24rem",paddingBottom:"32rem",paddingTop:"160rem"}},as:"section",get children(){return[F($.Generic,{ref(a){const l=e;typeof l=="function"?l(a):e=a},get style(){return{transform:`translateY(${-300+mie(s())*300-o()}px)`}},get css(){return[{position:"sticky",top:"0px",marginLeft:"auto",marginRight:"auto",marginBottom:"-450rem",display:"flex",height:"100lvh",width:"calc(100vw - 128rem)",alignItems:"center",justifyContent:"center","@media (max-width: 767px)":{marginBottom:"-420rem",width:"calc(100vw - 72rem)"}},ht.breit.h4,ht.m.breit.h2]},as:"div",get children(){return F(fie,{get parts(){return i.parts},get progress(){return(Vn()-t().y)*.2}})}}),F(pie,{get projects(){return i.projects},get offsetTop(){return pe(()=>!!ro())()?0:(Vn()-t().y)*.3}})]}})},Cie=()=>Es(()=>Ms({"*[_type == 'ai'][0]":{seo:po,heroSection:{header:!0,subheader:!0,text:!0,media:st(),button:wr},partnersSection:{logos:[st()]},offeringsSection:{offerings:!0,aiBenefits:[{title:!0,media:st(),description:!0,backgroundColor:!0,textColor:!0}]},industryLeaders:{header:!0,subHeader:!0,button:wr,video:st(),images:[st()],mediaLink:wr},projectsSection:{heading:[{text:!0,backgroundColor:!0,textColor:!0}],'"projects": projects[]->':{description:!0,excerpt:!0,isComingSoon:!0,logo:st(),'"slug": slug.current':!0,thumbnail:st(),title:!0}},blobbySection:{cursors:[{name:!0,text:!0,color:!0,textColor:!0}]},'"articles": articles[]->':{thumbnail:st(),'"slug": slug.current':!0,'"categories": categories[]->label':!0,title:!0,excerpt:!0},scheduleACallSection:{textContent:!0,button:wr}}})),Iie=()=>Es(()=>Ms({"*[_type == 'contact'][0]":{seo:po,heroSection:{title:!0,subtitle:!0,copy:!0},contactFormSection:{title:!0,contactForm:{title:!0,topics:!0}},hearUsTalkSection:{title:!0,copy:!0},faqSection:{title:!0,copy:!0,questions:[{question:!0,answer:!0}]}}})),Aie=({params:i})=>Es(()=>Ms({"*[_type == 'article' && slug.current == $slug][0]":{'"category": categories[0]->label':!0,publishedAt:!0,body:[{"...":!0,'_type == "media" =>':{image:st()}}],thumbnailCaption:!0,thumbnail:st(),title:!0,eta:!0,'"author": author->':{fullName:!0,role:!0,profilePicture:st()},'"related": *[_type == "article" && slug.current != ^.slug.current][0..1] | order(publishedAt desc)':{thumbnail:st(),'"slug": slug.current':!0,title:!0,excerpt:!0}}},{slug:i.slug})),yie=()=>Es(()=>Ms({"*[_type == 'blog'][0]":{seo:po,'"articles": *[_type == "article"] | order(publishedAt desc)':{title:!0,'"slug": slug.current':!0,thumbnail:st(),publishedAt:!0,"author->":{fullName:!0,profilePicture:st()},excerpt:!0,'"categories": categories[]->label':!0}}})),_ie=i=>{const e="Work",[t,n]=Gr(i,["shouldShow"]);return F($.Generic,$n({get css(){return[ht.breit.h1,ht.m.breit.h0,{userSelect:"none",overflow:"hidden",textTransform:"uppercase"}]},as:"h2"},n,{get children(){return F(Nn,{get each(){return e.split("")},children:(r,s)=>F($.Generic,{css:{display:"inline-block","--tw-translate-y":"100%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",transitionProperty:"transform",transitionTimingFunction:"cubic-bezier(0.25, 0, 0.1, 1)",transitionDuration:"1s"},as:"span",get style(){return{...t.shouldShow&&{transform:"translateY(0)"},"transition-delay":`${s()*.04}s`}},children:r})})}}))},vie=Iu(.32,0,.67,0),Hre=()=>{let i=null,e=null;const t=Gi(()=>i),n=Gi(()=>i.parentElement),r=Sn(!1);mt(()=>{Vn()>t().y-dn().height/1.5&&r(!0)});const s=pe(()=>qi((Vn()-t().y+dn().height)/dn().height,0,1)),o=pe(()=>qi(Vn()-n().y,0,n().height)/7);return F($.Generic,{ref(a){const l=i;typeof l=="function"?l(a):i=a},get style(){return{transform:`translateY(${-300+vie(s())*300-o()}px)`}},css:[{position:"sticky",top:"0px",marginBottom:"-200rem",display:"flex",height:"100vh",alignItems:"center",justifyContent:"center",willChange:"transform","@media (max-width: 767px)":{position:"static",marginBottom:"0px",height:"auto",transform:"none !important",paddingBottom:"64rem",paddingTop:"0rem"}},{"&":{height:"100lvh","@media (max-width: 767px)":{height:"auto"}}}],as:"div",get children(){return F(_ie,{ref(a){const l=e;typeof l=="function"?l(a):e=a},get shouldShow(){return r()}})}})},bie=Iu(.6,0,1,1),zre=()=>{let i=null,e=null;const t=Gi(()=>e),n=_0(void 0,t),r=pe(()=>qi((hh()-t().y+dn().height)/(dn().height*1.5),0,1));return tr(()=>{try{i=new q3({resizeTo:e,backgroundAlpha:0,antialias:!0,view:e,autoDensity:!0,autoStart:!1,resolution:window.devicePixelRatio})}catch(a){if(a.message==="Unable to auto-detect a suitable renderer."){console.error(a);return}}const s=new h0;s.beginFill(0),s.drawRect(0,0,i.screen.width,i.screen.height);const o=new h0;o.blendMode=ct.SRC_OUT,i.stage.addChild(s),i.stage.addChild(o),i.ticker.add(()=>{let{width:a}=i.screen,{height:l}=i.screen;s.clear(),s.beginFill(0),s.drawRect(0,0,a,l),o.clear(),o.beginFill(16777215),o.drawCircle(a/2,l/2,.5*Math.sqrt(a*a+l*l)*bie(r()))}),i.render(),an(()=>{i.destroy()})}),mt(()=>{i?.[n()||r()<1?"start":"stop"]()}),F($.Generic,{ref(s){const o=e;typeof o=="function"?o(s):e=s},css:[{pointerEvents:"none",position:"sticky",top:"0px",zIndex:"11",marginBottom:"-100vh",height:"100vh !important",width:"100% !important"},{"&":{height:"100lvh !important"}}],as:"canvas",get style(){return{visibility:r()===1?"hidden":void 0}}})};function xie(){return Es(()=>Ms({"*[_type == 'home'][0]":{seo:po,'"reel": *[_type == "global"][0].reel.asset->url':!0,introSection:{title:!0,greetings:!0},creatingFutureSection:{title:!0,copy:!0,button:wr,sections:[{title:!0,copy:!0}],media:st()},workSection:{"featuredCaseStudies[]->":{isComingSoon:!0,title:!0,excerpt:!0,'"slug": slug.current':!0,tags:!0,thumbnail:st()},copy:!0,button:wr},whoWeAreSection:{title:!0,copy:!0,button:wr,images:[st()]},clientsSection:{title:!0,copy:!0,logos:[{...st(),mobileWidth:!0,displayOnMobile:!0}]},awardsSection:{title:!0,copy:!0,awards:[{year:!0,issuer:!0,award:!0,image:st()}]},'"featuredArticles": *[_type == "article"] | order(publishedAt desc)':{thumbnail:st(),'"slug": slug.current':!0,'"categories": categories[]->label':!0,title:!0,excerpt:!0}}}))}const wie=({params:i})=>Es(()=>Ms({"*[_type == 'legal' && slug.current == $slug][0]":{seo:po,title:!0,content:!0}},{slug:i.slug})),Sie=()=>Es(()=>Ms({"*[_type == 'servicesV2'][0]":{seo:po,servicesSection:{servicesTop:{'"reel": *[_type == "servicesV2"][0].servicesSection.servicesTop.reel.asset->url':!0,ourServices:[{service:!0}],description:!0},'"recentWork": *[_type == "servicesV2"][0].servicesSection.recentWork->':{title:!0,description:!0,excerpt:!0,'"slug": slug.current':!0,thumbnail:st()}},howWeWorkSection:{title:!0,button:wr,image:st(),items:[{title:!0,description:!0}]},AISection:{button:wr,description:!0,title:!0},successStoriesSection:[{backgroundImage:st(),mobileBackgroundImage:st(),logo:st(),description:!0,stats:[{stat:!0,unit:!0,text:!0}],companyRep:{name:!0,title:!0,image:st()}}],projectsSection:{heading:[{text:!0,backgroundColor:!0,textColor:!0}],'"projects": *[_type == "servicesV2"][0].projectsSection.projects[]->':{title:!0,description:!0,excerpt:!0,'"slug": slug.current':!0,thumbnail:st()}},"...*[_type == 'home'][0]":{clientsSection:{title:!0,copy:!0,logos:[{...st(),mobileWidth:!0,displayOnMobile:!0}]}},discoverySection:{header:!0,bubbleImages:[st()],button:wr},milestonesSection:{header:!0,milestones:[{quantity:!0,title:!0,description:!0}]},'"featuredArticles": *[_type == "article"] | order(publishedAt desc)':{thumbnail:st(),'"slug": slug.current':!0,'"categories": categories[]->label':!0,title:!0,excerpt:!0},'"projects": *[_type == "project"] | order(orderRank asc)':{description:!0,excerpt:!0,isComingSoon:!0,logo:st(),'"slug": slug.current':!0,thumbnail:st(),title:!0}}}));var Tie=`precision mediump float;

uniform mat4 projectionMatrix;  
uniform mat4 viewMatrix;
uniform mat4 modelMatrix;
uniform float uMultiplier;      
uniform vec2 uHoveredUV;        
uniform float uHoverRadius;     

attribute vec3 position;        
attribute vec2 uv;              

varying vec2 vUv;               
varying vec2 vHoveredUV;        

void main() {
    
    vec4 modelPosition = modelMatrix * vec4(position, 1.0);

    
    modelPosition.z += (modelPosition.x * modelPosition.x) * uMultiplier;
    modelPosition.z += (modelPosition.y * modelPosition.y) * uMultiplier;
    
    
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectedPosition = projectionMatrix * viewPosition;
    
    
    gl_Position = projectedPosition;

    
    vUv = uv;
}`,Eie=`precision mediump float;

uniform sampler2D uTexture;

varying vec2 vUv;
void main() {
    vec2 uv = vUv;

    
    vec4 textureColor = texture2D(uTexture, uv);

    
    gl_FragColor = textureColor;
}`;const Mie=wt("<p>Vault"),Lie=i=>{const e=JSON.parse(i?.item?.userData?.data);let t=null,n=null,r=null;const s=()=>{const a=()=>{i.setModalOpen(!1),i.setSelectedItem(null),document.body.style.cursor="pointer",t.removeEventListener("animationend",a)};t.addEventListener("animationend",a),t.classList.remove("animate-slideIn"),t.classList.add("animate-slideOut")};tr(()=>{document.body.style.cursor="auto";const a=new URL(window.location.href);a.searchParams.set("project",encodeURI(e.title)),window.history.pushState({},"",a),an(()=>{const l=new URL(window.location.href);l.searchParams.delete("project"),window.history.pushState({},"",l)}),n.classList.add("animate-fadeIn"),t.classList.add("animate-slideIn")});const o=Sn(!0);return F($.Generic,{ref(a){const l=n;typeof l=="function"?l(a):n=a},css:{position:"fixed",left:"0px",top:"0px",zIndex:"1000",height:"100%",width:"100%","--tw-bg-opacity":"0.5",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))",opacity:"0"},as:"main",style:{"backdrop-filter":"blur(7.5px)","-webkit-backdrop-filter":"blur(7.5px)"},get children(){return F($.Generic,{ref(a){const l=t;typeof l=="function"?l(a):t=a},class:"hide-scrollbars",css:{display:"flex",height:"100%",width:"100%",maxWidth:"1036rem","--tw-translate-x":"-100%",transform:"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))",flexDirection:"column",gap:"64rem",overflowY:"scroll","--tw-bg-opacity":"1",backgroundColor:"rgb(13 13 13 / var(--tw-bg-opacity))",padding:"64rem","@media (max-width: 767px)":{gap:"24rem",padding:"24rem"}},as:"div",get children(){return[F($.Generic,{css:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},as:"div",get children(){return[dt(Mie),F($.Generic,{css:{margin:"-16rem",cursor:"pointer",padding:"16rem","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"},as:"p",onClick:s,children:"Close"})]}}),F($.Generic,{get css(){return[ht.sohne.body3,{display:"flex",flexShrink:"0",gap:"8rem"}]},as:"ul",get children(){return F(Nn,{get each(){return e?.tags},children:a=>F($.Generic,{css:[cx,{transitionProperty:"color, background-color, border-color, text-decoration-color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"}],as:"li",get children(){return a.label}})})}}),F($.Generic,{get css(){return[ht.breit.h4,ht.m.breit.h4]},as:"h1",get children(){return e?.title}}),F($.Generic,{get css(){return[ht.sohne.body4,{"--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"}]},as:"p",get children(){return e?.description}}),F($.Generic,{get css(){return[ht.sohne.body3,{display:"flex",flexShrink:"0",flexDirection:"column",gap:"64rem","@media (max-width: 767px)":{gap:"24rem"}}]},as:"ul",get children(){return F(Nn,{get each(){return e?.blocks},children:a=>a?.images&&F($.Generic,{css:{width:"100%"},as:"li",get children(){return pe(()=>a?.images[0]?.type==="image")()?F($.Generic,{css:{width:"100%"},as:"img",get src(){return`${a?.images[0]?.src}?fm=webp`},get alt(){return e?.title}}):F($.Generic,{css:{position:"relative",zIndex:"10",height:"100%",width:"100%"},as:"div",get children(){return[F($.Generic,{ref(l){const c=r;typeof c=="function"?c(l):r=l},get src(){return a?.images[0]?.video?.src},controls:!1,autoplay:!0,get muted(){return o()},playsinline:!0,loop:!0,css:{height:"100%",width:"100%",objectFit:"cover","@media (max-width: 767px)":{position:"static"}},as:"video"}),F($.Generic,{css:{position:"absolute",bottom:"44rem",right:"44rem",display:"flex",height:"72rem",width:"72rem",alignItems:"center",justifyContent:"center",borderRadius:"9999px","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))","@media (max-width: 767px)":{bottom:"16rem",right:"16rem",height:"32rem",width:"32rem"}},as:"button",onClick:()=>{r.muted=!o(),o(!o())},get children(){return pe(()=>!!o())()?F($.Generic,{css:{height:"auto","@media (max-width: 767px)":{width:"12rem"}},as:sE}):F($.Generic,{css:{marginLeft:"1.5rem",height:"auto","@media (max-width: 767px)":{marginLeft:"0px",width:"11rem"}},as:oE})}})]}})}})})}})]}})}})},Rie=wt("<div>"),Bie=wt("<canvas>");let Dn={width:1.4,height:1.4,spacingX:1.5,spacingY:1.5,curveMultiplier:-.01,minWidth:1.2,minHeight:1.2};const Pie=(i,e,t,n,r)=>{const s=window.innerWidth>768?0:.55,o=(window.innerWidth>768,0),a=Math.floor(i/e),c=(i%e-(e-1)/2)*n+s,h=((t-1)/2-a)*r+o;return[c,h,0]},Gie=(i,e)=>{let t;return(...n)=>{clearTimeout(t),t=setTimeout(()=>i.apply(globalThis,n),e)}},nd=new Pt,Ia={x:0,y:0},Li={x:0,y:0},E9=.95,Die=1e-4,Fie=new aS,xl={current:!1},Aa=new Pt;let[M9,L9]=[0,0];const Nie=5;let a1=!1,R9,l1=!1;const B9=.3;let Ps,ds,wl,C2;const Yre=i=>{const[e,t]=tn(null),[n,r]=tn(!1);let s,o;const a=()=>{Ps=new f3,ds=new Ai(65,window.innerWidth/window.innerHeight,.1,5),ds.position.set(0,0,-1),wl=new b3({canvas:o}),wl.setPixelRatio(Math.min(window.devicePixelRatio,2)),wl.setSize(window.innerWidth,window.innerHeight),C2=new lS;const E=new oS(16777215,4.5),L=new sS(16777215,1);L.position.set(10,10,10),Ps.add(E,L),u()},l=()=>{const E=Ps.getObjectByName("meshGroup");E&&(E.children.forEach(L=>{L instanceof jn&&(L.geometry&&L.geometry.dispose(),L.material&&(Array.isArray(L.material)?L.material.forEach(G=>{G.dispose(),G.uniforms?.uTexture?.value instanceof Si&&G.uniforms.uTexture.value.dispose()}):(L.material.dispose(),L.material.uniforms?.uTexture?.value instanceof Si&&L.material.uniforms.uTexture.value.dispose()))),E.remove(L)}),Ps.remove(E),wl.info.reset())},c=()=>{const E=new rS;let L=Ps.getObjectByName("meshGroup");L?l():(L=new Kr,L.name="meshGroup",Ps.add(L));const{itemsPerRow:G,totalRows:Z}=i,U=G*Z,V=i.items;let z=[...V];for(;z.length<U;)z.push(...V);z=z.slice(0,U);const le=Array(Z).fill(null).map(()=>Array(G).fill(null)),j=(Ae,xe,J)=>{const oe=[[0,-1],[0,1],[-1,0],[1,0],[-1,-1],[-1,1],[1,-1],[1,1]];for(const[fe,ae]of oe){const Ce=Ae+fe,Je=xe+ae;if(Ce>=0&&Ce<Z&&Je>=0&&Je<G){const Se=le[Ce][Je];if(Se&&Se.id===J.id)return!1}}return!0};let re=0;for(let Ae=0;Ae<Z;Ae++)for(let xe=0;xe<G;xe++){const J=z[re];let oe=0;for(;!j(Ae,xe,J)&&oe<z.length;)re=(re+1)%z.length,oe++;le[Ae][xe]=z[re],re=(re+1)%z.length}le.flat().forEach((Ae,xe)=>{const J=E.load(`${Ae.thumbnail?.src}?fm=webp`??""),oe=new yu(Dn.width,Dn.height,1,1),fe=new LV({vertexShader:Tie,fragmentShader:Eie,uniforms:{uTexture:{value:J},uMultiplier:{value:Dn.curveMultiplier}}}),ae=new jn(oe,fe);ae.scaleTarget=1;const Ce=Pie(xe,G,Z,Dn.spacingX,Dn.spacingY);ae.position.set(Ce[0],Ce[1],Ce[2]),ae.userData={data:JSON.stringify(Ae)},L.add(ae)})};let h=null;const u=()=>{const E=Fie.getDelta();h=requestAnimationFrame(u),Li.x*=E9,Li.y*=E9,Math.abs(Li.x)<1e-4&&(Li.x=0),Math.abs(Li.y)<1e-4&&(Li.y=0),Ia.x+=Li.x,Ia.y+=Li.y+Die;const L=Ps.getObjectByName("meshGroup");L&&(L.children.forEach(G=>{d(G);const Z=Math.max(Dn.minWidth/Dn.width,1-Math.abs(Li.y)*B9),U=Math.max(Dn.minHeight/Dn.height,1-Math.abs(Li.x)*B9);G.scale.set(Z*Dn.width/Dn.width,U*Dn.height/Dn.height,1)}),L.position.set(Ia.x,Ia.y,0)),i.lottieAnimationComplete&&!l1&&(l1=!0),l1&&g(E),wl.render(Ps,ds)},d=E=>{const L=i.itemsPerRow*Dn.spacingX/2+Dn.width/2,G=i.totalRows*Dn.spacingY/2+Dn.height/2;E.position.x+Ia.x>L&&(E.position.x-=i.itemsPerRow*Dn.spacingX),E.position.x+Ia.x<-L&&(E.position.x+=i.itemsPerRow*Dn.spacingX),E.position.y+Ia.y>G&&(E.position.y-=i.totalRows*Dn.spacingY),E.position.y+Ia.y<-G&&(E.position.y+=i.totalRows*Dn.spacingY)},f=()=>{if(n())return;const E=Ps.getObjectByName("meshGroup");C2.setFromCamera(nd,ds);const L=C2.intersectObjects(E.children,!1);let G=!1;if(L.length>0){const Z=L[0].object;e()!==Z&&t(Z),G=!0}!G&&e()!==null&&t(null)},g=E=>{const Z=2.7-ds.position.z;Z>0?(ds.position.z+=E*(Z*2),ds.lookAt(0,0,0)):Z<=0&&(l1=!1,document.body.style.cursor="pointer",ds.position.z=2.7,ds.lookAt(0,0,0))},p=Gie(()=>{const E=window.innerWidth;Dn={width:E>768?1.4:1,height:E>768?1.4:1,spacingX:E>768?1.5:1.1,spacingY:E>768?1.5:1.1,curveMultiplier:E>768?-.01:0,minWidth:E>768?1.2:1,minHeight:E>768?1.2:1},ds.aspect=window.innerWidth/window.innerHeight,ds.updateProjectionMatrix(),wl.setSize(window.innerWidth,window.innerHeight),c()},300),m=()=>{l(),p()},C=E=>{if(!a1&&(E.preventDefault(),nd.x=E.clientX/window.innerWidth*2-1,nd.y=-(E.clientY/window.innerHeight)*2+1,xl.current)){const L=ql.clamp((E.clientX-Aa.x)*5e-4,-1,1),G=ql.clamp((E.clientY-Aa.y)*-5e-4,-1,1);Li.x+=L,Li.y+=G,Aa.set(E.clientX,E.clientY)}},A=E=>{E.preventDefault(),xl.current=!0,Aa.set(E.clientX,E.clientY)},I=()=>{xl.current=!1},y=E=>{E.preventDefault(),E.touches.length>0&&(xl.current=!0,Aa.set(E.touches[0].clientX,E.touches[0].clientY),nd.x=E.touches[0].clientX/window.innerWidth*2-1,nd.y=-(E.touches[0].clientY/window.innerHeight)*2+1)},x=E=>{if(E.preventDefault(),xl.current&&E.touches.length>0){const L=(E.touches[0].clientX-Aa.x)*.001,G=(E.touches[0].clientY-Aa.y)*-.001;Li.x+=L,Li.y+=G,Aa.set(E.touches[0].clientX,E.touches[0].clientY)}},T=()=>{xl.current=!1},S=()=>{a1||(a1=!0,t(null))},M=()=>{a1=!1},_=E=>{S(),E.preventDefault(),Li.x+=ql.clamp(-E.deltaX*25e-5,-1,1),Li.y+=ql.clamp(E.deltaY*25e-5,-1,1),clearTimeout(R9),R9=setTimeout(M,150)},v=()=>{document.body.style.cursor="pointer"},B=()=>{document.body.style.cursor="auto",xl.current=!1,t(null)};return tr(()=>{a(),m(),s?.addEventListener("touchstart",y,{passive:!1}),s?.addEventListener("touchmove",x,{passive:!1}),s?.addEventListener("wheel",_,{passive:!1}),window.addEventListener("resize",m),an(()=>{h!==null&&(cancelAnimationFrame(h),h=null),document.body.style.cursor="auto",window.removeEventListener("resize",m),s?.removeEventListener("wheel",_,{passive:!1}),wl.dispose(),Ps.clear()})}),[(()=>{const E=dt(Rie);E.$$touchend=T,E.$$mousemove=C,E.$$mousedown=A,E.$$mouseup=I,E.$$pointerup=G=>{const Z=G.clientX,U=G.clientY;Math.sqrt((Z-M9)**2+(U-L9)**2)<=Nie&&(f(),e()&&r(!0))},E.$$pointerdown=G=>{t(null),M9=G.clientX,L9=G.clientY},E.addEventListener("pointerleave",B),E.addEventListener("pointerenter",v);const L=s;return typeof L=="function"?x2(L,E):s=E,E.style.setProperty("width","100%"),E.style.setProperty("height","100%"),E.style.setProperty("position","fixed"),E.style.setProperty("top","0"),E.style.setProperty("left","0"),Un(E,F(N0,{get type(){return fi.Project},children:G=>(()=>{const Z=dt(Bie),U=o;return typeof U=="function"?x2(U,Z):o=Z,Z.style.setProperty("width","100%"),Z.style.setProperty("height","100%"),ln(Z,G,!1,!1),Cn(),Z})()})),Cn(),E})(),pe((()=>{const E=pe(()=>!!n());return()=>E()&&F(Lie,{get item(){return e()},setModalOpen:r,setSelectedItem:t})})())]};yf(["pointerdown","pointerup","mouseup","mousedown","mousemove","touchend"]);const kie=()=>Es(()=>Ms({"*[_type == 'lab3Page'][0]":{seo:po,'"lab3": *[_type == "lab3"]':{orderRank:!0,thumbnail:st(),title:!0,description:!0,tags:[{label:!0,icon:st()}],blocks:[{images:[st()],copy:{copy:!0},isAlternativeLayout:!0}]}}})),Oie=({params:i})=>Es(()=>Ms({"*[_type == 'project' && slug.current == $slug][0]":{seo:po,thumbnail:st(),hero:st(),statsGrid:{sgOverview:{sgoHeader:!0,sgoCopy:!0},sgDuration:{sgdHeader:!0,sgdTimeStats:[{sgdTimeFrame:!0,sgdCopy:!0}]},sgSuccess:{sgsHeader:!0,sgsStats:[{sgsStat:!0,sgsCopy:!0}]},sgClientQuote:{sgcqHeader:!0,sgcqAuthorName:!0,sgcqAuthorPosition:!0,sgcqQuote:!0}},title:!0,tags:!0,excerpt:!0,description:!0,year:!0,logo:st(),blocks:[{_type:!0,'_type == "intro" =>':{tags:!0,results:!0,copy:!0},'_type == "images" =>':{images:[st()],shouldBleed:!0,isAlternativeLayout:!0},'_type == "titledCopy" =>':{title:!0,subtitle:!0,copy:!0},'_type == "audioQuote" =>':{audio:{'"file": file.asset->url':!0,subtitle:!0,image:st(),speaker:{name:!0,role:!0},title:!0},testimonial:{subtitle:!0,quote:!0,author:!0}},'_type == "reelEnd" =>':{title:!0,"'image': media":st(),tags:[{label:!0,icon:st()}]},'_type == "heading" =>':{subtitle:!0,title:!0},'_type == "repeatedTitledCopy" =>':{sections:[{title:!0,copy:!0}]},'_type == "contact" =>':{title:!0,copy:!0},'_type == "recentWork" =>':{"projects[]->":{title:!0,excerpt:!0,tags:!0,'"slug": slug.current':!0,thumbnail:st()}},'_type == "carousel" =>':{title:!0,images:[st()]}}]}},{slug:i.slug})),Uie=wt('<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H8C8.55229 1 9 1.44772 9 2V8C9 8.55229 8.55229 9 8 9H2C1.44772 9 1 8.55229 1 8V2C1 1.44772 1.44772 1 2 1ZM0 2C0 0.89543 0.895431 0 2 0H8C9.10457 0 10 0.895431 10 2V8C10 9.10457 9.10457 10 8 10H2C0.89543 10 0 9.10457 0 8V2ZM14 1H20C20.5523 1 21 1.44772 21 2V8C21 8.55229 20.5523 9 20 9H14C13.4477 9 13 8.55229 13 8V2C13 1.44772 13.4477 1 14 1ZM12 2C12 0.89543 12.8954 0 14 0H20C21.1046 0 22 0.895431 22 2V8C22 9.10457 21.1046 10 20 10H14C12.8954 10 12 9.10457 12 8V2ZM8 13H2C1.44772 13 1 13.4477 1 14V20C1 20.5523 1.44772 21 2 21H8C8.55229 21 9 20.5523 9 20V14C9 13.4477 8.55229 13 8 13ZM2 12C0.895431 12 0 12.8954 0 14V20C0 21.1046 0.89543 22 2 22H8C9.10457 22 10 21.1046 10 20V14C10 12.8954 9.10457 12 8 12H2ZM14 13H20C20.5523 13 21 13.4477 21 14V20C21 20.5523 20.5523 21 20 21H14C13.4477 21 13 20.5523 13 20V14C13 13.4477 13.4477 13 14 13ZM12 14C12 12.8954 12.8954 12 14 12H20C21.1046 12 22 12.8954 22 14V20C22 21.1046 21.1046 22 20 22H14C12.8954 22 12 21.1046 12 20V14Z">'),Zie=(i={})=>(()=>{const e=dt(Uie);return ln(e,i,!0,!0),Cn(),e})(),Vie=wt('<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H20C20.5523 1 21 1.44771 21 2V8C21 8.55229 20.5523 9 20 9H2C1.44772 9 1 8.55229 1 8V2C1 1.44772 1.44772 1 2 1ZM0 2C0 0.89543 0.895431 0 2 0H20C21.1046 0 22 0.895431 22 2V8C22 9.10457 21.1046 10 20 10H2C0.89543 10 0 9.10457 0 8V2ZM2 13H20C20.5523 13 21 13.4477 21 14V20C21 20.5523 20.5523 21 20 21H2C1.44772 21 1 20.5523 1 20V14C1 13.4477 1.44772 13 2 13ZM0 14C0 12.8954 0.895431 12 2 12H20C21.1046 12 22 12.8954 22 14V20C22 21.1046 21.1046 22 20 22H2C0.89543 22 0 21.1046 0 20V14Z">'),Wie=(i={})=>(()=>{const e=dt(Vie);return ln(e,i,!0,!0),Cn(),e})(),Hie=i=>{let e=null;const t=Sn(!1),n=F0();return mt(Ji(n,r=>{r&&setTimeout(()=>{t(!0)},i.delay)})),F(i.children,{ref(r){const s=e;typeof s=="function"?s(r):e=r},get isTriggered(){return t()}})},P9=wt("<button>"),Xre=()=>{const i=e3(),e=F0(),t=i.projects,n=vi(!0),r=pe(()=>n()||ro()),[s,o]=Ey(0);return mt(Ji(r,()=>{o(r()?1:-1)},{defer:!0})),tr(()=>{setTimeout(()=>{o(1)},1e3)}),F($.Generic,{css:[{overflow:"hidden",paddingBottom:"176rem",paddingTop:"128rem","@media (max-width: 767px)":{paddingBottom:"128rem",paddingTop:"64rem"}},Za],as:"section",get children(){return[F($.Generic,{get css(){return[{marginBottom:"88rem",display:"flex",alignItems:"center",justifyContent:"space-between","@media (max-width: 767px)":{marginBottom:"48rem"}},ht.breit.h4,ht.m.breit.h3]},as:"div",get children(){return[F(Hie,{delay:500,children:a=>F(nU,$n({tag:"h2"},a,{children:"Latest Work"}))}),F($.Generic,{get css(){return[{display:"flex",alignItems:"center",gap:"16rem","--tw-text-opacity":"0.2",color:"rgb(255 255 255 / var(--tw-text-opacity))",opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms",transitionDelay:"1s","@media (max-width: 767px)":{display:"none"}},{button:{borderRadius:"9999px",borderWidth:"1px","--tw-border-opacity":"1",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingLeft:"61rem",paddingRight:"61rem",paddingTop:"21rem",paddingBottom:"21rem",opacity:"0.5",transitionProperty:"opacity, background-color",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{opacity:"1"}},"button.active":{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity))",opacity:"1"},"button.active svg":{fill:"#000"},svg:{height:"auto",width:"22rem",fill:"#FFF",transitionProperty:"color, background-color, border-color, text-decoration-color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},...e()&&{opacity:"1"}}]},as:"div",get children(){return[(()=>{const a=dt(P9);return a.$$click=()=>n(!0),Un(a,F(Zie,{})),qr(()=>b2(a,n()?"active":"")),Cn(),a})(),(()=>{const a=dt(P9);return a.$$click=()=>n(!1),Un(a,F(Wie,{})),qr(()=>b2(a,n()?"":"active")),Cn(),a})()]}})]}}),F($.Generic,{css:{position:"relative"},as:"div",get children(){return F(Nn,{get each(){return Array.from({length:2})},children:(a,l)=>{const c=pe(()=>l()===(r()?0:1)),h=pe(()=>s()*(l()===1?-1:1));return F($.Generic,{get css(){return[op,{...l()===1&&{display:"flex",flexDirection:"column"},...!c()&&{pointerEvents:"none",position:"absolute",opacity:"0"}},{top:"0px",width:"100%",rowGap:"88rem",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","@media (max-width: 767px)":{display:"flex",flexDirection:"column",rowGap:"56rem"}}]},as:"ul",get children(){return F(Nn,{each:t,children:(u,d)=>F($.Generic,{css:{gridColumn:"span 6 / span 6"},as:"li",get children(){return F($.Generic,{get title(){return u.title},get tags(){return u.tags},get excerpt(){return l()===0?u.excerpt:u.description},get isList(){return l()===1},get isComingSoon(){return u.isComingSoon},get media(){return u.thumbnail},fixedAspectRatio:!0,get slug(){return u.slug},get opacity(){return h()},hideTags:!0,get style(){return{"transition-delay":`${1.25+d()*.25}s`}},get css(){return[{opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"},{...e()&&{opacity:"1"}}]},as:aE})}})})}})}})}})]}})};yf(["click"]);const zie=()=>Es(()=>Ms({"*[_type == 'work'][0]":{seo:po,'"reel": *[_type == "global"][0].reel.asset->url':!0,heroSection:{title:!0,copy:!0},'"projects": *[_type == "project"] | order(orderRank)':{title:!0,isComingSoon:!0,description:!0,'"slug": slug.current':!0,excerpt:!0,tags:!0,thumbnail:st()},aboutUsSection:{title:!0,copy:!0,button:wr,carouselImages:[st()]}}})),Yie=[{data:hie,component:Fr(()=>yr(()=>import("./about-502274b2.js"),["assets/about-502274b2.js","assets/AwardsSection-0393f30e.js","assets/F3Button-9cfee2e2.js","assets/OnScrollFadeIn-db2a98aa.js","assets/Carousel-c2a98420.js","assets/ContactSection-b0f0283b.js","assets/FeaturedBlogSection-479786ed.js","assets/ArticleThumbnail-dfbfcf6c.js"])),path:"/about"},{data:Cie,component:Fr(()=>yr(()=>import("./index-c9d2e603.js"),["assets/index-c9d2e603.js","assets/F3Button-9cfee2e2.js","assets/OnScrollMoveLeft-02835bea.js","assets/ArticleThumbnail-dfbfcf6c.js"])),path:"/ai/"},{data:Iie,component:Fr(()=>yr(()=>import("./contact-8c667ada.js"),["assets/contact-8c667ada.js","assets/F3Button-9cfee2e2.js","assets/format-sticker-239af5c2.js","assets/ConditionalCopy-d588e004.js","assets/RichText-47ec8bad.js","assets/index-0cdd58cb.js"])),path:"/contact"},{data:Aie,component:Fr(()=>yr(()=>import("./_slug_-00d76bf5.js"),["assets/_slug_-00d76bf5.js","assets/F3Button-9cfee2e2.js","assets/OnScrollFadeIn-db2a98aa.js","assets/index-0cdd58cb.js","assets/ContactSection-b0f0283b.js","assets/ArticleThumbnail-dfbfcf6c.js"])),path:"/curiosity/:slug"},{data:yie,component:Fr(()=>yr(()=>import("./index-0dc61fe9.js"),["assets/index-0dc61fe9.js","assets/F3Button-9cfee2e2.js","assets/OnScrollFadeIn-db2a98aa.js","assets/ContactSection-b0f0283b.js","assets/ArticleThumbnail-dfbfcf6c.js"])),path:"/curiosity/"},{data:xie,component:Fr(()=>yr(()=>import("./index-269ecf6d.js"),["assets/index-269ecf6d.js","assets/F3Button-9cfee2e2.js","assets/AwardsSection-0393f30e.js","assets/ClientsSection-8e25a8dc.js","assets/FeaturedBlogSection-479786ed.js","assets/ArticleThumbnail-dfbfcf6c.js","assets/ContactSection-b0f0283b.js"])),path:"/"},{data:wie,component:Fr(()=>yr(()=>import("./_slug_-a2d6b021.js"),["assets/_slug_-a2d6b021.js","assets/RichText-47ec8bad.js","assets/index-0cdd58cb.js"])),path:"/legal/:slug"},{data:Sie,component:Fr(()=>yr(()=>import("./services-c44fa812.js"),["assets/services-c44fa812.js","assets/ContactSection-b0f0283b.js","assets/F3Button-9cfee2e2.js","assets/ClientsSection-8e25a8dc.js","assets/OnScrollMoveLeft-02835bea.js","assets/FeaturedBlogSection-479786ed.js","assets/ArticleThumbnail-dfbfcf6c.js","assets/OnScrollFadeIn-db2a98aa.js"])),path:"/services"},{component:Fr(()=>yr(()=>import("./sitemap-4beffe40.js"),[])),path:"/sitemap"},{data:kie,component:Fr(()=>yr(()=>import("./index-7b2698bd.js"),[])),path:"/vault/"},{data:Oie,component:Fr(()=>yr(()=>import("./_slug_-554c0f97.js"),["assets/_slug_-554c0f97.js","assets/OnScrollFadeIn-db2a98aa.js","assets/F3Button-9cfee2e2.js","assets/index-0cdd58cb.js","assets/format-sticker-239af5c2.js","assets/ContactSection-b0f0283b.js","assets/Carousel-c2a98420.js"])),path:"/work/:slug"},{data:zie,component:Fr(()=>yr(()=>import("./index-af53fba8.js"),["assets/index-af53fba8.js","assets/ConditionalCopy-d588e004.js","assets/F3Button-9cfee2e2.js","assets/Carousel-c2a98420.js","assets/OnScrollFadeIn-db2a98aa.js","assets/ContactSection-b0f0283b.js"])),path:"/work/"}],Xie=()=>Yie,Ra=vi(!1),Kie=i=>{const e=pe(()=>Ra()),t=vh,n=Vn;let r=0,s=!1,o=0,a=-1,l=null;function c(){l?.scrollTo(0,Vt(n))}mt(f=>(f!==-1&&t()===-1&&window.scrollTo(0,f),c(),t()),-1);let h=-1;function u(f){const g=Vt(n);let p=(f-h)/(1e3/60);const m=g+(r-g)*Math.min(1,.08*p);if(h=f,Math.round(m*2)===Math.round(r*2)){s=!1,n(r),c();return}n(m),Math.abs(o-g)>=1/window.devicePixelRatio&&(c(),o=g),a=requestAnimationFrame(u)}const d=vi(0);return tr(()=>{requestAnimationFrame(()=>{n(window.scrollY)}),c();let f,g=-1;const p=new ResizeObserver(([m])=>{Math.round(d())!==Math.round(m.contentRect.height)&&(d(m.contentRect.height),g!==-1&&g===m.contentRect.width&&(clearTimeout(f),f=setTimeout(()=>{zd(zd()+1)},100)),g=m.contentRect.width)});p.observe(l.children[0]),an(()=>{clearTimeout(f),c(),p.disconnect(),cancelAnimationFrame(a),s=!1})}),mt(()=>{document.body.style.height=`${hL()??d()}px`,window.scrollTo(0,Vt(n))}),mt(()=>{e()?(cancelAnimationFrame(a),s=!1,window.scrollTo(0,Vt(n))):requestAnimationFrame(c)}),[F(Au,{onWheel:[()=>{Vt(Ra)&&Ra(!1)},{passive:!0}],onPointerMove:[f=>{const g=f.pointerType==="touch";Vt(Ra)!==g&&Ra(g)},{passive:!0}],onScroll:()=>{r=window.scrollY,Vt(t)===-1&&(Vt(e)?requestAnimationFrame(()=>{n(r)}):s||(s=!0,h=performance.now(),a=requestAnimationFrame(u)))}}),F($.Generic,$n(i,{ref(f){const g=l;typeof g=="function"?g(f):l=f},css:{position:"fixed",top:"0px",zIndex:"10",height:"100%",width:"100%",overflow:"hidden",willChange:"scroll-position"},as:"div",get style(){return{...e()&&mB({position:"static",overflow:"visible"})}}}))]},jie=()=>{const i=dn;function e(){ro(window.innerWidth<=pi.MD),window.innerWidth!==i().width&&(cL(document.body.offsetWidth),i({width:window.innerWidth,height:window.innerHeight}))}return mt(Ji(Ra,()=>{if(Ra()){let n=function(){hh(hh()+(Vn()-hh())*.3),t=requestAnimationFrame(n)},t;t=requestAnimationFrame(n),an(()=>{cancelAnimationFrame(t)})}})),mt(()=>{Ra()||hh(Vn())}),mt(()=>{e()}),F(Au,{onResize:e})};function $ie(i){return Ly(),an(()=>{}),null}const Jie={src:"/assets/gif/swingin.gif",width:128,height:128},Qie=wt('<li><a rel="noreferrer">'),qie=()=>{const i=D0(),e=2,t=Sn(-1);let n=null;mt(Ji(ks,m=>{m&&(vh(Vn()),an(()=>{vh(Vn()),setTimeout(()=>{vh(-1)})}))},{defer:!0}));let r=pe(()=>$l(163));const s=pe(()=>!ro()),o=pe(()=>s()?Math.max(Math.ceil(dn().height/r())+1,i.menu.links.length):i.menu.links.length),[a,l,c]=Ey(0,{multiplier:.1}),h=pe(()=>s()?Math.floor(a()/r()):0),u=pe(()=>{const m=[];for(let C=h();C<o()+h();C++)m.push(CB(i.menu.links,C));return m}),d=pe(()=>a()-h()*r());let f=0;const g=Sn(!1);tr(()=>{f=r()*e-$l(120),c(f)});const p=wf();return mt(Ji(()=>p.pathname,()=>{ks(!1),setTimeout(()=>{t(-1)},500)},{defer:!0})),[pe((()=>{const m=pe(()=>!!ks());return()=>m()&&F(Au,{onKeydown:C=>{C.key==="Escape"&&ks(!1)},onWheel:[C=>{C.preventDefault(),f+=C.deltaY,l(f),g(!0)},{passive:!1}]})})()),F($.Generic,{get css(){return[{position:"fixed",inset:"0px",zIndex:"50",userSelect:"none","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))",paddingLeft:"64rem",paddingRight:"64rem",transitionDuration:"1s",transitionTimingFunction:"cubic-bezier(0.5, 0, 0.1, 1)",clipPath:"inset(0 0 100% 0)","@media (max-width: 767px)":{display:"flex",flexDirection:"column",justifyContent:"space-between",paddingLeft:"24rem",paddingRight:"24rem",paddingBottom:"32rem"}},{...ks()&&{clipPath:"inset(0 0 0 0)"}}]},as:"nav",get children(){return[F($.Generic,{isMenu:!0,css:{position:"absolute !important",width:"calc(100% - 128rem) !important",paddingLeft:"0px !important",paddingRight:"0px !important","@media (max-width: 767px)":{width:"calc(100% - 48rem) !important"}},as:d7}),F($.Generic,{css:{willChange:"transform","@media (max-width: 767px)":{paddingTop:"88rem"}},as:"ul",ref(m){const C=n;typeof C=="function"?C(m):n=m},get style(){return pe(()=>!!s())()?{transform:`translateY(${-d()}px)`}:{}},get children(){return F(Nn,{get each(){return u()},children:(m,C)=>F($.Generic,{get css(){return[{borderBottomWidth:"1px","--tw-border-opacity":"0.2",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))",paddingTop:"16rem",paddingBottom:"16rem",transitionProperty:"opacity, border-color",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","@media (max-width: 767px)":{"&:last-child":{borderBottomWidth:"0px"}}},{...C()<1&&!g()&&s()&&{opacity:"0"},...t()!==-1&&t()!==C()&&{opacity:"0"},...t()!==-1&&t()===C()&&{"--tw-border-opacity":"0",borderColor:"rgb(255 255 255 / var(--tw-border-opacity))"}}]},as:"li",get children(){return F($.Generic,$n({get as(){return m.href==="#archive"?"button":Ys},get href(){return m.href}},()=>m.href==="#archive"?{onClick:()=>{ks(!1),setTimeout(()=>{fw(!0)},500)}}:{onClick:()=>{m.href===p.pathname?ks(!1):t(C())}},{css:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between","--tw-text-opacity":"0.2",color:"rgb(255 255 255 / var(--tw-text-opacity))",transitionProperty:"color, background-color, border-color, text-decoration-color, fill, stroke",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms","&:hover":{"--tw-text-opacity":"1"}},get children(){return[F($.Generic,{get css(){return[ht.sohne.body3,ht.m.sohne.body4,{display:"flex",alignItems:"center",gap:"5rem"}]},as:"div",get children(){return[pe(()=>m.subtitle),F(Ac,{get when(){return h()>100&&m.href==="/"},get children(){return F($.Generic,$n({css:{height:"auto",width:"24rem"},as:"img"},Jie))}})]}}),F($.Generic,{get css(){return[ht.breit.h3,ht.m.breit.h2,{"@media (max-width: 767px)":{"--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"}}]},as:"div",get children(){return m.label}})]}}))}})})}}),F($.Generic,{css:{display:"none","@media (max-width: 767px)":{display:"block"}},as:"div",get children(){return[F($.Generic,{get css(){return[ht.m.sohne.body4,{marginBottom:"16rem","--tw-text-opacity":"0.5",color:"rgb(255 255 255 / var(--tw-text-opacity))"}]},as:"div",children:"Follow our journey"}),F($.Generic,{get css(){return[{display:"flex",justifyContent:"space-between"},ht.m.sohne.body3]},as:"ul",get children(){return F(Nn,{get each(){return i.socials?.links},children:m=>(()=>{const C=dt(Qie),A=C.firstChild;return Un(A,()=>m.label),qr(I=>{const y=m.isExternal?"_blank":void 0,x=m.href;return y!==I._v$&&Vd(A,"target",I._v$=y),x!==I._v$2&&Vd(A,"href",I._v$2=x),I},{_v$:void 0,_v$2:void 0}),C})()})}})]}})]}})]},ere=i=>{const e=Sn(!1);ZM(n=>{n.preventDefault(),e(!0),setTimeout(()=>{n.retry(!0)},500)});const t=OM();return mt(Ji(t,n=>{n||e(!1)},{defer:!0})),F($.Generic,{get css(){return{...e()&&{opacity:"0",transitionProperty:"opacity",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms"}}},as:"div",get children(){return i.children}})};const tre=wt('<script async src="https://www.googletagmanager.com/gtag/js?id=G-DKDWYY15G8">'),nre=wt(`<script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-DKDWYY15G8');
            `),ire=wt(`<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
              })(window,document,'script','dataLayer','GTM-NG8J8XJ6');`),rre=wt("<div><!#><!/><!#><!/>"),sre=wt('<script id="#root-data" type="application/json">'),ore=()=>{const i=D0(),e=wf();return tr(()=>{const t=document.createElement("noscript"),n=document.createElement("iframe");n.src="https://www.googletagmanager.com/ns.html?id=GTM-NG8J8XJ6",n.height="0",n.width="0",n.style.display="none",n.style.visibility="hidden",t.appendChild(n),document.body.appendChild(t)}),[F($.Global,{get css(){return[{"*, ::before, ::after":{boxSizing:"border-box",borderWidth:"0",borderStyle:"solid",borderColor:"currentColor","--tw-border-spacing-x":"0","--tw-border-spacing-y":"0","--tw-translate-x":"0","--tw-translate-y":"0","--tw-rotate":"0","--tw-skew-x":"0","--tw-skew-y":"0","--tw-scale-x":"1","--tw-scale-y":"1","--tw-pan-x":"var(--tw-empty,/*!*/ /*!*/)","--tw-pan-y":"var(--tw-empty,/*!*/ /*!*/)","--tw-pinch-zoom":"var(--tw-empty,/*!*/ /*!*/)","--tw-scroll-snap-strictness":"proximity","--tw-gradient-from-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-gradient-via-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-gradient-to-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-ordinal":"var(--tw-empty,/*!*/ /*!*/)","--tw-slashed-zero":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-figure":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-spacing":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-fraction":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-shadow":"0 0 #0000","--tw-ring-shadow":"0 0 #0000","--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000","--tw-ring-inset":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-width":"0px","--tw-ring-offset-color":"#fff","--tw-ring-color":"rgb(59 130 246 / 0.5)","--tw-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-sepia":"var(--tw-empty,/*!*/ /*!*/)","--tw-drop-shadow":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-opacity":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-sepia":"var(--tw-empty,/*!*/ /*!*/)"},"::before, ::after":{"--tw-content":"''"},html:{lineHeight:"1.5",WebkitTextSizeAdjust:"100%",MozTabSize:"4",tabSize:"4",fontFamily:" ui-sans-serif",fontFeatureSettings:" normal",fontVariationSettings:" normal"},body:{margin:"0",lineHeight:"inherit"},hr:{height:"0",color:"inherit",borderTopWidth:"1px"},"abbr:where([title])":{textDecoration:"underline dotted"},"h1, h2, h3, h4, h5, h6":{fontSize:"inherit",fontWeight:"inherit"},a:{color:"inherit",textDecoration:"inherit"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontFamily:" ui-monospace",fontSize:"1em"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},table:{textIndent:"0",borderColor:"inherit",borderCollapse:"collapse"},"button, input, optgroup, select, textarea":{fontFamily:"inherit",fontFeatureSettings:"inherit",fontVariationSettings:"inherit",fontSize:"100%",fontWeight:"inherit",lineHeight:"inherit",color:"inherit",margin:"0",padding:"0"},"button, select":{textTransform:"none"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},":-moz-focusring":{outline:"auto"},":-moz-ui-invalid":{boxShadow:"none"},progress:{verticalAlign:"baseline"},"::-webkit-inner-spin-button, ::-webkit-outer-spin-button":{height:"auto"},"[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},summary:{display:"list-item"},"blockquote, dl, dd, h1, h2, h3, h4, h5, h6, hr, figure, p, pre":{margin:"0"},fieldset:{margin:"0",padding:"0"},legend:{padding:"0"},"ol, ul, menu":{listStyle:"none",margin:"0",padding:"0"},dialog:{padding:"0"},textarea:{resize:"vertical"},"input::placeholder, textarea::placeholder":{opacity:"1",color:" #9ca3af"},'button, [role="button"]':{cursor:"pointer"},":disabled":{cursor:"default"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},"img, video":{maxWidth:"100%",height:"auto"},"[hidden]":{display:"none"},"::backdrop":{"--tw-border-spacing-x":"0","--tw-border-spacing-y":"0","--tw-translate-x":"0","--tw-translate-y":"0","--tw-rotate":"0","--tw-skew-x":"0","--tw-skew-y":"0","--tw-scale-x":"1","--tw-scale-y":"1","--tw-pan-x":"var(--tw-empty,/*!*/ /*!*/)","--tw-pan-y":"var(--tw-empty,/*!*/ /*!*/)","--tw-pinch-zoom":"var(--tw-empty,/*!*/ /*!*/)","--tw-scroll-snap-strictness":"proximity","--tw-gradient-from-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-gradient-via-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-gradient-to-position":"var(--tw-empty,/*!*/ /*!*/)","--tw-ordinal":"var(--tw-empty,/*!*/ /*!*/)","--tw-slashed-zero":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-figure":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-spacing":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-fraction":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-shadow":"0 0 #0000","--tw-ring-shadow":"0 0 #0000","--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000","--tw-ring-inset":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-width":"0px","--tw-ring-offset-color":"#fff","--tw-ring-color":"rgb(59 130 246 / 0.5)","--tw-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-sepia":"var(--tw-empty,/*!*/ /*!*/)","--tw-drop-shadow":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-blur":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-brightness":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-contrast":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-grayscale":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-hue-rotate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-invert":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-opacity":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-saturate":"var(--tw-empty,/*!*/ /*!*/)","--tw-backdrop-sepia":"var(--tw-empty,/*!*/ /*!*/)"}},{"::selection":{"--tw-bg-opacity":"1",backgroundColor:"rgb(110 50 225 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))"},img:{userSelect:"none"},"h1, h2, h3, h4, h5, h6":{userSelect:"none"},"*":{outline:"2px solid transparent",outlineOffset:"2px"},body:{margin:"0px",overflowY:"scroll","--tw-bg-opacity":"1",backgroundColor:"rgb(0 0 0 / var(--tw-bg-opacity))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity))",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},html:{fontSize:`calc(${100/1440} * 1vw)`,"@media (max-width: 767px)":{fontSize:`calc(${100/390} * 1vw)`}}},{body:[ht.sohne.body2,ht.m.sohne.body2]}]}}),F(Au,{onClick:t=>{for(let n=t.target;n!=null;n=n.parentElement)if(n instanceof HTMLAnchorElement){const{href:r}=n;r&&r===window.location.href&&window.scrollTo(0,0)}}}),F(DB,{lang:"en",get children(){return[F(FB,{get children(){return[dt(tre),dt(nre),dt(ire),F(ui,{charset:"utf-8"}),F(ui,{name:"viewport",content:"width=device-width, initial-scale=1"}),F(ui,{name:"charset",content:"utf-8"})]}}),F(NB,{get children(){return[F(NE,{get children(){return F(TB,{get children(){return[F(Kie,{get children(){const t=dt(rre),n=t.firstChild,[r,s]=ip(n.nextSibling),o=r.nextSibling,[a,l]=ip(o.nextSibling);return Un(t,F(ere,{get children(){return F(Ac,{get when(){return e.pathname},keyed:!0,get children(){return F(AB,{get children(){return F(Xie,{})}})}})}}),r,s),Un(t,(()=>{const c=pe(()=>!!N2());return()=>c()&&F(qie,{})})(),a,l),t}}),F(FU,{})]}})}}),F(GB,{})]}}),(()=>{const t=dt(sre);return Un(t,()=>JSON.stringify(i,(n,r)=>typeof r=="function"?r():r)),t})(),F(jie,{}),F($ie,{name:"Cache-Control",value:"s-maxage=60, public, stale-while-revalidate=604800"})]}})]},G9=Object.values(Object.assign({}))[0],are=G9?G9.default:void 0,lre=({routerProps:i}={})=>{let e={get request(){},get clientAddress(){},get locals(){},get prevUrl(){},get responseHeaders(){},get tags(){},get env(){},get routerContext(){},setStatusCode(s){},getStatusCode(){},$type:gw,fetch,$islands:new Set,mutation:!1};function t(s){return F(jM,s)}const n="/";let r=n;if(n.startsWith("http"))try{r=new URL(n).pathname}catch{console.warn("BASE_URL starts with http, but `new URL` failed to parse it. Please check your BASE_URL:",n)}return F(pw.Provider,{value:e,get children(){return F(AM,{get children(){return F(t,$n({base:r,data:are},i,{get children(){return F(ore,{})}}))}})}})};window.history.scrollRestoration="manual";mM(()=>{const i=JSON.parse(document.getElementById("#root-data").innerHTML);return F(u7.Provider,{value:i,get children(){return F(lre,{})}})},document);export{UM as $,Cre as A,tn as B,_0 as C,Dre as D,xd as E,Nn as F,op as G,N0 as H,fi as I,pi as J,kU as K,aL as L,Qc as M,$l as N,dre as O,fre as P,Ure as Q,Pre as R,$ as S,Gre as T,yre as U,Vre as V,Ys as W,sE as X,oE as Y,ro as Z,Wre as _,Gr as a,vi as a0,Ji as a1,Fre as a2,Ql as a3,Are as a4,Vd as a5,cx as a6,GU as a7,ux as a8,q3 as a9,Au as aA,jX as aB,zv as aC,YI as aD,rI as aE,ZO as aF,d7 as aG,NO as aH,Yre as aI,Bre as aJ,gre as aK,ure as aL,yf as aM,JE as aN,hre as aO,cre as aP,Ts as aQ,aM as aR,ta as aS,b2 as aT,Xre as aU,cL as aV,CB as aW,pre as aX,mre as aY,p1 as aZ,Ef as a_,is as aa,r_ as ab,LU as ac,x2 as ad,My as ae,Q7 as af,lo as ag,Ni as ah,x9 as ai,w9 as aj,Oi as ak,S9 as al,T9 as am,Pt as an,Jne as ao,qne as ap,uw as aq,Ey as ar,hh as as,Hre as at,aE as au,zd as av,zre as aw,Zre as ax,e5 as ay,nU as az,Sn as b,mt as c,F as d,ht as e,ip as f,dt as g,Za as h,Un as i,Ac as j,Ire as k,e3 as l,$n as m,pe as n,an as o,Gi as p,qi as q,Cn as r,ln as s,wt as t,F0 as u,dn as v,Vn as w,qr as x,pB as y,tr as z};
